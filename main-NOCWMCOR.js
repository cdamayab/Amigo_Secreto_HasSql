var VP=Object.defineProperty,jP=Object.defineProperties;var UP=Object.getOwnPropertyDescriptors;var sb=Object.getOwnPropertySymbols;var BP=Object.prototype.hasOwnProperty,$P=Object.prototype.propertyIsEnumerable;var ab=(t,e,n)=>e in t?VP(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,F=(t,e)=>{for(var n in e||={})BP.call(e,n)&&ab(t,n,e[n]);if(sb)for(var n of sb(e))$P.call(e,n)&&ab(t,n,e[n]);return t},re=(t,e)=>jP(t,UP(e));var _=(t,e,n)=>new Promise((r,i)=>{var o=u=>{try{a(n.next(u))}catch(l){i(l)}},s=u=>{try{a(n.throw(u))}catch(l){i(l)}},a=u=>u.done?r(u.value):Promise.resolve(u.value).then(o,s);a((n=n.apply(t,e)).next())});var eg;function gl(){return eg}function Ln(t){let e=eg;return eg=t,e}var cb=Symbol("NotFound");function rs(t){return t===cb||t?.name==="\u0275NotFound"}function El(t,e){return Object.is(t,e)}var St=null,ml=!1,tg=1,HP=null,At=Symbol("SIGNAL");function ie(t){let e=St;return St=t,e}function Il(){return St}var is={version:0,lastCleanEpoch:0,dirty:!1,producers:void 0,producersTail:void 0,consumers:void 0,consumersTail:void 0,recomputing:!1,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,kind:"unknown",producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function os(t){if(ml)throw new Error("");if(St===null)return;St.consumerOnSignalRead(t);let e=St.producersTail;if(e!==void 0&&e.producer===t)return;let n,r=St.recomputing;if(r&&(n=e!==void 0?e.nextProducer:St.producers,n!==void 0&&n.producer===t)){St.producersTail=n,n.lastReadVersion=t.version;return}let i=t.consumersTail;if(i!==void 0&&i.consumer===St&&(!r||zP(i,St)))return;let o=as(St),s={producer:t,consumer:St,nextProducer:n,prevConsumer:i,lastReadVersion:t.version,nextConsumer:void 0};St.producersTail=s,e!==void 0?e.nextProducer=s:St.producers=s,o&&hb(t,s)}function ub(){tg++}function wl(t){if(!(as(t)&&!t.dirty)&&!(!t.dirty&&t.lastCleanEpoch===tg)){if(!t.producerMustRecompute(t)&&!ec(t)){_l(t);return}t.producerRecomputeValue(t),_l(t)}}function ng(t){if(t.consumers===void 0)return;let e=ml;ml=!0;try{for(let n=t.consumers;n!==void 0;n=n.nextConsumer){let r=n.consumer;r.dirty||qP(r)}}finally{ml=e}}function rg(){return St?.consumerAllowSignalWrites!==!1}function qP(t){t.dirty=!0,ng(t),t.consumerMarkedDirty?.(t)}function _l(t){t.dirty=!1,t.lastCleanEpoch=tg}function ss(t){return t&&lb(t),ie(t)}function lb(t){t.producersTail=void 0,t.recomputing=!0}function Xa(t,e){ie(e),t&&db(t)}function db(t){t.recomputing=!1;let e=t.producersTail,n=e!==void 0?e.nextProducer:t.producers;if(n!==void 0){if(as(t))do n=ig(n);while(n!==void 0);e!==void 0?e.nextProducer=void 0:t.producers=void 0}}function ec(t){for(let e=t.producers;e!==void 0;e=e.nextProducer){let n=e.producer,r=e.lastReadVersion;if(r!==n.version||(wl(n),r!==n.version))return!0}return!1}function tc(t){if(as(t)){let e=t.producers;for(;e!==void 0;)e=ig(e)}t.producers=void 0,t.producersTail=void 0,t.consumers=void 0,t.consumersTail=void 0}function hb(t,e){let n=t.consumersTail,r=as(t);if(n!==void 0?(e.nextConsumer=n.nextConsumer,n.nextConsumer=e):(e.nextConsumer=void 0,t.consumers=e),e.prevConsumer=n,t.consumersTail=e,!r)for(let i=t.producers;i!==void 0;i=i.nextProducer)hb(i.producer,i)}function ig(t){let e=t.producer,n=t.nextProducer,r=t.nextConsumer,i=t.prevConsumer;if(t.nextConsumer=void 0,t.prevConsumer=void 0,r!==void 0?r.prevConsumer=i:e.consumersTail=i,i!==void 0)i.nextConsumer=r;else if(e.consumers=r,!as(e)){let o=e.producers;for(;o!==void 0;)o=ig(o)}return n}function as(t){return t.consumerIsAlwaysLive||t.consumers!==void 0}function bl(t){HP?.(t)}function zP(t,e){let n=e.producersTail;if(n!==void 0){let r=e.producers;do{if(r===t)return!0;if(r===n)break;r=r.nextProducer}while(r!==void 0)}return!1}function Dl(t,e){let n=Object.create(GP);n.computation=t,e!==void 0&&(n.equal=e);let r=()=>{if(wl(n),os(n),n.value===Ja)throw n.error;return n.value};return r[At]=n,bl(n),r}var yl=Symbol("UNSET"),vl=Symbol("COMPUTING"),Ja=Symbol("ERRORED"),GP=re(F({},is),{value:yl,dirty:!0,error:null,equal:El,kind:"computed",producerMustRecompute(t){return t.value===yl||t.value===vl},producerRecomputeValue(t){if(t.value===vl)throw new Error("");let e=t.value;t.value=vl;let n=ss(t),r,i=!1;try{r=t.computation(),ie(null),i=e!==yl&&e!==Ja&&r!==Ja&&t.equal(e,r)}catch(o){r=Ja,t.error=o}finally{Xa(t,n)}if(i){t.value=e;return}t.value=r,t.version++}});function WP(){throw new Error}var fb=WP;function pb(t){fb(t)}function og(t){fb=t}var KP=null;function sg(t,e){let n=Object.create(Cl);n.value=t,e!==void 0&&(n.equal=e);let r=()=>gb(n);return r[At]=n,bl(n),[r,s=>cs(n,s),s=>ag(n,s)]}function gb(t){return os(t),t.value}function cs(t,e){rg()||pb(t),t.equal(t.value,e)||(t.value=e,QP(t))}function ag(t,e){rg()||pb(t),cs(t,e(t.value))}var Cl=re(F({},is),{equal:El,value:void 0,kind:"signal"});function QP(t){t.version++,ub(),ng(t),KP?.(t)}function X(t){return typeof t=="function"}function us(t){let n=t(r=>{Error.call(r),r.stack=new Error().stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var Tl=us(t=>function(n){t(this),this.message=n?`${n.length} errors occurred during unsubscription:
${n.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=n});function Ui(t,e){if(t){let n=t.indexOf(e);0<=n&&t.splice(n,1)}}var Ue=class t{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(let o of n)o.remove(this);else n.remove(this);let{initialTeardown:r}=this;if(X(r))try{r()}catch(o){e=o instanceof Tl?o.errors:[o]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let o of i)try{mb(o)}catch(s){e=e??[],s instanceof Tl?e=[...e,...s.errors]:e.push(s)}}if(e)throw new Tl(e)}}add(e){var n;if(e&&e!==this)if(this.closed)mb(e);else{if(e instanceof t){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(e)}}_hasParent(e){let{_parentage:n}=this;return n===e||Array.isArray(n)&&n.includes(e)}_addParent(e){let{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(e),n):n?[n,e]:e}_removeParent(e){let{_parentage:n}=this;n===e?this._parentage=null:Array.isArray(n)&&Ui(n,e)}remove(e){let{_finalizers:n}=this;n&&Ui(n,e),e instanceof t&&e._removeParent(this)}};Ue.EMPTY=(()=>{let t=new Ue;return t.closed=!0,t})();var cg=Ue.EMPTY;function Sl(t){return t instanceof Ue||t&&"closed"in t&&X(t.remove)&&X(t.add)&&X(t.unsubscribe)}function mb(t){X(t)?t():t.unsubscribe()}var In={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var ls={setTimeout(t,e,...n){let{delegate:r}=ls;return r?.setTimeout?r.setTimeout(t,e,...n):setTimeout(t,e,...n)},clearTimeout(t){let{delegate:e}=ls;return(e?.clearTimeout||clearTimeout)(t)},delegate:void 0};function Al(t){ls.setTimeout(()=>{let{onUnhandledError:e}=In;if(e)e(t);else throw t})}function nc(){}var yb=ug("C",void 0,void 0);function vb(t){return ug("E",void 0,t)}function _b(t){return ug("N",t,void 0)}function ug(t,e,n){return{kind:t,value:e,error:n}}var Bi=null;function ds(t){if(In.useDeprecatedSynchronousErrorHandling){let e=!Bi;if(e&&(Bi={errorThrown:!1,error:null}),t(),e){let{errorThrown:n,error:r}=Bi;if(Bi=null,n)throw r}}else t()}function Eb(t){In.useDeprecatedSynchronousErrorHandling&&Bi&&(Bi.errorThrown=!0,Bi.error=t)}var $i=class extends Ue{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,Sl(e)&&e.add(this)):this.destination=JP}static create(e,n,r){return new hs(e,n,r)}next(e){this.isStopped?dg(_b(e),this):this._next(e)}error(e){this.isStopped?dg(vb(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?dg(yb,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},YP=Function.prototype.bind;function lg(t,e){return YP.call(t,e)}var hg=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:n}=this;if(n.next)try{n.next(e)}catch(r){Rl(r)}}error(e){let{partialObserver:n}=this;if(n.error)try{n.error(e)}catch(r){Rl(r)}else Rl(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(n){Rl(n)}}},hs=class extends $i{constructor(e,n,r){super();let i;if(X(e)||!e)i={next:e??void 0,error:n??void 0,complete:r??void 0};else{let o;this&&In.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&lg(e.next,o),error:e.error&&lg(e.error,o),complete:e.complete&&lg(e.complete,o)}):i=e}this.destination=new hg(i)}};function Rl(t){In.useDeprecatedSynchronousErrorHandling?Eb(t):Al(t)}function ZP(t){throw t}function dg(t,e){let{onStoppedNotification:n}=In;n&&ls.setTimeout(()=>n(t,e))}var JP={closed:!0,next:nc,error:ZP,complete:nc};var fs=typeof Symbol=="function"&&Symbol.observable||"@@observable";function Zt(t){return t}function fg(...t){return pg(t)}function pg(t){return t.length===0?Zt:t.length===1?t[0]:function(n){return t.reduce((r,i)=>i(r),n)}}var se=(()=>{class t{constructor(n){n&&(this._subscribe=n)}lift(n){let r=new t;return r.source=this,r.operator=n,r}subscribe(n,r,i){let o=ex(n)?n:new hs(n,r,i);return ds(()=>{let{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(n){try{return this._subscribe(n)}catch(r){n.error(r)}}forEach(n,r){return r=Ib(r),new r((i,o)=>{let s=new hs({next:a=>{try{n(a)}catch(u){o(u),s.unsubscribe()}},error:o,complete:i});this.subscribe(s)})}_subscribe(n){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(n)}[fs](){return this}pipe(...n){return pg(n)(this)}toPromise(n){return n=Ib(n),new n((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return t.create=e=>new t(e),t})();function Ib(t){var e;return(e=t??In.Promise)!==null&&e!==void 0?e:Promise}function XP(t){return t&&X(t.next)&&X(t.error)&&X(t.complete)}function ex(t){return t&&t instanceof $i||XP(t)&&Sl(t)}function gg(t){return X(t?.lift)}function ge(t){return e=>{if(gg(e))return e.lift(function(n){try{return t(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function de(t,e,n,r,i){return new mg(t,e,n,r,i)}var mg=class extends $i{constructor(e,n,r,i,o,s){super(e),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=n?function(a){try{n(a)}catch(u){e.error(u)}}:super._next,this._error=i?function(a){try{i(a)}catch(u){e.error(u)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:n}=this;super.unsubscribe(),!n&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function ps(){return ge((t,e)=>{let n=null;t._refCount++;let r=de(e,void 0,void 0,void 0,()=>{if(!t||t._refCount<=0||0<--t._refCount){n=null;return}let i=t._connection,o=n;n=null,i&&(!o||i===o)&&i.unsubscribe(),e.unsubscribe()});t.subscribe(r),r.closed||(n=t.connect())})}var gs=class extends se{constructor(e,n){super(),this.source=e,this.subjectFactory=n,this._subject=null,this._refCount=0,this._connection=null,gg(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Ue;let n=this.getSubject();e.add(this.source.subscribe(de(n,void 0,()=>{this._teardown(),n.complete()},r=>{this._teardown(),n.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Ue.EMPTY)}return e}refCount(){return ps()(this)}};var wb=us(t=>function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var Ge=(()=>{class t extends se{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){let r=new Nl(this,this);return r.operator=n,r}_throwIfClosed(){if(this.closed)throw new wb}next(n){ds(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(n)}})}error(n){ds(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;let{observers:r}=this;for(;r.length;)r.shift().error(n)}})}complete(){ds(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return((n=this.observers)===null||n===void 0?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){let{hasError:r,isStopped:i,observers:o}=this;return r||i?cg:(this.currentObservers=null,o.push(n),new Ue(()=>{this.currentObservers=null,Ui(o,n)}))}_checkFinalizedStatuses(n){let{hasError:r,thrownError:i,isStopped:o}=this;r?n.error(i):o&&n.complete()}asObservable(){let n=new se;return n.source=this,n}}return t.create=(e,n)=>new Nl(e,n),t})(),Nl=class extends Ge{constructor(e,n){super(),this.destination=e,this.source=n}next(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.next)===null||r===void 0||r.call(n,e)}error(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.error)===null||r===void 0||r.call(n,e)}complete(){var e,n;(n=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||n===void 0||n.call(e)}_subscribe(e){var n,r;return(r=(n=this.source)===null||n===void 0?void 0:n.subscribe(e))!==null&&r!==void 0?r:cg}};var yt=class extends Ge{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let n=super._subscribe(e);return!n.closed&&e.next(this._value),n}getValue(){let{hasError:e,thrownError:n,_value:r}=this;if(e)throw n;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var yg={now(){return(yg.delegate||Date).now()},delegate:void 0};var Ml=class extends Ue{constructor(e,n){super()}schedule(e,n=0){return this}};var rc={setInterval(t,e,...n){let{delegate:r}=rc;return r?.setInterval?r.setInterval(t,e,...n):setInterval(t,e,...n)},clearInterval(t){let{delegate:e}=rc;return(e?.clearInterval||clearInterval)(t)},delegate:void 0};var ms=class extends Ml{constructor(e,n){super(e,n),this.scheduler=e,this.work=n,this.pending=!1}schedule(e,n=0){var r;if(this.closed)return this;this.state=e;let i=this.id,o=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(o,i,n)),this.pending=!0,this.delay=n,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(o,this.id,n),this}requestAsyncId(e,n,r=0){return rc.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,n,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return n;n!=null&&rc.clearInterval(n)}execute(e,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,n);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,n){let r=!1,i;try{this.work(e)}catch(o){r=!0,i=o||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:n}=this,{actions:r}=n;this.work=this.state=this.scheduler=null,this.pending=!1,Ui(r,this),e!=null&&(this.id=this.recycleAsyncId(n,e,null)),this.delay=null,super.unsubscribe()}}};var ys=class t{constructor(e,n=t.now){this.schedulerActionCtor=e,this.now=n}schedule(e,n=0,r){return new this.schedulerActionCtor(this,e).schedule(r,n)}};ys.now=yg.now;var vs=class extends ys{constructor(e,n=ys.now){super(e,n),this.actions=[],this._active=!1}flush(e){let{actions:n}=this;if(this._active){n.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=n.shift());if(this._active=!1,r){for(;e=n.shift();)e.unsubscribe();throw r}}};var vg=new vs(ms);var Pl=class extends ms{constructor(e,n){super(e,n),this.scheduler=e,this.work=n}schedule(e,n=0){return n>0?super.schedule(e,n):(this.delay=n,this.state=e,this.scheduler.flush(this),this)}execute(e,n){return n>0||this.closed?super.execute(e,n):this._execute(e,n)}requestAsyncId(e,n,r=0){return r!=null&&r>0||r==null&&this.delay>0?super.requestAsyncId(e,n,r):(e.flush(this),0)}};var xl=class extends vs{};var _g=new xl(Pl);var Ht=new se(t=>t.complete());function bb(t){return t&&X(t.schedule)}function Db(t){return t[t.length-1]}function kl(t){return X(Db(t))?t.pop():void 0}function Wr(t){return bb(Db(t))?t.pop():void 0}function Eg(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function Tb(t,e,n,r){function i(o){return o instanceof n?o:new n(function(s){s(o)})}return new(n||(n=Promise))(function(o,s){function a(h){try{l(r.next(h))}catch(p){s(p)}}function u(h){try{l(r.throw(h))}catch(p){s(p)}}function l(h){h.done?o(h.value):i(h.value).then(a,u)}l((r=r.apply(t,e||[])).next())})}function Cb(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Hi(t){return this instanceof Hi?(this.v=t,this):new Hi(t)}function Sb(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),i,o=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",s),i[Symbol.asyncIterator]=function(){return this},i;function s(y){return function(S){return Promise.resolve(S).then(y,p)}}function a(y,S){r[y]&&(i[y]=function(P){return new Promise(function(M,j){o.push([y,P,M,j])>1||u(y,P)})},S&&(i[y]=S(i[y])))}function u(y,S){try{l(r[y](S))}catch(P){m(o[0][3],P)}}function l(y){y.value instanceof Hi?Promise.resolve(y.value.v).then(h,p):m(o[0][2],y)}function h(y){u("next",y)}function p(y){u("throw",y)}function m(y,S){y(S),o.shift(),o.length&&u(o[0][0],o[0][1])}}function Ab(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof Cb=="function"?Cb(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(o){n[o]=t[o]&&function(s){return new Promise(function(a,u){s=t[o](s),i(a,u,s.done,s.value)})}}function i(o,s,a,u){Promise.resolve(u).then(function(l){o({value:l,done:a})},s)}}var Ol=t=>t&&typeof t.length=="number"&&typeof t!="function";function Fl(t){return X(t?.then)}function Ll(t){return X(t[fs])}function Vl(t){return Symbol.asyncIterator&&X(t?.[Symbol.asyncIterator])}function jl(t){return new TypeError(`You provided ${t!==null&&typeof t=="object"?"an invalid object":`'${t}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function tx(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var Ul=tx();function Bl(t){return X(t?.[Ul])}function $l(t){return Sb(this,arguments,function*(){let n=t.getReader();try{for(;;){let{value:r,done:i}=yield Hi(n.read());if(i)return yield Hi(void 0);yield yield Hi(r)}}finally{n.releaseLock()}})}function Hl(t){return X(t?.getReader)}function We(t){if(t instanceof se)return t;if(t!=null){if(Ll(t))return nx(t);if(Ol(t))return rx(t);if(Fl(t))return ix(t);if(Vl(t))return Rb(t);if(Bl(t))return ox(t);if(Hl(t))return sx(t)}throw jl(t)}function nx(t){return new se(e=>{let n=t[fs]();if(X(n.subscribe))return n.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function rx(t){return new se(e=>{for(let n=0;n<t.length&&!e.closed;n++)e.next(t[n]);e.complete()})}function ix(t){return new se(e=>{t.then(n=>{e.closed||(e.next(n),e.complete())},n=>e.error(n)).then(null,Al)})}function ox(t){return new se(e=>{for(let n of t)if(e.next(n),e.closed)return;e.complete()})}function Rb(t){return new se(e=>{ax(t,e).catch(n=>e.error(n))})}function sx(t){return Rb($l(t))}function ax(t,e){var n,r,i,o;return Tb(this,void 0,void 0,function*(){try{for(n=Ab(t);r=yield n.next(),!r.done;){let s=r.value;if(e.next(s),e.closed)return}}catch(s){i={error:s}}finally{try{r&&!r.done&&(o=n.return)&&(yield o.call(n))}finally{if(i)throw i.error}}e.complete()})}function qt(t,e,n,r=0,i=!1){let o=e.schedule(function(){n(),i?t.add(this.schedule(null,r)):this.unsubscribe()},r);if(t.add(o),!i)return o}function Kr(t,e=0){return ge((n,r)=>{n.subscribe(de(r,i=>qt(r,t,()=>r.next(i),e),()=>qt(r,t,()=>r.complete(),e),i=>qt(r,t,()=>r.error(i),e)))})}function Qr(t,e=0){return ge((n,r)=>{r.add(t.schedule(()=>n.subscribe(r),e))})}function Nb(t,e){return We(t).pipe(Qr(e),Kr(e))}function Mb(t,e){return We(t).pipe(Qr(e),Kr(e))}function Pb(t,e){return new se(n=>{let r=0;return e.schedule(function(){r===t.length?n.complete():(n.next(t[r++]),n.closed||this.schedule())})})}function xb(t,e){return new se(n=>{let r;return qt(n,e,()=>{r=t[Ul](),qt(n,e,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(s){n.error(s);return}o?n.complete():n.next(i)},0,!0)}),()=>X(r?.return)&&r.return()})}function ql(t,e){if(!t)throw new Error("Iterable cannot be null");return new se(n=>{qt(n,e,()=>{let r=t[Symbol.asyncIterator]();qt(n,e,()=>{r.next().then(i=>{i.done?n.complete():n.next(i.value)})},0,!0)})})}function kb(t,e){return ql($l(t),e)}function Ob(t,e){if(t!=null){if(Ll(t))return Nb(t,e);if(Ol(t))return Pb(t,e);if(Fl(t))return Mb(t,e);if(Vl(t))return ql(t,e);if(Bl(t))return xb(t,e);if(Hl(t))return kb(t,e)}throw jl(t)}function Be(t,e){return e?Ob(t,e):We(t)}function Y(...t){let e=Wr(t);return Be(t,e)}function _s(t,e){let n=X(t)?t:()=>t,r=i=>i.error(n());return new se(e?i=>e.schedule(r,0,i):r)}function Ig(t){return!!t&&(t instanceof se||X(t.lift)&&X(t.subscribe))}var fr=us(t=>function(){t(this),this.name="EmptyError",this.message="no elements in sequence"});function he(t,e){return ge((n,r)=>{let i=0;n.subscribe(de(r,o=>{r.next(t.call(e,o,i++))}))})}var{isArray:cx}=Array;function ux(t,e){return cx(e)?t(...e):t(e)}function zl(t){return he(e=>ux(t,e))}var{isArray:lx}=Array,{getPrototypeOf:dx,prototype:hx,keys:fx}=Object;function Gl(t){if(t.length===1){let e=t[0];if(lx(e))return{args:e,keys:null};if(px(e)){let n=fx(e);return{args:n.map(r=>e[r]),keys:n}}}return{args:t,keys:null}}function px(t){return t&&typeof t=="object"&&dx(t)===hx}function Wl(t,e){return t.reduce((n,r,i)=>(n[r]=e[i],n),{})}function Kl(...t){let e=Wr(t),n=kl(t),{args:r,keys:i}=Gl(t);if(r.length===0)return Be([],e);let o=new se(gx(r,e,i?s=>Wl(i,s):Zt));return n?o.pipe(zl(n)):o}function gx(t,e,n=Zt){return r=>{Fb(e,()=>{let{length:i}=t,o=new Array(i),s=i,a=i;for(let u=0;u<i;u++)Fb(e,()=>{let l=Be(t[u],e),h=!1;l.subscribe(de(r,p=>{o[u]=p,h||(h=!0,a--),a||r.next(n(o.slice()))},()=>{--s||r.complete()}))},r)},r)}}function Fb(t,e,n){t?qt(n,t,e):e()}function Lb(t,e,n,r,i,o,s,a){let u=[],l=0,h=0,p=!1,m=()=>{p&&!u.length&&!l&&e.complete()},y=P=>l<r?S(P):u.push(P),S=P=>{o&&e.next(P),l++;let M=!1;We(n(P,h++)).subscribe(de(e,j=>{i?.(j),o?y(j):e.next(j)},()=>{M=!0},void 0,()=>{if(M)try{for(l--;u.length&&l<r;){let j=u.shift();s?qt(e,s,()=>S(j)):S(j)}m()}catch(j){e.error(j)}}))};return t.subscribe(de(e,y,()=>{p=!0,m()})),()=>{a?.()}}function rt(t,e,n=1/0){return X(e)?rt((r,i)=>he((o,s)=>e(r,o,i,s))(We(t(r,i))),n):(typeof e=="number"&&(n=e),ge((r,i)=>Lb(r,i,t,n)))}function Vb(t=1/0){return rt(Zt,t)}function jb(){return Vb(1)}function Es(...t){return jb()(Be(t,Wr(t)))}function ic(t){return new se(e=>{We(t()).subscribe(e)})}function wg(...t){let e=kl(t),{args:n,keys:r}=Gl(t),i=new se(o=>{let{length:s}=n;if(!s){o.complete();return}let a=new Array(s),u=s,l=s;for(let h=0;h<s;h++){let p=!1;We(n[h]).subscribe(de(o,m=>{p||(p=!0,l--),a[h]=m},()=>u--,void 0,()=>{(!u||!p)&&(l||o.next(r?Wl(r,a):a),o.complete())}))}});return e?i.pipe(zl(e)):i}function ln(t,e){return ge((n,r)=>{let i=0;n.subscribe(de(r,o=>t.call(e,o,i++)&&r.next(o)))})}function Yr(t){return ge((e,n)=>{let r=null,i=!1,o;r=e.subscribe(de(n,void 0,void 0,s=>{o=We(t(s,Yr(t)(e))),r?(r.unsubscribe(),r=null,o.subscribe(n)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(n))})}function Ub(t,e,n,r,i){return(o,s)=>{let a=n,u=e,l=0;o.subscribe(de(s,h=>{let p=l++;u=a?t(u,h,p):(a=!0,h),r&&s.next(u)},i&&(()=>{a&&s.next(u),s.complete()})))}}function Is(t,e){return X(e)?rt(t,e,1):rt(t,1)}function Zr(t){return ge((e,n)=>{let r=!1;e.subscribe(de(n,i=>{r=!0,n.next(i)},()=>{r||n.next(t),n.complete()}))})}function pr(t){return t<=0?()=>Ht:ge((e,n)=>{let r=0;e.subscribe(de(n,i=>{++r<=t&&(n.next(i),t<=r&&n.complete())}))})}function Ql(t=mx){return ge((e,n)=>{let r=!1;e.subscribe(de(n,i=>{r=!0,n.next(i)},()=>r?n.complete():n.error(t())))})}function mx(){return new fr}function oc(t){return ge((e,n)=>{try{e.subscribe(n)}finally{n.add(t)}})}function gr(t,e){let n=arguments.length>=2;return r=>r.pipe(t?ln((i,o)=>t(i,o,r)):Zt,pr(1),n?Zr(e):Ql(()=>new fr))}function ws(t){return t<=0?()=>Ht:ge((e,n)=>{let r=[];e.subscribe(de(n,i=>{r.push(i),t<r.length&&r.shift()},()=>{for(let i of r)n.next(i);n.complete()},void 0,()=>{r=null}))})}function bg(t,e){let n=arguments.length>=2;return r=>r.pipe(t?ln((i,o)=>t(i,o,r)):Zt,ws(1),n?Zr(e):Ql(()=>new fr))}function Dg(t,e){return ge(Ub(t,e,arguments.length>=2,!0))}function Cg(...t){let e=Wr(t);return ge((n,r)=>{(e?Es(t,n,e):Es(t,n)).subscribe(r)})}function zt(t,e){return ge((n,r)=>{let i=null,o=0,s=!1,a=()=>s&&!i&&r.complete();n.subscribe(de(r,u=>{i?.unsubscribe();let l=0,h=o++;We(t(u,h)).subscribe(i=de(r,p=>r.next(e?e(u,p,h,l++):p),()=>{i=null,a()}))},()=>{s=!0,a()}))})}function Yl(t){return ge((e,n)=>{We(t).subscribe(de(n,()=>n.complete(),nc)),!n.closed&&e.subscribe(n)})}function at(t,e,n){let r=X(t)||e||n?{next:t,error:e,complete:n}:t;return r?ge((i,o)=>{var s;(s=r.subscribe)===null||s===void 0||s.call(r);let a=!0;i.subscribe(de(o,u=>{var l;(l=r.next)===null||l===void 0||l.call(r,u),o.next(u)},()=>{var u;a=!1,(u=r.complete)===null||u===void 0||u.call(r),o.complete()},u=>{var l;a=!1,(l=r.error)===null||l===void 0||l.call(r,u),o.error(u)},()=>{var u,l;a&&((u=r.unsubscribe)===null||u===void 0||u.call(r)),(l=r.finalize)===null||l===void 0||l.call(r)}))}):Zt}function Bb(t){let e=ie(null);try{return t()}finally{ie(e)}}var zi=class{full;major;minor;patch;constructor(e){this.full=e;let n=e.split(".");this.major=n[0],this.minor=n[1],this.patch=n.slice(2).join(".")}},Vg=new zi("20.3.1");var ed="https://angular.dev/best-practices/security#preventing-cross-site-scripting-xss",H=class extends Error{code;constructor(e,n){super(td(e,n)),this.code=e}};function yx(t){return`NG0${Math.abs(t)}`}function td(t,e){return`${yx(t)}${e?": "+e:""}`}var uc=globalThis;function we(t){for(let e in t)if(t[e]===we)return e;throw Error("")}function qb(t,e){for(let n in e)e.hasOwnProperty(n)&&!t.hasOwnProperty(n)&&(t[n]=e[n])}function yr(t){if(typeof t=="string")return t;if(Array.isArray(t))return`[${t.map(yr).join(", ")}]`;if(t==null)return""+t;let e=t.overriddenName||t.name;if(e)return`${e}`;let n=t.toString();if(n==null)return""+n;let r=n.indexOf(`
`);return r>=0?n.slice(0,r):n}function jg(t,e){return t?e?`${t} ${e}`:t:e||""}var vx=we({__forward_ref__:we});function jn(t){return t.__forward_ref__=jn,t.toString=function(){return yr(this())},t}function vt(t){return Ug(t)?t():t}function Ug(t){return typeof t=="function"&&t.hasOwnProperty(vx)&&t.__forward_ref__===jn}function z(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function Un(t){return{providers:t.providers||[],imports:t.imports||[]}}function lc(t){return _x(t,nd)}function Bg(t){return lc(t)!==null}function _x(t,e){return t.hasOwnProperty(e)&&t[e]||null}function Ex(t){let e=t?.[nd]??null;return e||null}function Sg(t){return t&&t.hasOwnProperty(Jl)?t[Jl]:null}var nd=we({\u0275prov:we}),Jl=we({\u0275inj:we}),q=class{_desc;ngMetadataName="InjectionToken";\u0275prov;constructor(e,n){this._desc=e,this.\u0275prov=void 0,typeof n=="number"?this.__NG_ELEMENT_ID__=n:n!==void 0&&(this.\u0275prov=z({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function $g(t){return t&&!!t.\u0275providers}var Hg=we({\u0275cmp:we}),qg=we({\u0275dir:we}),zg=we({\u0275pipe:we}),Gg=we({\u0275mod:we}),ac=we({\u0275fac:we}),Yi=we({__NG_ELEMENT_ID__:we}),$b=we({__NG_ENV_ID__:we});function Zi(t){return typeof t=="string"?t:t==null?"":String(t)}function zb(t){return typeof t=="function"?t.name||t.toString():typeof t=="object"&&t!=null&&typeof t.type=="function"?t.type.name||t.type.toString():Zi(t)}var Gb=we({ngErrorCode:we}),Ix=we({ngErrorMessage:we}),wx=we({ngTokenPath:we});function Wg(t,e){return Wb("",-200,e)}function rd(t,e){throw new H(-201,!1)}function Wb(t,e,n){let r=new H(e,t);return r[Gb]=e,r[Ix]=t,n&&(r[wx]=n),r}function bx(t){return t[Gb]}var Ag;function Kb(){return Ag}function Jt(t){let e=Ag;return Ag=t,e}function Kg(t,e,n){let r=lc(t);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(n&8)return null;if(e!==void 0)return e;rd(t,"Injector")}var Dx={},qi=Dx,Rg="__NG_DI_FLAG__",Ng=class{injector;constructor(e){this.injector=e}retrieve(e,n){let r=Gi(n)||0;try{return this.injector.get(e,r&8?null:qi,r)}catch(i){if(rs(i))return i;throw i}}};function Cx(t,e=0){let n=gl();if(n===void 0)throw new H(-203,!1);if(n===null)return Kg(t,void 0,e);{let r=Tx(e),i=n.retrieve(t,r);if(rs(i)){if(r.optional)return null;throw i}return i}}function Z(t,e=0){return(Kb()||Cx)(vt(t),e)}function R(t,e){return Z(t,Gi(e))}function Gi(t){return typeof t>"u"||typeof t=="number"?t:0|(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function Tx(t){return{optional:!!(t&8),host:!!(t&1),self:!!(t&2),skipSelf:!!(t&4)}}function Mg(t){let e=[];for(let n=0;n<t.length;n++){let r=vt(t[n]);if(Array.isArray(r)){if(r.length===0)throw new H(900,!1);let i,o=0;for(let s=0;s<r.length;s++){let a=r[s],u=Sx(a);typeof u=="number"?u===-1?i=a.token:o|=u:i=a}e.push(Z(i,o))}else e.push(Z(r))}return e}function Qb(t,e){return t[Rg]=e,t.prototype[Rg]=e,t}function Sx(t){return t[Rg]}function Wi(t,e){let n=t.hasOwnProperty(ac);return n?t[ac]:null}function id(t,e){t.forEach(n=>Array.isArray(n)?id(n,e):e(n))}function Qg(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function dc(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function Yb(t,e,n,r){let i=t.length;if(i==e)t.push(n,r);else if(i===1)t.push(r,t[0]),t[0]=n;else{for(i--,t.push(t[i-1],t[i]);i>e;){let o=i-2;t[i]=t[o],i--}t[e]=n,t[e+1]=r}}function Zb(t,e,n){let r=Ds(t,e);return r>=0?t[r|1]=n:(r=~r,Yb(t,r,e,n)),r}function od(t,e){let n=Ds(t,e);if(n>=0)return t[n|1]}function Ds(t,e){return Ax(t,e,1)}function Ax(t,e,n){let r=0,i=t.length>>n;for(;i!==r;){let o=r+(i-r>>1),s=t[o<<n];if(e===s)return o<<n;s>e?i=o:r=o+1}return~(i<<n)}var ei={},Xt=[],ti=new q(""),Yg=new q("",-1),Zg=new q(""),cc=class{get(e,n=qi){if(n===qi){let i=Wb("",-201);throw i.name="\u0275NotFound",i}return n}};function Jg(t){return t[Gg]||null}function ni(t){return t[Hg]||null}function Xg(t){return t[qg]||null}function Jb(t){return t[zg]||null}function Bn(t){return{\u0275providers:t}}function Xb(...t){return{\u0275providers:em(!0,t),\u0275fromNgModule:!0}}function em(t,...e){let n=[],r=new Set,i,o=s=>{n.push(s)};return id(e,s=>{let a=s;Xl(a,o,[],r)&&(i||=[],i.push(a))}),i!==void 0&&eD(i,o),n}function eD(t,e){for(let n=0;n<t.length;n++){let{ngModule:r,providers:i}=t[n];tm(i,o=>{e(o,r)})}}function Xl(t,e,n,r){if(t=vt(t),!t)return!1;let i=null,o=Sg(t),s=!o&&ni(t);if(!o&&!s){let u=t.ngModule;if(o=Sg(u),o)i=u;else return!1}else{if(s&&!s.standalone)return!1;i=t}let a=r.has(i);if(s){if(a)return!1;if(r.add(i),s.dependencies){let u=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let l of u)Xl(l,e,n,r)}}else if(o){if(o.imports!=null&&!a){r.add(i);let l;try{id(o.imports,h=>{Xl(h,e,n,r)&&(l||=[],l.push(h))})}finally{}l!==void 0&&eD(l,e)}if(!a){let l=Wi(i)||(()=>new i);e({provide:i,useFactory:l,deps:Xt},i),e({provide:Zg,useValue:i,multi:!0},i),e({provide:ti,useValue:()=>Z(i),multi:!0},i)}let u=o.providers;if(u!=null&&!a){let l=t;tm(u,h=>{e(h,l)})}}else return!1;return i!==t&&t.providers!==void 0}function tm(t,e){for(let n of t)$g(n)&&(n=n.\u0275providers),Array.isArray(n)?tm(n,e):e(n)}var Rx=we({provide:String,useValue:we});function tD(t){return t!==null&&typeof t=="object"&&Rx in t}function Nx(t){return!!(t&&t.useExisting)}function Mx(t){return!!(t&&t.useFactory)}function Ki(t){return typeof t=="function"}function nD(t){return!!t.useClass}var hc=new q(""),Zl={},Hb={},Tg;function fc(){return Tg===void 0&&(Tg=new cc),Tg}var Ke=class{},Qi=class extends Ke{parent;source;scopes;records=new Map;_ngOnDestroyHooks=new Set;_onDestroyHooks=[];get destroyed(){return this._destroyed}_destroyed=!1;injectorDefTypes;constructor(e,n,r,i){super(),this.parent=n,this.source=r,this.scopes=i,xg(e,s=>this.processProvider(s)),this.records.set(Yg,bs(void 0,this)),i.has("environment")&&this.records.set(Ke,bs(void 0,this));let o=this.records.get(hc);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(Zg,Xt,{self:!0}))}retrieve(e,n){let r=Gi(n)||0;try{return this.get(e,qi,r)}catch(i){if(rs(i))return i;throw i}}destroy(){sc(this),this._destroyed=!0;let e=ie(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let n=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of n)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),ie(e)}}onDestroy(e){return sc(this),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){sc(this);let n=Ln(this),r=Jt(void 0),i;try{return e()}finally{Ln(n),Jt(r)}}get(e,n=qi,r){if(sc(this),e.hasOwnProperty($b))return e[$b](this);let i=Gi(r),o,s=Ln(this),a=Jt(void 0);try{if(!(i&4)){let l=this.records.get(e);if(l===void 0){let h=Fx(e)&&lc(e);h&&this.injectableDefInScope(h)?l=bs(Pg(e),Zl):l=null,this.records.set(e,l)}if(l!=null)return this.hydrate(e,l,i)}let u=i&2?fc():this.parent;return n=i&8&&n===qi?null:n,u.get(e,n)}catch(u){let l=bx(u);throw l===-200||l===-201?new H(l,null):u}finally{Jt(a),Ln(s)}}resolveInjectorInitializers(){let e=ie(null),n=Ln(this),r=Jt(void 0),i;try{let o=this.get(ti,Xt,{self:!0});for(let s of o)s()}finally{Ln(n),Jt(r),ie(e)}}toString(){let e=[],n=this.records;for(let r of n.keys())e.push(yr(r));return`R3Injector[${e.join(", ")}]`}processProvider(e){e=vt(e);let n=Ki(e)?e:vt(e&&e.provide),r=xx(e);if(!Ki(e)&&e.multi===!0){let i=this.records.get(n);i||(i=bs(void 0,Zl,!0),i.factory=()=>Mg(i.multi),this.records.set(n,i)),n=e,i.multi.push(e)}this.records.set(n,r)}hydrate(e,n,r){let i=ie(null);try{if(n.value===Hb)throw Wg(yr(e));return n.value===Zl&&(n.value=Hb,n.value=n.factory(void 0,r)),typeof n.value=="object"&&n.value&&Ox(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}finally{ie(i)}}injectableDefInScope(e){if(!e.providedIn)return!1;let n=vt(e.providedIn);return typeof n=="string"?n==="any"||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(e){let n=this._onDestroyHooks.indexOf(e);n!==-1&&this._onDestroyHooks.splice(n,1)}};function Pg(t){let e=lc(t),n=e!==null?e.factory:Wi(t);if(n!==null)return n;if(t instanceof q)throw new H(204,!1);if(t instanceof Function)return Px(t);throw new H(204,!1)}function Px(t){if(t.length>0)throw new H(204,!1);let n=Ex(t);return n!==null?()=>n.factory(t):()=>new t}function xx(t){if(tD(t))return bs(void 0,t.useValue);{let e=nm(t);return bs(e,Zl)}}function nm(t,e,n){let r;if(Ki(t)){let i=vt(t);return Wi(i)||Pg(i)}else if(tD(t))r=()=>vt(t.useValue);else if(Mx(t))r=()=>t.useFactory(...Mg(t.deps||[]));else if(Nx(t))r=(i,o)=>Z(vt(t.useExisting),o!==void 0&&o&8?8:void 0);else{let i=vt(t&&(t.useClass||t.provide));if(kx(t))r=()=>new i(...Mg(t.deps));else return Wi(i)||Pg(i)}return r}function sc(t){if(t.destroyed)throw new H(205,!1)}function bs(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function kx(t){return!!t.deps}function Ox(t){return t!==null&&typeof t=="object"&&typeof t.ngOnDestroy=="function"}function Fx(t){return typeof t=="function"||typeof t=="object"&&t.ngMetadataName==="InjectionToken"}function xg(t,e){for(let n of t)Array.isArray(n)?xg(n,e):n&&$g(n)?xg(n.\u0275providers,e):e(n)}function Me(t,e){let n;t instanceof Qi?(sc(t),n=t):n=new Ng(t);let r,i=Ln(n),o=Jt(void 0);try{return e()}finally{Ln(i),Jt(o)}}function rD(){return Kb()!==void 0||gl()!=null}var wn=0,oe=1,ee=2,_t=3,dn=4,hn=5,pc=6,Cs=7,Rt=8,Ts=9,$n=10,$e=11,Ss=12,rm=13,Ji=14,fn=15,Xi=16,eo=17,to=18,gc=19,im=20,mr=21,sd=22,mc=23,en=24,ad=25,Vt=26,tn=27,iD=1;var ri=7,yc=8,vc=9,Gt=10;function Hn(t){return Array.isArray(t)&&typeof t[iD]=="object"}function bn(t){return Array.isArray(t)&&t[iD]===!0}function om(t){return(t.flags&4)!==0}function ii(t){return t.componentOffset>-1}function _c(t){return(t.flags&1)===1}function qn(t){return!!t.template}function As(t){return(t[ee]&512)!==0}function no(t){return(t[ee]&256)===256}var oD="svg",sD="math";function pn(t){for(;Array.isArray(t);)t=t[wn];return t}function sm(t,e){return pn(e[t])}function Dn(t,e){return pn(e[t.index])}function cd(t,e){return t.data[e]}function gn(t,e){let n=e[t];return Hn(n)?n:n[wn]}function ud(t){return(t[ee]&128)===128}function aD(t){return bn(t[_t])}function Ec(t,e){return e==null?null:t[e]}function am(t){t[eo]=0}function cm(t){t[ee]&1024||(t[ee]|=1024,ud(t)&&wc(t))}function cD(t,e){for(;t>0;)e=e[Ji],t--;return e}function Ic(t){return!!(t[ee]&9216||t[en]?.dirty)}function ld(t){t[$n].changeDetectionScheduler?.notify(8),t[ee]&64&&(t[ee]|=1024),Ic(t)&&wc(t)}function wc(t){t[$n].changeDetectionScheduler?.notify(0);let e=Jr(t);for(;e!==null&&!(e[ee]&8192||(e[ee]|=8192,!ud(e)));)e=Jr(e)}function um(t,e){if(no(t))throw new H(911,!1);t[mr]===null&&(t[mr]=[]),t[mr].push(e)}function uD(t,e){if(t[mr]===null)return;let n=t[mr].indexOf(e);n!==-1&&t[mr].splice(n,1)}function Jr(t){let e=t[_t];return bn(e)?e[_t]:e}function lD(t){return t[Cs]??=[]}function dD(t){return t.cleanup??=[]}var ue={lFrame:AD(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var kg=!1;function hD(){return ue.lFrame.elementDepthCount}function fD(){ue.lFrame.elementDepthCount++}function pD(){ue.lFrame.elementDepthCount--}function lm(){return ue.bindingsEnabled}function gD(){return ue.skipHydrationRootTNode!==null}function mD(t){return ue.skipHydrationRootTNode===t}function yD(){ue.skipHydrationRootTNode=null}function Te(){return ue.lFrame.lView}function nn(){return ue.lFrame.tView}function it(t){return ue.lFrame.contextLView=t,t[Rt]}function ot(t){return ue.lFrame.contextLView=null,t}function jt(){let t=dm();for(;t!==null&&t.type===64;)t=t.parent;return t}function dm(){return ue.lFrame.currentTNode}function vD(){let t=ue.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}function Rs(t,e){let n=ue.lFrame;n.currentTNode=t,n.isParent=e}function hm(){return ue.lFrame.isParent}function _D(){ue.lFrame.isParent=!1}function fm(){return kg}function pm(t){let e=kg;return kg=t,e}function ED(){let t=ue.lFrame,e=t.bindingRootIndex;return e===-1&&(e=t.bindingRootIndex=t.tView.bindingStartIndex),e}function ID(){return ue.lFrame.bindingIndex}function wD(t){return ue.lFrame.bindingIndex=t}function bc(){return ue.lFrame.bindingIndex++}function gm(t){let e=ue.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+t,n}function bD(){return ue.lFrame.inI18n}function DD(t,e){let n=ue.lFrame;n.bindingIndex=n.bindingRootIndex=t,dd(e)}function CD(){return ue.lFrame.currentDirectiveIndex}function dd(t){ue.lFrame.currentDirectiveIndex=t}function TD(t){let e=ue.lFrame.currentDirectiveIndex;return e===-1?null:t[e]}function mm(t){ue.lFrame.currentQueryIndex=t}function Lx(t){let e=t[oe];return e.type===2?e.declTNode:e.type===1?t[hn]:null}function ym(t,e,n){if(n&4){let i=e,o=t;for(;i=i.parent,i===null&&!(n&1);)if(i=Lx(o),i===null||(o=o[Ji],i.type&10))break;if(i===null)return!1;e=i,t=o}let r=ue.lFrame=SD();return r.currentTNode=e,r.lView=t,!0}function hd(t){let e=SD(),n=t[oe];ue.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function SD(){let t=ue.lFrame,e=t===null?null:t.child;return e===null?AD(t):e}function AD(t){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return t!==null&&(t.child=e),e}function RD(){let t=ue.lFrame;return ue.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}var vm=RD;function fd(){let t=RD();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function ND(t){return(ue.lFrame.contextLView=cD(t,ue.lFrame.contextLView))[Rt]}function oi(){return ue.lFrame.selectedIndex}function si(t){ue.lFrame.selectedIndex=t}function pd(){let t=ue.lFrame;return cd(t.tView,t.selectedIndex)}function MD(){return ue.lFrame.currentNamespace}var PD=!0;function gd(){return PD}function md(t){PD=t}function Og(t,e=null,n=null,r){let i=_m(t,e,n,r);return i.resolveInjectorInitializers(),i}function _m(t,e=null,n=null,r,i=new Set){let o=[n||Xt,Xb(t)];return r=r||(typeof t=="object"?void 0:yr(t)),new Qi(o,e||fc(),r||null,i)}var Ne=class t{static THROW_IF_NOT_FOUND=qi;static NULL=new cc;static create(e,n){if(Array.isArray(e))return Og({name:""},n,e,"");{let r=e.name??"";return Og({name:r},e.parent,e.providers,r)}}static \u0275prov=z({token:t,providedIn:"any",factory:()=>Z(Yg)});static __NG_ELEMENT_ID__=-1},Et=new q(""),ai=(()=>{class t{static __NG_ELEMENT_ID__=Vx;static __NG_ENV_ID__=n=>n}return t})(),Fg=class extends ai{_lView;constructor(e){super(),this._lView=e}get destroyed(){return no(this._lView)}onDestroy(e){let n=this._lView;return um(n,e),()=>uD(n,e)}};function Vx(){return new Fg(Te())}var Vn=class{_console=console;handleError(e){this._console.error("ERROR",e)}},Wt=new q("",{providedIn:"root",factory:()=>{let t=R(Ke),e;return n=>{t.destroyed&&!e?setTimeout(()=>{throw n}):(e??=t.get(Vn),e.handleError(n))}}}),xD={provide:ti,useValue:()=>void R(Vn),multi:!0};function Em(t){return typeof t=="function"&&t[At]!==void 0}function ct(t,e){let[n,r,i]=sg(t,e?.equal),o=n,s=o[At];return o.set=r,o.update=i,o.asReadonly=kD.bind(o),o}function kD(){let t=this[At];if(t.readonlyFn===void 0){let e=()=>this();e[At]=t,t.readonlyFn=e}return t.readonlyFn}function Im(t){return Em(t)&&typeof t.set=="function"}var Xr=class{},yd=new q("",{providedIn:"root",factory:()=>!1});var wm=new q(""),bm=new q("");var zn=(()=>{class t{taskId=0;pendingTasks=new Set;destroyed=!1;pendingTask=new yt(!1);get hasPendingTasks(){return this.destroyed?!1:this.pendingTask.value}get hasPendingTasksObservable(){return this.destroyed?new se(n=>{n.next(!1),n.complete()}):this.pendingTask}add(){!this.hasPendingTasks&&!this.destroyed&&this.pendingTask.next(!0);let n=this.taskId++;return this.pendingTasks.add(n),n}has(n){return this.pendingTasks.has(n)}remove(n){this.pendingTasks.delete(n),this.pendingTasks.size===0&&this.hasPendingTasks&&this.pendingTask.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks&&this.pendingTask.next(!1),this.destroyed=!0,this.pendingTask.unsubscribe()}static \u0275prov=z({token:t,providedIn:"root",factory:()=>new t})}return t})(),Ns=(()=>{class t{internalPendingTasks=R(zn);scheduler=R(Xr);errorHandler=R(Wt);add(){let n=this.internalPendingTasks.add();return()=>{this.internalPendingTasks.has(n)&&(this.scheduler.notify(11),this.internalPendingTasks.remove(n))}}run(n){let r=this.add();n().catch(this.errorHandler).finally(r)}static \u0275prov=z({token:t,providedIn:"root",factory:()=>new t})}return t})();function Dc(...t){}var Dm=(()=>{class t{static \u0275prov=z({token:t,providedIn:"root",factory:()=>new Lg})}return t})(),Lg=class{dirtyEffectCount=0;queues=new Map;add(e){this.enqueue(e),this.schedule(e)}schedule(e){e.dirty&&this.dirtyEffectCount++}remove(e){let n=e.zone,r=this.queues.get(n);r.has(e)&&(r.delete(e),e.dirty&&this.dirtyEffectCount--)}enqueue(e){let n=e.zone;this.queues.has(n)||this.queues.set(n,new Set);let r=this.queues.get(n);r.has(e)||r.add(e)}flush(){for(;this.dirtyEffectCount>0;){let e=!1;for(let[n,r]of this.queues)n===null?e||=this.flushQueue(r):e||=n.run(()=>this.flushQueue(r));e||(this.dirtyEffectCount=0)}}flushQueue(e){let n=!1;for(let r of e)r.dirty&&(this.dirtyEffectCount--,n=!0,r.run());return n}};function Fs(t){return{toString:t}.toString()}var vd="__parameters__";function Kx(t){return function(...n){if(t){let r=t(...n);for(let i in r)this[i]=r[i]}}}function Qx(t,e,n){return Fs(()=>{let r=Kx(e);function i(...o){if(this instanceof i)return r.apply(this,o),this;let s=new i(...o);return a.annotation=s,a;function a(u,l,h){let p=u.hasOwnProperty(vd)?u[vd]:Object.defineProperty(u,vd,{value:[]})[vd];for(;p.length<=h;)p.push(null);return(p[h]=p[h]||[]).push(s),u}}return i.prototype.ngMetadataName=t,i.annotationCls=i,i})}var mn=Qb(Qx("Optional"),8);function Yx(t){return typeof t=="function"}var Dd=class{previousValue;currentValue;firstChange;constructor(e,n,r){this.previousValue=e,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}};function hC(t,e,n,r){e!==null?e.applyValueToInputSignal(e,r):t[n]=r}var _r=(()=>{let t=()=>fC;return t.ngInherit=!0,t})();function fC(t){return t.type.prototype.ngOnChanges&&(t.setInput=Jx),Zx}function Zx(){let t=gC(this),e=t?.current;if(e){let n=t.previous;if(n===ei)t.previous=e;else for(let r in e)n[r]=e[r];t.current=null,this.ngOnChanges(e)}}function Jx(t,e,n,r,i){let o=this.declaredInputs[r],s=gC(t)||Xx(t,{previous:ei,current:null}),a=s.current||(s.current={}),u=s.previous,l=u[o];a[o]=new Dd(l&&l.currentValue,n,u===ei),hC(t,e,i,n)}var pC="__ngSimpleChanges__";function gC(t){return t[pC]||null}function Xx(t,e){return t[pC]=e}var OD=[];var Pe=function(t,e=null,n){for(let r=0;r<OD.length;r++){let i=OD[r];i(t,e,n)}};function ek(t,e,n){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){let s=fC(e);(n.preOrderHooks??=[]).push(t,s),(n.preOrderCheckHooks??=[]).push(t,s)}i&&(n.preOrderHooks??=[]).push(0-t,i),o&&((n.preOrderHooks??=[]).push(t,o),(n.preOrderCheckHooks??=[]).push(t,o))}function mC(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){let o=t.data[n].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:u,ngAfterViewChecked:l,ngOnDestroy:h}=o;s&&(t.contentHooks??=[]).push(-n,s),a&&((t.contentHooks??=[]).push(n,a),(t.contentCheckHooks??=[]).push(n,a)),u&&(t.viewHooks??=[]).push(-n,u),l&&((t.viewHooks??=[]).push(n,l),(t.viewCheckHooks??=[]).push(n,l)),h!=null&&(t.destroyHooks??=[]).push(n,h)}}function Id(t,e,n){yC(t,e,3,n)}function wd(t,e,n,r){(t[ee]&3)===n&&yC(t,e,n,r)}function Cm(t,e){let n=t[ee];(n&3)===e&&(n&=16383,n+=1,t[ee]=n)}function yC(t,e,n,r){let i=r!==void 0?t[eo]&65535:0,o=r??-1,s=e.length-1,a=0;for(let u=i;u<s;u++)if(typeof e[u+1]=="number"){if(a=e[u],r!=null&&a>=r)break}else e[u]<0&&(t[eo]+=65536),(a<o||o==-1)&&(tk(t,n,e,u),t[eo]=(t[eo]&4294901760)+u+2),u++}function FD(t,e){Pe(4,t,e);let n=ie(null);try{e.call(t)}finally{ie(n),Pe(5,t,e)}}function tk(t,e,n,r){let i=n[r]<0,o=n[r+1],s=i?-n[r]:n[r],a=t[s];i?t[ee]>>14<t[eo]>>16&&(t[ee]&3)===e&&(t[ee]+=16384,FD(a,o)):FD(a,o)}var Ps=-1,io=class{factory;name;injectImpl;resolving=!1;canSeeViewProviders;multi;componentProviders;index;providerFactory;constructor(e,n,r,i){this.factory=e,this.name=i,this.canSeeViewProviders=n,this.injectImpl=r}};function nk(t){return(t.flags&8)!==0}function rk(t){return(t.flags&16)!==0}function ik(t,e,n){let r=0;for(;r<n.length;){let i=n[r];if(typeof i=="number"){if(i!==0)break;r++;let o=n[r++],s=n[r++],a=n[r++];t.setAttribute(e,s,a,o)}else{let o=i,s=n[++r];ok(o)?t.setProperty(e,o,s):t.setAttribute(e,o,s),r++}}return r}function vC(t){return t===3||t===4||t===6}function ok(t){return t.charCodeAt(0)===64}function Sc(t,e){if(!(e===null||e.length===0))if(t===null||t.length===0)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?n=i:n===0||(n===-1||n===2?LD(t,n,i,null,e[++r]):LD(t,n,i,null,null))}}return t}function LD(t,e,n,r,i){let o=0,s=t.length;if(e===-1)s=-1;else for(;o<t.length;){let a=t[o++];if(typeof a=="number"){if(a===e){s=-1;break}else if(a>e){s=o-1;break}}}for(;o<t.length;){let a=t[o];if(typeof a=="number")break;if(a===n){i!==null&&(t[o+1]=i);return}o++,i!==null&&o++}s!==-1&&(t.splice(s,0,e),o=s+1),t.splice(o++,0,n),i!==null&&t.splice(o++,0,i)}function _C(t){return t!==Ps}function Cd(t){return t&32767}function sk(t){return t>>16}function Td(t,e){let n=sk(t),r=e;for(;n>0;)r=r[Ji],n--;return r}var Om=!0;function VD(t){let e=Om;return Om=t,e}var ak=256,EC=ak-1,IC=5,ck=0,Gn={};function uk(t,e,n){let r;typeof n=="string"?r=n.charCodeAt(0)||0:n.hasOwnProperty(Yi)&&(r=n[Yi]),r==null&&(r=n[Yi]=ck++);let i=r&EC,o=1<<i;e.data[t+(i>>IC)]|=o}function Sd(t,e){let n=wC(t,e);if(n!==-1)return n;let r=e[oe];r.firstCreatePass&&(t.injectorIndex=e.length,Tm(r.data,t),Tm(e,null),Tm(r.blueprint,null));let i=ey(t,e),o=t.injectorIndex;if(_C(i)){let s=Cd(i),a=Td(i,e),u=a[oe].data;for(let l=0;l<8;l++)e[o+l]=a[s+l]|u[s+l]}return e[o+8]=i,o}function Tm(t,e){t.push(0,0,0,0,0,0,0,0,e)}function wC(t,e){return t.injectorIndex===-1||t.parent&&t.parent.injectorIndex===t.injectorIndex||e[t.injectorIndex+8]===null?-1:t.injectorIndex}function ey(t,e){if(t.parent&&t.parent.injectorIndex!==-1)return t.parent.injectorIndex;let n=0,r=null,i=e;for(;i!==null;){if(r=SC(i),r===null)return Ps;if(n++,i=i[Ji],r.injectorIndex!==-1)return r.injectorIndex|n<<16}return Ps}function Fm(t,e,n){uk(t,e,n)}function lk(t,e){if(e==="class")return t.classes;if(e==="style")return t.styles;let n=t.attrs;if(n){let r=n.length,i=0;for(;i<r;){let o=n[i];if(vC(o))break;if(o===0)i=i+2;else if(typeof o=="number")for(i++;i<r&&typeof n[i]=="string";)i++;else{if(o===e)return n[i+1];i=i+2}}}return null}function bC(t,e,n){if(n&8||t!==void 0)return t;rd(e,"NodeInjector")}function DC(t,e,n,r){if(n&8&&r===void 0&&(r=null),(n&3)===0){let i=t[Ts],o=Jt(void 0);try{return i?i.get(e,r,n&8):Kg(e,r,n&8)}finally{Jt(o)}}return bC(r,e,n)}function CC(t,e,n,r=0,i){if(t!==null){if(e[ee]&2048&&!(r&2)){let s=gk(t,e,n,r,Gn);if(s!==Gn)return s}let o=TC(t,e,n,r,Gn);if(o!==Gn)return o}return DC(e,n,r,i)}function TC(t,e,n,r,i){let o=fk(n);if(typeof o=="function"){if(!ym(e,t,r))return r&1?bC(i,n,r):DC(e,n,r,i);try{let s;if(s=o(r),s==null&&!(r&8))rd(n);else return s}finally{vm()}}else if(typeof o=="number"){let s=null,a=wC(t,e),u=Ps,l=r&1?e[fn][hn]:null;for((a===-1||r&4)&&(u=a===-1?ey(t,e):e[a+8],u===Ps||!UD(r,!1)?a=-1:(s=e[oe],a=Cd(u),e=Td(u,e)));a!==-1;){let h=e[oe];if(jD(o,a,h.data)){let p=dk(a,e,n,s,r,l);if(p!==Gn)return p}u=e[a+8],u!==Ps&&UD(r,e[oe].data[a+8]===l)&&jD(o,a,e)?(s=h,a=Cd(u),e=Td(u,e)):a=-1}}return i}function dk(t,e,n,r,i,o){let s=e[oe],a=s.data[t+8],u=r==null?ii(a)&&Om:r!=s&&(a.type&3)!==0,l=i&1&&o===a,h=hk(a,s,n,u,l);return h!==null?Ad(e,s,h,a,i):Gn}function hk(t,e,n,r,i){let o=t.providerIndexes,s=e.data,a=o&1048575,u=t.directiveStart,l=t.directiveEnd,h=o>>20,p=r?a:a+h,m=i?a+h:l;for(let y=p;y<m;y++){let S=s[y];if(y<u&&n===S||y>=u&&S.type===n)return y}if(i){let y=s[u];if(y&&qn(y)&&y.type===n)return u}return null}function Ad(t,e,n,r,i){let o=t[n],s=e.data;if(o instanceof io){let a=o;if(a.resolving){let y=zb(s[n]);throw Wg(y)}let u=VD(a.canSeeViewProviders);a.resolving=!0;let l=s[n].type||s[n],h,p=a.injectImpl?Jt(a.injectImpl):null,m=ym(t,r,0);try{o=t[n]=a.factory(void 0,i,s,t,r),e.firstCreatePass&&n>=r.directiveStart&&ek(n,s[n],e)}finally{p!==null&&Jt(p),VD(u),a.resolving=!1,vm()}}return o}function fk(t){if(typeof t=="string")return t.charCodeAt(0)||0;let e=t.hasOwnProperty(Yi)?t[Yi]:void 0;return typeof e=="number"?e>=0?e&EC:pk:e}function jD(t,e,n){let r=1<<t;return!!(n[e+(t>>IC)]&r)}function UD(t,e){return!(t&2)&&!(t&1&&e)}var ro=class{_tNode;_lView;constructor(e,n){this._tNode=e,this._lView=n}get(e,n,r){return CC(this._tNode,this._lView,e,Gi(r),n)}};function pk(){return new ro(jt(),Te())}function ui(t){return Fs(()=>{let e=t.prototype.constructor,n=e[ac]||Lm(e),r=Object.prototype,i=Object.getPrototypeOf(t.prototype).constructor;for(;i&&i!==r;){let o=i[ac]||Lm(i);if(o&&o!==n)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function Lm(t){return Ug(t)?()=>{let e=Lm(vt(t));return e&&e()}:Wi(t)}function gk(t,e,n,r,i){let o=t,s=e;for(;o!==null&&s!==null&&s[ee]&2048&&!As(s);){let a=TC(o,s,n,r|2,Gn);if(a!==Gn)return a;let u=o.parent;if(!u){let l=s[im];if(l){let h=l.get(n,Gn,r);if(h!==Gn)return h}u=SC(s),s=s[Ji]}o=u}return i}function SC(t){let e=t[oe],n=e.type;return n===2?e.declTNode:n===1?t[hn]:null}function Mc(t){return lk(jt(),t)}function mk(){return jd(jt(),Te())}function jd(t,e){return new li(Dn(t,e))}var li=(()=>{class t{nativeElement;constructor(n){this.nativeElement=n}static __NG_ELEMENT_ID__=mk}return t})();function AC(t){return(t.flags&128)===128}var ty=(function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t})(ty||{}),RC=new Map,yk=0;function vk(){return yk++}function _k(t){RC.set(t[gc],t)}function Vm(t){RC.delete(t[gc])}var BD="__ngContext__";function xs(t,e){Hn(e)?(t[BD]=e[gc],_k(e)):t[BD]=e}function NC(t){return PC(t[Ss])}function MC(t){return PC(t[dn])}function PC(t){for(;t!==null&&!bn(t);)t=t[dn];return t}var jm;function ny(t){jm=t}function xC(){if(jm!==void 0)return jm;if(typeof document<"u")return document;throw new H(210,!1)}var Ud=new q("",{providedIn:"root",factory:()=>Ek}),Ek="ng",Bd=new q(""),Tn=new q("",{providedIn:"platform",factory:()=>"unknown"});var $d=new q("",{providedIn:"root",factory:()=>xC().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var Ik="h",wk="b";var kC=!1,OC=new q("",{providedIn:"root",factory:()=>kC});var bk=(t,e,n,r)=>{};function Dk(t,e,n,r){bk(t,e,n,r)}function ry(t){return(t.flags&32)===32}var Ck=()=>null;function FC(t,e,n=!1){return Ck(t,e,n)}function LC(t,e){let n=t.contentQueries;if(n!==null){let r=ie(null);try{for(let i=0;i<n.length;i+=2){let o=n[i],s=n[i+1];if(s!==-1){let a=t.data[s];mm(o),a.contentQueries(2,e[s],s)}}}finally{ie(r)}}}function Um(t,e,n){mm(0);let r=ie(null);try{e(t,n)}finally{ie(r)}}function VC(t,e,n){if(om(e)){let r=ie(null);try{let i=e.directiveStart,o=e.directiveEnd;for(let s=i;s<o;s++){let a=t.data[s];if(a.contentQueries){let u=n[s];a.contentQueries(1,u,s)}}}finally{ie(r)}}}var vr=(function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t})(vr||{});var _d;function Tk(){if(_d===void 0&&(_d=null,uc.trustedTypes))try{_d=uc.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch{}return _d}function $D(t){return Tk()?.createScriptURL(t)||t}var Rd=class{changingThisBreaksApplicationSecurity;constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${ed})`}};function Hd(t){return t instanceof Rd?t.changingThisBreaksApplicationSecurity:t}function iy(t,e){let n=jC(t);if(n!=null&&n!==e){if(n==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${n} (see ${ed})`)}return n===e}function jC(t){return t instanceof Rd&&t.getTypeName()||null}var Sk=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function UC(t){return t=String(t),t.match(Sk)?t:"unsafe:"+t}var qd=(function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t})(qd||{});function di(t){let e=$C();return e?e.sanitize(qd.URL,t)||"":iy(t,"URL")?Hd(t):UC(Zi(t))}function BC(t){let e=$C();if(e)return $D(e.sanitize(qd.RESOURCE_URL,t)||"");if(iy(t,"ResourceURL"))return $D(Hd(t));throw new H(904,!1)}function Ak(t,e){return e==="src"&&(t==="embed"||t==="frame"||t==="iframe"||t==="media"||t==="script")||e==="href"&&(t==="base"||t==="link")?BC:di}function oy(t,e,n){return Ak(e,n)(t)}function $C(){let t=Te();return t&&t[$n].sanitizer}function HC(t){return t instanceof Function?t():t}function Rk(t,e,n){let r=t.length;for(;;){let i=t.indexOf(e,n);if(i===-1)return i;if(i===0||t.charCodeAt(i-1)<=32){let o=e.length;if(i+o===r||t.charCodeAt(i+o)<=32)return i}n=i+1}}var qC="ng-template";function Nk(t,e,n,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&Rk(e[i+1].toLowerCase(),n,0)!==-1)return!0}else if(sy(t))return!1;if(i=e.indexOf(1,i),i>-1){let o;for(;++i<e.length&&typeof(o=e[i])=="string";)if(o.toLowerCase()===n)return!0}return!1}function sy(t){return t.type===4&&t.value!==qC}function Mk(t,e,n){let r=t.type===4&&!n?qC:t.value;return e===r}function Pk(t,e,n){let r=4,i=t.attrs,o=i!==null?Ok(i):0,s=!1;for(let a=0;a<e.length;a++){let u=e[a];if(typeof u=="number"){if(!s&&!Cn(r)&&!Cn(u))return!1;if(s&&Cn(u))continue;s=!1,r=u|r&1;continue}if(!s)if(r&4){if(r=2|r&1,u!==""&&!Mk(t,u,n)||u===""&&e.length===1){if(Cn(r))return!1;s=!0}}else if(r&8){if(i===null||!Nk(t,i,u,n)){if(Cn(r))return!1;s=!0}}else{let l=e[++a],h=xk(u,i,sy(t),n);if(h===-1){if(Cn(r))return!1;s=!0;continue}if(l!==""){let p;if(h>o?p="":p=i[h+1].toLowerCase(),r&2&&l!==p){if(Cn(r))return!1;s=!0}}}}return Cn(r)||s}function Cn(t){return(t&1)===0}function xk(t,e,n,r){if(e===null)return-1;let i=0;if(r||!n){let o=!1;for(;i<e.length;){let s=e[i];if(s===t)return i;if(s===3||s===6)o=!0;else if(s===1||s===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(s===4)break;if(s===0){i+=4;continue}}i+=o?1:2}return-1}else return Fk(e,t)}function kk(t,e,n=!1){for(let r=0;r<e.length;r++)if(Pk(t,e[r],n))return!0;return!1}function Ok(t){for(let e=0;e<t.length;e++){let n=t[e];if(vC(n))return e}return t.length}function Fk(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){let r=t[n];if(typeof r=="number")return-1;if(r===e)return n;n++}return-1}function HD(t,e){return t?":not("+e.trim()+")":e}function Lk(t){let e=t[0],n=1,r=2,i="",o=!1;for(;n<t.length;){let s=t[n];if(typeof s=="string")if(r&2){let a=t[++n];i+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+s:r&4&&(i+=" "+s);else i!==""&&!Cn(s)&&(e+=HD(o,i),i=""),r=s,o=o||!Cn(r);n++}return i!==""&&(e+=HD(o,i)),e}function Vk(t){return t.map(Lk).join(",")}function jk(t){let e=[],n=[],r=1,i=2;for(;r<t.length;){let o=t[r];if(typeof o=="string")i===2?o!==""&&e.push(o,t[++r]):i===8&&n.push(o);else{if(!Cn(i))break;i=o}r++}return n.length&&e.push(1,...n),e}var Sn={};function Uk(t,e){return t.createText(e)}function Bk(t,e,n){t.setValue(e,n)}function zC(t,e,n){return t.createElement(e,n)}function Nd(t,e,n,r,i){t.insertBefore(e,n,r,i)}function GC(t,e,n){t.appendChild(e,n)}function qD(t,e,n,r,i){r!==null?Nd(t,e,n,r,i):GC(t,e,n)}function $k(t,e,n){t.removeChild(null,e,n)}function Hk(t,e,n){t.setAttribute(e,"style",n)}function qk(t,e,n){n===""?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n)}function WC(t,e,n){let{mergedAttrs:r,classes:i,styles:o}=n;r!==null&&ik(t,e,r),i!==null&&qk(t,e,i),o!==null&&Hk(t,e,o)}function ay(t,e,n,r,i,o,s,a,u,l,h){let p=tn+r,m=p+i,y=zk(p,m),S=typeof l=="function"?l():l;return y[oe]={type:t,blueprint:y,template:n,queries:null,viewQuery:a,declTNode:e,data:y.slice().fill(null,p),bindingStartIndex:p,expandoStartIndex:m,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:u,consts:S,incompleteFirstPass:!1,ssrId:h}}function zk(t,e){let n=[];for(let r=0;r<e;r++)n.push(r<t?null:Sn);return n}function Gk(t){let e=t.tView;return e===null||e.incompleteFirstPass?t.tView=ay(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts,t.id):e}function cy(t,e,n,r,i,o,s,a,u,l,h){let p=e.blueprint.slice();return p[wn]=i,p[ee]=r|4|128|8|64|1024,(l!==null||t&&t[ee]&2048)&&(p[ee]|=2048),am(p),p[_t]=p[Ji]=t,p[Rt]=n,p[$n]=s||t&&t[$n],p[$e]=a||t&&t[$e],p[Ts]=u||t&&t[Ts]||null,p[hn]=o,p[gc]=vk(),p[pc]=h,p[im]=l,p[fn]=e.type==2?t[fn]:p,p}function Wk(t,e,n){let r=Dn(e,t),i=Gk(n),o=t[$n].rendererFactory,s=uy(t,cy(t,i,null,KC(n),r,e,null,o.createRenderer(r,n),null,null,null));return t[e.index]=s}function KC(t){let e=16;return t.signals?e=4096:t.onPush&&(e=64),e}function QC(t,e,n,r){if(n===0)return-1;let i=e.length;for(let o=0;o<n;o++)e.push(r),t.blueprint.push(r),t.data.push(null);return i}function uy(t,e){return t[Ss]?t[rm][dn]=e:t[Ss]=e,t[rm]=e,e}function $(t=1){YC(nn(),Te(),oi()+t,!1)}function YC(t,e,n,r){if(!r)if((e[ee]&3)===3){let o=t.preOrderCheckHooks;o!==null&&Id(e,o,n)}else{let o=t.preOrderHooks;o!==null&&wd(e,o,0,n)}si(n)}var zd=(function(t){return t[t.None=0]="None",t[t.SignalBased=1]="SignalBased",t[t.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",t})(zd||{});function Bm(t,e,n,r){let i=ie(null);try{let[o,s,a]=t.inputs[n],u=null;(s&zd.SignalBased)!==0&&(u=e[o][At]),u!==null&&u.transformFn!==void 0?r=u.transformFn(r):a!==null&&(r=a.call(e,r)),t.setInput!==null?t.setInput(e,u,r,n,o):hC(e,u,o,r)}finally{ie(i)}}var Wn=(function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t})(Wn||{}),Kk;function ly(t,e){return Kk(t,e)}var Gd=new Set;function Ms(t,e,n,r,i,o){if(r!=null){let s,a=!1;bn(r)?s=r:Hn(r)&&(a=!0,r=r[wn]);let u=pn(r);t===0&&n!==null?i==null?GC(e,n,u):Nd(e,n,u,i||null,!0):t===1&&n!==null?Nd(e,n,u,i||null,!0):t===2?zD(o,()=>{$k(e,u,a)}):t===3&&zD(o,()=>{e.destroyNode(u)}),s!=null&&aO(e,t,s,n,i)}}function Qk(t,e){ZC(t,e),e[wn]=null,e[hn]=null}function Yk(t,e,n,r,i,o){r[wn]=i,r[hn]=e,Wd(t,r,n,1,i,o)}function ZC(t,e){e[$n].changeDetectionScheduler?.notify(9),Wd(t,e,e[$e],2,null,null)}function Zk(t){let e=t[Ss];if(!e)return Sm(t[oe],t);for(;e;){let n=null;if(Hn(e))n=e[Ss];else{let r=e[Gt];r&&(n=r)}if(!n){for(;e&&!e[dn]&&e!==t;)Hn(e)&&Sm(e[oe],e),e=e[_t];e===null&&(e=t),Hn(e)&&Sm(e[oe],e),n=e&&e[dn]}e=n}}function dy(t,e){let n=t[vc],r=n.indexOf(e);n.splice(r,1)}function JC(t,e){if(no(e))return;let n=e[$e];n.destroyNode&&Wd(t,e,n,3,null,null),Zk(e)}function Sm(t,e){if(no(e))return;let n=ie(null);try{e[ee]&=-129,e[ee]|=256,e[en]&&tc(e[en]),eO(t,e),Xk(t,e),e[oe].type===1&&e[$e].destroy();let r=e[Xi];if(r!==null&&bn(e[_t])){r!==e[_t]&&dy(r,e);let i=e[to];i!==null&&i.detachView(t)}Vm(e)}finally{ie(n)}}function zD(t,e){if(t&&t[Vt]&&t[Vt].leave)if(t[Vt].skipLeaveAnimations)t[Vt].skipLeaveAnimations=!1;else{let n=t[Vt].leave,r=[];for(let i=0;i<n.length;i++){let o=n[i];r.push(o())}t[Vt].running=Promise.allSettled(r),t[Vt].leave=void 0}Jk(t,e)}function Jk(t,e){if(t&&t[Vt]&&t[Vt].running){t[Vt].running.then(()=>{t[Vt]&&t[Vt].running&&(t[Vt].running=void 0),Gd.delete(t),e()});return}e()}function Xk(t,e){let n=t.cleanup,r=e[Cs];if(n!==null)for(let s=0;s<n.length-1;s+=2)if(typeof n[s]=="string"){let a=n[s+3];a>=0?r[a]():r[-a].unsubscribe(),s+=2}else{let a=r[n[s+1]];n[s].call(a)}r!==null&&(e[Cs]=null);let i=e[mr];if(i!==null){e[mr]=null;for(let s=0;s<i.length;s++){let a=i[s];a()}}let o=e[mc];if(o!==null){e[mc]=null;for(let s of o)s.destroy()}}function eO(t,e){let n;if(t!=null&&(n=t.destroyHooks)!=null)for(let r=0;r<n.length;r+=2){let i=e[n[r]];if(!(i instanceof io)){let o=n[r+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){let a=i[o[s]],u=o[s+1];Pe(4,a,u);try{u.call(a)}finally{Pe(5,a,u)}}else{Pe(4,i,o);try{o.call(i)}finally{Pe(5,i,o)}}}}}function tO(t,e,n){return nO(t,e.parent,n)}function nO(t,e,n){let r=e;for(;r!==null&&r.type&168;)e=r,r=e.parent;if(r===null)return n[wn];if(ii(r)){let{encapsulation:i}=t.data[r.directiveStart+r.componentOffset];if(i===vr.None||i===vr.Emulated)return null}return Dn(r,n)}function rO(t,e,n){return oO(t,e,n)}function iO(t,e,n){return t.type&40?Dn(t,n):null}var oO=iO,GD;function hy(t,e,n,r){let i=tO(t,r,e),o=e[$e],s=r.parent||e[hn],a=rO(s,r,e);if(i!=null)if(Array.isArray(n))for(let u=0;u<n.length;u++)qD(o,i,n[u],a,!1);else qD(o,i,n,a,!1);GD!==void 0&&GD(o,r,e,n,i)}function Cc(t,e){if(e!==null){let n=e.type;if(n&3)return Dn(e,t);if(n&4)return $m(-1,t[e.index]);if(n&8){let r=e.child;if(r!==null)return Cc(t,r);{let i=t[e.index];return bn(i)?$m(-1,i):pn(i)}}else{if(n&128)return Cc(t,e.next);if(n&32)return ly(e,t)()||pn(t[e.index]);{let r=XC(t,e);if(r!==null){if(Array.isArray(r))return r[0];let i=Jr(t[fn]);return Cc(i,r)}else return Cc(t,e.next)}}}return null}function XC(t,e){if(e!==null){let r=t[fn][hn],i=e.projection;return r.projection[i]}return null}function $m(t,e){let n=Gt+t+1;if(n<e.length){let r=e[n],i=r[oe].firstChild;if(i!==null)return Cc(r,i)}return e[ri]}function fy(t,e,n,r,i,o,s){for(;n!=null;){if(n.type===128){n=n.next;continue}let a=r[n.index],u=n.type;if(s&&e===0&&(a&&xs(pn(a),r),n.flags|=2),!ry(n))if(u&8)fy(t,e,n.child,r,i,o,!1),Ms(e,t,i,a,o,r);else if(u&32){let l=ly(n,r),h;for(;h=l();)Ms(e,t,i,h,o,r);Ms(e,t,i,a,o,r)}else u&16?sO(t,e,r,n,i,o):Ms(e,t,i,a,o,r);n=s?n.projectionNext:n.next}}function Wd(t,e,n,r,i,o){fy(n,r,t.firstChild,e,i,o,!1)}function sO(t,e,n,r,i,o){let s=n[fn],u=s[hn].projection[r.projection];if(Array.isArray(u))for(let l=0;l<u.length;l++){let h=u[l];Ms(e,t,i,h,o,n)}else{let l=u,h=s[_t];AC(r)&&(l.flags|=128),fy(t,e,l,h,i,o,!0)}}function aO(t,e,n,r,i){let o=n[ri],s=pn(n);o!==s&&Ms(e,t,r,o,i);for(let a=Gt;a<n.length;a++){let u=n[a];Wd(u[oe],u,t,e,r,o)}}function cO(t,e,n,r,i){if(e)i?t.addClass(n,r):t.removeClass(n,r);else{let o=r.indexOf("-")===-1?void 0:Wn.DashCase;i==null?t.removeStyle(n,r,o):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),o|=Wn.Important),t.setStyle(n,r,i,o))}}function eT(t,e,n,r,i){let o=oi(),s=r&2;try{si(-1),s&&e.length>tn&&YC(t,e,tn,!1),Pe(s?2:0,i,n),n(r,i)}finally{si(o),Pe(s?3:1,i,n)}}function py(t,e,n){gO(t,e,n),(n.flags&64)===64&&mO(t,e,n)}function tT(t,e,n=Dn){let r=e.localNames;if(r!==null){let i=e.index+1;for(let o=0;o<r.length;o+=2){let s=r[o+1],a=s===-1?n(e,t):t[s];t[i++]=a}}}function uO(t,e,n,r){let o=r.get(OC,kC)||n===vr.ShadowDom,s=t.selectRootElement(e,o);return lO(s),s}function lO(t){dO(t)}var dO=()=>null;function hO(t){return t==="class"?"className":t==="for"?"htmlFor":t==="formaction"?"formAction":t==="innerHtml"?"innerHTML":t==="readonly"?"readOnly":t==="tabindex"?"tabIndex":t}function nT(t,e,n,r,i,o){let s=e[oe];if(gy(t,s,e,n,r)){ii(t)&&pO(e,t.index);return}t.type&3&&(n=hO(n)),fO(t,e,n,r,i,o)}function fO(t,e,n,r,i,o){if(t.type&3){let s=Dn(t,e);r=o!=null?o(r,t.value||"",n):r,i.setProperty(s,n,r)}else t.type&12}function pO(t,e){let n=gn(e,t);n[ee]&16||(n[ee]|=64)}function gO(t,e,n){let r=n.directiveStart,i=n.directiveEnd;ii(n)&&Wk(e,n,t.data[r+n.componentOffset]),t.firstCreatePass||Sd(n,e);let o=n.initialInputs;for(let s=r;s<i;s++){let a=t.data[s],u=Ad(e,t,s,n);if(xs(u,e),o!==null&&EO(e,s-r,u,a,n,o),qn(a)){let l=gn(n.index,e);l[Rt]=Ad(e,t,s,n)}}}function mO(t,e,n){let r=n.directiveStart,i=n.directiveEnd,o=n.index,s=CD();try{si(o);for(let a=r;a<i;a++){let u=t.data[a],l=e[a];dd(a),(u.hostBindings!==null||u.hostVars!==0||u.hostAttrs!==null)&&yO(u,l)}}finally{si(-1),dd(s)}}function yO(t,e){t.hostBindings!==null&&t.hostBindings(1,e)}function rT(t,e){let n=t.directiveRegistry,r=null;if(n)for(let i=0;i<n.length;i++){let o=n[i];kk(e,o.selectors,!1)&&(r??=[],qn(o)?r.unshift(o):r.push(o))}return r}function vO(t,e,n,r,i,o){let s=Dn(t,e);_O(e[$e],s,o,t.value,n,r,i)}function _O(t,e,n,r,i,o,s){if(o==null)t.removeAttribute(e,i,n);else{let a=s==null?Zi(o):s(o,r||"",i);t.setAttribute(e,i,a,n)}}function EO(t,e,n,r,i,o){let s=o[e];if(s!==null)for(let a=0;a<s.length;a+=2){let u=s[a],l=s[a+1];Bm(r,n,u,l)}}function IO(t,e,n,r,i){let o=tn+n,s=e[oe],a=i(s,e,t,r,n);e[o]=a,Rs(t,!0);let u=t.type===2;return u?(WC(e[$e],a,t),(hD()===0||_c(t))&&xs(a,e),fD()):xs(a,e),gd()&&(!u||!ry(t))&&hy(s,e,a,t),t}function wO(t){let e=t;return hm()?_D():(e=e.parent,Rs(e,!1)),e}function bO(t,e){let n=t[Ts];if(!n)return;let r;try{r=n.get(Wt,null)}catch{r=null}r?.(e)}function gy(t,e,n,r,i){let o=t.inputs?.[r],s=t.hostDirectiveInputs?.[r],a=!1;if(s)for(let u=0;u<s.length;u+=2){let l=s[u],h=s[u+1],p=e.data[l];Bm(p,n[l],h,i),a=!0}if(o)for(let u of o){let l=n[u],h=e.data[u];Bm(h,l,r,i),a=!0}return a}function DO(t,e){let n=gn(e,t),r=n[oe];CO(r,n);let i=n[wn];i!==null&&n[pc]===null&&(n[pc]=FC(i,n[Ts])),Pe(18),my(r,n,n[Rt]),Pe(19,n[Rt])}function CO(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}function my(t,e,n){hd(e);try{let r=t.viewQuery;r!==null&&Um(1,r,n);let i=t.template;i!==null&&eT(t,e,i,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),e[to]?.finishViewCreation(t),t.staticContentQueries&&LC(t,e),t.staticViewQueries&&Um(2,t.viewQuery,n);let o=t.components;o!==null&&TO(e,o)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),r}finally{e[ee]&=-5,fd()}}function TO(t,e){for(let n=0;n<e.length;n++)DO(t,e[n])}function SO(t,e,n,r){let i=ie(null);try{let o=e.tView,a=t[ee]&4096?4096:16,u=cy(t,o,n,a,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),l=t[e.index];u[Xi]=l;let h=t[to];return h!==null&&(u[to]=h.createEmbeddedView(o)),my(o,u,n),u}finally{ie(i)}}function WD(t,e){return!e||e.firstChild===null||AC(t)}function Ac(t,e,n,r,i=!1){for(;n!==null;){if(n.type===128){n=i?n.projectionNext:n.next;continue}let o=e[n.index];o!==null&&r.push(pn(o)),bn(o)&&iT(o,r);let s=n.type;if(s&8)Ac(t,e,n.child,r);else if(s&32){let a=ly(n,e),u;for(;u=a();)r.push(u)}else if(s&16){let a=XC(e,n);if(Array.isArray(a))r.push(...a);else{let u=Jr(e[fn]);Ac(u[oe],u,a,r,!0)}}n=i?n.projectionNext:n.next}return r}function iT(t,e){for(let n=Gt;n<t.length;n++){let r=t[n],i=r[oe].firstChild;i!==null&&Ac(r[oe],r,i,e)}t[ri]!==t[wn]&&e.push(t[ri])}function oT(t){if(t[ad]!==null){for(let e of t[ad])e.impl.addSequence(e);t[ad].length=0}}var sT=[];function AO(t){return t[en]??RO(t)}function RO(t){let e=sT.pop()??Object.create(MO);return e.lView=t,e}function NO(t){t.lView[en]!==t&&(t.lView=null,sT.push(t))}var MO=re(F({},is),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:t=>{wc(t.lView)},consumerOnSignalRead(){this.lView[en]=this}});function PO(t){let e=t[en]??Object.create(xO);return e.lView=t,e}var xO=re(F({},is),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:t=>{let e=Jr(t.lView);for(;e&&!aT(e[oe]);)e=Jr(e);e&&cm(e)},consumerOnSignalRead(){this.lView[en]=this}});function aT(t){return t.type!==2}function cT(t){if(t[mc]===null)return;let e=!0;for(;e;){let n=!1;for(let r of t[mc])r.dirty&&(n=!0,r.zone===null||Zone.current===r.zone?r.run():r.zone.run(()=>r.run()));e=n&&!!(t[ee]&8192)}}var kO=100;function uT(t,e=0){let r=t[$n].rendererFactory,i=!1;i||r.begin?.();try{OO(t,e)}finally{i||r.end?.()}}function OO(t,e){let n=fm();try{pm(!0),Hm(t,e);let r=0;for(;Ic(t);){if(r===kO)throw new H(103,!1);r++,Hm(t,1)}}finally{pm(n)}}function FO(t,e,n,r){if(no(e))return;let i=e[ee],o=!1,s=!1;hd(e);let a=!0,u=null,l=null;o||(aT(t)?(l=AO(e),u=ss(l)):Il()===null?(a=!1,l=PO(e),u=ss(l)):e[en]&&(tc(e[en]),e[en]=null));try{am(e),wD(t.bindingStartIndex),n!==null&&eT(t,e,n,2,r),LO(e);let h=(i&3)===3;if(!o)if(h){let y=t.preOrderCheckHooks;y!==null&&Id(e,y,null)}else{let y=t.preOrderHooks;y!==null&&wd(e,y,0,null),Cm(e,0)}if(s||VO(e),cT(e),lT(e,0),t.contentQueries!==null&&LC(t,e),!o)if(h){let y=t.contentCheckHooks;y!==null&&Id(e,y)}else{let y=t.contentHooks;y!==null&&wd(e,y,1),Cm(e,1)}UO(t,e);let p=t.components;p!==null&&hT(e,p,0);let m=t.viewQuery;if(m!==null&&Um(2,m,r),!o)if(h){let y=t.viewCheckHooks;y!==null&&Id(e,y)}else{let y=t.viewHooks;y!==null&&wd(e,y,2),Cm(e,2)}if(t.firstUpdatePass===!0&&(t.firstUpdatePass=!1),e[sd]){for(let y of e[sd])y();e[sd]=null}o||(oT(e),e[ee]&=-73)}catch(h){throw o||wc(e),h}finally{l!==null&&(Xa(l,u),a&&NO(l)),fd()}}function LO(t){let e=t[Vt];if(e?.enter){for(let n of e.enter)n();e.enter=void 0}}function lT(t,e){for(let n=NC(t);n!==null;n=MC(n))for(let r=Gt;r<n.length;r++){let i=n[r];dT(i,e)}}function VO(t){for(let e=NC(t);e!==null;e=MC(e)){if(!(e[ee]&2))continue;let n=e[vc];for(let r=0;r<n.length;r++){let i=n[r];cm(i)}}}function jO(t,e,n){Pe(18);let r=gn(e,t);dT(r,n),Pe(19,r[Rt])}function dT(t,e){ud(t)&&Hm(t,e)}function Hm(t,e){let r=t[oe],i=t[ee],o=t[en],s=!!(e===0&&i&16);if(s||=!!(i&64&&e===0),s||=!!(i&1024),s||=!!(o?.dirty&&ec(o)),s||=!1,o&&(o.dirty=!1),t[ee]&=-9217,s)FO(r,t,r.template,t[Rt]);else if(i&8192){let a=ie(null);try{cT(t),lT(t,1);let u=r.components;u!==null&&hT(t,u,1),oT(t)}finally{ie(a)}}}function hT(t,e,n){for(let r=0;r<e.length;r++)jO(t,e[r],n)}function UO(t,e){let n=t.hostBindingOpCodes;if(n!==null)try{for(let r=0;r<n.length;r++){let i=n[r];if(i<0)si(~i);else{let o=i,s=n[++r],a=n[++r];DD(s,o);let u=e[o];Pe(24,u),a(2,u),Pe(25,u)}}}finally{si(-1)}}function yy(t,e){let n=fm()?64:1088;for(t[$n].changeDetectionScheduler?.notify(e);t;){t[ee]|=n;let r=Jr(t);if(As(t)&&!r)return t;t=r}return null}function fT(t,e,n,r){return[t,!0,0,e,null,r,null,n,null,null]}function BO(t,e,n,r=!0){let i=e[oe];if($O(i,e,t,n),r){let s=$m(n,t),a=e[$e],u=a.parentNode(t[ri]);u!==null&&Yk(i,t[hn],a,e,u,s)}let o=e[pc];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function qm(t,e){if(t.length<=Gt)return;let n=Gt+e,r=t[n];if(r){let i=r[Xi];i!==null&&i!==t&&dy(i,r),e>0&&(t[n-1][dn]=r[dn]);let o=dc(t,Gt+e);Qk(r[oe],r);let s=o[to];s!==null&&s.detachView(o[oe]),r[_t]=null,r[dn]=null,r[ee]&=-129}return r}function $O(t,e,n,r){let i=Gt+r,o=n.length;r>0&&(n[i-1][dn]=e),r<o-Gt?(e[dn]=n[i],Qg(n,Gt+r,e)):(n.push(e),e[dn]=null),e[_t]=n;let s=e[Xi];s!==null&&n!==s&&pT(s,e);let a=e[to];a!==null&&a.insertView(t),ld(e),e[ee]|=128}function pT(t,e){let n=t[vc],r=e[_t];if(Hn(r))t[ee]|=2;else{let i=r[_t][fn];e[fn]!==i&&(t[ee]|=2)}n===null?t[vc]=[e]:n.push(e)}var ci=class{_lView;_cdRefInjectingView;_appRef=null;_attachedToViewContainer=!1;exhaustive;get rootNodes(){let e=this._lView,n=e[oe];return Ac(n,e,n.firstChild,[])}constructor(e,n){this._lView=e,this._cdRefInjectingView=n}get context(){return this._lView[Rt]}set context(e){this._lView[Rt]=e}get destroyed(){return no(this._lView)}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[_t];if(bn(e)){let n=e[yc],r=n?n.indexOf(this):-1;r>-1&&(qm(e,r),dc(n,r))}this._attachedToViewContainer=!1}JC(this._lView[oe],this._lView)}onDestroy(e){um(this._lView,e)}markForCheck(){yy(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[ee]&=-129}reattach(){ld(this._lView),this._lView[ee]|=128}detectChanges(){this._lView[ee]|=1024,uT(this._lView)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new H(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=As(this._lView),n=this._lView[Xi];n!==null&&!e&&dy(n,this._lView),ZC(this._lView[oe],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new H(902,!1);this._appRef=e;let n=As(this._lView),r=this._lView[Xi];r!==null&&!n&&pT(r,this._lView),ld(this._lView)}};var Pc=(()=>{class t{_declarationLView;_declarationTContainer;elementRef;static __NG_ELEMENT_ID__=HO;constructor(n,r,i){this._declarationLView=n,this._declarationTContainer=r,this.elementRef=i}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(n,r){return this.createEmbeddedViewImpl(n,r)}createEmbeddedViewImpl(n,r,i){let o=SO(this._declarationLView,this._declarationTContainer,n,{embeddedViewInjector:r,dehydratedView:i});return new ci(o)}}return t})();function HO(){return qO(jt(),Te())}function qO(t,e){return t.type&4?new Pc(e,t,jd(t,e)):null}function vy(t,e,n,r,i){let o=t.data[e];if(o===null)o=zO(t,e,n,r,i),bD()&&(o.flags|=32);else if(o.type&64){o.type=n,o.value=r,o.attrs=i;let s=vD();o.injectorIndex=s===null?-1:s.injectorIndex}return Rs(o,!0),o}function zO(t,e,n,r,i){let o=dm(),s=hm(),a=s?o:o&&o.parent,u=t.data[e]=WO(t,a,n,e,r,i);return GO(t,u,o,s),u}function GO(t,e,n,r){t.firstChild===null&&(t.firstChild=e),n!==null&&(r?n.child==null&&e.parent!==null&&(n.child=e):n.next===null&&(n.next=e,e.prev=n))}function WO(t,e,n,r,i,o){let s=e?e.injectorIndex:-1,a=0;return gD()&&(a|=128),{type:n,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:null,inputs:null,hostDirectiveInputs:null,outputs:null,hostDirectiveOutputs:null,directiveToIndex:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}var d7=new RegExp(`^(\\d+)*(${wk}|${Ik})*(.*)`);var KO=()=>null;function KD(t,e){return KO(t,e)}var gT=class{},Kd=class{},zm=class{resolveComponentFactory(e){throw new H(917,!1)}},xc=class{static NULL=new zm},oo=class{},uo=(()=>{class t{destroyNode=null;static __NG_ELEMENT_ID__=()=>QO()}return t})();function QO(){let t=Te(),e=jt(),n=gn(e.index,t);return(Hn(n)?n:t)[$e]}var mT=(()=>{class t{static \u0275prov=z({token:t,providedIn:"root",factory:()=>null})}return t})();var bd={},Gm=class{injector;parentInjector;constructor(e,n){this.injector=e,this.parentInjector=n}get(e,n,r){let i=this.injector.get(e,bd,r);return i!==bd||n===bd?i:this.parentInjector.get(e,n,r)}};function QD(t,e,n){let r=n?t.styles:null,i=n?t.classes:null,o=0;if(e!==null)for(let s=0;s<e.length;s++){let a=e[s];if(typeof a=="number")o=a;else if(o==1)i=jg(i,a);else if(o==2){let u=a,l=e[++s];r=jg(r,u+": "+l+";")}}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=i:t.classesWithoutHost=i}function pe(t,e=0){let n=Te();if(n===null)return Z(t,e);let r=jt();return CC(r,n,vt(t),e)}function yT(t,e,n,r,i){let o=r===null?null:{"":-1},s=i(t,n);if(s!==null){let a=s,u=null,l=null;for(let h of s)if(h.resolveHostDirectives!==null){[a,u,l]=h.resolveHostDirectives(s);break}JO(t,e,n,a,o,u,l)}o!==null&&r!==null&&YO(n,r,o)}function YO(t,e,n){let r=t.localNames=[];for(let i=0;i<e.length;i+=2){let o=n[e[i+1]];if(o==null)throw new H(-301,!1);r.push(e[i],o)}}function ZO(t,e,n){e.componentOffset=n,(t.components??=[]).push(e.index)}function JO(t,e,n,r,i,o,s){let a=r.length,u=!1;for(let m=0;m<a;m++){let y=r[m];!u&&qn(y)&&(u=!0,ZO(t,n,m)),Fm(Sd(n,e),t,y.type)}i1(n,t.data.length,a);for(let m=0;m<a;m++){let y=r[m];y.providersResolver&&y.providersResolver(y)}let l=!1,h=!1,p=QC(t,e,a,null);a>0&&(n.directiveToIndex=new Map);for(let m=0;m<a;m++){let y=r[m];if(n.mergedAttrs=Sc(n.mergedAttrs,y.hostAttrs),e1(t,n,e,p,y),r1(p,y,i),s!==null&&s.has(y)){let[P,M]=s.get(y);n.directiveToIndex.set(y.type,[p,P+n.directiveStart,M+n.directiveStart])}else(o===null||!o.has(y))&&n.directiveToIndex.set(y.type,p);y.contentQueries!==null&&(n.flags|=4),(y.hostBindings!==null||y.hostAttrs!==null||y.hostVars!==0)&&(n.flags|=64);let S=y.type.prototype;!l&&(S.ngOnChanges||S.ngOnInit||S.ngDoCheck)&&((t.preOrderHooks??=[]).push(n.index),l=!0),!h&&(S.ngOnChanges||S.ngDoCheck)&&((t.preOrderCheckHooks??=[]).push(n.index),h=!0),p++}XO(t,n,o)}function XO(t,e,n){for(let r=e.directiveStart;r<e.directiveEnd;r++){let i=t.data[r];if(n===null||!n.has(i))YD(0,e,i,r),YD(1,e,i,r),JD(e,r,!1);else{let o=n.get(i);ZD(0,e,o,r),ZD(1,e,o,r),JD(e,r,!0)}}}function YD(t,e,n,r){let i=t===0?n.inputs:n.outputs;for(let o in i)if(i.hasOwnProperty(o)){let s;t===0?s=e.inputs??={}:s=e.outputs??={},s[o]??=[],s[o].push(r),vT(e,o)}}function ZD(t,e,n,r){let i=t===0?n.inputs:n.outputs;for(let o in i)if(i.hasOwnProperty(o)){let s=i[o],a;t===0?a=e.hostDirectiveInputs??={}:a=e.hostDirectiveOutputs??={},a[s]??=[],a[s].push(r,o),vT(e,s)}}function vT(t,e){e==="class"?t.flags|=8:e==="style"&&(t.flags|=16)}function JD(t,e,n){let{attrs:r,inputs:i,hostDirectiveInputs:o}=t;if(r===null||!n&&i===null||n&&o===null||sy(t)){t.initialInputs??=[],t.initialInputs.push(null);return}let s=null,a=0;for(;a<r.length;){let u=r[a];if(u===0){a+=4;continue}else if(u===5){a+=2;continue}else if(typeof u=="number")break;if(!n&&i.hasOwnProperty(u)){let l=i[u];for(let h of l)if(h===e){s??=[],s.push(u,r[a+1]);break}}else if(n&&o.hasOwnProperty(u)){let l=o[u];for(let h=0;h<l.length;h+=2)if(l[h]===e){s??=[],s.push(l[h+1],r[a+1]);break}}a+=2}t.initialInputs??=[],t.initialInputs.push(s)}function e1(t,e,n,r,i){t.data[r]=i;let o=i.factory||(i.factory=Wi(i.type,!0)),s=new io(o,qn(i),pe,null);t.blueprint[r]=s,n[r]=s,t1(t,e,r,QC(t,n,i.hostVars,Sn),i)}function t1(t,e,n,r,i){let o=i.hostBindings;if(o){let s=t.hostBindingOpCodes;s===null&&(s=t.hostBindingOpCodes=[]);let a=~e.index;n1(s)!=a&&s.push(a),s.push(n,r,o)}}function n1(t){let e=t.length;for(;e>0;){let n=t[--e];if(typeof n=="number"&&n<0)return n}return 0}function r1(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;qn(e)&&(n[""]=t)}}function i1(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function _T(t,e,n,r,i,o,s,a){let u=e[oe],l=u.consts,h=Ec(l,s),p=vy(u,t,n,r,h);return o&&yT(u,e,p,Ec(l,a),i),p.mergedAttrs=Sc(p.mergedAttrs,p.attrs),p.attrs!==null&&QD(p,p.attrs,!1),p.mergedAttrs!==null&&QD(p,p.mergedAttrs,!0),u.queries!==null&&u.queries.elementStart(u,p),p}function ET(t,e){mC(t,e),om(e)&&t.queries.elementEnd(e)}function _y(t){return wT(t)?Array.isArray(t)||!(t instanceof Map)&&Symbol.iterator in t:!1}function IT(t,e){if(Array.isArray(t))for(let n=0;n<t.length;n++)e(t[n]);else{let n=t[Symbol.iterator](),r;for(;!(r=n.next()).done;)e(r.value)}}function wT(t){return t!==null&&(typeof t=="function"||typeof t=="object")}function o1(t,e,n){return t[e]=n}function s1(t,e){return t[e]}function so(t,e,n){if(n===Sn)return!1;let r=t[e];return Object.is(r,n)?!1:(t[e]=n,!0)}function a1(t,e,n,r){let i=so(t,e,n);return so(t,e+1,r)||i}function Am(t,e,n){return function r(i){let o=ii(t)?gn(t.index,e):e;yy(o,5);let s=e[Rt],a=XD(e,s,n,i),u=r.__ngNextListenerFn__;for(;u;)a=XD(e,s,u,i)&&a,u=u.__ngNextListenerFn__;return a}}function XD(t,e,n,r){let i=ie(null);try{return Pe(6,e,n),n(r)!==!1}catch(o){return bO(t,o),!1}finally{Pe(7,e,n),ie(i)}}function c1(t,e,n,r,i,o,s,a){let u=_c(t),l=!1,h=null;if(!r&&u&&(h=l1(e,n,o,t.index)),h!==null){let p=h.__ngLastListenerFn__||h;p.__ngNextListenerFn__=s,h.__ngLastListenerFn__=s,l=!0}else{let p=Dn(t,n),m=r?r(p):p;Dk(n,m,o,a);let y=i.listen(m,o,a);if(!u1(o)){let S=r?P=>r(pn(P[t.index])):t.index;bT(S,e,n,o,a,y,!1)}}return l}function u1(t){return t.startsWith("animation")||t.startsWith("transition")}function l1(t,e,n,r){let i=t.cleanup;if(i!=null)for(let o=0;o<i.length-1;o+=2){let s=i[o];if(s===n&&i[o+1]===r){let a=e[Cs],u=i[o+2];return a&&a.length>u?a[u]:null}typeof s=="string"&&(o+=2)}return null}function bT(t,e,n,r,i,o,s){let a=e.firstCreatePass?dD(e):null,u=lD(n),l=u.length;u.push(i,o),a&&a.push(r,t,l,(l+1)*(s?-1:1))}function eC(t,e,n,r,i,o){let s=e[n],a=e[oe],l=a.data[n].outputs[r],p=s[l].subscribe(o);bT(t.index,a,e,i,o,p,!0)}var Wm=Symbol("BINDING");var Md=class extends xc{ngModule;constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let n=ni(e);return new ks(n,this.ngModule)}};function d1(t){return Object.keys(t).map(e=>{let[n,r,i]=t[e],o={propName:n,templateName:e,isSignal:(r&zd.SignalBased)!==0};return i&&(o.transform=i),o})}function h1(t){return Object.keys(t).map(e=>({propName:t[e],templateName:e}))}function f1(t,e,n){let r=e instanceof Ke?e:e?.injector;return r&&t.getStandaloneInjector!==null&&(r=t.getStandaloneInjector(r)||r),r?new Gm(n,r):n}function p1(t){let e=t.get(oo,null);if(e===null)throw new H(407,!1);let n=t.get(mT,null),r=t.get(Xr,null);return{rendererFactory:e,sanitizer:n,changeDetectionScheduler:r,ngReflect:!1}}function g1(t,e){let n=DT(t);return zC(e,n,n==="svg"?oD:n==="math"?sD:null)}function DT(t){return(t.selectors[0][0]||"div").toLowerCase()}var ks=class extends Kd{componentDef;ngModule;selector;componentType;ngContentSelectors;isBoundToModule;cachedInputs=null;cachedOutputs=null;get inputs(){return this.cachedInputs??=d1(this.componentDef.inputs),this.cachedInputs}get outputs(){return this.cachedOutputs??=h1(this.componentDef.outputs),this.cachedOutputs}constructor(e,n){super(),this.componentDef=e,this.ngModule=n,this.componentType=e.type,this.selector=Vk(e.selectors),this.ngContentSelectors=e.ngContentSelectors??[],this.isBoundToModule=!!n}create(e,n,r,i,o,s){Pe(22);let a=ie(null);try{let u=this.componentDef,l=m1(r,u,s,o),h=f1(u,i||this.ngModule,e),p=p1(h),m=p.rendererFactory.createRenderer(null,u),y=r?uO(m,r,u.encapsulation,h):g1(u,m),S=s?.some(tC)||o?.some(j=>typeof j!="function"&&j.bindings.some(tC)),P=cy(null,l,null,512|KC(u),null,null,p,m,h,null,FC(y,h,!0));P[tn]=y,hd(P);let M=null;try{let j=_T(tn,P,2,"#host",()=>l.directiveRegistry,!0,0);y&&(WC(m,y,j),xs(y,P)),py(l,P,j),VC(l,j,P),ET(l,j),n!==void 0&&v1(j,this.ngContentSelectors,n),M=gn(j.index,P),P[Rt]=M[Rt],my(l,P,null)}catch(j){throw M!==null&&Vm(M),Vm(P),j}finally{Pe(23),fd()}return new Pd(this.componentType,P,!!S)}finally{ie(a)}}};function m1(t,e,n,r){let i=t?["ng-version","20.3.1"]:jk(e.selectors[0]),o=null,s=null,a=0;if(n)for(let h of n)a+=h[Wm].requiredVars,h.create&&(h.targetIdx=0,(o??=[]).push(h)),h.update&&(h.targetIdx=0,(s??=[]).push(h));if(r)for(let h=0;h<r.length;h++){let p=r[h];if(typeof p!="function")for(let m of p.bindings){a+=m[Wm].requiredVars;let y=h+1;m.create&&(m.targetIdx=y,(o??=[]).push(m)),m.update&&(m.targetIdx=y,(s??=[]).push(m))}}let u=[e];if(r)for(let h of r){let p=typeof h=="function"?h:h.type,m=Xg(p);u.push(m)}return ay(0,null,y1(o,s),1,a,u,null,null,null,[i],null)}function y1(t,e){return!t&&!e?null:n=>{if(n&1&&t)for(let r of t)r.create();if(n&2&&e)for(let r of e)r.update()}}function tC(t){let e=t[Wm].kind;return e==="input"||e==="twoWay"}var Pd=class extends gT{_rootLView;_hasInputBindings;instance;hostView;changeDetectorRef;componentType;location;previousInputValues=null;_tNode;constructor(e,n,r){super(),this._rootLView=n,this._hasInputBindings=r,this._tNode=cd(n[oe],tn),this.location=jd(this._tNode,n),this.instance=gn(this._tNode.index,n)[Rt],this.hostView=this.changeDetectorRef=new ci(n,void 0),this.componentType=e}setInput(e,n){this._hasInputBindings;let r=this._tNode;if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),n))return;let i=this._rootLView,o=gy(r,i[oe],i,e,n);this.previousInputValues.set(e,n);let s=gn(r.index,i);yy(s,1)}get injector(){return new ro(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function v1(t,e,n){let r=t.projection=[];for(let i=0;i<e.length;i++){let o=n[i];r.push(o!=null&&o.length?Array.from(o):null)}}var lo=(()=>{class t{static __NG_ELEMENT_ID__=_1}return t})();function _1(){let t=jt();return I1(t,Te())}var E1=lo,CT=class extends E1{_lContainer;_hostTNode;_hostLView;constructor(e,n,r){super(),this._lContainer=e,this._hostTNode=n,this._hostLView=r}get element(){return jd(this._hostTNode,this._hostLView)}get injector(){return new ro(this._hostTNode,this._hostLView)}get parentInjector(){let e=ey(this._hostTNode,this._hostLView);if(_C(e)){let n=Td(e,this._hostLView),r=Cd(e),i=n[oe].data[r+8];return new ro(i,n)}else return new ro(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let n=nC(this._lContainer);return n!==null&&n[e]||null}get length(){return this._lContainer.length-Gt}createEmbeddedView(e,n,r){let i,o;typeof r=="number"?i=r:r!=null&&(i=r.index,o=r.injector);let s=KD(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(n||{},o,s);return this.insertImpl(a,i,WD(this._hostTNode,s)),a}createComponent(e,n,r,i,o,s,a){let u=e&&!Yx(e),l;if(u)l=n;else{let M=n||{};l=M.index,r=M.injector,i=M.projectableNodes,o=M.environmentInjector||M.ngModuleRef,s=M.directives,a=M.bindings}let h=u?e:new ks(ni(e)),p=r||this.parentInjector;if(!o&&h.ngModule==null){let j=(u?p:this.parentInjector).get(Ke,null);j&&(o=j)}let m=ni(h.componentType??{}),y=KD(this._lContainer,m?.id??null),S=y?.firstChild??null,P=h.create(p,i,S,o,s,a);return this.insertImpl(P.hostView,l,WD(this._hostTNode,y)),P}insert(e,n){return this.insertImpl(e,n,!0)}insertImpl(e,n,r){let i=e._lView;if(aD(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let u=i[_t],l=new CT(u,u[hn],u[_t]);l.detach(l.indexOf(e))}}let o=this._adjustIndex(n),s=this._lContainer;return BO(s,i,o,r),e.attachToViewContainerRef(),Qg(Rm(s),o,e),e}move(e,n){return this.insert(e,n)}indexOf(e){let n=nC(this._lContainer);return n!==null?n.indexOf(e):-1}remove(e){let n=this._adjustIndex(e,-1),r=qm(this._lContainer,n);r&&(dc(Rm(this._lContainer),n),JC(r[oe],r))}detach(e){let n=this._adjustIndex(e,-1),r=qm(this._lContainer,n);return r&&dc(Rm(this._lContainer),n)!=null?new ci(r):null}_adjustIndex(e,n=0){return e??this.length+n}};function nC(t){return t[yc]}function Rm(t){return t[yc]||(t[yc]=[])}function I1(t,e){let n,r=e[t.index];return bn(r)?n=r:(n=fT(r,e,null,t),e[t.index]=n,uy(e,n)),b1(n,e,t,r),new CT(n,t,e)}function w1(t,e){let n=t[$e],r=n.createComment(""),i=Dn(e,t),o=n.parentNode(i);return Nd(n,o,r,n.nextSibling(i),!1),r}var b1=T1,D1=()=>!1;function C1(t,e,n){return D1(t,e,n)}function T1(t,e,n,r){if(t[ri])return;let i;n.type&8?i=pn(r):i=w1(e,n),t[ri]=i}var rC=new Set;function Ey(t){rC.has(t)||(rC.add(t),performance?.mark?.("mark_feature_usage",{detail:{feature:t}}))}var ao=class{},Qd=class{};var xd=class extends ao{ngModuleType;_parent;_bootstrapComponents=[];_r3Injector;instance;destroyCbs=[];componentFactoryResolver=new Md(this);constructor(e,n,r,i=!0){super(),this.ngModuleType=e,this._parent=n;let o=Jg(e);this._bootstrapComponents=HC(o.bootstrap),this._r3Injector=_m(e,n,[{provide:ao,useValue:this},{provide:xc,useValue:this.componentFactoryResolver},...r],yr(e),new Set(["environment"])),i&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},kd=class extends Qd{moduleType;constructor(e){super(),this.moduleType=e}create(e){return new xd(this.moduleType,e,[])}};var Rc=class extends ao{injector;componentFactoryResolver=new Md(this);instance=null;constructor(e){super();let n=new Qi([...e.providers,{provide:ao,useValue:this},{provide:xc,useValue:this.componentFactoryResolver}],e.parent||fc(),e.debugName,new Set(["environment"]));this.injector=n,e.runEnvironmentInitializers&&n.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function kc(t,e,n=null){return new Rc({providers:t,parent:e,debugName:n,runEnvironmentInitializers:!0}).injector}var S1=(()=>{class t{_injector;cachedInjectors=new Map;constructor(n){this._injector=n}getOrCreateStandaloneInjector(n){if(!n.standalone)return null;if(!this.cachedInjectors.has(n)){let r=em(!1,n.type),i=r.length>0?kc([r],this._injector,`Standalone[${n.type.name}]`):null;this.cachedInjectors.set(n,i)}return this.cachedInjectors.get(n)}ngOnDestroy(){try{for(let n of this.cachedInjectors.values())n!==null&&n.destroy()}finally{this.cachedInjectors.clear()}}static \u0275prov=z({token:t,providedIn:"environment",factory:()=>new t(Z(Ke))})}return t})();function It(t){return Fs(()=>{let e=TT(t),n=re(F({},e),{decls:t.decls,vars:t.vars,template:t.template,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,onPush:t.changeDetection===ty.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&t.dependencies||null,getStandaloneInjector:e.standalone?i=>i.get(S1).getOrCreateStandaloneInjector(n):null,getExternalStyles:null,signals:t.signals??!1,data:t.data||{},encapsulation:t.encapsulation||vr.Emulated,styles:t.styles||Xt,_:null,schemas:t.schemas||null,tView:null,id:""});e.standalone&&Ey("NgStandalone"),ST(n);let r=t.dependencies;return n.directiveDefs=iC(r,A1),n.pipeDefs=iC(r,Jb),n.id=M1(n),n})}function A1(t){return ni(t)||Xg(t)}function Er(t){return Fs(()=>({type:t.type,bootstrap:t.bootstrap||Xt,declarations:t.declarations||Xt,imports:t.imports||Xt,exports:t.exports||Xt,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null}))}function R1(t,e){if(t==null)return ei;let n={};for(let r in t)if(t.hasOwnProperty(r)){let i=t[r],o,s,a,u;Array.isArray(i)?(a=i[0],o=i[1],s=i[2]??o,u=i[3]||null):(o=i,s=i,a=zd.None,u=null),n[o]=[r,a,u],e[o]=s}return n}function N1(t){if(t==null)return ei;let e={};for(let n in t)t.hasOwnProperty(n)&&(e[t[n]]=n);return e}function Ye(t){return Fs(()=>{let e=TT(t);return ST(e),e})}function TT(t){let e={};return{type:t.type,providersResolver:null,factory:null,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputConfig:t.inputs||ei,exportAs:t.exportAs||null,standalone:t.standalone??!0,signals:t.signals===!0,selectors:t.selectors||Xt,viewQuery:t.viewQuery||null,features:t.features||null,setInput:null,resolveHostDirectives:null,hostDirectives:null,inputs:R1(t.inputs,e),outputs:N1(t.outputs),debugInfo:null}}function ST(t){t.features?.forEach(e=>e(t))}function iC(t,e){return t?()=>{let n=typeof t=="function"?t():t,r=[];for(let i of n){let o=e(i);o!==null&&r.push(o)}return r}:null}function M1(t){let e=0,n=typeof t.consts=="function"?"":t.consts,r=[t.selectors,t.ngContentSelectors,t.hostVars,t.hostAttrs,n,t.vars,t.decls,t.encapsulation,t.standalone,t.signals,t.exportAs,JSON.stringify(t.inputs),JSON.stringify(t.outputs),Object.getOwnPropertyNames(t.type.prototype),!!t.contentQueries,!!t.viewQuery];for(let o of r.join("|"))e=Math.imul(31,e)+o.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function P1(t){return Object.getPrototypeOf(t.prototype).constructor}function An(t){let e=P1(t.type),n=!0,r=[t];for(;e;){let i;if(qn(t))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new H(903,!1);i=e.\u0275dir}if(i){if(n){r.push(i);let s=t;s.inputs=Nm(t.inputs),s.declaredInputs=Nm(t.declaredInputs),s.outputs=Nm(t.outputs);let a=i.hostBindings;a&&L1(t,a);let u=i.viewQuery,l=i.contentQueries;if(u&&O1(t,u),l&&F1(t,l),x1(t,i),qb(t.outputs,i.outputs),qn(i)&&i.data.animation){let h=t.data;h.animation=(h.animation||[]).concat(i.data.animation)}}let o=i.features;if(o)for(let s=0;s<o.length;s++){let a=o[s];a&&a.ngInherit&&a(t),a===An&&(n=!1)}}e=Object.getPrototypeOf(e)}k1(r)}function x1(t,e){for(let n in e.inputs){if(!e.inputs.hasOwnProperty(n)||t.inputs.hasOwnProperty(n))continue;let r=e.inputs[n];r!==void 0&&(t.inputs[n]=r,t.declaredInputs[n]=e.declaredInputs[n])}}function k1(t){let e=0,n=null;for(let r=t.length-1;r>=0;r--){let i=t[r];i.hostVars=e+=i.hostVars,i.hostAttrs=Sc(i.hostAttrs,n=Sc(n,i.hostAttrs))}}function Nm(t){return t===ei?{}:t===Xt?[]:t}function O1(t,e){let n=t.viewQuery;n?t.viewQuery=(r,i)=>{e(r,i),n(r,i)}:t.viewQuery=e}function F1(t,e){let n=t.contentQueries;n?t.contentQueries=(r,i,o)=>{e(r,i,o),n(r,i,o)}:t.contentQueries=e}function L1(t,e){let n=t.hostBindings;n?t.hostBindings=(r,i)=>{e(r,i),n(r,i)}:t.hostBindings=e}function V1(t,e,n,r,i,o,s,a){if(n.firstCreatePass){t.mergedAttrs=Sc(t.mergedAttrs,t.attrs);let h=t.tView=ay(2,t,i,o,s,n.directiveRegistry,n.pipeRegistry,null,n.schemas,n.consts,null);n.queries!==null&&(n.queries.template(n,t),h.queries=n.queries.embeddedTView(t))}a&&(t.flags|=a),Rs(t,!1);let u=U1(n,e,t,r);gd()&&hy(n,e,u,t),xs(u,e);let l=fT(u,e,u,t);e[r+tn]=l,uy(e,l),C1(l,t,e)}function j1(t,e,n,r,i,o,s,a,u,l,h){let p=n+tn,m;return e.firstCreatePass?(m=vy(e,p,4,s||null,a||null),lm()&&yT(e,t,m,Ec(e.consts,l),rT),mC(e,m)):m=e.data[p],V1(m,t,e,n,r,i,o,u),_c(m)&&py(e,t,m),l!=null&&tT(t,m,h),m}function Fe(t,e,n,r,i,o,s,a){let u=Te(),l=nn(),h=Ec(l.consts,o);return j1(u,l,t,e,n,r,i,h,void 0,s,a),Fe}var U1=B1;function B1(t,e,n,r){return md(!0),e[$e].createComment("")}var Iy=(function(t){return t[t.CHANGE_DETECTION=0]="CHANGE_DETECTION",t[t.AFTER_NEXT_RENDER=1]="AFTER_NEXT_RENDER",t})(Iy||{}),Oc=new q(""),AT=!1,Km=class extends Ge{__isAsync;destroyRef=void 0;pendingTasks=void 0;constructor(e=!1){super(),this.__isAsync=e,rD()&&(this.destroyRef=R(ai,{optional:!0})??void 0,this.pendingTasks=R(zn,{optional:!0})??void 0)}emit(e){let n=ie(null);try{super.next(e)}finally{ie(n)}}subscribe(e,n,r){let i=e,o=n||(()=>null),s=r;if(e&&typeof e=="object"){let u=e;i=u.next?.bind(u),o=u.error?.bind(u),s=u.complete?.bind(u)}this.__isAsync&&(o=this.wrapInTimeout(o),i&&(i=this.wrapInTimeout(i)),s&&(s=this.wrapInTimeout(s)));let a=super.subscribe({next:i,error:o,complete:s});return e instanceof Ue&&e.add(a),a}wrapInTimeout(e){return n=>{let r=this.pendingTasks?.add();setTimeout(()=>{try{e(n)}finally{r!==void 0&&this.pendingTasks?.remove(r)}})}}},Qe=Km;function RT(t){let e,n;function r(){t=Dc;try{n!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(n),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{t(),r()}),typeof requestAnimationFrame=="function"&&(n=requestAnimationFrame(()=>{t(),r()})),()=>r()}function oC(t){return queueMicrotask(()=>t()),()=>{t=Dc}}var wy="isAngularZone",Od=wy+"_ID",$1=0,Se=class t{hasPendingMacrotasks=!1;hasPendingMicrotasks=!1;isStable=!0;onUnstable=new Qe(!1);onMicrotaskEmpty=new Qe(!1);onStable=new Qe(!1);onError=new Qe(!1);constructor(e){let{enableLongStackTrace:n=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:o=AT}=e;if(typeof Zone>"u")throw new H(908,!1);Zone.assertZonePatched();let s=this;s._nesting=0,s._outer=s._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(s._inner=s._inner.fork(new Zone.TaskTrackingZoneSpec)),n&&Zone.longStackTraceZoneSpec&&(s._inner=s._inner.fork(Zone.longStackTraceZoneSpec)),s.shouldCoalesceEventChangeDetection=!i&&r,s.shouldCoalesceRunChangeDetection=i,s.callbackScheduled=!1,s.scheduleInRootZone=o,z1(s)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(wy)===!0}static assertInAngularZone(){if(!t.isInAngularZone())throw new H(909,!1)}static assertNotInAngularZone(){if(t.isInAngularZone())throw new H(909,!1)}run(e,n,r){return this._inner.run(e,n,r)}runTask(e,n,r,i){let o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,e,H1,Dc,Dc);try{return o.runTask(s,n,r)}finally{o.cancelTask(s)}}runGuarded(e,n,r){return this._inner.runGuarded(e,n,r)}runOutsideAngular(e){return this._outer.run(e)}},H1={};function by(t){if(t._nesting==0&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function q1(t){if(t.isCheckStableRunning||t.callbackScheduled)return;t.callbackScheduled=!0;function e(){RT(()=>{t.callbackScheduled=!1,Qm(t),t.isCheckStableRunning=!0,by(t),t.isCheckStableRunning=!1})}t.scheduleInRootZone?Zone.root.run(()=>{e()}):t._outer.run(()=>{e()}),Qm(t)}function z1(t){let e=()=>{q1(t)},n=$1++;t._inner=t._inner.fork({name:"angular",properties:{[wy]:!0,[Od]:n,[Od+n]:!0},onInvokeTask:(r,i,o,s,a,u)=>{if(G1(u))return r.invokeTask(o,s,a,u);try{return sC(t),r.invokeTask(o,s,a,u)}finally{(t.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||t.shouldCoalesceRunChangeDetection)&&e(),aC(t)}},onInvoke:(r,i,o,s,a,u,l)=>{try{return sC(t),r.invoke(o,s,a,u,l)}finally{t.shouldCoalesceRunChangeDetection&&!t.callbackScheduled&&!W1(u)&&e(),aC(t)}},onHasTask:(r,i,o,s)=>{r.hasTask(o,s),i===o&&(s.change=="microTask"?(t._hasPendingMicrotasks=s.microTask,Qm(t),by(t)):s.change=="macroTask"&&(t.hasPendingMacrotasks=s.macroTask))},onHandleError:(r,i,o,s)=>(r.handleError(o,s),t.runOutsideAngular(()=>t.onError.emit(s)),!1)})}function Qm(t){t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&t.callbackScheduled===!0?t.hasPendingMicrotasks=!0:t.hasPendingMicrotasks=!1}function sC(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function aC(t){t._nesting--,by(t)}var Fd=class{hasPendingMicrotasks=!1;hasPendingMacrotasks=!1;isStable=!0;onUnstable=new Qe;onMicrotaskEmpty=new Qe;onStable=new Qe;onError=new Qe;run(e,n,r){return e.apply(n,r)}runGuarded(e,n,r){return e.apply(n,r)}runOutsideAngular(e){return e()}runTask(e,n,r,i){return e.apply(n,r)}};function G1(t){return NT(t,"__ignore_ng_zone__")}function W1(t){return NT(t,"__scheduler_tick__")}function NT(t,e){return!Array.isArray(t)||t.length!==1?!1:t[0]?.data?.[e]===!0}var MT=(()=>{class t{impl=null;execute(){this.impl?.execute()}static \u0275prov=z({token:t,providedIn:"root",factory:()=>new t})}return t})();var Dy=(()=>{class t{log(n){console.log(n)}warn(n){console.warn(n)}static \u0275fac=function(r){return new(r||t)};static \u0275prov=z({token:t,factory:t.\u0275fac,providedIn:"platform"})}return t})();var Cy=new q("");function hi(t){return!!t&&typeof t.then=="function"}function Ty(t){return!!t&&typeof t.subscribe=="function"}var PT=new q("");var Sy=(()=>{class t{resolve;reject;initialized=!1;done=!1;donePromise=new Promise((n,r)=>{this.resolve=n,this.reject=r});appInits=R(PT,{optional:!0})??[];injector=R(Ne);constructor(){}runInitializers(){if(this.initialized)return;let n=[];for(let i of this.appInits){let o=Me(this.injector,i);if(hi(o))n.push(o);else if(Ty(o)){let s=new Promise((a,u)=>{o.subscribe({complete:a,error:u})});n.push(s)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(n).then(()=>{r()}).catch(i=>{this.reject(i)}),n.length===0&&r(),this.initialized=!0}static \u0275fac=function(r){return new(r||t)};static \u0275prov=z({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),Yd=new q("");function xT(){og(()=>{let t="";throw new H(600,t)})}function kT(t){return t.isBoundToModule}var K1=10;var fi=(()=>{class t{_runningTick=!1;_destroyed=!1;_destroyListeners=[];_views=[];internalErrorHandler=R(Wt);afterRenderManager=R(MT);zonelessEnabled=R(yd);rootEffectScheduler=R(Dm);dirtyFlags=0;tracingSnapshot=null;allTestViews=new Set;autoDetectTestViews=new Set;includeAllTestViews=!1;afterTick=new Ge;get allViews(){return[...(this.includeAllTestViews?this.allTestViews:this.autoDetectTestViews).keys(),...this._views]}get destroyed(){return this._destroyed}componentTypes=[];components=[];internalPendingTask=R(zn);get isStable(){return this.internalPendingTask.hasPendingTasksObservable.pipe(he(n=>!n))}constructor(){R(Oc,{optional:!0})}whenStable(){let n;return new Promise(r=>{n=this.isStable.subscribe({next:i=>{i&&r()}})}).finally(()=>{n.unsubscribe()})}_injector=R(Ke);_rendererFactory=null;get injector(){return this._injector}bootstrap(n,r){return this.bootstrapImpl(n,r)}bootstrapImpl(n,r,i=Ne.NULL){return this._injector.get(Se).run(()=>{Pe(10);let s=n instanceof Kd;if(!this._injector.get(Sy).done){let S="";throw new H(405,S)}let u;s?u=n:u=this._injector.get(xc).resolveComponentFactory(n),this.componentTypes.push(u.componentType);let l=kT(u)?void 0:this._injector.get(ao),h=r||u.selector,p=u.create(i,[],h,l),m=p.location.nativeElement,y=p.injector.get(Cy,null);return y?.registerApplication(m),p.onDestroy(()=>{this.detachView(p.hostView),Tc(this.components,p),y?.unregisterApplication(m)}),this._loadComponent(p),Pe(11,p),p})}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){Pe(12),this.tracingSnapshot!==null?this.tracingSnapshot.run(Iy.CHANGE_DETECTION,this.tickImpl):this.tickImpl()}tickImpl=()=>{if(this._runningTick)throw new H(101,!1);let n=ie(null);try{this._runningTick=!0,this.synchronize()}finally{this._runningTick=!1,this.tracingSnapshot?.dispose(),this.tracingSnapshot=null,ie(n),this.afterTick.next(),Pe(13)}};synchronize(){this._rendererFactory===null&&!this._injector.destroyed&&(this._rendererFactory=this._injector.get(oo,null,{optional:!0}));let n=0;for(;this.dirtyFlags!==0&&n++<K1;)Pe(14),this.synchronizeOnce(),Pe(15)}synchronizeOnce(){this.dirtyFlags&16&&(this.dirtyFlags&=-17,this.rootEffectScheduler.flush());let n=!1;if(this.dirtyFlags&7){let r=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8;for(let{_lView:i}of this.allViews){if(!r&&!Ic(i))continue;let o=r&&!this.zonelessEnabled?0:1;uT(i,o),n=!0}if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&23)return}n||(this._rendererFactory?.begin?.(),this._rendererFactory?.end?.()),this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:n})=>Ic(n))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(n){let r=n;this._views.push(r),r.attachToAppRef(this)}detachView(n){let r=n;Tc(this._views,r),r.detachFromAppRef()}_loadComponent(n){this.attachView(n.hostView);try{this.tick()}catch(i){this.internalErrorHandler(i)}this.components.push(n),this._injector.get(Yd,[]).forEach(i=>i(n))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(n=>n()),this._views.slice().forEach(n=>n.destroy())}finally{this._destroyed=!0,this._views=[],this._destroyListeners=[]}}onDestroy(n){return this._destroyListeners.push(n),()=>Tc(this._destroyListeners,n)}destroy(){if(this._destroyed)throw new H(406,!1);let n=this._injector;n.destroy&&!n.destroyed&&n.destroy()}get viewCount(){return this._views.length}static \u0275fac=function(r){return new(r||t)};static \u0275prov=z({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function Tc(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function ho(t,e,n,r){let i=Te(),o=bc();if(so(i,o,e)){let s=nn(),a=pd();vO(a,i,t,e,n,r)}return ho}var v7=typeof document<"u"&&typeof document?.documentElement?.getAnimations=="function";function me(t,e,n){let r=Te(),i=bc();if(so(r,i,e)){let o=nn(),s=pd();nT(s,r,t,e,r[$e],n)}return me}function cC(t,e,n,r,i){gy(e,t,n,i?"class":"style",r)}function x(t,e,n,r){let i=Te(),o=i[oe],s=t+tn,a=o.firstCreatePass?_T(s,i,2,e,rT,lm(),n,r):o.data[s];if(IO(a,i,t,e,Q1),_c(a)){let u=i[oe];py(u,i,a),VC(u,a,i)}return r!=null&&tT(i,a),x}function O(){let t=nn(),e=jt(),n=wO(e);return t.firstCreatePass&&ET(t,n),mD(n)&&yD(),pD(),n.classesWithoutHost!=null&&nk(n)&&cC(t,n,Te(),n.classesWithoutHost,!0),n.stylesWithoutHost!=null&&rk(n)&&cC(t,n,Te(),n.stylesWithoutHost,!1),O}function Ir(t,e,n,r){return x(t,e,n,r),O(),Ir}var Q1=(t,e,n,r,i)=>(md(!0),zC(e[$e],r,MD()));function Rn(){return Te()}var Fc="en-US";var Y1=Fc;function OT(t){typeof t=="string"&&(Y1=t.toLowerCase().replace(/_/g,"-"))}function ae(t,e,n){let r=Te(),i=nn(),o=jt();return FT(i,r,r[$e],o,t,e,n),ae}function FT(t,e,n,r,i,o,s){let a=!0,u=null;if((r.type&3||s)&&(u??=Am(r,e,o),c1(r,t,e,s,n,i,o,u)&&(a=!1)),a){let l=r.outputs?.[i],h=r.hostDirectiveOutputs?.[i];if(h&&h.length)for(let p=0;p<h.length;p+=2){let m=h[p],y=h[p+1];u??=Am(r,e,o),eC(r,e,m,y,i,u)}if(l&&l.length)for(let p of l)u??=Am(r,e,o),eC(r,e,p,i,i,u)}}function _e(t=1){return ND(t)}function Ed(t,e){return t<<17|e<<2}function co(t){return t>>17&32767}function Z1(t){return(t&2)==2}function J1(t,e){return t&131071|e<<17}function Ym(t){return t|2}function Os(t){return(t&131068)>>2}function Mm(t,e){return t&-131069|e<<2}function X1(t){return(t&1)===1}function Zm(t){return t|1}function eF(t,e,n,r,i,o){let s=o?e.classBindings:e.styleBindings,a=co(s),u=Os(s);t[r]=n;let l=!1,h;if(Array.isArray(n)){let p=n;h=p[1],(h===null||Ds(p,h)>0)&&(l=!0)}else h=n;if(i)if(u!==0){let m=co(t[a+1]);t[r+1]=Ed(m,a),m!==0&&(t[m+1]=Mm(t[m+1],r)),t[a+1]=J1(t[a+1],r)}else t[r+1]=Ed(a,0),a!==0&&(t[a+1]=Mm(t[a+1],r)),a=r;else t[r+1]=Ed(u,0),a===0?a=r:t[u+1]=Mm(t[u+1],r),u=r;l&&(t[r+1]=Ym(t[r+1])),uC(t,h,r,!0),uC(t,h,r,!1),tF(e,h,t,r,o),s=Ed(a,u),o?e.classBindings=s:e.styleBindings=s}function tF(t,e,n,r,i){let o=i?t.residualClasses:t.residualStyles;o!=null&&typeof e=="string"&&Ds(o,e)>=0&&(n[r+1]=Zm(n[r+1]))}function uC(t,e,n,r){let i=t[n+1],o=e===null,s=r?co(i):Os(i),a=!1;for(;s!==0&&(a===!1||o);){let u=t[s],l=t[s+1];nF(u,e)&&(a=!0,t[s+1]=r?Zm(l):Ym(l)),s=r?co(l):Os(l)}a&&(t[n+1]=r?Ym(i):Zm(i))}function nF(t,e){return t===null||e==null||(Array.isArray(t)?t[1]:t)===e?!0:Array.isArray(t)&&typeof e=="string"?Ds(t,e)>=0:!1}function Lc(t,e){return rF(t,e,null,!0),Lc}function rF(t,e,n,r){let i=Te(),o=nn(),s=gm(2);if(o.firstUpdatePass&&oF(o,t,s,r),e!==Sn&&so(i,s,e)){let a=o.data[oi()];lF(o,a,i,i[$e],t,i[s+1]=dF(e,n),r,s)}}function iF(t,e){return e>=t.expandoStartIndex}function oF(t,e,n,r){let i=t.data;if(i[n+1]===null){let o=i[oi()],s=iF(t,n);hF(o,r)&&e===null&&!s&&(e=!1),e=sF(i,o,e,r),eF(i,o,e,n,s,r)}}function sF(t,e,n,r){let i=TD(t),o=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(n=Pm(null,t,e,n,r),n=Nc(n,e.attrs,r),o=null);else{let s=e.directiveStylingLast;if(s===-1||t[s]!==i)if(n=Pm(i,t,e,n,r),o===null){let u=aF(t,e,r);u!==void 0&&Array.isArray(u)&&(u=Pm(null,t,e,u[1],r),u=Nc(u,e.attrs,r),cF(t,e,r,u))}else o=uF(t,e,r)}return o!==void 0&&(r?e.residualClasses=o:e.residualStyles=o),n}function aF(t,e,n){let r=n?e.classBindings:e.styleBindings;if(Os(r)!==0)return t[co(r)]}function cF(t,e,n,r){let i=n?e.classBindings:e.styleBindings;t[co(i)]=r}function uF(t,e,n){let r,i=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<i;o++){let s=t[o].hostAttrs;r=Nc(r,s,n)}return Nc(r,e.attrs,n)}function Pm(t,e,n,r,i){let o=null,s=n.directiveEnd,a=n.directiveStylingLast;for(a===-1?a=n.directiveStart:a++;a<s&&(o=e[a],r=Nc(r,o.hostAttrs,i),o!==t);)a++;return t!==null&&(n.directiveStylingLast=a),r}function Nc(t,e,n){let r=n?1:2,i=-1;if(e!==null)for(let o=0;o<e.length;o++){let s=e[o];typeof s=="number"?i=s:i===r&&(Array.isArray(t)||(t=t===void 0?[]:["",t]),Zb(t,s,n?!0:e[++o]))}return t===void 0?null:t}function lF(t,e,n,r,i,o,s,a){if(!(e.type&3))return;let u=t.data,l=u[a+1],h=X1(l)?lC(u,e,n,i,Os(l),s):void 0;if(!Ld(h)){Ld(o)||Z1(l)&&(o=lC(u,null,n,i,a,s));let p=sm(oi(),n);cO(r,s,p,i,o)}}function lC(t,e,n,r,i,o){let s=e===null,a;for(;i>0;){let u=t[i],l=Array.isArray(u),h=l?u[1]:u,p=h===null,m=n[i+1];m===Sn&&(m=p?Xt:void 0);let y=p?od(m,r):h===r?m:void 0;if(l&&!Ld(y)&&(y=od(u,r)),Ld(y)&&(a=y,s))return a;let S=t[i+1];i=s?co(S):Os(S)}if(e!==null){let u=o?e.residualClasses:e.residualStyles;u!=null&&(a=od(u,r))}return a}function Ld(t){return t!==void 0}function dF(t,e){return t==null||t===""||(typeof e=="string"?t=t+e:typeof t=="object"&&(t=yr(Hd(t)))),t}function hF(t,e){return(t.flags&(e?8:16))!==0}function U(t,e=""){let n=Te(),r=nn(),i=t+tn,o=r.firstCreatePass?vy(r,i,1,e,null):r.data[i],s=fF(r,n,o,e,t);n[i]=s,gd()&&hy(r,n,s,o),Rs(o,!1)}var fF=(t,e,n,r,i)=>(md(!0),Uk(e[$e],r));function pF(t,e,n,r=""){return so(t,bc(),n)?e+Zi(n)+r:Sn}function gF(t,e,n,r,i,o=""){let s=ID(),a=a1(t,s,n,i);return gm(2),a?e+Zi(n)+r+Zi(i)+o:Sn}function Ut(t){return Kt("",t),Ut}function Kt(t,e,n){let r=Te(),i=pF(r,t,e,n);return i!==Sn&&LT(r,oi(),i),Kt}function Zd(t,e,n,r,i){let o=Te(),s=gF(o,t,e,n,r,i);return s!==Sn&&LT(o,oi(),s),Zd}function LT(t,e,n){let r=sm(e,t);Bk(t[$e],r,n)}function Le(t,e,n){Im(e)&&(e=e());let r=Te(),i=bc();if(so(r,i,e)){let o=nn(),s=pd();nT(s,r,t,e,r[$e],n)}return Le}function He(t,e){let n=Im(t);return n&&t.set(e),n}function Ve(t,e){let n=Te(),r=nn(),i=jt();return FT(r,n,n[$e],i,t,e),Ve}function mF(t,e,n){let r=nn();if(r.firstCreatePass){let i=qn(t);Jm(n,r.data,r.blueprint,i,!0),Jm(e,r.data,r.blueprint,i,!1)}}function Jm(t,e,n,r,i){if(t=vt(t),Array.isArray(t))for(let o=0;o<t.length;o++)Jm(t[o],e,n,r,i);else{let o=nn(),s=Te(),a=jt(),u=Ki(t)?t:vt(t.provide),l=nm(t),h=a.providerIndexes&1048575,p=a.directiveStart,m=a.providerIndexes>>20;if(Ki(t)||!t.multi){let y=new io(l,i,pe,null),S=km(u,e,i?h:h+m,p);S===-1?(Fm(Sd(a,s),o,u),xm(o,t,e.length),e.push(u),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(y),s.push(y)):(n[S]=y,s[S]=y)}else{let y=km(u,e,h+m,p),S=km(u,e,h,h+m),P=y>=0&&n[y],M=S>=0&&n[S];if(i&&!M||!i&&!P){Fm(Sd(a,s),o,u);let j=_F(i?vF:yF,n.length,i,r,l,t);!i&&M&&(n[S].providerFactory=j),xm(o,t,e.length,0),e.push(u),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(j),s.push(j)}else{let j=VT(n[i?S:y],l,!i&&r);xm(o,t,y>-1?y:S,j)}!i&&r&&M&&n[S].componentProviders++}}}function xm(t,e,n,r){let i=Ki(e),o=nD(e);if(i||o){let u=(o?vt(e.useClass):e).prototype.ngOnDestroy;if(u){let l=t.destroyHooks||(t.destroyHooks=[]);if(!i&&e.multi){let h=l.indexOf(n);h===-1?l.push(n,[r,u]):l[h+1].push(r,u)}else l.push(n,u)}}}function VT(t,e,n){return n&&t.componentProviders++,t.multi.push(e)-1}function km(t,e,n,r){for(let i=n;i<r;i++)if(e[i]===t)return i;return-1}function yF(t,e,n,r,i){return Xm(this.multi,[])}function vF(t,e,n,r,i){let o=this.multi,s;if(this.providerFactory){let a=this.providerFactory.componentProviders,u=Ad(r,r[oe],this.providerFactory.index,i);s=u.slice(0,a),Xm(o,s);for(let l=a;l<u.length;l++)s.push(u[l])}else s=[],Xm(o,s);return s}function Xm(t,e){for(let n=0;n<t.length;n++){let r=t[n];e.push(r())}return e}function _F(t,e,n,r,i,o){let s=new io(t,n,pe,null);return s.multi=[],s.index=e,s.componentProviders=0,VT(s,i,r&&!n),s}function fo(t,e=[]){return n=>{n.providersResolver=(r,i)=>mF(r,i?i(t):t,e)}}function Vc(t,e,n){let r=ED()+t,i=Te();return i[r]===Sn?o1(i,r,n?e.call(n):e()):s1(i,r)}var Vd=class{ngModuleFactory;componentFactories;constructor(e,n){this.ngModuleFactory=e,this.componentFactories=n}},Ay=(()=>{class t{compileModuleSync(n){return new kd(n)}compileModuleAsync(n){return Promise.resolve(this.compileModuleSync(n))}compileModuleAndAllComponentsSync(n){let r=this.compileModuleSync(n),i=Jg(n),o=HC(i.declarations).reduce((s,a)=>{let u=ni(a);return u&&s.push(new ks(u)),s},[]);return new Vd(r,o)}compileModuleAndAllComponentsAsync(n){return Promise.resolve(this.compileModuleAndAllComponentsSync(n))}clearCache(){}clearCacheFor(n){}getModuleId(n){}static \u0275fac=function(r){return new(r||t)};static \u0275prov=z({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var EF=(()=>{class t{zone=R(Se);changeDetectionScheduler=R(Xr);applicationRef=R(fi);applicationErrorHandler=R(Wt);_onMicrotaskEmptySubscription;initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{try{this.applicationRef.dirtyFlags|=1,this.applicationRef._tick()}catch(n){this.applicationErrorHandler(n)}})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static \u0275fac=function(r){return new(r||t)};static \u0275prov=z({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function jT({ngZoneFactory:t,ignoreChangesOutsideZone:e,scheduleInRootZone:n}){return t??=()=>new Se(re(F({},UT()),{scheduleInRootZone:n})),[{provide:Se,useFactory:t},{provide:ti,multi:!0,useFactory:()=>{let r=R(EF,{optional:!0});return()=>r.initialize()}},{provide:ti,multi:!0,useFactory:()=>{let r=R(IF);return()=>{r.initialize()}}},e===!0?{provide:wm,useValue:!0}:[],{provide:bm,useValue:n??AT},{provide:Wt,useFactory:()=>{let r=R(Se),i=R(Ke),o;return s=>{r.runOutsideAngular(()=>{i.destroyed&&!o?setTimeout(()=>{throw s}):(o??=i.get(Vn),o.handleError(s))})}}}]}function UT(t){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:t?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:t?.runCoalescing??!1}}var IF=(()=>{class t{subscription=new Ue;initialized=!1;zone=R(Se);pendingTasks=R(zn);initialize(){if(this.initialized)return;this.initialized=!0;let n=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(n=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{Se.assertNotInAngularZone(),queueMicrotask(()=>{n!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(n),n=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{Se.assertInAngularZone(),n??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static \u0275fac=function(r){return new(r||t)};static \u0275prov=z({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var BT=(()=>{class t{applicationErrorHandler=R(Wt);appRef=R(fi);taskService=R(zn);ngZone=R(Se);zonelessEnabled=R(yd);tracing=R(Oc,{optional:!0});disableScheduling=R(wm,{optional:!0})??!1;zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run;schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}];subscriptions=new Ue;angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(Od):null;scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(R(bm,{optional:!0})??!1);cancelScheduledCallback=null;useMicrotaskScheduler=!1;runningTick=!1;pendingRenderTaskId=null;constructor(){this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof Fd||!this.zoneIsDefined)}notify(n){if(!this.zonelessEnabled&&n===5)return;let r=!1;switch(n){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 6:{this.appRef.dirtyFlags|=2,r=!0;break}case 12:{this.appRef.dirtyFlags|=16,r=!0;break}case 13:{this.appRef.dirtyFlags|=2,r=!0;break}case 11:{r=!0;break}case 9:case 8:case 7:case 10:default:this.appRef.dirtyFlags|=8}if(this.appRef.tracingSnapshot=this.tracing?.snapshot(this.appRef.tracingSnapshot)??null,!this.shouldScheduleTick(r))return;let i=this.useMicrotaskScheduler?oC:RT;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>i(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>i(()=>this.tick()))}shouldScheduleTick(n){return!(this.disableScheduling&&!n||this.appRef.destroyed||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(Od+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;if(this.appRef.dirtyFlags===0){this.cleanup();return}!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let n=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){this.taskService.remove(n),this.applicationErrorHandler(r)}finally{this.cleanup()}this.useMicrotaskScheduler=!0,oC(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(n)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let n=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(n)}}static \u0275fac=function(r){return new(r||t)};static \u0275prov=z({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function wF(){return typeof $localize<"u"&&$localize.locale||Fc}var Jd=new q("",{providedIn:"root",factory:()=>R(Jd,{optional:!0,skipSelf:!0})||wF()});function ut(t){return Bb(t)}function Ls(t,e){return Dl(t,e?.equal)}var $T=class{[At];constructor(e){this[At]=e}destroy(){this[At].destroy()}};var WT=Symbol("InputSignalNode#UNSET"),$F=re(F({},Cl),{transformFn:void 0,applyValueToInputSignal(t,e){cs(t,e)}});function KT(t,e){let n=Object.create($F);n.value=t,n.transformFn=e?.transform;function r(){if(os(n),n.value===WT){let i=null;throw new H(-950,i)}return n.value}return r[At]=n,r}var eh=class{attributeName;constructor(e){this.attributeName=e}__NG_ELEMENT_ID__=()=>Mc(this.attributeName);toString(){return`HostAttributeToken ${this.attributeName}`}},HF=new q("");HF.__NG_ELEMENT_ID__=t=>{let e=jt();if(e===null)throw new H(204,!1);if(e.type&2)return e.value;if(t&8)return null;throw new H(204,!1)};function HT(t,e){return KT(t,e)}function qF(t){return KT(WT,t)}var QT=(HT.required=qF,HT);var Ry=new q(""),zF=new q("");function jc(t){return!t.moduleRef}function GF(t){let e=jc(t)?t.r3Injector:t.moduleRef.injector,n=e.get(Se);return n.run(()=>{jc(t)?t.r3Injector.resolveInjectorInitializers():t.moduleRef.resolveInjectorInitializers();let r=e.get(Wt),i;if(n.runOutsideAngular(()=>{i=n.onError.subscribe({next:r})}),jc(t)){let o=()=>e.destroy(),s=t.platformInjector.get(Ry);s.add(o),e.onDestroy(()=>{i.unsubscribe(),s.delete(o)})}else{let o=()=>t.moduleRef.destroy(),s=t.platformInjector.get(Ry);s.add(o),t.moduleRef.onDestroy(()=>{Tc(t.allPlatformModules,t.moduleRef),i.unsubscribe(),s.delete(o)})}return KF(r,n,()=>{let o=e.get(zn),s=o.add(),a=e.get(Sy);return a.runInitializers(),a.donePromise.then(()=>{let u=e.get(Jd,Fc);if(OT(u||Fc),!e.get(zF,!0))return jc(t)?e.get(fi):(t.allPlatformModules.push(t.moduleRef),t.moduleRef);if(jc(t)){let h=e.get(fi);return t.rootComponent!==void 0&&h.bootstrap(t.rootComponent),h}else return WF?.(t.moduleRef,t.allPlatformModules),t.moduleRef}).finally(()=>void o.remove(s))})})}var WF;function KF(t,e,n){try{let r=n();return hi(r)?r.catch(i=>{throw e.runOutsideAngular(()=>t(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>t(r)),r}}var Xd=null;function QF(t=[],e){return Ne.create({name:e,providers:[{provide:hc,useValue:"platform"},{provide:Ry,useValue:new Set([()=>Xd=null])},...t]})}function YF(t=[]){if(Xd)return Xd;let e=QF(t);return Xd=e,xT(),ZF(e),e}function ZF(t){let e=t.get(Bd,null);Me(t,()=>{e?.forEach(n=>n())})}function ky(){return!1}var Vs=(()=>{class t{static __NG_ELEMENT_ID__=JF}return t})();function JF(t){return XF(jt(),Te(),(t&16)===16)}function XF(t,e,n){if(ii(t)&&!n){let r=gn(t.index,e);return new ci(r,r)}else if(t.type&175){let r=e[fn];return new ci(r,e)}return null}var Ny=class{constructor(){}supports(e){return _y(e)}create(e){return new My(e)}},eL=(t,e)=>e,My=class{length=0;collection;_linkedRecords=null;_unlinkedRecords=null;_previousItHead=null;_itHead=null;_itTail=null;_additionsHead=null;_additionsTail=null;_movesHead=null;_movesTail=null;_removalsHead=null;_removalsTail=null;_identityChangesHead=null;_identityChangesTail=null;_trackByFn;constructor(e){this._trackByFn=e||eL}forEachItem(e){let n;for(n=this._itHead;n!==null;n=n._next)e(n)}forEachOperation(e){let n=this._itHead,r=this._removalsHead,i=0,o=null;for(;n||r;){let s=!r||n&&n.currentIndex<qT(r,i,o)?n:r,a=qT(s,i,o),u=s.currentIndex;if(s===r)i--,r=r._nextRemoved;else if(n=n._next,s.previousIndex==null)i++;else{o||(o=[]);let l=a-i,h=u-i;if(l!=h){for(let m=0;m<l;m++){let y=m<o.length?o[m]:o[m]=0,S=y+m;h<=S&&S<l&&(o[m]=y+1)}let p=s.previousIndex;o[p]=h-l}}a!==u&&e(s,a,u)}}forEachPreviousItem(e){let n;for(n=this._previousItHead;n!==null;n=n._nextPrevious)e(n)}forEachAddedItem(e){let n;for(n=this._additionsHead;n!==null;n=n._nextAdded)e(n)}forEachMovedItem(e){let n;for(n=this._movesHead;n!==null;n=n._nextMoved)e(n)}forEachRemovedItem(e){let n;for(n=this._removalsHead;n!==null;n=n._nextRemoved)e(n)}forEachIdentityChange(e){let n;for(n=this._identityChangesHead;n!==null;n=n._nextIdentityChange)e(n)}diff(e){if(e==null&&(e=[]),!_y(e))throw new H(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let n=this._itHead,r=!1,i,o,s;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)o=e[a],s=this._trackByFn(a,o),n===null||!Object.is(n.trackById,s)?(n=this._mismatch(n,o,s,a),r=!0):(r&&(n=this._verifyReinsertion(n,o,s,a)),Object.is(n.item,o)||this._addIdentityChange(n,o)),n=n._next}else i=0,IT(e,a=>{s=this._trackByFn(i,a),n===null||!Object.is(n.trackById,s)?(n=this._mismatch(n,a,s,i),r=!0):(r&&(n=this._verifyReinsertion(n,a,s,i)),Object.is(n.item,a)||this._addIdentityChange(n,a)),n=n._next,i++}),this.length=i;return this._truncate(n),this.collection=e,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;e!==null;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;e!==null;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,n,r,i){let o;return e===null?o=this._itTail:(o=e._prev,this._remove(e)),e=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null),e!==null?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._reinsertAfter(e,o,i)):(e=this._linkedRecords===null?null:this._linkedRecords.get(r,i),e!==null?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._moveAfter(e,o,i)):e=this._addAfter(new Py(n,r),o,i)),e}_verifyReinsertion(e,n,r,i){let o=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null);return o!==null?e=this._reinsertAfter(o,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;e!==null;){let n=e._next;this._addToRemovals(this._unlink(e)),e=n}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,n,r){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(e);let i=e._prevRemoved,o=e._nextRemoved;return i===null?this._removalsHead=o:i._nextRemoved=o,o===null?this._removalsTail=i:o._prevRemoved=i,this._insertAfter(e,n,r),this._addToMoves(e,r),e}_moveAfter(e,n,r){return this._unlink(e),this._insertAfter(e,n,r),this._addToMoves(e,r),e}_addAfter(e,n,r){return this._insertAfter(e,n,r),this._additionsTail===null?this._additionsTail=this._additionsHead=e:this._additionsTail=this._additionsTail._nextAdded=e,e}_insertAfter(e,n,r){let i=n===null?this._itHead:n._next;return e._next=i,e._prev=n,i===null?this._itTail=e:i._prev=e,n===null?this._itHead=e:n._next=e,this._linkedRecords===null&&(this._linkedRecords=new th),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){this._linkedRecords!==null&&this._linkedRecords.remove(e);let n=e._prev,r=e._next;return n===null?this._itHead=r:n._next=r,r===null?this._itTail=n:r._prev=n,e}_addToMoves(e,n){return e.previousIndex===n||(this._movesTail===null?this._movesTail=this._movesHead=e:this._movesTail=this._movesTail._nextMoved=e),e}_addToRemovals(e){return this._unlinkedRecords===null&&(this._unlinkedRecords=new th),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,n){return e.item=n,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=e:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=e,e}},Py=class{item;trackById;currentIndex=null;previousIndex=null;_nextPrevious=null;_prev=null;_next=null;_prevDup=null;_nextDup=null;_prevRemoved=null;_nextRemoved=null;_nextAdded=null;_nextMoved=null;_nextIdentityChange=null;constructor(e,n){this.item=e,this.trackById=n}},xy=class{_head=null;_tail=null;add(e){this._head===null?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,n){let r;for(r=this._head;r!==null;r=r._nextDup)if((n===null||n<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){let n=e._prevDup,r=e._nextDup;return n===null?this._head=r:n._nextDup=r,r===null?this._tail=n:r._prevDup=n,this._head===null}},th=class{map=new Map;put(e){let n=e.trackById,r=this.map.get(n);r||(r=new xy,this.map.set(n,r)),r.add(e)}get(e,n){let r=e,i=this.map.get(r);return i?i.get(e,n):null}remove(e){let n=e.trackById;return this.map.get(n).remove(e)&&this.map.delete(n),e}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function qT(t,e,n){let r=t.previousIndex;if(r===null)return r;let i=0;return n&&r<n.length&&(i=n[r]),r+e+i}function zT(){return new Oy([new Ny])}var Oy=(()=>{class t{factories;static \u0275prov=z({token:t,providedIn:"root",factory:zT});constructor(n){this.factories=n}static create(n,r){if(r!=null){let i=r.factories.slice();n=n.concat(i)}return new t(n)}static extend(n){return{provide:t,useFactory:()=>{let r=R(t,{optional:!0,skipSelf:!0});return t.create(n,r||zT())}}}find(n){let r=this.factories.find(i=>i.supports(n));if(r!=null)return r;throw new H(901,!1)}}return t})();function YT(t){let{rootComponent:e,appProviders:n,platformProviders:r,platformRef:i}=t;Pe(8);try{let o=i?.injector??YF(r),s=[jT({}),{provide:Xr,useExisting:BT},xD,...n||[]],a=new Rc({providers:s,parent:o,debugName:"",runEnvironmentInitializers:!1});return GF({r3Injector:a.injector,platformInjector:o,rootComponent:e})}catch(o){return Promise.reject(o)}finally{Pe(9)}}function go(t){return typeof t=="boolean"?t:t!=null&&t!=="false"}var XT=null;function yn(){return XT}function Fy(t){XT??=t}var Uc=class{},Ly=(()=>{class t{historyGo(n){throw new Error("")}static \u0275fac=function(r){return new(r||t)};static \u0275prov=z({token:t,factory:()=>R(e0),providedIn:"platform"})}return t})();var e0=(()=>{class t extends Ly{_location;_history;_doc=R(Et);constructor(){super(),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return yn().getBaseHref(this._doc)}onPopState(n){let r=yn().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",n,!1),()=>r.removeEventListener("popstate",n)}onHashChange(n){let r=yn().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",n,!1),()=>r.removeEventListener("hashchange",n)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(n){this._location.pathname=n}pushState(n,r,i){this._history.pushState(n,r,i)}replaceState(n,r,i){this._history.replaceState(n,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(n=0){this._history.go(n)}getState(){return this._history.state}static \u0275fac=function(r){return new(r||t)};static \u0275prov=z({token:t,factory:()=>new t,providedIn:"platform"})}return t})();function t0(t,e){return t?e?t.endsWith("/")?e.startsWith("/")?t+e.slice(1):t+e:e.startsWith("/")?t+e:`${t}/${e}`:t:e}function ZT(t){let e=t.search(/#|\?|$/);return t[e-1]==="/"?t.slice(0,e-1)+t.slice(e):t}function pi(t){return t&&t[0]!=="?"?`?${t}`:t}var js=(()=>{class t{historyGo(n){throw new Error("")}static \u0275fac=function(r){return new(r||t)};static \u0275prov=z({token:t,factory:()=>R(r0),providedIn:"root"})}return t})(),n0=new q(""),r0=(()=>{class t extends js{_platformLocation;_baseHref;_removeListenerFns=[];constructor(n,r){super(),this._platformLocation=n,this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??R(Et).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(n){this._removeListenerFns.push(this._platformLocation.onPopState(n),this._platformLocation.onHashChange(n))}getBaseHref(){return this._baseHref}prepareExternalUrl(n){return t0(this._baseHref,n)}path(n=!1){let r=this._platformLocation.pathname+pi(this._platformLocation.search),i=this._platformLocation.hash;return i&&n?`${r}${i}`:r}pushState(n,r,i,o){let s=this.prepareExternalUrl(i+pi(o));this._platformLocation.pushState(n,r,s)}replaceState(n,r,i,o){let s=this.prepareExternalUrl(i+pi(o));this._platformLocation.replaceState(n,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(n=0){this._platformLocation.historyGo?.(n)}static \u0275fac=function(r){return new(r||t)(Z(Ly),Z(n0,8))};static \u0275prov=z({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),Us=(()=>{class t{_subject=new Ge;_basePath;_locationStrategy;_urlChangeListeners=[];_urlChangeSubscription=null;constructor(n){this._locationStrategy=n;let r=this._locationStrategy.getBaseHref();this._basePath=rL(ZT(JT(r))),this._locationStrategy.onPopState(i=>{this._subject.next({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(n=!1){return this.normalize(this._locationStrategy.path(n))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(n,r=""){return this.path()==this.normalize(n+pi(r))}normalize(n){return t.stripTrailingSlash(nL(this._basePath,JT(n)))}prepareExternalUrl(n){return n&&n[0]!=="/"&&(n="/"+n),this._locationStrategy.prepareExternalUrl(n)}go(n,r="",i=null){this._locationStrategy.pushState(i,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+pi(r)),i)}replaceState(n,r="",i=null){this._locationStrategy.replaceState(i,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+pi(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(n=0){this._locationStrategy.historyGo?.(n)}onUrlChange(n){return this._urlChangeListeners.push(n),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(n);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(n="",r){this._urlChangeListeners.forEach(i=>i(n,r))}subscribe(n,r,i){return this._subject.subscribe({next:n,error:r??void 0,complete:i??void 0})}static normalizeQueryParams=pi;static joinWithSlash=t0;static stripTrailingSlash=ZT;static \u0275fac=function(r){return new(r||t)(Z(js))};static \u0275prov=z({token:t,factory:()=>tL(),providedIn:"root"})}return t})();function tL(){return new Us(Z(js))}function nL(t,e){if(!t||!e.startsWith(t))return e;let n=e.substring(t.length);return n===""||["/",";","?","#"].includes(n[0])?n:e}function JT(t){return t.replace(/\/index.html$/,"")}function rL(t){if(new RegExp("^(https?:)?//").test(t)){let[,n]=t.split(/\/\/[^\/]+/);return n}return t}var nh=class{$implicit;ngForOf;index;count;constructor(e,n,r,i){this.$implicit=e,this.ngForOf=n,this.index=r,this.count=i}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},Kn=(()=>{class t{_viewContainer;_template;_differs;set ngForOf(n){this._ngForOf=n,this._ngForOfDirty=!0}set ngForTrackBy(n){this._trackByFn=n}get ngForTrackBy(){return this._trackByFn}_ngForOf=null;_ngForOfDirty=!0;_differ=null;_trackByFn;constructor(n,r,i){this._viewContainer=n,this._template=r,this._differs=i}set ngForTemplate(n){n&&(this._template=n)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let n=this._ngForOf;!this._differ&&n&&(this._differ=this._differs.find(n).create(this.ngForTrackBy))}if(this._differ){let n=this._differ.diff(this._ngForOf);n&&this._applyChanges(n)}}_applyChanges(n){let r=this._viewContainer;n.forEachOperation((i,o,s)=>{if(i.previousIndex==null)r.createEmbeddedView(this._template,new nh(i.item,this._ngForOf,-1,-1),s===null?void 0:s);else if(s==null)r.remove(o===null?void 0:o);else if(o!==null){let a=r.get(o);r.move(a,s),i0(a,i)}});for(let i=0,o=r.length;i<o;i++){let a=r.get(i).context;a.index=i,a.count=o,a.ngForOf=this._ngForOf}n.forEachIdentityChange(i=>{let o=r.get(i.currentIndex);i0(o,i)})}static ngTemplateContextGuard(n,r){return!0}static \u0275fac=function(r){return new(r||t)(pe(lo),pe(Pc),pe(Oy))};static \u0275dir=Ye({type:t,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}})}return t})();function i0(t,e){t.context.$implicit=e.item}var mo=(()=>{class t{_viewContainer;_context=new rh;_thenTemplateRef=null;_elseTemplateRef=null;_thenViewRef=null;_elseViewRef=null;constructor(n,r){this._viewContainer=n,this._thenTemplateRef=r}set ngIf(n){this._context.$implicit=this._context.ngIf=n,this._updateView()}set ngIfThen(n){o0(n,!1),this._thenTemplateRef=n,this._thenViewRef=null,this._updateView()}set ngIfElse(n){o0(n,!1),this._elseTemplateRef=n,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngIfUseIfTypeGuard;static ngTemplateGuard_ngIf;static ngTemplateContextGuard(n,r){return!0}static \u0275fac=function(r){return new(r||t)(pe(lo),pe(Pc))};static \u0275dir=Ye({type:t,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}})}return t})(),rh=class{$implicit=null;ngIf=null};function o0(t,e){if(t&&!t.createEmbeddedView)throw new H(2020,!1)}var Qn=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275mod=Er({type:t});static \u0275inj=Un({})}return t})();function Vy(t,e){e=encodeURIComponent(e);for(let n of t.split(";")){let r=n.indexOf("="),[i,o]=r==-1?[n,""]:[n.slice(0,r),n.slice(r+1)];if(i.trim()===e)return decodeURIComponent(o)}return null}var Bc=class{};var s0="browser",iL="server";function jy(t){return t===iL}var oh=new q(""),qy=(()=>{class t{_zone;_plugins;_eventNameToPlugin=new Map;constructor(n,r){this._zone=r,n.forEach(i=>{i.manager=this}),this._plugins=n.slice().reverse()}addEventListener(n,r,i,o){return this._findPluginFor(r).addEventListener(n,r,i,o)}getZone(){return this._zone}_findPluginFor(n){let r=this._eventNameToPlugin.get(n);if(r)return r;if(r=this._plugins.find(o=>o.supports(n)),!r)throw new H(5101,!1);return this._eventNameToPlugin.set(n,r),r}static \u0275fac=function(r){return new(r||t)(Z(oh),Z(Se))};static \u0275prov=z({token:t,factory:t.\u0275fac})}return t})(),Hc=class{_doc;constructor(e){this._doc=e}manager},Uy="ng-app-id";function a0(t){for(let e of t)e.remove()}function c0(t,e){let n=e.createElement("style");return n.textContent=t,n}function oL(t,e,n,r){let i=t.head?.querySelectorAll(`style[${Uy}="${e}"],link[${Uy}="${e}"]`);if(i)for(let o of i)o.removeAttribute(Uy),o instanceof HTMLLinkElement?r.set(o.href.slice(o.href.lastIndexOf("/")+1),{usage:0,elements:[o]}):o.textContent&&n.set(o.textContent,{usage:0,elements:[o]})}function $y(t,e){let n=e.createElement("link");return n.setAttribute("rel","stylesheet"),n.setAttribute("href",t),n}var zy=(()=>{class t{doc;appId;nonce;inline=new Map;external=new Map;hosts=new Set;constructor(n,r,i,o={}){this.doc=n,this.appId=r,this.nonce=i,oL(n,r,this.inline,this.external),this.hosts.add(n.head)}addStyles(n,r){for(let i of n)this.addUsage(i,this.inline,c0);r?.forEach(i=>this.addUsage(i,this.external,$y))}removeStyles(n,r){for(let i of n)this.removeUsage(i,this.inline);r?.forEach(i=>this.removeUsage(i,this.external))}addUsage(n,r,i){let o=r.get(n);o?o.usage++:r.set(n,{usage:1,elements:[...this.hosts].map(s=>this.addElement(s,i(n,this.doc)))})}removeUsage(n,r){let i=r.get(n);i&&(i.usage--,i.usage<=0&&(a0(i.elements),r.delete(n)))}ngOnDestroy(){for(let[,{elements:n}]of[...this.inline,...this.external])a0(n);this.hosts.clear()}addHost(n){this.hosts.add(n);for(let[r,{elements:i}]of this.inline)i.push(this.addElement(n,c0(r,this.doc)));for(let[r,{elements:i}]of this.external)i.push(this.addElement(n,$y(r,this.doc)))}removeHost(n){this.hosts.delete(n)}addElement(n,r){return this.nonce&&r.setAttribute("nonce",this.nonce),n.appendChild(r)}static \u0275fac=function(r){return new(r||t)(Z(Et),Z(Ud),Z($d,8),Z(Tn))};static \u0275prov=z({token:t,factory:t.\u0275fac})}return t})(),By={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},Gy=/%COMP%/g;var l0="%COMP%",sL=`_nghost-${l0}`,aL=`_ngcontent-${l0}`,cL=!0,uL=new q("",{providedIn:"root",factory:()=>cL});function lL(t){return aL.replace(Gy,t)}function dL(t){return sL.replace(Gy,t)}function d0(t,e){return e.map(n=>n.replace(Gy,t))}var Wy=(()=>{class t{eventManager;sharedStylesHost;appId;removeStylesOnCompDestroy;doc;platformId;ngZone;nonce;tracingService;rendererByCompId=new Map;defaultRenderer;platformIsServer;constructor(n,r,i,o,s,a,u,l=null,h=null){this.eventManager=n,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=o,this.doc=s,this.platformId=a,this.ngZone=u,this.nonce=l,this.tracingService=h,this.platformIsServer=!1,this.defaultRenderer=new qc(n,s,u,this.platformIsServer,this.tracingService)}createRenderer(n,r){if(!n||!r)return this.defaultRenderer;let i=this.getOrCreateRenderer(n,r);return i instanceof ih?i.applyToHost(n):i instanceof zc&&i.applyStyles(),i}getOrCreateRenderer(n,r){let i=this.rendererByCompId,o=i.get(r.id);if(!o){let s=this.doc,a=this.ngZone,u=this.eventManager,l=this.sharedStylesHost,h=this.removeStylesOnCompDestroy,p=this.platformIsServer,m=this.tracingService;switch(r.encapsulation){case vr.Emulated:o=new ih(u,l,r,this.appId,h,s,a,p,m);break;case vr.ShadowDom:return new Hy(u,l,n,r,s,a,this.nonce,p,m);default:o=new zc(u,l,r,h,s,a,p,m);break}i.set(r.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}componentReplaced(n){this.rendererByCompId.delete(n)}static \u0275fac=function(r){return new(r||t)(Z(qy),Z(zy),Z(Ud),Z(uL),Z(Et),Z(Tn),Z(Se),Z($d),Z(Oc,8))};static \u0275prov=z({token:t,factory:t.\u0275fac})}return t})(),qc=class{eventManager;doc;ngZone;platformIsServer;tracingService;data=Object.create(null);throwOnSyntheticProps=!0;constructor(e,n,r,i,o){this.eventManager=e,this.doc=n,this.ngZone=r,this.platformIsServer=i,this.tracingService=o}destroy(){}destroyNode=null;createElement(e,n){return n?this.doc.createElementNS(By[n]||n,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,n){(u0(e)?e.content:e).appendChild(n)}insertBefore(e,n,r){e&&(u0(e)?e.content:e).insertBefore(n,r)}removeChild(e,n){n.remove()}selectRootElement(e,n){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new H(-5104,!1);return n||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,n,r,i){if(i){n=i+":"+n;let o=By[i];o?e.setAttributeNS(o,n,r):e.setAttribute(n,r)}else e.setAttribute(n,r)}removeAttribute(e,n,r){if(r){let i=By[r];i?e.removeAttributeNS(i,n):e.removeAttribute(`${r}:${n}`)}else e.removeAttribute(n)}addClass(e,n){e.classList.add(n)}removeClass(e,n){e.classList.remove(n)}setStyle(e,n,r,i){i&(Wn.DashCase|Wn.Important)?e.style.setProperty(n,r,i&Wn.Important?"important":""):e.style[n]=r}removeStyle(e,n,r){r&Wn.DashCase?e.style.removeProperty(n):e.style[n]=""}setProperty(e,n,r){e!=null&&(e[n]=r)}setValue(e,n){e.nodeValue=n}listen(e,n,r,i){if(typeof e=="string"&&(e=yn().getGlobalEventTarget(this.doc,e),!e))throw new H(5102,!1);let o=this.decoratePreventDefault(r);return this.tracingService?.wrapEventListener&&(o=this.tracingService.wrapEventListener(e,n,o)),this.eventManager.addEventListener(e,n,o,i)}decoratePreventDefault(e){return n=>{if(n==="__ngUnwrap__")return e;e(n)===!1&&n.preventDefault()}}};function u0(t){return t.tagName==="TEMPLATE"&&t.content!==void 0}var Hy=class extends qc{sharedStylesHost;hostEl;shadowRoot;constructor(e,n,r,i,o,s,a,u,l){super(e,o,s,u,l),this.sharedStylesHost=n,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let h=i.styles;h=d0(i.id,h);for(let m of h){let y=document.createElement("style");a&&y.setAttribute("nonce",a),y.textContent=m,this.shadowRoot.appendChild(y)}let p=i.getExternalStyles?.();if(p)for(let m of p){let y=$y(m,o);a&&y.setAttribute("nonce",a),this.shadowRoot.appendChild(y)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,n){return super.appendChild(this.nodeOrShadowRoot(e),n)}insertBefore(e,n,r){return super.insertBefore(this.nodeOrShadowRoot(e),n,r)}removeChild(e,n){return super.removeChild(null,n)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},zc=class extends qc{sharedStylesHost;removeStylesOnCompDestroy;styles;styleUrls;constructor(e,n,r,i,o,s,a,u,l){super(e,o,s,a,u),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=i;let h=r.styles;this.styles=l?d0(l,h):h,this.styleUrls=r.getExternalStyles?.(l)}applyStyles(){this.sharedStylesHost.addStyles(this.styles,this.styleUrls)}destroy(){this.removeStylesOnCompDestroy&&Gd.size===0&&this.sharedStylesHost.removeStyles(this.styles,this.styleUrls)}},ih=class extends zc{contentAttr;hostAttr;constructor(e,n,r,i,o,s,a,u,l){let h=i+"-"+r.id;super(e,n,r,o,s,a,u,l,h),this.contentAttr=lL(h),this.hostAttr=dL(h)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,n){let r=super.createElement(e,n);return super.setAttribute(r,this.contentAttr,""),r}};var sh=class t extends Uc{supportsDOMEvents=!0;static makeCurrent(){Fy(new t)}onAndCancel(e,n,r,i){return e.addEventListener(n,r,i),()=>{e.removeEventListener(n,r,i)}}dispatchEvent(e,n){e.dispatchEvent(n)}remove(e){e.remove()}createElement(e,n){return n=n||this.getDefaultDocument(),n.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,n){return n==="window"?window:n==="document"?e:n==="body"?e.body:null}getBaseHref(e){let n=hL();return n==null?null:fL(n)}resetBaseElement(){Gc=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return Vy(document.cookie,e)}},Gc=null;function hL(){return Gc=Gc||document.head.querySelector("base"),Gc?Gc.getAttribute("href"):null}function fL(t){return new URL(t,document.baseURI).pathname}var pL=(()=>{class t{build(){return new XMLHttpRequest}static \u0275fac=function(r){return new(r||t)};static \u0275prov=z({token:t,factory:t.\u0275fac})}return t})(),f0=(()=>{class t extends Hc{constructor(n){super(n)}supports(n){return!0}addEventListener(n,r,i,o){return n.addEventListener(r,i,o),()=>this.removeEventListener(n,r,i,o)}removeEventListener(n,r,i,o){return n.removeEventListener(r,i,o)}static \u0275fac=function(r){return new(r||t)(Z(Et))};static \u0275prov=z({token:t,factory:t.\u0275fac})}return t})(),h0=["alt","control","meta","shift"],gL={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},mL={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey},p0=(()=>{class t extends Hc{constructor(n){super(n)}supports(n){return t.parseEventName(n)!=null}addEventListener(n,r,i,o){let s=t.parseEventName(r),a=t.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>yn().onAndCancel(n,s.domEventName,a,o))}static parseEventName(n){let r=n.toLowerCase().split("."),i=r.shift();if(r.length===0||!(i==="keydown"||i==="keyup"))return null;let o=t._normalizeKey(r.pop()),s="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),s="code."),h0.forEach(l=>{let h=r.indexOf(l);h>-1&&(r.splice(h,1),s+=l+".")}),s+=o,r.length!=0||o.length===0)return null;let u={};return u.domEventName=i,u.fullKey=s,u}static matchEventFullKeyCode(n,r){let i=gL[n.key]||n.key,o="";return r.indexOf("code.")>-1&&(i=n.code,o="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),h0.forEach(s=>{if(s!==i){let a=mL[s];a(n)&&(o+=s+".")}}),o+=i,o===r)}static eventCallback(n,r,i){return o=>{t.matchEventFullKeyCode(o,n)&&i.runGuarded(()=>r(o))}}static _normalizeKey(n){return n==="esc"?"escape":n}static \u0275fac=function(r){return new(r||t)(Z(Et))};static \u0275prov=z({token:t,factory:t.\u0275fac})}return t})();function Ky(t,e,n){let r=F({rootComponent:t,platformRef:n?.platformRef},yL(e));return YT(r)}function yL(t){return{appProviders:[...wL,...t?.providers??[]],platformProviders:IL}}function vL(){sh.makeCurrent()}function _L(){return new Vn}function EL(){return ny(document),document}var IL=[{provide:Tn,useValue:s0},{provide:Bd,useValue:vL,multi:!0},{provide:Et,useFactory:EL}];var wL=[{provide:hc,useValue:"root"},{provide:Vn,useFactory:_L},{provide:oh,useClass:f0,multi:!0,deps:[Et]},{provide:oh,useClass:p0,multi:!0,deps:[Et]},Wy,zy,qy,{provide:oo,useExisting:Wy},{provide:Bc,useClass:pL},[]];var g0=(()=>{class t{_doc;constructor(n){this._doc=n}getTitle(){return this._doc.title}setTitle(n){this._doc.title=n||""}static \u0275fac=function(r){return new(r||t)(Z(Et))};static \u0275prov=z({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var ne="primary",au=Symbol("RouteTitle"),Xy=class{params;constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n[0]:n}return null}getAll(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}};function _o(t){return new Xy(t)}function b0(t,e,n){let r=n.path.split("/");if(r.length>t.length||n.pathMatch==="full"&&(e.hasChildren()||r.length<t.length))return null;let i={};for(let o=0;o<r.length;o++){let s=r[o],a=t[o];if(s[0]===":")i[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:t.slice(0,r.length),posParams:i}}function DL(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!Yn(t[n],e[n]))return!1;return!0}function Yn(t,e){let n=t?ev(t):void 0,r=e?ev(e):void 0;if(!n||!r||n.length!=r.length)return!1;let i;for(let o=0;o<n.length;o++)if(i=n[o],!D0(t[i],e[i]))return!1;return!0}function ev(t){return[...Object.keys(t),...Object.getOwnPropertySymbols(t)]}function D0(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;let n=[...t].sort(),r=[...e].sort();return n.every((i,o)=>r[o]===i)}else return t===e}function C0(t){return t.length>0?t[t.length-1]:null}function br(t){return Ig(t)?t:hi(t)?Be(Promise.resolve(t)):Y(t)}var CL={exact:S0,subset:A0},T0={exact:TL,subset:SL,ignored:()=>!0};function m0(t,e,n){return CL[n.paths](t.root,e.root,n.matrixParams)&&T0[n.queryParams](t.queryParams,e.queryParams)&&!(n.fragment==="exact"&&t.fragment!==e.fragment)}function TL(t,e){return Yn(t,e)}function S0(t,e,n){if(!yo(t.segments,e.segments)||!uh(t.segments,e.segments,n)||t.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!t.children[r]||!S0(t.children[r],e.children[r],n))return!1;return!0}function SL(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>D0(t[n],e[n]))}function A0(t,e,n){return R0(t,e,e.segments,n)}function R0(t,e,n,r){if(t.segments.length>n.length){let i=t.segments.slice(0,n.length);return!(!yo(i,n)||e.hasChildren()||!uh(i,n,r))}else if(t.segments.length===n.length){if(!yo(t.segments,n)||!uh(t.segments,n,r))return!1;for(let i in e.children)if(!t.children[i]||!A0(t.children[i],e.children[i],r))return!1;return!0}else{let i=n.slice(0,t.segments.length),o=n.slice(t.segments.length);return!yo(t.segments,i)||!uh(t.segments,i,r)||!t.children[ne]?!1:R0(t.children[ne],e,o,r)}}function uh(t,e,n){return e.every((r,i)=>T0[n](t[i].parameters,r.parameters))}var Jn=class{root;queryParams;fragment;_queryParamMap;constructor(e=new Ee([],{}),n={},r=null){this.root=e,this.queryParams=n,this.fragment=r}get queryParamMap(){return this._queryParamMap??=_o(this.queryParams),this._queryParamMap}toString(){return NL.serialize(this)}},Ee=class{segments;children;parent=null;constructor(e,n){this.segments=e,this.children=n,Object.values(n).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return lh(this)}},gi=class{path;parameters;_parameterMap;constructor(e,n){this.path=e,this.parameters=n}get parameterMap(){return this._parameterMap??=_o(this.parameters),this._parameterMap}toString(){return M0(this)}};function AL(t,e){return yo(t,e)&&t.every((n,r)=>Yn(n.parameters,e[r].parameters))}function yo(t,e){return t.length!==e.length?!1:t.every((n,r)=>n.path===e[r].path)}function RL(t,e){let n=[];return Object.entries(t.children).forEach(([r,i])=>{r===ne&&(n=n.concat(e(i,r)))}),Object.entries(t.children).forEach(([r,i])=>{r!==ne&&(n=n.concat(e(i,r)))}),n}var cu=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275prov=z({token:t,factory:()=>new Eo,providedIn:"root"})}return t})(),Eo=class{parse(e){let n=new nv(e);return new Jn(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(e){let n=`/${Wc(e.root,!0)}`,r=xL(e.queryParams),i=typeof e.fragment=="string"?`#${ML(e.fragment)}`:"";return`${n}${r}${i}`}},NL=new Eo;function lh(t){return t.segments.map(e=>M0(e)).join("/")}function Wc(t,e){if(!t.hasChildren())return lh(t);if(e){let n=t.children[ne]?Wc(t.children[ne],!1):"",r=[];return Object.entries(t.children).forEach(([i,o])=>{i!==ne&&r.push(`${i}:${Wc(o,!1)}`)}),r.length>0?`${n}(${r.join("//")})`:n}else{let n=RL(t,(r,i)=>i===ne?[Wc(t.children[ne],!1)]:[`${i}:${Wc(r,!1)}`]);return Object.keys(t.children).length===1&&t.children[ne]!=null?`${lh(t)}/${n[0]}`:`${lh(t)}/(${n.join("//")})`}}function N0(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function ah(t){return N0(t).replace(/%3B/gi,";")}function ML(t){return encodeURI(t)}function tv(t){return N0(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function dh(t){return decodeURIComponent(t)}function y0(t){return dh(t.replace(/\+/g,"%20"))}function M0(t){return`${tv(t.path)}${PL(t.parameters)}`}function PL(t){return Object.entries(t).map(([e,n])=>`;${tv(e)}=${tv(n)}`).join("")}function xL(t){let e=Object.entries(t).map(([n,r])=>Array.isArray(r)?r.map(i=>`${ah(n)}=${ah(i)}`).join("&"):`${ah(n)}=${ah(r)}`).filter(n=>n);return e.length?`?${e.join("&")}`:""}var kL=/^[^\/()?;#]+/;function Qy(t){let e=t.match(kL);return e?e[0]:""}var OL=/^[^\/()?;=#]+/;function FL(t){let e=t.match(OL);return e?e[0]:""}var LL=/^[^=?&#]+/;function VL(t){let e=t.match(LL);return e?e[0]:""}var jL=/^[^&#]+/;function UL(t){let e=t.match(jL);return e?e[0]:""}var nv=class{url;remaining;constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new Ee([],{}):new Ee([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(n).length>0)&&(r[ne]=new Ee(e,n)),r}parseSegment(){let e=Qy(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new H(4009,!1);return this.capture(e),new gi(dh(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let n=FL(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let i=Qy(this.remaining);i&&(r=i,this.capture(r))}e[dh(n)]=dh(r)}parseQueryParam(e){let n=VL(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let s=UL(this.remaining);s&&(r=s,this.capture(r))}let i=y0(n),o=y0(r);if(e.hasOwnProperty(i)){let s=e[i];Array.isArray(s)||(s=[s],e[i]=s),s.push(o)}else e[i]=o}parseParens(e){let n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=Qy(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new H(4010,!1);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=ne);let s=this.parseChildren();n[o]=Object.keys(s).length===1?s[ne]:new Ee([],s),this.consumeOptional("//")}return n}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new H(4011,!1)}};function P0(t){return t.segments.length>0?new Ee([],{[ne]:t}):t}function x0(t){let e={};for(let[r,i]of Object.entries(t.children)){let o=x0(i);if(r===ne&&o.segments.length===0&&o.hasChildren())for(let[s,a]of Object.entries(o.children))e[s]=a;else(o.segments.length>0||o.hasChildren())&&(e[r]=o)}let n=new Ee(t.segments,e);return BL(n)}function BL(t){if(t.numberOfChildren===1&&t.children[ne]){let e=t.children[ne];return new Ee(t.segments.concat(e.segments),e.children)}return t}function mi(t){return t instanceof Jn}function k0(t,e,n=null,r=null){let i=O0(t);return F0(i,e,n,r)}function O0(t){let e;function n(o){let s={};for(let u of o.children){let l=n(u);s[u.outlet]=l}let a=new Ee(o.url,s);return o===t&&(e=a),a}let r=n(t.root),i=P0(r);return e??i}function F0(t,e,n,r){let i=t;for(;i.parent;)i=i.parent;if(e.length===0)return Yy(i,i,i,n,r);let o=$L(e);if(o.toRoot())return Yy(i,i,new Ee([],{}),n,r);let s=HL(o,i,t),a=s.processChildren?Qc(s.segmentGroup,s.index,o.commands):V0(s.segmentGroup,s.index,o.commands);return Yy(i,s.segmentGroup,a,n,r)}function hh(t){return typeof t=="object"&&t!=null&&!t.outlets&&!t.segmentPath}function Jc(t){return typeof t=="object"&&t!=null&&t.outlets}function Yy(t,e,n,r,i){let o={};r&&Object.entries(r).forEach(([u,l])=>{o[u]=Array.isArray(l)?l.map(h=>`${h}`):`${l}`});let s;t===e?s=n:s=L0(t,e,n);let a=P0(x0(s));return new Jn(a,o,i)}function L0(t,e,n){let r={};return Object.entries(t.children).forEach(([i,o])=>{o===e?r[i]=n:r[i]=L0(o,e,n)}),new Ee(t.segments,r)}var fh=class{isAbsolute;numberOfDoubleDots;commands;constructor(e,n,r){if(this.isAbsolute=e,this.numberOfDoubleDots=n,this.commands=r,e&&r.length>0&&hh(r[0]))throw new H(4003,!1);let i=r.find(Jc);if(i&&i!==C0(r))throw new H(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function $L(t){if(typeof t[0]=="string"&&t.length===1&&t[0]==="/")return new fh(!0,0,t);let e=0,n=!1,r=t.reduce((i,o,s)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let a={};return Object.entries(o.outlets).forEach(([u,l])=>{a[u]=typeof l=="string"?l.split("/"):l}),[...i,{outlets:a}]}if(o.segmentPath)return[...i,o.segmentPath]}return typeof o!="string"?[...i,o]:s===0?(o.split("/").forEach((a,u)=>{u==0&&a==="."||(u==0&&a===""?n=!0:a===".."?e++:a!=""&&i.push(a))}),i):[...i,o]},[]);return new fh(n,e,r)}var Hs=class{segmentGroup;processChildren;index;constructor(e,n,r){this.segmentGroup=e,this.processChildren=n,this.index=r}};function HL(t,e,n){if(t.isAbsolute)return new Hs(e,!0,0);if(!n)return new Hs(e,!1,NaN);if(n.parent===null)return new Hs(n,!0,0);let r=hh(t.commands[0])?0:1,i=n.segments.length-1+r;return qL(n,i,t.numberOfDoubleDots)}function qL(t,e,n){let r=t,i=e,o=n;for(;o>i;){if(o-=i,r=r.parent,!r)throw new H(4005,!1);i=r.segments.length}return new Hs(r,!1,i-o)}function zL(t){return Jc(t[0])?t[0].outlets:{[ne]:t}}function V0(t,e,n){if(t??=new Ee([],{}),t.segments.length===0&&t.hasChildren())return Qc(t,e,n);let r=GL(t,e,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){let o=new Ee(t.segments.slice(0,r.pathIndex),{});return o.children[ne]=new Ee(t.segments.slice(r.pathIndex),t.children),Qc(o,0,i)}else return r.match&&i.length===0?new Ee(t.segments,{}):r.match&&!t.hasChildren()?rv(t,e,n):r.match?Qc(t,0,i):rv(t,e,n)}function Qc(t,e,n){if(n.length===0)return new Ee(t.segments,{});{let r=zL(n),i={};if(Object.keys(r).some(o=>o!==ne)&&t.children[ne]&&t.numberOfChildren===1&&t.children[ne].segments.length===0){let o=Qc(t.children[ne],e,n);return new Ee(t.segments,o.children)}return Object.entries(r).forEach(([o,s])=>{typeof s=="string"&&(s=[s]),s!==null&&(i[o]=V0(t.children[o],e,s))}),Object.entries(t.children).forEach(([o,s])=>{r[o]===void 0&&(i[o]=s)}),new Ee(t.segments,i)}}function GL(t,e,n){let r=0,i=e,o={match:!1,pathIndex:0,commandIndex:0};for(;i<t.segments.length;){if(r>=n.length)return o;let s=t.segments[i],a=n[r];if(Jc(a))break;let u=`${a}`,l=r<n.length-1?n[r+1]:null;if(i>0&&u===void 0)break;if(u&&l&&typeof l=="object"&&l.outlets===void 0){if(!_0(u,l,s))return o;r+=2}else{if(!_0(u,{},s))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function rv(t,e,n){let r=t.segments.slice(0,e),i=0;for(;i<n.length;){let o=n[i];if(Jc(o)){let u=WL(o.outlets);return new Ee(r,u)}if(i===0&&hh(n[0])){let u=t.segments[e];r.push(new gi(u.path,v0(n[0]))),i++;continue}let s=Jc(o)?o.outlets[ne]:`${o}`,a=i<n.length-1?n[i+1]:null;s&&a&&hh(a)?(r.push(new gi(s,v0(a))),i+=2):(r.push(new gi(s,{})),i++)}return new Ee(r,{})}function WL(t){let e={};return Object.entries(t).forEach(([n,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[n]=rv(new Ee([],{}),0,r))}),e}function v0(t){let e={};return Object.entries(t).forEach(([n,r])=>e[n]=`${r}`),e}function _0(t,e,n){return t==n.path&&Yn(e,n.parameters)}var Yc="imperative",dt=(function(t){return t[t.NavigationStart=0]="NavigationStart",t[t.NavigationEnd=1]="NavigationEnd",t[t.NavigationCancel=2]="NavigationCancel",t[t.NavigationError=3]="NavigationError",t[t.RoutesRecognized=4]="RoutesRecognized",t[t.ResolveStart=5]="ResolveStart",t[t.ResolveEnd=6]="ResolveEnd",t[t.GuardsCheckStart=7]="GuardsCheckStart",t[t.GuardsCheckEnd=8]="GuardsCheckEnd",t[t.RouteConfigLoadStart=9]="RouteConfigLoadStart",t[t.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",t[t.ChildActivationStart=11]="ChildActivationStart",t[t.ChildActivationEnd=12]="ChildActivationEnd",t[t.ActivationStart=13]="ActivationStart",t[t.ActivationEnd=14]="ActivationEnd",t[t.Scroll=15]="Scroll",t[t.NavigationSkipped=16]="NavigationSkipped",t})(dt||{}),on=class{id;url;constructor(e,n){this.id=e,this.url=n}},Io=class extends on{type=dt.NavigationStart;navigationTrigger;restoredState;constructor(e,n,r="imperative",i=null){super(e,n),this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},Xn=class extends on{urlAfterRedirects;type=dt.NavigationEnd;constructor(e,n,r){super(e,n),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},Bt=(function(t){return t[t.Redirect=0]="Redirect",t[t.SupersededByNewNavigation=1]="SupersededByNewNavigation",t[t.NoDataFromResolver=2]="NoDataFromResolver",t[t.GuardRejected=3]="GuardRejected",t[t.Aborted=4]="Aborted",t})(Bt||{}),Xc=(function(t){return t[t.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",t[t.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",t})(Xc||{}),Zn=class extends on{reason;code;type=dt.NavigationCancel;constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},wr=class extends on{reason;code;type=dt.NavigationSkipped;constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i}},zs=class extends on{error;target;type=dt.NavigationError;constructor(e,n,r,i){super(e,n),this.error=r,this.target=i}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},eu=class extends on{urlAfterRedirects;state;type=dt.RoutesRecognized;constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},ph=class extends on{urlAfterRedirects;state;type=dt.GuardsCheckStart;constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},gh=class extends on{urlAfterRedirects;state;shouldActivate;type=dt.GuardsCheckEnd;constructor(e,n,r,i,o){super(e,n),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},mh=class extends on{urlAfterRedirects;state;type=dt.ResolveStart;constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},yh=class extends on{urlAfterRedirects;state;type=dt.ResolveEnd;constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},vh=class{route;type=dt.RouteConfigLoadStart;constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},_h=class{route;type=dt.RouteConfigLoadEnd;constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},Eh=class{snapshot;type=dt.ChildActivationStart;constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Ih=class{snapshot;type=dt.ChildActivationEnd;constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},wh=class{snapshot;type=dt.ActivationStart;constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},bh=class{snapshot;type=dt.ActivationEnd;constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}};var tu=class{},Gs=class{url;navigationBehaviorOptions;constructor(e,n){this.url=e,this.navigationBehaviorOptions=n}};function KL(t){return!(t instanceof tu)&&!(t instanceof Gs)}function QL(t,e){return t.providers&&!t._injector&&(t._injector=kc(t.providers,e,`Route: ${t.path}`)),t._injector??e}function Nn(t){return t.outlet||ne}function YL(t,e){let n=t.filter(r=>Nn(r)===e);return n.push(...t.filter(r=>Nn(r)!==e)),n}function Qs(t){if(!t)return null;if(t.routeConfig?._injector)return t.routeConfig._injector;for(let e=t.parent;e;e=e.parent){let n=e.routeConfig;if(n?._loadedInjector)return n._loadedInjector;if(n?._injector)return n._injector}return null}var Dh=class{rootInjector;outlet=null;route=null;children;attachRef=null;get injector(){return Qs(this.route?.snapshot)??this.rootInjector}constructor(e){this.rootInjector=e,this.children=new Ys(this.rootInjector)}},Ys=(()=>{class t{rootInjector;contexts=new Map;constructor(n){this.rootInjector=n}onChildOutletCreated(n,r){let i=this.getOrCreateContext(n);i.outlet=r,this.contexts.set(n,i)}onChildOutletDestroyed(n){let r=this.getContext(n);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let n=this.contexts;return this.contexts=new Map,n}onOutletReAttached(n){this.contexts=n}getOrCreateContext(n){let r=this.getContext(n);return r||(r=new Dh(this.rootInjector),this.contexts.set(n,r)),r}getContext(n){return this.contexts.get(n)||null}static \u0275fac=function(r){return new(r||t)(Z(Ke))};static \u0275prov=z({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),Ch=class{_root;constructor(e){this._root=e}get root(){return this._root.value}parent(e){let n=this.pathFromRoot(e);return n.length>1?n[n.length-2]:null}children(e){let n=iv(e,this._root);return n?n.children.map(r=>r.value):[]}firstChild(e){let n=iv(e,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(e){let n=ov(e,this._root);return n.length<2?[]:n[n.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return ov(e,this._root).map(n=>n.value)}};function iv(t,e){if(t===e.value)return e;for(let n of e.children){let r=iv(t,n);if(r)return r}return null}function ov(t,e){if(t===e.value)return[e];for(let n of e.children){let r=ov(t,n);if(r.length)return r.unshift(e),r}return[]}var rn=class{value;children;constructor(e,n){this.value=e,this.children=n}toString(){return`TreeNode(${this.value})`}};function $s(t){let e={};return t&&t.children.forEach(n=>e[n.value.outlet]=n),e}var nu=class extends Ch{snapshot;constructor(e,n){super(e),this.snapshot=n,fv(this,e)}toString(){return this.snapshot.toString()}};function j0(t){let e=ZL(t),n=new yt([new gi("",{})]),r=new yt({}),i=new yt({}),o=new yt({}),s=new yt(""),a=new Mn(n,r,o,s,i,ne,t,e.root);return a.snapshot=e.root,new nu(new rn(a,[]),e)}function ZL(t){let e={},n={},r={},o=new vo([],e,r,"",n,ne,t,null,{});return new ru("",new rn(o,[]))}var Mn=class{urlSubject;paramsSubject;queryParamsSubject;fragmentSubject;dataSubject;outlet;component;snapshot;_futureSnapshot;_routerState;_paramMap;_queryParamMap;title;url;params;queryParams;fragment;data;constructor(e,n,r,i,o,s,a,u){this.urlSubject=e,this.paramsSubject=n,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=o,this.outlet=s,this.component=a,this._futureSnapshot=u,this.title=this.dataSubject?.pipe(he(l=>l[au]))??Y(void 0),this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(he(e=>_o(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(he(e=>_o(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function Th(t,e,n="emptyOnly"){let r,{routeConfig:i}=t;return e!==null&&(n==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:F(F({},e.params),t.params),data:F(F({},e.data),t.data),resolve:F(F(F(F({},t.data),e.data),i?.data),t._resolvedData)}:r={params:F({},t.params),data:F({},t.data),resolve:F(F({},t.data),t._resolvedData??{})},i&&B0(i)&&(r.resolve[au]=i.title),r}var vo=class{url;params;queryParams;fragment;data;outlet;component;routeConfig;_resolve;_resolvedData;_routerState;_paramMap;_queryParamMap;get title(){return this.data?.[au]}constructor(e,n,r,i,o,s,a,u,l){this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=s,this.component=a,this.routeConfig=u,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=_o(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=_o(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),n=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${n}')`}},ru=class extends Ch{url;constructor(e,n){super(n),this.url=e,fv(this,n)}toString(){return U0(this._root)}};function fv(t,e){e.value._routerState=t,e.children.forEach(n=>fv(t,n))}function U0(t){let e=t.children.length>0?` { ${t.children.map(U0).join(", ")} } `:"";return`${t.value}${e}`}function Zy(t){if(t.snapshot){let e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,Yn(e.queryParams,n.queryParams)||t.queryParamsSubject.next(n.queryParams),e.fragment!==n.fragment&&t.fragmentSubject.next(n.fragment),Yn(e.params,n.params)||t.paramsSubject.next(n.params),DL(e.url,n.url)||t.urlSubject.next(n.url),Yn(e.data,n.data)||t.dataSubject.next(n.data)}else t.snapshot=t._futureSnapshot,t.dataSubject.next(t._futureSnapshot.data)}function sv(t,e){let n=Yn(t.params,e.params)&&AL(t.url,e.url),r=!t.parent!=!e.parent;return n&&!r&&(!t.parent||sv(t.parent,e.parent))}function B0(t){return typeof t.title=="string"||t.title===null}var $0=new q(""),wo=(()=>{class t{activated=null;get activatedComponentRef(){return this.activated}_activatedRoute=null;name=ne;activateEvents=new Qe;deactivateEvents=new Qe;attachEvents=new Qe;detachEvents=new Qe;routerOutletData=QT(void 0);parentContexts=R(Ys);location=R(lo);changeDetector=R(Vs);inputBinder=R(Nh,{optional:!0});supportsBindingToComponentInputs=!0;ngOnChanges(n){if(n.name){let{firstChange:r,previousValue:i}=n.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(n){return this.parentContexts.getContext(n)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let n=this.parentContexts.getContext(this.name);n?.route&&(n.attachRef?this.attach(n.attachRef,n.route):this.activateWith(n.route,n.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new H(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new H(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new H(4012,!1);this.location.detach();let n=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(n.instance),n}attach(n,r){this.activated=n,this._activatedRoute=r,this.location.insert(n.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(n.instance)}deactivate(){if(this.activated){let n=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(n)}}activateWith(n,r){if(this.isActivated)throw new H(4013,!1);this._activatedRoute=n;let i=this.location,s=n.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,u=new av(n,a,i.injector,this.routerOutletData);this.activated=i.createComponent(s,{index:i.length,injector:u,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static \u0275fac=function(r){return new(r||t)};static \u0275dir=Ye({type:t,selectors:[["router-outlet"]],inputs:{name:"name",routerOutletData:[1,"routerOutletData"]},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],features:[_r]})}return t})(),av=class{route;childContexts;parent;outletData;constructor(e,n,r,i){this.route=e,this.childContexts=n,this.parent=r,this.outletData=i}get(e,n){return e===Mn?this.route:e===Ys?this.childContexts:e===$0?this.outletData:this.parent.get(e,n)}},Nh=new q("");var pv=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275cmp=It({type:t,selectors:[["ng-component"]],exportAs:["emptyRouterOutlet"],decls:1,vars:0,template:function(r,i){r&1&&Ir(0,"router-outlet")},dependencies:[wo],encapsulation:2})}return t})();function gv(t){let e=t.children&&t.children.map(gv),n=e?re(F({},t),{children:e}):F({},t);return!n.component&&!n.loadComponent&&(e||n.loadChildren)&&n.outlet&&n.outlet!==ne&&(n.component=pv),n}function JL(t,e,n){let r=iu(t,e._root,n?n._root:void 0);return new nu(r,e)}function iu(t,e,n){if(n&&t.shouldReuseRoute(e.value,n.value.snapshot)){let r=n.value;r._futureSnapshot=e.value;let i=XL(t,e,n);return new rn(r,i)}else{if(t.shouldAttach(e.value)){let o=t.retrieve(e.value);if(o!==null){let s=o.route;return s.value._futureSnapshot=e.value,s.children=e.children.map(a=>iu(t,a)),s}}let r=eV(e.value),i=e.children.map(o=>iu(t,o));return new rn(r,i)}}function XL(t,e,n){return e.children.map(r=>{for(let i of n.children)if(t.shouldReuseRoute(r.value,i.value.snapshot))return iu(t,r,i);return iu(t,r)})}function eV(t){return new Mn(new yt(t.url),new yt(t.params),new yt(t.queryParams),new yt(t.fragment),new yt(t.data),t.outlet,t.component,t)}var Ws=class{redirectTo;navigationBehaviorOptions;constructor(e,n){this.redirectTo=e,this.navigationBehaviorOptions=n}},H0="ngNavigationCancelingError";function Sh(t,e){let{redirectTo:n,navigationBehaviorOptions:r}=mi(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=q0(!1,Bt.Redirect);return i.url=n,i.navigationBehaviorOptions=r,i}function q0(t,e){let n=new Error(`NavigationCancelingError: ${t||""}`);return n[H0]=!0,n.cancellationCode=e,n}function tV(t){return z0(t)&&mi(t.url)}function z0(t){return!!t&&t[H0]}var nV=(t,e,n,r)=>he(i=>(new cv(e,i.targetRouterState,i.currentRouterState,n,r).activate(t),i)),cv=class{routeReuseStrategy;futureState;currState;forwardEvent;inputBindingEnabled;constructor(e,n,r,i,o){this.routeReuseStrategy=e,this.futureState=n,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=o}activate(e){let n=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,r,e),Zy(this.futureState.root),this.activateChildRoutes(n,r,e)}deactivateChildRoutes(e,n,r){let i=$s(n);e.children.forEach(o=>{let s=o.value.outlet;this.deactivateRoutes(o,i[s],r),delete i[s]}),Object.values(i).forEach(o=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(e,n,r){let i=e.value,o=n?n.value:null;if(i===o)if(i.component){let s=r.getContext(i.outlet);s&&this.deactivateChildRoutes(e,n,s.children)}else this.deactivateChildRoutes(e,n,r);else o&&this.deactivateRouteAndItsChildren(n,r)}deactivateRouteAndItsChildren(e,n){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,n):this.deactivateRouteAndOutlet(e,n)}detachAndStoreRouteSubtree(e,n){let r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,o=$s(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);if(r&&r.outlet){let s=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:s,route:e,contexts:a})}}deactivateRouteAndOutlet(e,n){let r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,o=$s(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,n,r){let i=$s(n);e.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new bh(o.value.snapshot))}),e.children.length&&this.forwardEvent(new Ih(e.value.snapshot))}activateRoutes(e,n,r){let i=e.value,o=n?n.value:null;if(Zy(i),i===o)if(i.component){let s=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,n,s.children)}else this.activateChildRoutes(e,n,r);else if(i.component){let s=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),Zy(a.route.value),this.activateChildRoutes(e,null,s.children)}else s.attachRef=null,s.route=i,s.outlet&&s.outlet.activateWith(i,s.injector),this.activateChildRoutes(e,null,s.children)}else this.activateChildRoutes(e,null,r)}},Ah=class{path;route;constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},qs=class{component;route;constructor(e,n){this.component=e,this.route=n}};function rV(t,e,n){let r=t._root,i=e?e._root:null;return Kc(r,i,n,[r.value])}function iV(t){let e=t.routeConfig?t.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:t,guards:e}}function Zs(t,e){let n=Symbol(),r=e.get(t,n);return r===n?typeof t=="function"&&!Bg(t)?t:e.get(t):r}function Kc(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=$s(e);return t.children.forEach(s=>{oV(s,o[s.value.outlet],n,r.concat([s.value]),i),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,a])=>Zc(a,n.getContext(s),i)),i}function oV(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=t.value,s=e?e.value:null,a=n?n.getContext(t.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){let u=sV(s,o,o.routeConfig.runGuardsAndResolvers);u?i.canActivateChecks.push(new Ah(r)):(o.data=s.data,o._resolvedData=s._resolvedData),o.component?Kc(t,e,a?a.children:null,r,i):Kc(t,e,n,r,i),u&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new qs(a.outlet.component,s))}else s&&Zc(e,a,i),i.canActivateChecks.push(new Ah(r)),o.component?Kc(t,null,a?a.children:null,r,i):Kc(t,null,n,r,i);return i}function sV(t,e,n){if(typeof n=="function")return n(t,e);switch(n){case"pathParamsChange":return!yo(t.url,e.url);case"pathParamsOrQueryParamsChange":return!yo(t.url,e.url)||!Yn(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!sv(t,e)||!Yn(t.queryParams,e.queryParams);case"paramsChange":default:return!sv(t,e)}}function Zc(t,e,n){let r=$s(t),i=t.value;Object.entries(r).forEach(([o,s])=>{i.component?e?Zc(s,e.children.getContext(o),n):Zc(s,null,n):Zc(s,e,n)}),i.component?e&&e.outlet&&e.outlet.isActivated?n.canDeactivateChecks.push(new qs(e.outlet.component,i)):n.canDeactivateChecks.push(new qs(null,i)):n.canDeactivateChecks.push(new qs(null,i))}function uu(t){return typeof t=="function"}function aV(t){return typeof t=="boolean"}function cV(t){return t&&uu(t.canLoad)}function uV(t){return t&&uu(t.canActivate)}function lV(t){return t&&uu(t.canActivateChild)}function dV(t){return t&&uu(t.canDeactivate)}function hV(t){return t&&uu(t.canMatch)}function G0(t){return t instanceof fr||t?.name==="EmptyError"}var ch=Symbol("INITIAL_VALUE");function Ks(){return zt(t=>Kl(t.map(e=>e.pipe(pr(1),Cg(ch)))).pipe(he(e=>{for(let n of e)if(n!==!0){if(n===ch)return ch;if(n===!1||fV(n))return n}return!0}),ln(e=>e!==ch),pr(1)))}function fV(t){return mi(t)||t instanceof Ws}function pV(t,e){return rt(n=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=n;return s.length===0&&o.length===0?Y(re(F({},n),{guardsResult:!0})):gV(s,r,i,t).pipe(rt(a=>a&&aV(a)?mV(r,o,t,e):Y(a)),he(a=>re(F({},n),{guardsResult:a})))})}function gV(t,e,n,r){return Be(t).pipe(rt(i=>IV(i.component,i.route,n,e,r)),gr(i=>i!==!0,!0))}function mV(t,e,n,r){return Be(e).pipe(Is(i=>Es(vV(i.route.parent,r),yV(i.route,r),EV(t,i.path,n),_V(t,i.route,n))),gr(i=>i!==!0,!0))}function yV(t,e){return t!==null&&e&&e(new wh(t)),Y(!0)}function vV(t,e){return t!==null&&e&&e(new Eh(t)),Y(!0)}function _V(t,e,n){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return Y(!0);let i=r.map(o=>ic(()=>{let s=Qs(e)??n,a=Zs(o,s),u=uV(a)?a.canActivate(e,t):Me(s,()=>a(e,t));return br(u).pipe(gr())}));return Y(i).pipe(Ks())}function EV(t,e,n){let r=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(s=>iV(s)).filter(s=>s!==null).map(s=>ic(()=>{let a=s.guards.map(u=>{let l=Qs(s.node)??n,h=Zs(u,l),p=lV(h)?h.canActivateChild(r,t):Me(l,()=>h(r,t));return br(p).pipe(gr())});return Y(a).pipe(Ks())}));return Y(o).pipe(Ks())}function IV(t,e,n,r,i){let o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||o.length===0)return Y(!0);let s=o.map(a=>{let u=Qs(e)??i,l=Zs(a,u),h=dV(l)?l.canDeactivate(t,e,n,r):Me(u,()=>l(t,e,n,r));return br(h).pipe(gr())});return Y(s).pipe(Ks())}function wV(t,e,n,r){let i=e.canLoad;if(i===void 0||i.length===0)return Y(!0);let o=i.map(s=>{let a=Zs(s,t),u=cV(a)?a.canLoad(e,n):Me(t,()=>a(e,n));return br(u)});return Y(o).pipe(Ks(),W0(r))}function W0(t){return fg(at(e=>{if(typeof e!="boolean")throw Sh(t,e)}),he(e=>e===!0))}function bV(t,e,n,r){let i=e.canMatch;if(!i||i.length===0)return Y(!0);let o=i.map(s=>{let a=Zs(s,t),u=hV(a)?a.canMatch(e,n):Me(t,()=>a(e,n));return br(u)});return Y(o).pipe(Ks(),W0(r))}var ou=class{segmentGroup;constructor(e){this.segmentGroup=e||null}},su=class extends Error{urlTree;constructor(e){super(),this.urlTree=e}};function Bs(t){return _s(new ou(t))}function DV(t){return _s(new H(4e3,!1))}function CV(t){return _s(q0(!1,Bt.GuardRejected))}var uv=class{urlSerializer;urlTree;constructor(e,n){this.urlSerializer=e,this.urlTree=n}lineralizeSegments(e,n){let r=[],i=n.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return Y(r);if(i.numberOfChildren>1||!i.children[ne])return DV(`${e.redirectTo}`);i=i.children[ne]}}applyRedirectCommands(e,n,r,i,o){return TV(n,i,o).pipe(he(s=>{if(s instanceof Jn)throw new su(s);let a=this.applyRedirectCreateUrlTree(s,this.urlSerializer.parse(s),e,r);if(s[0]==="/")throw new su(a);return a}))}applyRedirectCreateUrlTree(e,n,r,i){let o=this.createSegmentGroup(e,n.root,r,i);return new Jn(o,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(e,n){let r={};return Object.entries(e).forEach(([i,o])=>{if(typeof o=="string"&&o[0]===":"){let a=o.substring(1);r[i]=n[a]}else r[i]=o}),r}createSegmentGroup(e,n,r,i){let o=this.createSegments(e,n.segments,r,i),s={};return Object.entries(n.children).forEach(([a,u])=>{s[a]=this.createSegmentGroup(e,u,r,i)}),new Ee(o,s)}createSegments(e,n,r,i){return n.map(o=>o.path[0]===":"?this.findPosParam(e,o,i):this.findOrReturn(o,r))}findPosParam(e,n,r){let i=r[n.path.substring(1)];if(!i)throw new H(4001,!1);return i}findOrReturn(e,n){let r=0;for(let i of n){if(i.path===e.path)return n.splice(r),i;r++}return e}};function TV(t,e,n){if(typeof t=="string")return Y(t);let r=t,{queryParams:i,fragment:o,routeConfig:s,url:a,outlet:u,params:l,data:h,title:p}=e;return br(Me(n,()=>r({params:l,data:h,queryParams:i,fragment:o,routeConfig:s,url:a,outlet:u,title:p})))}var lv={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function SV(t,e,n,r,i){let o=K0(t,e,n);return o.matched?(r=QL(e,r),bV(r,e,n,i).pipe(he(s=>s===!0?o:F({},lv)))):Y(o)}function K0(t,e,n){if(e.path==="**")return AV(n);if(e.path==="")return e.pathMatch==="full"&&(t.hasChildren()||n.length>0)?F({},lv):{matched:!0,consumedSegments:[],remainingSegments:n,parameters:{},positionalParamSegments:{}};let i=(e.matcher||b0)(n,t,e);if(!i)return F({},lv);let o={};Object.entries(i.posParams??{}).forEach(([a,u])=>{o[a]=u.path});let s=i.consumed.length>0?F(F({},o),i.consumed[i.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:n.slice(i.consumed.length),parameters:s,positionalParamSegments:i.posParams??{}}}function AV(t){return{matched:!0,parameters:t.length>0?C0(t).parameters:{},consumedSegments:t,remainingSegments:[],positionalParamSegments:{}}}function E0(t,e,n,r){return n.length>0&&MV(t,n,r)?{segmentGroup:new Ee(e,NV(r,new Ee(n,t.children))),slicedSegments:[]}:n.length===0&&PV(t,n,r)?{segmentGroup:new Ee(t.segments,RV(t,n,r,t.children)),slicedSegments:n}:{segmentGroup:new Ee(t.segments,t.children),slicedSegments:n}}function RV(t,e,n,r){let i={};for(let o of n)if(Mh(t,e,o)&&!r[Nn(o)]){let s=new Ee([],{});i[Nn(o)]=s}return F(F({},r),i)}function NV(t,e){let n={};n[ne]=e;for(let r of t)if(r.path===""&&Nn(r)!==ne){let i=new Ee([],{});n[Nn(r)]=i}return n}function MV(t,e,n){return n.some(r=>Mh(t,e,r)&&Nn(r)!==ne)}function PV(t,e,n){return n.some(r=>Mh(t,e,r))}function Mh(t,e,n){return(t.hasChildren()||e.length>0)&&n.pathMatch==="full"?!1:n.path===""}function xV(t,e,n){return e.length===0&&!t.children[n]}var dv=class{};function kV(t,e,n,r,i,o,s="emptyOnly"){return new hv(t,e,n,r,i,s,o).recognize()}var OV=31,hv=class{injector;configLoader;rootComponentType;config;urlTree;paramsInheritanceStrategy;urlSerializer;applyRedirects;absoluteRedirectCount=0;allowRedirects=!0;constructor(e,n,r,i,o,s,a){this.injector=e,this.configLoader=n,this.rootComponentType=r,this.config=i,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.applyRedirects=new uv(this.urlSerializer,this.urlTree)}noMatchError(e){return new H(4002,`'${e.segmentGroup}'`)}recognize(){let e=E0(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(he(({children:n,rootSnapshot:r})=>{let i=new rn(r,n),o=new ru("",i),s=k0(r,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),{state:o,tree:s}}))}match(e){let n=new vo([],Object.freeze({}),Object.freeze(F({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),ne,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,ne,n).pipe(he(r=>({children:r,rootSnapshot:n})),Yr(r=>{if(r instanceof su)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof ou?this.noMatchError(r):r}))}processSegmentGroup(e,n,r,i,o){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,n,r,o):this.processSegment(e,n,r,r.segments,i,!0,o).pipe(he(s=>s instanceof rn?[s]:[]))}processChildren(e,n,r,i){let o=[];for(let s of Object.keys(r.children))s==="primary"?o.unshift(s):o.push(s);return Be(o).pipe(Is(s=>{let a=r.children[s],u=YL(n,s);return this.processSegmentGroup(e,u,a,s,i)}),Dg((s,a)=>(s.push(...a),s)),Zr(null),bg(),rt(s=>{if(s===null)return Bs(r);let a=Q0(s);return FV(a),Y(a)}))}processSegment(e,n,r,i,o,s,a){return Be(n).pipe(Is(u=>this.processSegmentAgainstRoute(u._injector??e,n,u,r,i,o,s,a).pipe(Yr(l=>{if(l instanceof ou)return Y(null);throw l}))),gr(u=>!!u),Yr(u=>{if(G0(u))return xV(r,i,o)?Y(new dv):Bs(r);throw u}))}processSegmentAgainstRoute(e,n,r,i,o,s,a,u){return Nn(r)!==s&&(s===ne||!Mh(i,o,r))?Bs(i):r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,i,r,o,s,u):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,i,n,r,o,s,u):Bs(i)}expandSegmentAgainstRouteUsingRedirect(e,n,r,i,o,s,a){let{matched:u,parameters:l,consumedSegments:h,positionalParamSegments:p,remainingSegments:m}=K0(n,i,o);if(!u)return Bs(n);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>OV&&(this.allowRedirects=!1));let y=new vo(o,l,Object.freeze(F({},this.urlTree.queryParams)),this.urlTree.fragment,I0(i),Nn(i),i.component??i._loadedComponent??null,i,w0(i)),S=Th(y,a,this.paramsInheritanceStrategy);return y.params=Object.freeze(S.params),y.data=Object.freeze(S.data),this.applyRedirects.applyRedirectCommands(h,i.redirectTo,p,y,e).pipe(zt(M=>this.applyRedirects.lineralizeSegments(i,M)),rt(M=>this.processSegment(e,r,n,M.concat(m),s,!1,a)))}matchSegmentAgainstRoute(e,n,r,i,o,s){let a=SV(n,r,i,e,this.urlSerializer);return r.path==="**"&&(n.children={}),a.pipe(zt(u=>u.matched?(e=r._injector??e,this.getChildConfig(e,r,i).pipe(zt(({routes:l})=>{let h=r._loadedInjector??e,{parameters:p,consumedSegments:m,remainingSegments:y}=u,S=new vo(m,p,Object.freeze(F({},this.urlTree.queryParams)),this.urlTree.fragment,I0(r),Nn(r),r.component??r._loadedComponent??null,r,w0(r)),P=Th(S,s,this.paramsInheritanceStrategy);S.params=Object.freeze(P.params),S.data=Object.freeze(P.data);let{segmentGroup:M,slicedSegments:j}=E0(n,m,y,l);if(j.length===0&&M.hasChildren())return this.processChildren(h,l,M,S).pipe(he(Q=>new rn(S,Q)));if(l.length===0&&j.length===0)return Y(new rn(S,[]));let K=Nn(r)===o;return this.processSegment(h,l,M,j,K?ne:o,!0,S).pipe(he(Q=>new rn(S,Q instanceof rn?[Q]:[])))}))):Bs(n)))}getChildConfig(e,n,r){return n.children?Y({routes:n.children,injector:e}):n.loadChildren?n._loadedRoutes!==void 0?Y({routes:n._loadedRoutes,injector:n._loadedInjector}):wV(e,n,r,this.urlSerializer).pipe(rt(i=>i?this.configLoader.loadChildren(e,n).pipe(at(o=>{n._loadedRoutes=o.routes,n._loadedInjector=o.injector})):CV(n))):Y({routes:[],injector:e})}};function FV(t){t.sort((e,n)=>e.value.outlet===ne?-1:n.value.outlet===ne?1:e.value.outlet.localeCompare(n.value.outlet))}function LV(t){let e=t.value.routeConfig;return e&&e.path===""}function Q0(t){let e=[],n=new Set;for(let r of t){if(!LV(r)){e.push(r);continue}let i=e.find(o=>r.value.routeConfig===o.value.routeConfig);i!==void 0?(i.children.push(...r.children),n.add(i)):e.push(r)}for(let r of n){let i=Q0(r.children);e.push(new rn(r.value,i))}return e.filter(r=>!n.has(r))}function I0(t){return t.data||{}}function w0(t){return t.resolve||{}}function VV(t,e,n,r,i,o){return rt(s=>kV(t,e,n,r,s.extractedUrl,i,o).pipe(he(({state:a,tree:u})=>re(F({},s),{targetSnapshot:a,urlAfterRedirects:u}))))}function jV(t,e){return rt(n=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=n;if(!i.length)return Y(n);let o=new Set(i.map(u=>u.route)),s=new Set;for(let u of o)if(!s.has(u))for(let l of Y0(u))s.add(l);let a=0;return Be(s).pipe(Is(u=>o.has(u)?UV(u,r,t,e):(u.data=Th(u,u.parent,t).resolve,Y(void 0))),at(()=>a++),ws(1),rt(u=>a===s.size?Y(n):Ht))})}function Y0(t){let e=t.children.map(n=>Y0(n)).flat();return[t,...e]}function UV(t,e,n,r){let i=t.routeConfig,o=t._resolve;return i?.title!==void 0&&!B0(i)&&(o[au]=i.title),ic(()=>(t.data=Th(t,t.parent,n).resolve,BV(o,t,e,r).pipe(he(s=>(t._resolvedData=s,t.data=F(F({},t.data),s),null)))))}function BV(t,e,n,r){let i=ev(t);if(i.length===0)return Y({});let o={};return Be(i).pipe(rt(s=>$V(t[s],e,n,r).pipe(gr(),at(a=>{if(a instanceof Ws)throw Sh(new Eo,a);o[s]=a}))),ws(1),he(()=>o),Yr(s=>G0(s)?Ht:_s(s)))}function $V(t,e,n,r){let i=Qs(e)??r,o=Zs(t,i),s=o.resolve?o.resolve(e,n):Me(i,()=>o(e,n));return br(s)}function Jy(t){return zt(e=>{let n=t(e);return n?Be(n).pipe(he(()=>e)):Y(e)})}var mv=(()=>{class t{buildTitle(n){let r,i=n.root;for(;i!==void 0;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(o=>o.outlet===ne);return r}getResolvedTitleForRoute(n){return n.data[au]}static \u0275fac=function(r){return new(r||t)};static \u0275prov=z({token:t,factory:()=>R(Z0),providedIn:"root"})}return t})(),Z0=(()=>{class t extends mv{title;constructor(n){super(),this.title=n}updateTitle(n){let r=this.buildTitle(n);r!==void 0&&this.title.setTitle(r)}static \u0275fac=function(r){return new(r||t)(Z(g0))};static \u0275prov=z({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),Js=new q("",{providedIn:"root",factory:()=>({})}),lu=new q(""),J0=(()=>{class t{componentLoaders=new WeakMap;childrenLoaders=new WeakMap;onLoadStartListener;onLoadEndListener;compiler=R(Ay);loadComponent(n,r){if(this.componentLoaders.get(r))return this.componentLoaders.get(r);if(r._loadedComponent)return Y(r._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(r);let i=br(Me(n,()=>r.loadComponent())).pipe(he(eS),zt(tS),at(s=>{this.onLoadEndListener&&this.onLoadEndListener(r),r._loadedComponent=s}),oc(()=>{this.componentLoaders.delete(r)})),o=new gs(i,()=>new Ge).pipe(ps());return this.componentLoaders.set(r,o),o}loadChildren(n,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return Y({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let o=X0(r,this.compiler,n,this.onLoadEndListener).pipe(oc(()=>{this.childrenLoaders.delete(r)})),s=new gs(o,()=>new Ge).pipe(ps());return this.childrenLoaders.set(r,s),s}static \u0275fac=function(r){return new(r||t)};static \u0275prov=z({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function X0(t,e,n,r){return br(Me(n,()=>t.loadChildren())).pipe(he(eS),zt(tS),rt(i=>i instanceof Qd||Array.isArray(i)?Y(i):Be(e.compileModuleAsync(i))),he(i=>{r&&r(t);let o,s,a=!1;return Array.isArray(i)?(s=i,a=!0):(o=i.create(n).injector,s=o.get(lu,[],{optional:!0,self:!0}).flat()),{routes:s.map(gv),injector:o}}))}function HV(t){return t&&typeof t=="object"&&"default"in t}function eS(t){return HV(t)?t.default:t}function tS(t){return Y(t)}var Ph=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275prov=z({token:t,factory:()=>R(qV),providedIn:"root"})}return t})(),qV=(()=>{class t{shouldProcessUrl(n){return!0}extract(n){return n}merge(n,r){return n}static \u0275fac=function(r){return new(r||t)};static \u0275prov=z({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),nS=new q("");var rS=new q(""),iS=(()=>{class t{currentNavigation=ct(null,{equal:()=>!1});currentTransition=null;lastSuccessfulNavigation=null;events=new Ge;transitionAbortWithErrorSubject=new Ge;configLoader=R(J0);environmentInjector=R(Ke);destroyRef=R(ai);urlSerializer=R(cu);rootContexts=R(Ys);location=R(Us);inputBindingEnabled=R(Nh,{optional:!0})!==null;titleStrategy=R(mv);options=R(Js,{optional:!0})||{};paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly";urlHandlingStrategy=R(Ph);createViewTransition=R(nS,{optional:!0});navigationErrorHandler=R(rS,{optional:!0});navigationId=0;get hasRequestedNavigation(){return this.navigationId!==0}transitions;afterPreactivation=()=>Y(void 0);rootComponentType=null;destroyed=!1;constructor(){let n=i=>this.events.next(new vh(i)),r=i=>this.events.next(new _h(i));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=n,this.destroyRef.onDestroy(()=>{this.destroyed=!0})}complete(){this.transitions?.complete()}handleNavigationRequest(n){let r=++this.navigationId;ut(()=>{this.transitions?.next(re(F({},n),{extractedUrl:this.urlHandlingStrategy.extract(n.rawUrl),targetSnapshot:null,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null,abortController:new AbortController,id:r}))})}setupNavigations(n){return this.transitions=new yt(null),this.transitions.pipe(ln(r=>r!==null),zt(r=>{let i=!1;return Y(r).pipe(zt(o=>{if(this.navigationId>r.id)return this.cancelNavigationTransition(r,"",Bt.SupersededByNewNavigation),Ht;this.currentTransition=r,this.currentNavigation.set({id:o.id,initialUrl:o.rawUrl,extractedUrl:o.extractedUrl,targetBrowserUrl:typeof o.extras.browserUrl=="string"?this.urlSerializer.parse(o.extras.browserUrl):o.extras.browserUrl,trigger:o.source,extras:o.extras,previousNavigation:this.lastSuccessfulNavigation?re(F({},this.lastSuccessfulNavigation),{previousNavigation:null}):null,abort:()=>o.abortController.abort()});let s=!n.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),a=o.extras.onSameUrlNavigation??n.onSameUrlNavigation;if(!s&&a!=="reload")return this.events.next(new wr(o.id,this.urlSerializer.serialize(o.rawUrl),"",Xc.IgnoredSameUrlNavigation)),o.resolve(!1),Ht;if(this.urlHandlingStrategy.shouldProcessUrl(o.rawUrl))return Y(o).pipe(zt(u=>(this.events.next(new Io(u.id,this.urlSerializer.serialize(u.extractedUrl),u.source,u.restoredState)),u.id!==this.navigationId?Ht:Promise.resolve(u))),VV(this.environmentInjector,this.configLoader,this.rootComponentType,n.config,this.urlSerializer,this.paramsInheritanceStrategy),at(u=>{r.targetSnapshot=u.targetSnapshot,r.urlAfterRedirects=u.urlAfterRedirects,this.currentNavigation.update(h=>(h.finalUrl=u.urlAfterRedirects,h));let l=new eu(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(l)}));if(s&&this.urlHandlingStrategy.shouldProcessUrl(o.currentRawUrl)){let{id:u,extractedUrl:l,source:h,restoredState:p,extras:m}=o,y=new Io(u,this.urlSerializer.serialize(l),h,p);this.events.next(y);let S=j0(this.rootComponentType).snapshot;return this.currentTransition=r=re(F({},o),{targetSnapshot:S,urlAfterRedirects:l,extras:re(F({},m),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.update(P=>(P.finalUrl=l,P)),Y(r)}else return this.events.next(new wr(o.id,this.urlSerializer.serialize(o.extractedUrl),"",Xc.IgnoredByUrlHandlingStrategy)),o.resolve(!1),Ht}),at(o=>{let s=new ph(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot);this.events.next(s)}),he(o=>(this.currentTransition=r=re(F({},o),{guards:rV(o.targetSnapshot,o.currentSnapshot,this.rootContexts)}),r)),pV(this.environmentInjector,o=>this.events.next(o)),at(o=>{if(r.guardsResult=o.guardsResult,o.guardsResult&&typeof o.guardsResult!="boolean")throw Sh(this.urlSerializer,o.guardsResult);let s=new gh(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot,!!o.guardsResult);this.events.next(s)}),ln(o=>o.guardsResult?!0:(this.cancelNavigationTransition(o,"",Bt.GuardRejected),!1)),Jy(o=>{if(o.guards.canActivateChecks.length!==0)return Y(o).pipe(at(s=>{let a=new mh(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot);this.events.next(a)}),zt(s=>{let a=!1;return Y(s).pipe(jV(this.paramsInheritanceStrategy,this.environmentInjector),at({next:()=>a=!0,complete:()=>{a||this.cancelNavigationTransition(s,"",Bt.NoDataFromResolver)}}))}),at(s=>{let a=new yh(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot);this.events.next(a)}))}),Jy(o=>{let s=a=>{let u=[];if(a.routeConfig?.loadComponent){let l=Qs(a)??this.environmentInjector;u.push(this.configLoader.loadComponent(l,a.routeConfig).pipe(at(h=>{a.component=h}),he(()=>{})))}for(let l of a.children)u.push(...s(l));return u};return Kl(s(o.targetSnapshot.root)).pipe(Zr(null),pr(1))}),Jy(()=>this.afterPreactivation()),zt(()=>{let{currentSnapshot:o,targetSnapshot:s}=r,a=this.createViewTransition?.(this.environmentInjector,o.root,s.root);return a?Be(a).pipe(he(()=>r)):Y(r)}),he(o=>{let s=JL(n.routeReuseStrategy,o.targetSnapshot,o.currentRouterState);return this.currentTransition=r=re(F({},o),{targetRouterState:s}),this.currentNavigation.update(a=>(a.targetRouterState=s,a)),r}),at(()=>{this.events.next(new tu)}),nV(this.rootContexts,n.routeReuseStrategy,o=>this.events.next(o),this.inputBindingEnabled),pr(1),Yl(new se(o=>{let s=r.abortController.signal,a=()=>o.next();return s.addEventListener("abort",a),()=>s.removeEventListener("abort",a)}).pipe(ln(()=>!i&&!r.targetRouterState),at(()=>{this.cancelNavigationTransition(r,r.abortController.signal.reason+"",Bt.Aborted)}))),at({next:o=>{i=!0,this.lastSuccessfulNavigation=ut(this.currentNavigation),this.events.next(new Xn(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects))),this.titleStrategy?.updateTitle(o.targetRouterState.snapshot),o.resolve(!0)},complete:()=>{i=!0}}),Yl(this.transitionAbortWithErrorSubject.pipe(at(o=>{throw o}))),oc(()=>{i||this.cancelNavigationTransition(r,"",Bt.SupersededByNewNavigation),this.currentTransition?.id===r.id&&(this.currentNavigation.set(null),this.currentTransition=null)}),Yr(o=>{if(this.destroyed)return r.resolve(!1),Ht;if(i=!0,z0(o))this.events.next(new Zn(r.id,this.urlSerializer.serialize(r.extractedUrl),o.message,o.cancellationCode)),tV(o)?this.events.next(new Gs(o.url,o.navigationBehaviorOptions)):r.resolve(!1);else{let s=new zs(r.id,this.urlSerializer.serialize(r.extractedUrl),o,r.targetSnapshot??void 0);try{let a=Me(this.environmentInjector,()=>this.navigationErrorHandler?.(s));if(a instanceof Ws){let{message:u,cancellationCode:l}=Sh(this.urlSerializer,a);this.events.next(new Zn(r.id,this.urlSerializer.serialize(r.extractedUrl),u,l)),this.events.next(new Gs(a.redirectTo,a.navigationBehaviorOptions))}else throw this.events.next(s),o}catch(a){this.options.resolveNavigationPromiseOnError?r.resolve(!1):r.reject(a)}}return Ht}))}))}cancelNavigationTransition(n,r,i){let o=new Zn(n.id,this.urlSerializer.serialize(n.extractedUrl),r,i);this.events.next(o),n.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let n=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=ut(this.currentNavigation),i=r?.targetBrowserUrl??r?.extractedUrl;return n.toString()!==i?.toString()&&!r?.extras.skipLocationChange}static \u0275fac=function(r){return new(r||t)};static \u0275prov=z({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function zV(t){return t!==Yc}var oS=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275prov=z({token:t,factory:()=>R(GV),providedIn:"root"})}return t})(),Rh=class{shouldDetach(e){return!1}store(e,n){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,n){return e.routeConfig===n.routeConfig}},GV=(()=>{class t extends Rh{static \u0275fac=(()=>{let n;return function(i){return(n||(n=ui(t)))(i||t)}})();static \u0275prov=z({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),sS=(()=>{class t{urlSerializer=R(cu);options=R(Js,{optional:!0})||{};canceledNavigationResolution=this.options.canceledNavigationResolution||"replace";location=R(Us);urlHandlingStrategy=R(Ph);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";currentUrlTree=new Jn;getCurrentUrlTree(){return this.currentUrlTree}rawUrlTree=this.currentUrlTree;getRawUrlTree(){return this.rawUrlTree}createBrowserPath({finalUrl:n,initialUrl:r,targetBrowserUrl:i}){let o=n!==void 0?this.urlHandlingStrategy.merge(n,r):r,s=i??o;return s instanceof Jn?this.urlSerializer.serialize(s):s}commitTransition({targetRouterState:n,finalUrl:r,initialUrl:i}){r&&n?(this.currentUrlTree=r,this.rawUrlTree=this.urlHandlingStrategy.merge(r,i),this.routerState=n):this.rawUrlTree=i}routerState=j0(null);getRouterState(){return this.routerState}stateMemento=this.createStateMemento();updateStateMemento(){this.stateMemento=this.createStateMemento()}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}resetInternalState({finalUrl:n}){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n??this.rawUrlTree)}static \u0275fac=function(r){return new(r||t)};static \u0275prov=z({token:t,factory:()=>R(WV),providedIn:"root"})}return t})(),WV=(()=>{class t extends sS{currentPageId=0;lastSuccessfulId=-1;restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}registerNonRouterCurrentEntryChangeListener(n){return this.location.subscribe(r=>{r.type==="popstate"&&setTimeout(()=>{n(r.url,r.state,"popstate")})})}handleRouterEvent(n,r){n instanceof Io?this.updateStateMemento():n instanceof wr?this.commitTransition(r):n instanceof eu?this.urlUpdateStrategy==="eager"&&(r.extras.skipLocationChange||this.setBrowserUrl(this.createBrowserPath(r),r)):n instanceof tu?(this.commitTransition(r),this.urlUpdateStrategy==="deferred"&&!r.extras.skipLocationChange&&this.setBrowserUrl(this.createBrowserPath(r),r)):n instanceof Zn&&n.code!==Bt.SupersededByNewNavigation&&n.code!==Bt.Redirect?this.restoreHistory(r):n instanceof zs?this.restoreHistory(r,!0):n instanceof Xn&&(this.lastSuccessfulId=n.id,this.currentPageId=this.browserPageId)}setBrowserUrl(n,{extras:r,id:i}){let{replaceUrl:o,state:s}=r;if(this.location.isCurrentPathEqualTo(n)||o){let a=this.browserPageId,u=F(F({},s),this.generateNgRouterState(i,a));this.location.replaceState(n,"",u)}else{let a=F(F({},s),this.generateNgRouterState(i,this.browserPageId+1));this.location.go(n,"",a)}}restoreHistory(n,r=!1){if(this.canceledNavigationResolution==="computed"){let i=this.browserPageId,o=this.currentPageId-i;o!==0?this.location.historyGo(o):this.getCurrentUrlTree()===n.finalUrl&&o===0&&(this.resetInternalState(n),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetInternalState(n),this.resetUrlToCurrentUrlTree())}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.getRawUrlTree()),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(n,r){return this.canceledNavigationResolution==="computed"?{navigationId:n,\u0275routerPageId:r}:{navigationId:n}}static \u0275fac=(()=>{let n;return function(i){return(n||(n=ui(t)))(i||t)}})();static \u0275prov=z({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function yv(t,e){t.events.pipe(ln(n=>n instanceof Xn||n instanceof Zn||n instanceof zs||n instanceof wr),he(n=>n instanceof Xn||n instanceof wr?0:(n instanceof Zn?n.code===Bt.Redirect||n.code===Bt.SupersededByNewNavigation:!1)?2:1),ln(n=>n!==2),pr(1)).subscribe(()=>{e()})}var KV={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},QV={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},Dr=(()=>{class t{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}disposed=!1;nonRouterCurrentEntryChangeSubscription;console=R(Dy);stateManager=R(sS);options=R(Js,{optional:!0})||{};pendingTasks=R(zn);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";navigationTransitions=R(iS);urlSerializer=R(cu);location=R(Us);urlHandlingStrategy=R(Ph);injector=R(Ke);_events=new Ge;get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}navigated=!1;routeReuseStrategy=R(oS);onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore";config=R(lu,{optional:!0})?.flat()??[];componentInputBindingEnabled=!!R(Nh,{optional:!0});currentNavigation=this.navigationTransitions.currentNavigation.asReadonly();constructor(){this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this).subscribe({error:n=>{this.console.warn(n)}}),this.subscribeToNavigationEvents()}eventsSubscription=new Ue;subscribeToNavigationEvents(){let n=this.navigationTransitions.events.subscribe(r=>{try{let i=this.navigationTransitions.currentTransition,o=ut(this.navigationTransitions.currentNavigation);if(i!==null&&o!==null){if(this.stateManager.handleRouterEvent(r,o),r instanceof Zn&&r.code!==Bt.Redirect&&r.code!==Bt.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof Xn)this.navigated=!0;else if(r instanceof Gs){let s=r.navigationBehaviorOptions,a=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),u=F({browserUrl:i.extras.browserUrl,info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:i.extras.replaceUrl||this.urlUpdateStrategy==="eager"||zV(i.source)},s);this.scheduleNavigation(a,Yc,null,u,{resolve:i.resolve,reject:i.reject,promise:i.promise})}}KL(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortWithErrorSubject.next(i)}});this.eventsSubscription.add(n)}resetRootComponentType(n){this.routerState.root.component=n,this.navigationTransitions.rootComponentType=n}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),Yc,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((n,r,i)=>{this.navigateToSyncWithBrowser(n,i,r)})}navigateToSyncWithBrowser(n,r,i){let o={replaceUrl:!0},s=i?.navigationId?i:null;if(i){let u=F({},i);delete u.navigationId,delete u.\u0275routerPageId,Object.keys(u).length!==0&&(o.state=u)}let a=this.parseUrl(n);this.scheduleNavigation(a,r,s,o).catch(u=>{this.disposed||this.injector.get(Wt)(u)})}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return ut(this.navigationTransitions.currentNavigation)}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(n){this.config=n.map(gv),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this._events.unsubscribe(),this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(n,r={}){let{relativeTo:i,queryParams:o,fragment:s,queryParamsHandling:a,preserveFragment:u}=r,l=u?this.currentUrlTree.fragment:s,h=null;switch(a??this.options.defaultQueryParamsHandling){case"merge":h=F(F({},this.currentUrlTree.queryParams),o);break;case"preserve":h=this.currentUrlTree.queryParams;break;default:h=o||null}h!==null&&(h=this.removeEmptyProps(h));let p;try{let m=i?i.snapshot:this.routerState.snapshot.root;p=O0(m)}catch{(typeof n[0]!="string"||n[0][0]!=="/")&&(n=[]),p=this.currentUrlTree.root}return F0(p,n,h,l??null)}navigateByUrl(n,r={skipLocationChange:!1}){let i=mi(n)?n:this.parseUrl(n),o=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(o,Yc,null,r)}navigate(n,r={skipLocationChange:!1}){return YV(n),this.navigateByUrl(this.createUrlTree(n,r),r)}serializeUrl(n){return this.urlSerializer.serialize(n)}parseUrl(n){try{return this.urlSerializer.parse(n)}catch{return this.urlSerializer.parse("/")}}isActive(n,r){let i;if(r===!0?i=F({},KV):r===!1?i=F({},QV):i=r,mi(n))return m0(this.currentUrlTree,n,i);let o=this.parseUrl(n);return m0(this.currentUrlTree,o,i)}removeEmptyProps(n){return Object.entries(n).reduce((r,[i,o])=>(o!=null&&(r[i]=o),r),{})}scheduleNavigation(n,r,i,o,s){if(this.disposed)return Promise.resolve(!1);let a,u,l;s?(a=s.resolve,u=s.reject,l=s.promise):l=new Promise((p,m)=>{a=p,u=m});let h=this.pendingTasks.add();return yv(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(h))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:n,extras:o,resolve:a,reject:u,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(p=>Promise.reject(p))}static \u0275fac=function(r){return new(r||t)};static \u0275prov=z({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function YV(t){for(let e=0;e<t.length;e++)if(t[e]==null)throw new H(4008,!1)}var xh=(()=>{class t{router;route;tabIndexAttribute;renderer;el;locationStrategy;reactiveHref=ct(null);get href(){return ut(this.reactiveHref)}set href(n){this.reactiveHref.set(n)}target;queryParams;fragment;queryParamsHandling;state;info;relativeTo;isAnchorElement;subscription;onChanges=new Ge;applicationErrorHandler=R(Wt);options=R(Js,{optional:!0});constructor(n,r,i,o,s,a){this.router=n,this.route=r,this.tabIndexAttribute=i,this.renderer=o,this.el=s,this.locationStrategy=a,this.reactiveHref.set(R(new eh("href"),{optional:!0}));let u=s.nativeElement.tagName?.toLowerCase();this.isAnchorElement=u==="a"||u==="area"||!!(typeof customElements=="object"&&customElements.get(u)?.observedAttributes?.includes?.("href")),this.isAnchorElement?this.setTabIndexIfNotOnNativeEl("0"):this.subscribeToNavigationEventsIfNecessary()}subscribeToNavigationEventsIfNecessary(){if(this.subscription!==void 0||!this.isAnchorElement)return;let n=this.preserveFragment,r=i=>i==="merge"||i==="preserve";n||=r(this.queryParamsHandling),n||=!this.queryParamsHandling&&!r(this.options?.defaultQueryParamsHandling),n&&(this.subscription=this.router.events.subscribe(i=>{i instanceof Xn&&this.updateHref()}))}preserveFragment=!1;skipLocationChange=!1;replaceUrl=!1;setTabIndexIfNotOnNativeEl(n){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",n)}ngOnChanges(n){this.isAnchorElement&&(this.updateHref(),this.subscribeToNavigationEventsIfNecessary()),this.onChanges.next(this)}routerLinkInput=null;set routerLink(n){n==null?(this.routerLinkInput=null,this.setTabIndexIfNotOnNativeEl(null)):(mi(n)?this.routerLinkInput=n:this.routerLinkInput=Array.isArray(n)?n:[n],this.setTabIndexIfNotOnNativeEl("0"))}onClick(n,r,i,o,s){let a=this.urlTree;if(a===null||this.isAnchorElement&&(n!==0||r||i||o||s||typeof this.target=="string"&&this.target!="_self"))return!0;let u={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(a,u)?.catch(l=>{this.applicationErrorHandler(l)}),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){let n=this.urlTree;this.reactiveHref.set(n!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(n))??"":null)}applyAttributeValue(n,r){let i=this.renderer,o=this.el.nativeElement;r!==null?i.setAttribute(o,n,r):i.removeAttribute(o,n)}get urlTree(){return this.routerLinkInput===null?null:mi(this.routerLinkInput)?this.routerLinkInput:this.router.createUrlTree(this.routerLinkInput,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static \u0275fac=function(r){return new(r||t)(pe(Dr),pe(Mn),Mc("tabindex"),pe(uo),pe(li),pe(js))};static \u0275dir=Ye({type:t,selectors:[["","routerLink",""]],hostVars:2,hostBindings:function(r,i){r&1&&ae("click",function(s){return i.onClick(s.button,s.ctrlKey,s.shiftKey,s.altKey,s.metaKey)}),r&2&&ho("href",i.reactiveHref(),oy)("target",i.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[2,"preserveFragment","preserveFragment",go],skipLocationChange:[2,"skipLocationChange","skipLocationChange",go],replaceUrl:[2,"replaceUrl","replaceUrl",go],routerLink:"routerLink"},features:[_r]})}return t})();var JV=new q("");function vv(t,...e){return Bn([{provide:lu,multi:!0,useValue:t},[],{provide:Mn,useFactory:XV,deps:[Dr]},{provide:Yd,multi:!0,useFactory:e2},e.map(n=>n.\u0275providers)])}function XV(t){return t.routerState.root}function e2(){let t=R(Ne);return e=>{let n=t.get(fi);if(e!==n.components[0])return;let r=t.get(Dr),i=t.get(t2);t.get(n2)===1&&r.initialNavigation(),t.get(r2,null,{optional:!0})?.setUpPreloading(),t.get(JV,null,{optional:!0})?.init(),r.resetRootComponentType(n.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var t2=new q("",{factory:()=>new Ge}),n2=new q("",{providedIn:"root",factory:()=>1});var r2=new q("");var aS=()=>{};var lS=function(t){let e=[],n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},o2=function(t){let e=[],n=0,r=0;for(;n<t.length;){let i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let o=t[n++];e[r++]=String.fromCharCode((i&31)<<6|o&63)}else if(i>239&&i<365){let o=t[n++],s=t[n++],a=t[n++],u=((i&7)<<18|(o&63)<<12|(s&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{let o=t[n++],s=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(o&63)<<6|s&63)}}return e.join("")},kh={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();let n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){let o=t[i],s=i+1<t.length,a=s?t[i+1]:0,u=i+2<t.length,l=u?t[i+2]:0,h=o>>2,p=(o&3)<<4|a>>4,m=(a&15)<<2|l>>6,y=l&63;u||(y=64,s||(m=64)),r.push(n[h],n[p],n[m],n[y])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(lS(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):o2(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();let n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){let o=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;let l=i<t.length?n[t.charAt(i)]:64;++i;let p=i<t.length?n[t.charAt(i)]:64;if(++i,o==null||a==null||l==null||p==null)throw new Ev;let m=o<<2|a>>4;if(r.push(m),l!==64){let y=a<<4&240|l>>2;if(r.push(y),p!==64){let S=l<<6&192|p;r.push(S)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},Ev=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},s2=function(t){let e=lS(t);return kh.encodeByteArray(e,!0)},hu=function(t){return s2(t).replace(/\./g,"")},Oh=function(t){try{return kh.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function wv(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var a2=()=>wv().__FIREBASE_DEFAULTS__,c2=()=>{if(typeof process>"u"||typeof process.env>"u")return;let t=process.env.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},u2=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=t&&Oh(t[1]);return e&&JSON.parse(e)},Fh=()=>{try{return aS()||a2()||c2()||u2()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},dS=t=>{var e,n;return(n=(e=Fh())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},hS=t=>{let e=dS(t);if(!e)return;let n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},bv=()=>{var t;return(t=Fh())===null||t===void 0?void 0:t.config},fS=t=>{var e;return(e=Fh())===null||e===void 0?void 0:e[`_${t}`]};var bo=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}};function Do(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}function Dv(t){return _(this,null,function*(){return(yield fetch(t,{credentials:"include"})).ok})}function pS(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,o=t.sub||t.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let s=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},t);return[hu(JSON.stringify(n)),hu(JSON.stringify(s)),""].join(".")}var du={};function l2(){let t={prod:[],emulator:[]};for(let e of Object.keys(du))du[e]?t.emulator.push(e):t.prod.push(e);return t}function d2(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}var cS=!1;function Cv(t,e){if(typeof window>"u"||typeof document>"u"||!Do(window.location.host)||du[t]===e||du[t]||cS)return;du[t]=e;function n(m){return`__firebase__banner__${m}`}let r="__firebase__banner",o=l2().prod.length>0;function s(){let m=document.getElementById(r);m&&m.remove()}function a(m){m.style.display="flex",m.style.background="#7faaf0",m.style.position="fixed",m.style.bottom="5px",m.style.left="5px",m.style.padding=".5em",m.style.borderRadius="5px",m.style.alignItems="center"}function u(m,y){m.setAttribute("width","24"),m.setAttribute("id",y),m.setAttribute("height","24"),m.setAttribute("viewBox","0 0 24 24"),m.setAttribute("fill","none"),m.style.marginLeft="-6px"}function l(){let m=document.createElement("span");return m.style.cursor="pointer",m.style.marginLeft="16px",m.style.fontSize="24px",m.innerHTML=" &times;",m.onclick=()=>{cS=!0,s()},m}function h(m,y){m.setAttribute("id",y),m.innerText="Learn more",m.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",m.setAttribute("target","__blank"),m.style.paddingLeft="5px",m.style.textDecoration="underline"}function p(){let m=d2(r),y=n("text"),S=document.getElementById(y)||document.createElement("span"),P=n("learnmore"),M=document.getElementById(P)||document.createElement("a"),j=n("preprendIcon"),K=document.getElementById(j)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(m.created){let Q=m.element;a(Q),h(M,P);let Ae=l();u(K,j),Q.append(K,S,M,Ae),document.body.appendChild(Q)}o?(S.innerText="Preview backend disconnected.",K.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(K.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,S.innerText="Preview backend running in this workspace."),S.setAttribute("id",y)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",p):p()}function sn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function gS(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(sn())}function h2(){var t;let e=(t=Fh())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function mS(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function yS(){let t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function vS(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function _S(){return!h2()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Co(){try{return typeof indexedDB=="object"}catch{return!1}}function Lh(){return new Promise((t,e)=>{try{let n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var o;e(((o=i.error)===null||o===void 0?void 0:o.message)||"")}}catch(n){e(n)}})}function ES(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}var f2="FirebaseError",Qt=class t extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=f2,Object.setPrototypeOf(this,t.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,$t.prototype.create)}},$t=class{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){let r=n[0]||{},i=`${this.service}/${e}`,o=this.errors[e],s=o?p2(o,r):"Error",a=`${this.serviceName}: ${s} (${i}).`;return new Qt(i,a,r)}};function p2(t,e){return t.replace(g2,(n,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var g2=/\{\$([^}]+)}/g;function To(t,e){if(t===e)return!0;let n=Object.keys(t),r=Object.keys(e);for(let i of n){if(!r.includes(i))return!1;let o=t[i],s=e[i];if(uS(o)&&uS(s)){if(!To(o,s))return!1}else if(o!==s)return!1}for(let i of r)if(!n.includes(i))return!1;return!0}function uS(t){return t!==null&&typeof t=="object"}function Tv(t){let e=[];for(let[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function IS(t,e){let n=new Iv(t,e);return n.subscribe.bind(n)}var Iv=class{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");m2(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=_v),i.error===void 0&&(i.error=_v),i.complete===void 0&&(i.complete=_v);let o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function m2(t,e){if(typeof t!="object"||t===null)return!1;for(let n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function _v(){}var cre=14400*1e3;function Ze(t){return t&&t._delegate?t._delegate:t}var ze=class{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var So="[DEFAULT]";var Sv=class{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){let r=new bo;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;let r=this.normalizeInstanceIdentifier(e?.identifier),i=(n=e?.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(o){if(i)return null;throw o}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(v2(e))try{this.getOrInitializeService({instanceIdentifier:So})}catch{}for(let[n,r]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(n);try{let o=this.getOrInitializeService({instanceIdentifier:i});r.resolve(o)}catch{}}}}clearInstance(e=So){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){return _(this,null,function*(){let e=Array.from(this.instances.values());yield Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])})}isComponentSet(){return this.component!=null}isInitialized(e=So){return this.instances.has(e)}getOptions(e=So){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(let[o,s]of this.instancesDeferred.entries()){let a=this.normalizeInstanceIdentifier(o);r===a&&s.resolve(i)}return i}onInit(e,n){var r;let i=this.normalizeInstanceIdentifier(n),o=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;o.add(e),this.onInitCallbacks.set(i,o);let s=this.instances.get(i);return s&&e(s,i),()=>{o.delete(e)}}invokeOnInitCallbacks(e,n){let r=this.onInitCallbacks.get(n);if(r)for(let i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:y2(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=So){return this.component?this.component.multipleInstances?e:So:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function y2(t){return t===So?void 0:t}function v2(t){return t.instantiationMode==="EAGER"}var Vh=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let n=new Sv(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}};var _2=[],le=(function(t){return t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT",t})(le||{}),E2={debug:le.DEBUG,verbose:le.VERBOSE,info:le.INFO,warn:le.WARN,error:le.ERROR,silent:le.SILENT},I2=le.INFO,w2={[le.DEBUG]:"log",[le.VERBOSE]:"log",[le.INFO]:"info",[le.WARN]:"warn",[le.ERROR]:"error"},b2=(t,e,...n)=>{if(e<t.logLevel)return;let r=new Date().toISOString(),i=w2[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},er=class{constructor(e){this.name=e,this._logLevel=I2,this._logHandler=b2,this._userLogHandler=null,_2.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in le))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?E2[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,le.DEBUG,...e),this._logHandler(this,le.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,le.VERBOSE,...e),this._logHandler(this,le.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,le.INFO,...e),this._logHandler(this,le.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,le.WARN,...e),this._logHandler(this,le.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,le.ERROR,...e),this._logHandler(this,le.ERROR,...e)}};var D2=(t,e)=>e.some(n=>t instanceof n),wS,bS;function C2(){return wS||(wS=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function T2(){return bS||(bS=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var DS=new WeakMap,Rv=new WeakMap,CS=new WeakMap,Av=new WeakMap,Mv=new WeakMap;function S2(t){let e=new Promise((n,r)=>{let i=()=>{t.removeEventListener("success",o),t.removeEventListener("error",s)},o=()=>{n(Pn(t.result)),i()},s=()=>{r(t.error),i()};t.addEventListener("success",o),t.addEventListener("error",s)});return e.then(n=>{n instanceof IDBCursor&&DS.set(n,t)}).catch(()=>{}),Mv.set(e,t),e}function A2(t){if(Rv.has(t))return;let e=new Promise((n,r)=>{let i=()=>{t.removeEventListener("complete",o),t.removeEventListener("error",s),t.removeEventListener("abort",s)},o=()=>{n(),i()},s=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",o),t.addEventListener("error",s),t.addEventListener("abort",s)});Rv.set(t,e)}var Nv={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Rv.get(t);if(e==="objectStoreNames")return t.objectStoreNames||CS.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Pn(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function TS(t){Nv=t(Nv)}function R2(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){let r=t.call(jh(this),e,...n);return CS.set(r,e.sort?e.sort():[e]),Pn(r)}:T2().includes(t)?function(...e){return t.apply(jh(this),e),Pn(DS.get(this))}:function(...e){return Pn(t.apply(jh(this),e))}}function N2(t){return typeof t=="function"?R2(t):(t instanceof IDBTransaction&&A2(t),D2(t,C2())?new Proxy(t,Nv):t)}function Pn(t){if(t instanceof IDBRequest)return S2(t);if(Av.has(t))return Av.get(t);let e=N2(t);return e!==t&&(Av.set(t,e),Mv.set(e,t)),e}var jh=t=>Mv.get(t);function Ao(t,e,{blocked:n,upgrade:r,blocking:i,terminated:o}={}){let s=indexedDB.open(t,e),a=Pn(s);return r&&s.addEventListener("upgradeneeded",u=>{r(Pn(s.result),u.oldVersion,u.newVersion,Pn(s.transaction),u)}),n&&s.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),a.then(u=>{o&&u.addEventListener("close",()=>o()),i&&u.addEventListener("versionchange",l=>i(l.oldVersion,l.newVersion,l))}).catch(()=>{}),a}function Uh(t,{blocked:e}={}){let n=indexedDB.deleteDatabase(t);return e&&n.addEventListener("blocked",r=>e(r.oldVersion,r)),Pn(n).then(()=>{})}var M2=["get","getKey","getAll","getAllKeys","count"],P2=["put","add","delete","clear"],Pv=new Map;function SS(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Pv.get(e))return Pv.get(e);let n=e.replace(/FromIndex$/,""),r=e!==n,i=P2.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||M2.includes(n)))return;let o=function(s,...a){return _(this,null,function*(){let u=this.transaction(s,i?"readwrite":"readonly"),l=u.store;return r&&(l=l.index(a.shift())),(yield Promise.all([l[n](...a),i&&u.done]))[0]})};return Pv.set(e,o),o}TS(t=>re(F({},t),{get:(e,n,r)=>SS(e,n)||t.get(e,n,r),has:(e,n)=>!!SS(e,n)||t.has(e,n)}));var kv=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(x2(n)){let r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}};function x2(t){let e=t.getComponent();return e?.type==="VERSION"}var Ov="@firebase/app",AS="0.13.2";var Cr=new er("@firebase/app"),k2="@firebase/app-compat",O2="@firebase/analytics-compat",F2="@firebase/analytics",L2="@firebase/app-check-compat",V2="@firebase/app-check",j2="@firebase/auth",U2="@firebase/auth-compat",B2="@firebase/database",$2="@firebase/data-connect",H2="@firebase/database-compat",q2="@firebase/functions",z2="@firebase/functions-compat",G2="@firebase/installations",W2="@firebase/installations-compat",K2="@firebase/messaging",Q2="@firebase/messaging-compat",Y2="@firebase/performance",Z2="@firebase/performance-compat",J2="@firebase/remote-config",X2="@firebase/remote-config-compat",ej="@firebase/storage",tj="@firebase/storage-compat",nj="@firebase/firestore",rj="@firebase/ai",ij="@firebase/firestore-compat",oj="firebase",sj="11.10.0";var Fv="[DEFAULT]",aj={[Ov]:"fire-core",[k2]:"fire-core-compat",[F2]:"fire-analytics",[O2]:"fire-analytics-compat",[V2]:"fire-app-check",[L2]:"fire-app-check-compat",[j2]:"fire-auth",[U2]:"fire-auth-compat",[B2]:"fire-rtdb",[$2]:"fire-data-connect",[H2]:"fire-rtdb-compat",[q2]:"fire-fn",[z2]:"fire-fn-compat",[G2]:"fire-iid",[W2]:"fire-iid-compat",[K2]:"fire-fcm",[Q2]:"fire-fcm-compat",[Y2]:"fire-perf",[Z2]:"fire-perf-compat",[J2]:"fire-rc",[X2]:"fire-rc-compat",[ej]:"fire-gcs",[tj]:"fire-gcs-compat",[nj]:"fire-fst",[ij]:"fire-fst-compat",[rj]:"fire-vertex","fire-js":"fire-js",[oj]:"fire-js-all"};var fu=new Map,cj=new Map,Lv=new Map;function RS(t,e){try{t.container.addComponent(e)}catch(n){Cr.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function wt(t){let e=t.name;if(Lv.has(e))return Cr.debug(`There were multiple attempts to register component ${e}.`),!1;Lv.set(e,t);for(let n of fu.values())RS(n,t);for(let n of cj.values())RS(n,t);return!0}function Tr(t,e){let n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Sr(t){return t==null?!1:t.settings!==void 0}var uj={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},yi=new $t("app","Firebase",uj);var Vv=class{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new ze("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw yi.create("app-deleted",{appName:this._name})}};var Xs=sj;function Bv(t,e={}){let n=t;typeof e!="object"&&(e={name:e});let r=Object.assign({name:Fv,automaticDataCollectionEnabled:!0},e),i=r.name;if(typeof i!="string"||!i)throw yi.create("bad-app-name",{appName:String(i)});if(n||(n=bv()),!n)throw yi.create("no-options");let o=fu.get(i);if(o){if(To(n,o.options)&&To(r,o.config))return o;throw yi.create("duplicate-app",{appName:i})}let s=new Vh(i);for(let u of Lv.values())s.addComponent(u);let a=new Vv(n,r,s);return fu.set(i,a),a}function Ar(t=Fv){let e=fu.get(t);if(!e&&t===Fv&&bv())return Bv();if(!e)throw yi.create("no-app",{appName:t});return e}function Bh(){return Array.from(fu.values())}function Ce(t,e,n){var r;let i=(r=aj[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);let o=i.match(/\s|\//),s=e.match(/\s|\//);if(o||s){let a=[`Unable to register library "${i}" with version "${e}":`];o&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),o&&s&&a.push("and"),s&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Cr.warn(a.join(" "));return}wt(new ze(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}var lj="firebase-heartbeat-database",dj=1,pu="firebase-heartbeat-store",xv=null;function xS(){return xv||(xv=Ao(lj,dj,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(pu)}catch(n){console.warn(n)}}}}).catch(t=>{throw yi.create("idb-open",{originalErrorMessage:t.message})})),xv}function hj(t){return _(this,null,function*(){try{let n=(yield xS()).transaction(pu),r=yield n.objectStore(pu).get(kS(t));return yield n.done,r}catch(e){if(e instanceof Qt)Cr.warn(e.message);else{let n=yi.create("idb-get",{originalErrorMessage:e?.message});Cr.warn(n.message)}}})}function NS(t,e){return _(this,null,function*(){try{let r=(yield xS()).transaction(pu,"readwrite");yield r.objectStore(pu).put(e,kS(t)),yield r.done}catch(n){if(n instanceof Qt)Cr.warn(n.message);else{let r=yi.create("idb-set",{originalErrorMessage:n?.message});Cr.warn(r.message)}}})}function kS(t){return`${t.name}!${t.options.appId}`}var fj=1024,pj=30,jv=class{constructor(e){this.container=e,this._heartbeatsCache=null;let n=this.container.getProvider("app").getImmediate();this._storage=new Uv(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){return _(this,null,function*(){var e,n;try{let i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=MS();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(s=>s.date===o))return;if(this._heartbeatsCache.heartbeats.push({date:o,agent:i}),this._heartbeatsCache.heartbeats.length>pj){let s=mj(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(s,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){Cr.warn(r)}})}getHeartbeatsHeader(){return _(this,null,function*(){var e;try{if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let n=MS(),{heartbeatsToSend:r,unsentEntries:i}=gj(this._heartbeatsCache.heartbeats),o=hu(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(n){return Cr.warn(n),""}})}};function MS(){return new Date().toISOString().substring(0,10)}function gj(t,e=fj){let n=[],r=t.slice();for(let i of t){let o=n.find(s=>s.agent===i.agent);if(o){if(o.dates.push(i.date),PS(n)>e){o.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),PS(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}var Uv=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return _(this,null,function*(){return Co()?Lh().then(()=>!0).catch(()=>!1):!1})}read(){return _(this,null,function*(){if(yield this._canUseIndexedDBPromise){let n=yield hj(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(e){return _(this,null,function*(){var n;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return NS(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return})}add(e){return _(this,null,function*(){var n;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return NS(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return})}};function PS(t){return hu(JSON.stringify({version:2,heartbeats:t})).length}function mj(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}function yj(t){wt(new ze("platform-logger",e=>new kv(e),"PRIVATE")),wt(new ze("heartbeat",e=>new jv(e),"PRIVATE")),Ce(Ov,AS,t),Ce(Ov,AS,"esm2017"),Ce("fire-js","")}yj("");var vj="firebase",_j="11.10.0";Ce(vj,_j,"app");function OS(t){t===void 0&&(t=R(Ne));let e=t.get(Ns);return n=>new se(r=>{let i=e.add(),o=!1;function s(){o||(i(),o=!0)}let a=n.subscribe({next:u=>{r.next(u),s()},complete:()=>{r.complete(),s()},error:u=>{r.error(u),s()}});return a.add(()=>{r.unsubscribe(),s()}),a})}var Rr=new zi("ANGULARFIRE2_VERSION");function ta(t,e,n){if(e){if(e.length===1)return e[0];let o=e.filter(s=>s.app===n);if(o.length===1)return o[0]}return n.container.getProvider(t).getImmediate({optional:!0})}var vi=(t,e)=>{let n=e?[e]:Bh(),r=[];return n.forEach(i=>{i.container.getProvider(t).instances.forEach(s=>{r.includes(s)||r.push(s)})}),r},ea=(function(t){return t[t.SILENT=0]="SILENT",t[t.WARN=1]="WARN",t[t.VERBOSE=2]="VERBOSE",t})(ea||{}),FS=ky()&&typeof Zone<"u"?ea.WARN:ea.SILENT;var $h=class{zone;delegate;constructor(e,n=_g){this.zone=e,this.delegate=n}now(){return this.delegate.now()}schedule(e,n,r){let i=this.zone,o=function(s){i?i.runGuarded(()=>{e.apply(this,[s])}):e.apply(this,[s])};return this.delegate.schedule(o,n,r)}},Nr=(()=>{class t{outsideAngular;insideAngular;constructor(){let n=R(Se);this.outsideAngular=n.runOutsideAngular(()=>new $h(typeof Zone>"u"?void 0:Zone.current)),this.insideAngular=n.run(()=>new $h(typeof Zone>"u"?void 0:Zone.current,vg))}static \u0275fac=function(r){return new(r||t)};static \u0275prov=z({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),LS=!1;function Ej(t,e){!LS&&(FS>ea.SILENT||ky())&&(LS=!0,console.warn("Calling Firebase APIs outside of an Injection context may destabilize your application leading to subtle change-detection and hydration bugs. Find more at https://github.com/angular/angularfire/blob/main/docs/zones.md")),FS>=e&&console.warn(`Firebase API called outside injection context: ${t.name}`)}function Ij(t){let e=R(Se,{optional:!0});return e?e.runOutsideAngular(()=>t()):t()}function Ro(t){let e=R(Se,{optional:!0});return e?e.run(()=>t()):t()}var wj=(t,e,n)=>(...r)=>(e&&setTimeout(e,0),Me(n,()=>Ro(()=>t.apply(void 0,r)))),ht=(t,e,n)=>(n||=e?ea.WARN:ea.VERBOSE,function(){let r,i=arguments,o,s,a;try{o=R(Nr),s=R(Ns),a=R(Ke)}catch{return Ej(t,n),t.apply(this,i)}for(let l=0;l<arguments.length;l++)typeof i[l]=="function"&&(e&&(r||=Ro(()=>s.add())),i[l]=wj(i[l],r,a));let u=Ij(()=>t.apply(this,i));return e?u instanceof se?u.pipe(Qr(o.outsideAngular),Kr(o.insideAngular),OS(a)):u instanceof Promise?Ro(()=>{let l=s.add();return new Promise((h,p)=>{u.then(m=>Me(a,()=>Ro(()=>h(m))),m=>Me(a,()=>Ro(()=>p(m)))).finally(l)})}):typeof u=="function"&&r?function(){return setTimeout(r,0),u.apply(this,arguments)}:Ro(()=>u):u instanceof se?u.pipe(Qr(o.outsideAngular),Kr(o.insideAngular)):Ro(()=>u)});var Mr=class{constructor(e){return e}},No=class{constructor(){return Bh()}};function bj(t){return t&&t.length===1?t[0]:new Mr(Ar())}var $v=new q("angularfire2._apps"),Dj={provide:Mr,useFactory:bj,deps:[[new mn,$v]]},Cj={provide:No,deps:[[new mn,$v]]};function Tj(t){return(e,n)=>{let r=n.get(Tn);Ce("angularfire",Rr.full,"core"),Ce("angularfire",Rr.full,"app"),Ce("angular",Vg.full,r.toString());let i=e.runOutsideAngular(()=>t(n));return new Mr(i)}}function VS(t,...e){return Bn([Dj,Cj,{provide:$v,useFactory:Tj(t),multi:!0,deps:[Se,Ne,Nr,...e]}])}var jS=ht(Bv,!0);var Sj=new Map,Aj={activated:!1,tokenObservers:[]},Rj={initialized:!1,enabled:!1};function xn(t){return Sj.get(t)||Object.assign({},Aj)}function HS(){return Rj}var Nj="https://content-firebaseappcheck.googleapis.com/v1";var Mj="exchangeDebugToken",US={OFFSET_DURATION:300*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:960*1e3},die=1440*60*1e3;var zv=class{constructor(e,n,r,i,o){if(this.operation=e,this.retryPolicy=n,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=o,this.pending=null,this.nextErrorWaitInterval=i,i>o)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){return _(this,null,function*(){this.stop();try{this.pending=new bo,this.pending.promise.catch(n=>{}),yield Pj(this.getNextRun(e)),this.pending.resolve(),yield this.pending.promise,this.pending=new bo,this.pending.promise.catch(n=>{}),yield this.operation(),this.pending.resolve(),yield this.pending.promise,this.process(!0).catch(()=>{})}catch(n){this.retryPolicy(n)?this.process(!1).catch(()=>{}):this.stop()}})}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{let n=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),n}}};function Pj(t){return new Promise(e=>{setTimeout(e,t)})}var xj={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.","initial-throttle":"{$httpStatus} error. Attempts allowed again after {$time}",throttled:"Requests throttled due to previous {$httpStatus} error. Attempts allowed again after {$time}"},_i=new $t("appCheck","AppCheck",xj);function qS(t){if(!xn(t).activated)throw _i.create("use-before-activation",{appName:t.name})}function zS(r,i){return _(this,arguments,function*({url:t,body:e},n){let o={"Content-Type":"application/json"},s=n.getImmediate({optional:!0});if(s){let y=yield s.getHeartbeatsHeader();y&&(o["X-Firebase-Client"]=y)}let a={method:"POST",body:JSON.stringify(e),headers:o},u;try{u=yield fetch(t,a)}catch(y){throw _i.create("fetch-network-error",{originalErrorMessage:y?.message})}if(u.status!==200)throw _i.create("fetch-status-error",{httpStatus:u.status});let l;try{l=yield u.json()}catch(y){throw _i.create("fetch-parse-error",{originalErrorMessage:y?.message})}let h=l.ttl.match(/^([\d.]+)(s)$/);if(!h||!h[2]||isNaN(Number(h[1])))throw _i.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${l.ttl}`});let p=Number(h[1])*1e3,m=Date.now();return{token:l.token,expireTimeMillis:m+p,issuedAtTimeMillis:m}})}function GS(t,e){let{projectId:n,appId:r,apiKey:i}=t.options;return{url:`${Nj}/projects/${n}/apps/${r}:${Mj}?key=${i}`,body:{debug_token:e}}}var kj="firebase-app-check-database",Oj=1,Gv="firebase-app-check-store";var Hh=null;function Fj(){return Hh||(Hh=new Promise((t,e)=>{try{let n=indexedDB.open(kj,Oj);n.onsuccess=r=>{t(r.target.result)},n.onerror=r=>{var i;e(_i.create("storage-open",{originalErrorMessage:(i=r.target.error)===null||i===void 0?void 0:i.message}))},n.onupgradeneeded=r=>{let i=r.target.result;switch(r.oldVersion){case 0:i.createObjectStore(Gv,{keyPath:"compositeKey"})}}}catch(n){e(_i.create("storage-open",{originalErrorMessage:n?.message}))}}),Hh)}function Lj(t,e){return Vj(jj(t),e)}function Vj(t,e){return _(this,null,function*(){let r=(yield Fj()).transaction(Gv,"readwrite"),o=r.objectStore(Gv).put({compositeKey:t,value:e});return new Promise((s,a)=>{o.onsuccess=u=>{s()},r.onerror=u=>{var l;a(_i.create("storage-set",{originalErrorMessage:(l=u.target.error)===null||l===void 0?void 0:l.message}))}})})}function jj(t){return`${t.options.appId}-${t.name}`}var gu=new er("@firebase/app-check");function Hv(t,e){return Co()?Lj(t,e).catch(n=>{gu.warn(`Failed to write token to IndexedDB. Error: ${n}`)}):Promise.resolve()}function WS(){return HS().enabled}function KS(){return _(this,null,function*(){let t=HS();if(t.enabled&&t.token)return t.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)})}var Uj={error:"UNKNOWN_ERROR"};function Bj(t){return kh.encodeString(JSON.stringify(t),!1)}function Wv(t,e=!1,n=!1){return _(this,null,function*(){let r=t.app;qS(r);let i=xn(r),o=i.token,s;if(o&&!mu(o)&&(i.token=void 0,o=void 0),!o){let l=yield i.cachedTokenPromise;l&&(mu(l)?o=l:yield Hv(r,void 0))}if(!e&&o&&mu(o))return{token:o.token};let a=!1;if(WS())try{i.exchangeTokenPromise||(i.exchangeTokenPromise=zS(GS(r,yield KS()),t.heartbeatServiceProvider).finally(()=>{i.exchangeTokenPromise=void 0}),a=!0);let l=yield i.exchangeTokenPromise;return yield Hv(r,l),i.token=l,{token:l.token}}catch(l){return l.code==="appCheck/throttled"||l.code==="appCheck/initial-throttle"?gu.warn(l.message):n&&gu.error(l),qv(l)}try{i.exchangeTokenPromise||(i.exchangeTokenPromise=i.provider.getToken().finally(()=>{i.exchangeTokenPromise=void 0}),a=!0),o=yield xn(r).exchangeTokenPromise}catch(l){l.code==="appCheck/throttled"||l.code==="appCheck/initial-throttle"?gu.warn(l.message):n&&gu.error(l),s=l}let u;return o?s?mu(o)?u={token:o.token,internalError:s}:u=qv(s):(u={token:o.token},i.token=o,yield Hv(r,o)):u=qv(s),a&&zj(r,u),u})}function $j(t){return _(this,null,function*(){let e=t.app;qS(e);let{provider:n}=xn(e);if(WS()){let r=yield KS(),{token:i}=yield zS(GS(e,r),t.heartbeatServiceProvider);return{token:i}}else{let{token:r}=yield n.getToken();return{token:r}}})}function Hj(t,e,n,r){let{app:i}=t,o=xn(i),s={next:n,error:r,type:e};if(o.tokenObservers=[...o.tokenObservers,s],o.token&&mu(o.token)){let a=o.token;Promise.resolve().then(()=>{n({token:a.token}),BS(t)}).catch(()=>{})}o.cachedTokenPromise.then(()=>BS(t))}function QS(t,e){let n=xn(t),r=n.tokenObservers.filter(i=>i.next!==e);r.length===0&&n.tokenRefresher&&n.tokenRefresher.isRunning()&&n.tokenRefresher.stop(),n.tokenObservers=r}function BS(t){let{app:e}=t,n=xn(e),r=n.tokenRefresher;r||(r=qj(t),n.tokenRefresher=r),!r.isRunning()&&n.isTokenAutoRefreshEnabled&&r.start()}function qj(t){let{app:e}=t;return new zv(()=>_(null,null,function*(){let n=xn(e),r;if(n.token?r=yield Wv(t,!0):r=yield Wv(t),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{let n=xn(e);if(n.token){let r=n.token.issuedAtTimeMillis+(n.token.expireTimeMillis-n.token.issuedAtTimeMillis)*.5+3e5,i=n.token.expireTimeMillis-300*1e3;return r=Math.min(r,i),Math.max(0,r-Date.now())}else return 0},US.RETRIAL_MIN_WAIT,US.RETRIAL_MAX_WAIT)}function zj(t,e){let n=xn(t).tokenObservers;for(let r of n)try{r.type==="EXTERNAL"&&e.error!=null?r.error(e.error):r.next(e)}catch{}}function mu(t){return t.expireTimeMillis-Date.now()>0}function qv(t){return{token:Bj(Uj),error:t}}var Kv=class{constructor(e,n){this.app=e,this.heartbeatServiceProvider=n}_delete(){let{tokenObservers:e}=xn(this.app);for(let n of e)QS(this.app,n.next);return Promise.resolve()}};function Gj(t,e){return new Kv(t,e)}function Wj(t){return{getToken:e=>Wv(t,e),getLimitedUseToken:()=>$j(t),addTokenListener:e=>Hj(t,"INTERNAL",e),removeTokenListener:e=>QS(t.app,e)}}var Kj="@firebase/app-check",Qj="0.10.1";var Yj="app-check",$S="app-check-internal";function Zj(){wt(new ze(Yj,t=>{let e=t.getProvider("app").getImmediate(),n=t.getProvider("heartbeat");return Gj(e,n)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,e,n)=>{t.getProvider($S).initialize()})),wt(new ze($S,t=>{let e=t.getProvider("app-check").getImmediate();return Wj(e)},"PUBLIC").setInstantiationMode("EXPLICIT")),Ce(Kj,Qj)}Zj();var Jj="app-check";var qh=class{constructor(){return vi(Jj)}};var Xj=["localhost","0.0.0.0","127.0.0.1"],Die=typeof window<"u"&&Xj.includes(window.location.hostname);function rA(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var iA=rA,oA=new $t("auth","Firebase",rA());var Kh=new er("@firebase/auth");function tU(t,...e){Kh.logLevel<=le.WARN&&Kh.warn(`Auth (${Xs}): ${t}`,...e)}function Gh(t,...e){Kh.logLevel<=le.ERROR&&Kh.error(`Auth (${Xs}): ${t}`,...e)}function YS(t,...e){throw s_(t,...e)}function o_(t,...e){return s_(t,...e)}function sA(t,e,n){let r=Object.assign(Object.assign({},iA()),{[e]:n});return new $t("auth","Firebase",r).create(e,{appName:t.name})}function Wh(t){return sA(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function s_(t,...e){if(typeof t!="string"){let n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return oA.create(t,...e)}function Ie(t,e,...n){if(!t)throw s_(e,...n)}function yu(t){let e="INTERNAL ASSERTION FAILED: "+t;throw Gh(e),new Error(e)}function Qh(t,e){t||yu(e)}function nU(){return ZS()==="http:"||ZS()==="https:"}function ZS(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}function rU(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(nU()||yS()||"connection"in navigator)?navigator.onLine:!0}function iU(){if(typeof navigator>"u")return null;let t=navigator;return t.languages&&t.languages[0]||t.language||null}var xo=class{constructor(e,n){this.shortDelay=e,this.longDelay=n,Qh(n>e,"Short delay should be less than long delay!"),this.isMobile=gS()||vS()}get(){return rU()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function oU(t,e){Qh(t.emulator,"Emulator should always be set here");let{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}var Yh=class{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;yu("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;yu("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;yu("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var sU={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var aU=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],cU=new xo(3e4,6e4);function aA(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}function tf(o,s,a,u){return _(this,arguments,function*(t,e,n,r,i={}){return cA(t,i,()=>_(null,null,function*(){let l={},h={};r&&(e==="GET"?h=r:l={body:JSON.stringify(r)});let p=Tv(Object.assign({key:t.config.apiKey},h)).slice(1),m=yield t._getAdditionalHeaders();m["Content-Type"]="application/json",t.languageCode&&(m["X-Firebase-Locale"]=t.languageCode);let y=Object.assign({method:e,headers:m},l);return mS()||(y.referrerPolicy="no-referrer"),t.emulatorConfig&&Do(t.emulatorConfig.host)&&(y.credentials="include"),Yh.fetch()(yield uA(t,t.config.apiHost,n,p),y)}))})}function cA(t,e,n){return _(this,null,function*(){t._canInitEmulator=!1;let r=Object.assign(Object.assign({},sU),e);try{let i=new Zv(t),o=yield Promise.race([n(),i.promise]);i.clearNetworkTimeout();let s=yield o.json();if("needConfirmation"in s)throw zh(t,"account-exists-with-different-credential",s);if(o.ok&&!("errorMessage"in s))return s;{let a=o.ok?s.errorMessage:s.error.message,[u,l]=a.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw zh(t,"credential-already-in-use",s);if(u==="EMAIL_EXISTS")throw zh(t,"email-already-in-use",s);if(u==="USER_DISABLED")throw zh(t,"user-disabled",s);let h=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(l)throw sA(t,h,l);YS(t,h)}}catch(i){if(i instanceof Qt)throw i;YS(t,"network-request-failed",{message:String(i)})}})}function uA(t,e,n,r){return _(this,null,function*(){let i=`${e}${n}?${r}`,o=t,s=o.config.emulator?oU(t.config,i):`${t.config.apiScheme}://${i}`;return aU.includes(n)&&(yield o._persistenceManagerAvailable,o._getPersistenceType()==="COOKIE")?o._getPersistence()._getFinalTarget(s).toString():s})}var Zv=class{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(o_(this.auth,"network-request-failed")),cU.get())})}};function zh(t,e,n){let r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);let i=o_(t,e,r);return i.customData._tokenResponse=n,i}function uU(t,e){return _(this,null,function*(){return tf(t,"POST","/v1/accounts:delete",e)})}function Zh(t,e){return _(this,null,function*(){return tf(t,"POST","/v1/accounts:lookup",e)})}function vu(t){if(t)try{let e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function a_(t,e=!1){return _(this,null,function*(){let n=Ze(t),r=yield n.getIdToken(e),i=lA(r);Ie(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");let o=typeof i.firebase=="object"?i.firebase:void 0,s=o?.sign_in_provider;return{claims:i,token:r,authTime:vu(Qv(i.auth_time)),issuedAtTime:vu(Qv(i.iat)),expirationTime:vu(Qv(i.exp)),signInProvider:s||null,signInSecondFactor:o?.sign_in_second_factor||null}})}function Qv(t){return Number(t)*1e3}function lA(t){let[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Gh("JWT malformed, contained fewer than 3 sections"),null;try{let i=Oh(n);return i?JSON.parse(i):(Gh("Failed to decode base64 JWT payload"),null)}catch(i){return Gh("Caught error parsing JWT payload as JSON",i?.toString()),null}}function JS(t){let e=lA(t);return Ie(e,"internal-error"),Ie(typeof e.exp<"u","internal-error"),Ie(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}function Jv(t,e,n=!1){return _(this,null,function*(){if(n)return e;try{return yield e}catch(r){throw r instanceof Qt&&lU(r)&&t.auth.currentUser===t&&(yield t.auth.signOut()),r}})}function lU({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}var Xv=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){let r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;let i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;let n=this.getInterval(e);this.timerId=setTimeout(()=>_(this,null,function*(){yield this.iteration()}),n)}iteration(){return _(this,null,function*(){try{yield this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()})}};var Eu=class{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=vu(this.lastLoginAt),this.creationTime=vu(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};function Jh(t){return _(this,null,function*(){var e;let n=t.auth,r=yield t.getIdToken(),i=yield Jv(t,Zh(n,{idToken:r}));Ie(i?.users.length,n,"internal-error");let o=i.users[0];t._notifyReloadListener(o);let s=!((e=o.providerUserInfo)===null||e===void 0)&&e.length?dA(o.providerUserInfo):[],a=dU(t.providerData,s),u=t.isAnonymous,l=!(t.email&&o.passwordHash)&&!a?.length,h=u?l:!1,p={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:a,metadata:new Eu(o.createdAt,o.lastLoginAt),isAnonymous:h};Object.assign(t,p)})}function c_(t){return _(this,null,function*(){let e=Ze(t);yield Jh(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})}function dU(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function dA(t){return t.map(e=>{var{providerId:n}=e,r=Eg(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}function hU(t,e){return _(this,null,function*(){let n=yield cA(t,{},()=>_(null,null,function*(){let r=Tv({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:o}=t.config,s=yield uA(t,i,"/v1/token",`key=${o}`),a=yield t._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";let u={method:"POST",headers:a,body:r};return t.emulatorConfig&&Do(t.emulatorConfig.host)&&(u.credentials="include"),Yh.fetch()(s,u)}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}})}function fU(t,e){return _(this,null,function*(){return tf(t,"POST","/v2/accounts:revokeToken",aA(t,e))})}var _u=class t{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ie(e.idToken,"internal-error"),Ie(typeof e.idToken<"u","internal-error"),Ie(typeof e.refreshToken<"u","internal-error");let n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):JS(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){Ie(e.length!==0,"internal-error");let n=JS(e);this.updateTokensAndExpiration(e,null,n)}getToken(e,n=!1){return _(this,null,function*(){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Ie(this.refreshToken,e,"user-token-expired"),this.refreshToken?(yield this.refresh(e,this.refreshToken),this.accessToken):null)})}clearRefreshToken(){this.refreshToken=null}refresh(e,n){return _(this,null,function*(){let{accessToken:r,refreshToken:i,expiresIn:o}=yield hU(e,n);this.updateTokensAndExpiration(r,i,Number(o))})}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){let{refreshToken:r,accessToken:i,expirationTime:o}=n,s=new t;return r&&(Ie(typeof r=="string","internal-error",{appName:e}),s.refreshToken=r),i&&(Ie(typeof i=="string","internal-error",{appName:e}),s.accessToken=i),o&&(Ie(typeof o=="number","internal-error",{appName:e}),s.expirationTime=o),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new t,this.toJSON())}_performRefresh(){return yu("not implemented")}};function Ei(t,e){Ie(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}var Mo=class t{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,o=Eg(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Xv(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new Eu(o.createdAt||void 0,o.lastLoginAt||void 0)}getIdToken(e){return _(this,null,function*(){let n=yield Jv(this,this.stsTokenManager.getToken(this.auth,e));return Ie(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,yield this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n})}getIdTokenResult(e){return a_(this,e)}reload(){return c_(this)}_assign(e){this!==e&&(Ie(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let n=new t(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){Ie(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,n=!1){return _(this,null,function*(){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&(yield Jh(this)),yield this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)})}delete(){return _(this,null,function*(){if(Sr(this.auth.app))return Promise.reject(Wh(this.auth));let e=yield this.getIdToken();return yield Jv(this,uU(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()})}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,o,s,a,u,l,h;let p=(r=n.displayName)!==null&&r!==void 0?r:void 0,m=(i=n.email)!==null&&i!==void 0?i:void 0,y=(o=n.phoneNumber)!==null&&o!==void 0?o:void 0,S=(s=n.photoURL)!==null&&s!==void 0?s:void 0,P=(a=n.tenantId)!==null&&a!==void 0?a:void 0,M=(u=n._redirectEventId)!==null&&u!==void 0?u:void 0,j=(l=n.createdAt)!==null&&l!==void 0?l:void 0,K=(h=n.lastLoginAt)!==null&&h!==void 0?h:void 0,{uid:Q,emailVerified:Ae,isAnonymous:Ot,providerData:De,stsTokenManager:b}=n;Ie(Q&&b,e,"internal-error");let v=_u.fromJSON(this.name,b);Ie(typeof Q=="string",e,"internal-error"),Ei(p,e.name),Ei(m,e.name),Ie(typeof Ae=="boolean",e,"internal-error"),Ie(typeof Ot=="boolean",e,"internal-error"),Ei(y,e.name),Ei(S,e.name),Ei(P,e.name),Ei(M,e.name),Ei(j,e.name),Ei(K,e.name);let I=new t({uid:Q,auth:e,email:m,emailVerified:Ae,displayName:p,isAnonymous:Ot,photoURL:S,phoneNumber:y,tenantId:P,stsTokenManager:v,createdAt:j,lastLoginAt:K});return De&&Array.isArray(De)&&(I.providerData=De.map(w=>Object.assign({},w))),M&&(I._redirectEventId=M),I}static _fromIdTokenResponse(e,n,r=!1){return _(this,null,function*(){let i=new _u;i.updateFromServerResponse(n);let o=new t({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return yield Jh(o),o})}static _fromGetAccountInfoResponse(e,n,r){return _(this,null,function*(){let i=n.users[0];Ie(i.localId!==void 0,"internal-error");let o=i.providerUserInfo!==void 0?dA(i.providerUserInfo):[],s=!(i.email&&i.passwordHash)&&!o?.length,a=new _u;a.updateFromIdToken(r);let u=new t({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:s}),l={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new Eu(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!o?.length};return Object.assign(u,l),u})}};var XS=new Map;function Po(t){Qh(t instanceof Function,"Expected a class definition");let e=XS.get(t);return e?(Qh(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,XS.set(t,e),e)}var pU=(()=>{class t{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return _(this,null,function*(){return!0})}_set(n,r){return _(this,null,function*(){this.storage[n]=r})}_get(n){return _(this,null,function*(){let r=this.storage[n];return r===void 0?null:r})}_remove(n){return _(this,null,function*(){delete this.storage[n]})}_addListener(n,r){}_removeListener(n,r){}}return t.type="NONE",t})(),e_=pU;function Yv(t,e,n){return`firebase:${t}:${e}:${n}`}var Xh=class t{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;let{config:i,name:o}=this.auth;this.fullUserKey=Yv(this.userKey,i.apiKey,o),this.fullPersistenceKey=Yv("persistence",i.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){return _(this,null,function*(){let e=yield this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){let n=yield Zh(this.auth,{idToken:e}).catch(()=>{});return n?Mo._fromGetAccountInfoResponse(this.auth,n,e):null}return Mo._fromJSON(this.auth,e)})}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){return _(this,null,function*(){if(this.persistence===e)return;let n=yield this.getCurrentUser();if(yield this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)})}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,n,r="authUser"){return _(this,null,function*(){if(!n.length)return new t(Po(e_),e,r);let i=(yield Promise.all(n.map(l=>_(null,null,function*(){if(yield l._isAvailable())return l})))).filter(l=>l),o=i[0]||Po(e_),s=Yv(r,e.config.apiKey,e.name),a=null;for(let l of n)try{let h=yield l._get(s);if(h){let p;if(typeof h=="string"){let m=yield Zh(e,{idToken:h}).catch(()=>{});if(!m)break;p=yield Mo._fromGetAccountInfoResponse(e,m,h)}else p=Mo._fromJSON(e,h);l!==o&&(a=p),o=l;break}}catch{}let u=i.filter(l=>l._shouldAllowMigration);return!o._shouldAllowMigration||!u.length?new t(o,e,r):(o=u[0],a&&(yield o._set(s,a.toJSON())),yield Promise.all(n.map(l=>_(null,null,function*(){if(l!==o)try{yield l._remove(s)}catch{}}))),new t(o,e,r))})}};function eA(t){let e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(vU(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(gU(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(EU(e))return"Blackberry";if(IU(e))return"Webos";if(mU(e))return"Safari";if((e.includes("chrome/")||yU(e))&&!e.includes("edge/"))return"Chrome";if(_U(e))return"Android";{let n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if(r?.length===2)return r[1]}return"Other"}function gU(t=sn()){return/firefox\//i.test(t)}function mU(t=sn()){let e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function yU(t=sn()){return/crios\//i.test(t)}function vU(t=sn()){return/iemobile/i.test(t)}function _U(t=sn()){return/android/i.test(t)}function EU(t=sn()){return/blackberry/i.test(t)}function IU(t=sn()){return/webos/i.test(t)}function hA(t,e=[]){let n;switch(t){case"Browser":n=eA(sn());break;case"Worker":n=`${eA(sn())}-${t}`;break;default:n=t}let r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Xs}/${r}`}var t_=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){let r=o=>new Promise((s,a)=>{try{let u=e(o);s(u)}catch(u){a(u)}});r.onAbort=n,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}runMiddleware(e){return _(this,null,function*(){if(this.auth.currentUser===e)return;let n=[];try{for(let r of this.queue)yield r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(let i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}})}};function wU(n){return _(this,arguments,function*(t,e={}){return tf(t,"GET","/v2/passwordPolicy",aA(t,e))})}var bU=6,n_=class{constructor(e){var n,r,i,o;let s=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=s.minPasswordLength)!==null&&n!==void 0?n:bU,s.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=s.maxPasswordLength),s.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=s.containsLowercaseCharacter),s.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=s.containsUppercaseCharacter),s.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=s.containsNumericCharacter),s.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=s.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(o=e.forceUpgradeOnSignin)!==null&&o!==void 0?o:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,o,s,a;let u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,u),this.validatePasswordCharacterOptions(e,u),u.isValid&&(u.isValid=(n=u.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),u.isValid&&(u.isValid=(r=u.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),u.isValid&&(u.isValid=(i=u.containsLowercaseLetter)!==null&&i!==void 0?i:!0),u.isValid&&(u.isValid=(o=u.containsUppercaseLetter)!==null&&o!==void 0?o:!0),u.isValid&&(u.isValid=(s=u.containsNumericCharacter)!==null&&s!==void 0?s:!0),u.isValid&&(u.isValid=(a=u.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),u}validatePasswordLengthOptions(e,n){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}};var r_=class{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new ef(this),this.idTokenSubscription=new ef(this),this.beforeStateQueue=new t_(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=oA,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Po(n)),this._initializationPromise=this.queue(()=>_(this,null,function*(){var r,i,o;if(!this._deleted&&(this.persistenceManager=yield Xh.create(this,e),(r=this._resolvePersistenceManagerAvailable)===null||r===void 0||r.call(this),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{yield this._popupRedirectResolver._initialize(this)}catch{}yield this.initializeCurrentUser(n),this.lastNotifiedUid=((o=this.currentUser)===null||o===void 0?void 0:o.uid)||null,!this._deleted&&(this._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){return _(this,null,function*(){if(this._deleted)return;let e=yield this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),yield this.currentUser.getIdToken();return}yield this._updateCurrentUser(e,!0)}})}initializeCurrentUserFromIdToken(e){return _(this,null,function*(){try{let n=yield Zh(this,{idToken:e}),r=yield Mo._fromGetAccountInfoResponse(this,n,e);yield this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),yield this.directlySetCurrentUser(null)}})}initializeCurrentUser(e){return _(this,null,function*(){var n;if(Sr(this.app)){let s=this.app.settings.authIdToken;return s?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(s).then(a,a))}):this.directlySetCurrentUser(null)}let r=yield this.assertedPersistence.getCurrentUser(),i=r,o=!1;if(e&&this.config.authDomain){yield this.getOrInitRedirectPersistenceManager();let s=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=i?._redirectEventId,u=yield this.tryRedirectSignIn(e);(!s||s===a)&&u?.user&&(i=u.user,o=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(o)try{yield this.beforeStateQueue.runMiddleware(i)}catch(s){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(s))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return Ie(this._popupRedirectResolver,this,"argument-error"),yield this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)})}tryRedirectSignIn(e){return _(this,null,function*(){let n=null;try{n=yield this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{yield this._setRedirectUser(null)}return n})}reloadAndSetCurrentUserOrClear(e){return _(this,null,function*(){try{yield Jh(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)})}useDeviceLanguage(){this.languageCode=iU()}_delete(){return _(this,null,function*(){this._deleted=!0})}updateCurrentUser(e){return _(this,null,function*(){if(Sr(this.app))return Promise.reject(Wh(this));let n=e?Ze(e):null;return n&&Ie(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))})}_updateCurrentUser(e,n=!1){return _(this,null,function*(){if(!this._deleted)return e&&Ie(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||(yield this.beforeStateQueue.runMiddleware(e)),this.queue(()=>_(this,null,function*(){yield this.directlySetCurrentUser(e),this.notifyAuthListeners()}))})}signOut(){return _(this,null,function*(){return Sr(this.app)?Promise.reject(Wh(this)):(yield this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&(yield this._setRedirectUser(null)),this._updateCurrentUser(null,!0))})}setPersistence(e){return Sr(this.app)?Promise.reject(Wh(this)):this.queue(()=>_(this,null,function*(){yield this.assertedPersistence.setPersistence(Po(e))}))}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(e){return _(this,null,function*(){this._getPasswordPolicyInternal()||(yield this._updatePasswordPolicy());let n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)})}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){return _(this,null,function*(){let e=yield wU(this),n=new n_(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n})}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new $t("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{let r=this.onAuthStateChanged(()=>{r(),e()},n)}})}revokeAccessToken(e){return _(this,null,function*(){if(this.currentUser){let n=yield this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),yield fU(this,r)}})}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}_setRedirectUser(e,n){return _(this,null,function*(){let r=yield this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)})}getOrInitRedirectPersistenceManager(e){return _(this,null,function*(){if(!this.redirectPersistenceManager){let n=e&&Po(e)||this._popupRedirectResolver;Ie(n,this,"argument-error"),this.redirectPersistenceManager=yield Xh.create(this,[Po(n._redirectPersistence)],"redirectUser"),this.redirectUser=yield this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager})}_redirectUserForId(e){return _(this,null,function*(){var n,r;return this._isInitialized&&(yield this.queue(()=>_(this,null,function*(){}))),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null})}_persistUserIfCurrent(e){return _(this,null,function*(){if(e===this.currentUser)return this.queue(()=>_(this,null,function*(){return this.directlySetCurrentUser(e)}))})}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};let o=typeof n=="function"?n:n.next.bind(n),s=!1,a=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ie(a,this,"internal-error"),a.then(()=>{s||o(this.currentUser)}),typeof n=="function"){let u=e.addObserver(n,r,i);return()=>{s=!0,u()}}else{let u=e.addObserver(n);return()=>{s=!0,u()}}}directlySetCurrentUser(e){return _(this,null,function*(){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?yield this.assertedPersistence.setCurrentUser(e):yield this.assertedPersistence.removeCurrentUser()})}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ie(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=hA(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){return _(this,null,function*(){var e;let n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);let r=yield(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader();r&&(n["X-Firebase-Client"]=r);let i=yield this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n})}_getAppCheckToken(){return _(this,null,function*(){var e;if(Sr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;let n=yield(e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken();return n?.error&&tU(`Error while retrieving App Check token: ${n.error}`),n?.token})}};function DU(t){return Ze(t)}var ef=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=IS(n=>this.observer=n)}get next(){return Ie(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var CU={loadJS(){return _(this,null,function*(){throw new Error("Unable to load external scripts")})},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function TU(t){CU=t}function SU(t){return`__${t}${Math.floor(Math.random()*1e6)}`}function AU(t,e){let n=e?.persistence||[],r=(Array.isArray(n)?n:[n]).map(Po);e?.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e?.popupRedirectResolver)}var Fie=SU("rcb"),Lie=new xo(3e4,6e4);var Vie=new xo(2e3,1e4);var jie=600*1e3;var Uie=new xo(3e4,6e4);var Bie=new xo(5e3,15e3);var $ie=encodeURIComponent("fac");var tA="@firebase/auth",nA="1.10.8";var i_=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}getToken(e){return _(this,null,function*(){return this.assertAuthConfigured(),yield this.auth._initializationPromise,this.auth.currentUser?{accessToken:yield this.auth.currentUser.getIdToken(e)}:null})}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let n=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Ie(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function RU(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function NU(t){wt(new ze("auth",(e,{options:n})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:s,authDomain:a}=r.options;Ie(s&&!s.includes(":"),"invalid-api-key",{appName:r.name});let u={apiKey:s,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:hA(t)},l=new r_(r,i,o,u);return AU(l,n),l},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),wt(new ze("auth-internal",e=>{let n=DU(e.getProvider("auth").getImmediate());return(r=>new i_(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Ce(tA,nA,RU(t)),Ce(tA,nA,"esm2017")}var MU=300,Hie=fS("authIdTokenMaxAge")||MU;function PU(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}TU({loadJS(t){return new Promise((e,n)=>{let r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{let o=o_("internal-error");o.customData=i,n(o)},r.type="text/javascript",r.charset="UTF-8",PU().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});NU("Browser");var NB="auth";var nf=class{constructor(){return vi(NB)}};var fA=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},pA={};var Pr,u_;(function(){var t;function e(b,v){function I(){}I.prototype=v.prototype,b.D=v.prototype,b.prototype=new I,b.prototype.constructor=b,b.C=function(w,D,T){for(var E=Array(arguments.length-2),lr=2;lr<arguments.length;lr++)E[lr-2]=arguments[lr];return v.prototype[D].apply(w,E)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(b,v,I){I||(I=0);var w=Array(16);if(typeof v=="string")for(var D=0;16>D;++D)w[D]=v.charCodeAt(I++)|v.charCodeAt(I++)<<8|v.charCodeAt(I++)<<16|v.charCodeAt(I++)<<24;else for(D=0;16>D;++D)w[D]=v[I++]|v[I++]<<8|v[I++]<<16|v[I++]<<24;v=b.g[0],I=b.g[1],D=b.g[2];var T=b.g[3],E=v+(T^I&(D^T))+w[0]+3614090360&4294967295;v=I+(E<<7&4294967295|E>>>25),E=T+(D^v&(I^D))+w[1]+3905402710&4294967295,T=v+(E<<12&4294967295|E>>>20),E=D+(I^T&(v^I))+w[2]+606105819&4294967295,D=T+(E<<17&4294967295|E>>>15),E=I+(v^D&(T^v))+w[3]+3250441966&4294967295,I=D+(E<<22&4294967295|E>>>10),E=v+(T^I&(D^T))+w[4]+4118548399&4294967295,v=I+(E<<7&4294967295|E>>>25),E=T+(D^v&(I^D))+w[5]+1200080426&4294967295,T=v+(E<<12&4294967295|E>>>20),E=D+(I^T&(v^I))+w[6]+2821735955&4294967295,D=T+(E<<17&4294967295|E>>>15),E=I+(v^D&(T^v))+w[7]+4249261313&4294967295,I=D+(E<<22&4294967295|E>>>10),E=v+(T^I&(D^T))+w[8]+1770035416&4294967295,v=I+(E<<7&4294967295|E>>>25),E=T+(D^v&(I^D))+w[9]+2336552879&4294967295,T=v+(E<<12&4294967295|E>>>20),E=D+(I^T&(v^I))+w[10]+4294925233&4294967295,D=T+(E<<17&4294967295|E>>>15),E=I+(v^D&(T^v))+w[11]+2304563134&4294967295,I=D+(E<<22&4294967295|E>>>10),E=v+(T^I&(D^T))+w[12]+1804603682&4294967295,v=I+(E<<7&4294967295|E>>>25),E=T+(D^v&(I^D))+w[13]+4254626195&4294967295,T=v+(E<<12&4294967295|E>>>20),E=D+(I^T&(v^I))+w[14]+2792965006&4294967295,D=T+(E<<17&4294967295|E>>>15),E=I+(v^D&(T^v))+w[15]+1236535329&4294967295,I=D+(E<<22&4294967295|E>>>10),E=v+(D^T&(I^D))+w[1]+4129170786&4294967295,v=I+(E<<5&4294967295|E>>>27),E=T+(I^D&(v^I))+w[6]+3225465664&4294967295,T=v+(E<<9&4294967295|E>>>23),E=D+(v^I&(T^v))+w[11]+643717713&4294967295,D=T+(E<<14&4294967295|E>>>18),E=I+(T^v&(D^T))+w[0]+3921069994&4294967295,I=D+(E<<20&4294967295|E>>>12),E=v+(D^T&(I^D))+w[5]+3593408605&4294967295,v=I+(E<<5&4294967295|E>>>27),E=T+(I^D&(v^I))+w[10]+38016083&4294967295,T=v+(E<<9&4294967295|E>>>23),E=D+(v^I&(T^v))+w[15]+3634488961&4294967295,D=T+(E<<14&4294967295|E>>>18),E=I+(T^v&(D^T))+w[4]+3889429448&4294967295,I=D+(E<<20&4294967295|E>>>12),E=v+(D^T&(I^D))+w[9]+568446438&4294967295,v=I+(E<<5&4294967295|E>>>27),E=T+(I^D&(v^I))+w[14]+3275163606&4294967295,T=v+(E<<9&4294967295|E>>>23),E=D+(v^I&(T^v))+w[3]+4107603335&4294967295,D=T+(E<<14&4294967295|E>>>18),E=I+(T^v&(D^T))+w[8]+1163531501&4294967295,I=D+(E<<20&4294967295|E>>>12),E=v+(D^T&(I^D))+w[13]+2850285829&4294967295,v=I+(E<<5&4294967295|E>>>27),E=T+(I^D&(v^I))+w[2]+4243563512&4294967295,T=v+(E<<9&4294967295|E>>>23),E=D+(v^I&(T^v))+w[7]+1735328473&4294967295,D=T+(E<<14&4294967295|E>>>18),E=I+(T^v&(D^T))+w[12]+2368359562&4294967295,I=D+(E<<20&4294967295|E>>>12),E=v+(I^D^T)+w[5]+4294588738&4294967295,v=I+(E<<4&4294967295|E>>>28),E=T+(v^I^D)+w[8]+2272392833&4294967295,T=v+(E<<11&4294967295|E>>>21),E=D+(T^v^I)+w[11]+1839030562&4294967295,D=T+(E<<16&4294967295|E>>>16),E=I+(D^T^v)+w[14]+4259657740&4294967295,I=D+(E<<23&4294967295|E>>>9),E=v+(I^D^T)+w[1]+2763975236&4294967295,v=I+(E<<4&4294967295|E>>>28),E=T+(v^I^D)+w[4]+1272893353&4294967295,T=v+(E<<11&4294967295|E>>>21),E=D+(T^v^I)+w[7]+4139469664&4294967295,D=T+(E<<16&4294967295|E>>>16),E=I+(D^T^v)+w[10]+3200236656&4294967295,I=D+(E<<23&4294967295|E>>>9),E=v+(I^D^T)+w[13]+681279174&4294967295,v=I+(E<<4&4294967295|E>>>28),E=T+(v^I^D)+w[0]+3936430074&4294967295,T=v+(E<<11&4294967295|E>>>21),E=D+(T^v^I)+w[3]+3572445317&4294967295,D=T+(E<<16&4294967295|E>>>16),E=I+(D^T^v)+w[6]+76029189&4294967295,I=D+(E<<23&4294967295|E>>>9),E=v+(I^D^T)+w[9]+3654602809&4294967295,v=I+(E<<4&4294967295|E>>>28),E=T+(v^I^D)+w[12]+3873151461&4294967295,T=v+(E<<11&4294967295|E>>>21),E=D+(T^v^I)+w[15]+530742520&4294967295,D=T+(E<<16&4294967295|E>>>16),E=I+(D^T^v)+w[2]+3299628645&4294967295,I=D+(E<<23&4294967295|E>>>9),E=v+(D^(I|~T))+w[0]+4096336452&4294967295,v=I+(E<<6&4294967295|E>>>26),E=T+(I^(v|~D))+w[7]+1126891415&4294967295,T=v+(E<<10&4294967295|E>>>22),E=D+(v^(T|~I))+w[14]+2878612391&4294967295,D=T+(E<<15&4294967295|E>>>17),E=I+(T^(D|~v))+w[5]+4237533241&4294967295,I=D+(E<<21&4294967295|E>>>11),E=v+(D^(I|~T))+w[12]+1700485571&4294967295,v=I+(E<<6&4294967295|E>>>26),E=T+(I^(v|~D))+w[3]+2399980690&4294967295,T=v+(E<<10&4294967295|E>>>22),E=D+(v^(T|~I))+w[10]+4293915773&4294967295,D=T+(E<<15&4294967295|E>>>17),E=I+(T^(D|~v))+w[1]+2240044497&4294967295,I=D+(E<<21&4294967295|E>>>11),E=v+(D^(I|~T))+w[8]+1873313359&4294967295,v=I+(E<<6&4294967295|E>>>26),E=T+(I^(v|~D))+w[15]+4264355552&4294967295,T=v+(E<<10&4294967295|E>>>22),E=D+(v^(T|~I))+w[6]+2734768916&4294967295,D=T+(E<<15&4294967295|E>>>17),E=I+(T^(D|~v))+w[13]+1309151649&4294967295,I=D+(E<<21&4294967295|E>>>11),E=v+(D^(I|~T))+w[4]+4149444226&4294967295,v=I+(E<<6&4294967295|E>>>26),E=T+(I^(v|~D))+w[11]+3174756917&4294967295,T=v+(E<<10&4294967295|E>>>22),E=D+(v^(T|~I))+w[2]+718787259&4294967295,D=T+(E<<15&4294967295|E>>>17),E=I+(T^(D|~v))+w[9]+3951481745&4294967295,b.g[0]=b.g[0]+v&4294967295,b.g[1]=b.g[1]+(D+(E<<21&4294967295|E>>>11))&4294967295,b.g[2]=b.g[2]+D&4294967295,b.g[3]=b.g[3]+T&4294967295}r.prototype.u=function(b,v){v===void 0&&(v=b.length);for(var I=v-this.blockSize,w=this.B,D=this.h,T=0;T<v;){if(D==0)for(;T<=I;)i(this,b,T),T+=this.blockSize;if(typeof b=="string"){for(;T<v;)if(w[D++]=b.charCodeAt(T++),D==this.blockSize){i(this,w),D=0;break}}else for(;T<v;)if(w[D++]=b[T++],D==this.blockSize){i(this,w),D=0;break}}this.h=D,this.o+=v},r.prototype.v=function(){var b=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);b[0]=128;for(var v=1;v<b.length-8;++v)b[v]=0;var I=8*this.o;for(v=b.length-8;v<b.length;++v)b[v]=I&255,I/=256;for(this.u(b),b=Array(16),v=I=0;4>v;++v)for(var w=0;32>w;w+=8)b[I++]=this.g[v]>>>w&255;return b};function o(b,v){var I=a;return Object.prototype.hasOwnProperty.call(I,b)?I[b]:I[b]=v(b)}function s(b,v){this.h=v;for(var I=[],w=!0,D=b.length-1;0<=D;D--){var T=b[D]|0;w&&T==v||(I[D]=T,w=!1)}this.g=I}var a={};function u(b){return-128<=b&&128>b?o(b,function(v){return new s([v|0],0>v?-1:0)}):new s([b|0],0>b?-1:0)}function l(b){if(isNaN(b)||!isFinite(b))return p;if(0>b)return M(l(-b));for(var v=[],I=1,w=0;b>=I;w++)v[w]=b/I|0,I*=4294967296;return new s(v,0)}function h(b,v){if(b.length==0)throw Error("number format error: empty string");if(v=v||10,2>v||36<v)throw Error("radix out of range: "+v);if(b.charAt(0)=="-")return M(h(b.substring(1),v));if(0<=b.indexOf("-"))throw Error('number format error: interior "-" character');for(var I=l(Math.pow(v,8)),w=p,D=0;D<b.length;D+=8){var T=Math.min(8,b.length-D),E=parseInt(b.substring(D,D+T),v);8>T?(T=l(Math.pow(v,T)),w=w.j(T).add(l(E))):(w=w.j(I),w=w.add(l(E)))}return w}var p=u(0),m=u(1),y=u(16777216);t=s.prototype,t.m=function(){if(P(this))return-M(this).m();for(var b=0,v=1,I=0;I<this.g.length;I++){var w=this.i(I);b+=(0<=w?w:4294967296+w)*v,v*=4294967296}return b},t.toString=function(b){if(b=b||10,2>b||36<b)throw Error("radix out of range: "+b);if(S(this))return"0";if(P(this))return"-"+M(this).toString(b);for(var v=l(Math.pow(b,6)),I=this,w="";;){var D=Ae(I,v).g;I=j(I,D.j(v));var T=((0<I.g.length?I.g[0]:I.h)>>>0).toString(b);if(I=D,S(I))return T+w;for(;6>T.length;)T="0"+T;w=T+w}},t.i=function(b){return 0>b?0:b<this.g.length?this.g[b]:this.h};function S(b){if(b.h!=0)return!1;for(var v=0;v<b.g.length;v++)if(b.g[v]!=0)return!1;return!0}function P(b){return b.h==-1}t.l=function(b){return b=j(this,b),P(b)?-1:S(b)?0:1};function M(b){for(var v=b.g.length,I=[],w=0;w<v;w++)I[w]=~b.g[w];return new s(I,~b.h).add(m)}t.abs=function(){return P(this)?M(this):this},t.add=function(b){for(var v=Math.max(this.g.length,b.g.length),I=[],w=0,D=0;D<=v;D++){var T=w+(this.i(D)&65535)+(b.i(D)&65535),E=(T>>>16)+(this.i(D)>>>16)+(b.i(D)>>>16);w=E>>>16,T&=65535,E&=65535,I[D]=E<<16|T}return new s(I,I[I.length-1]&-2147483648?-1:0)};function j(b,v){return b.add(M(v))}t.j=function(b){if(S(this)||S(b))return p;if(P(this))return P(b)?M(this).j(M(b)):M(M(this).j(b));if(P(b))return M(this.j(M(b)));if(0>this.l(y)&&0>b.l(y))return l(this.m()*b.m());for(var v=this.g.length+b.g.length,I=[],w=0;w<2*v;w++)I[w]=0;for(w=0;w<this.g.length;w++)for(var D=0;D<b.g.length;D++){var T=this.i(w)>>>16,E=this.i(w)&65535,lr=b.i(D)>>>16,xa=b.i(D)&65535;I[2*w+2*D]+=E*xa,K(I,2*w+2*D),I[2*w+2*D+1]+=T*xa,K(I,2*w+2*D+1),I[2*w+2*D+1]+=E*lr,K(I,2*w+2*D+1),I[2*w+2*D+2]+=T*lr,K(I,2*w+2*D+2)}for(w=0;w<v;w++)I[w]=I[2*w+1]<<16|I[2*w];for(w=v;w<2*v;w++)I[w]=0;return new s(I,0)};function K(b,v){for(;(b[v]&65535)!=b[v];)b[v+1]+=b[v]>>>16,b[v]&=65535,v++}function Q(b,v){this.g=b,this.h=v}function Ae(b,v){if(S(v))throw Error("division by zero");if(S(b))return new Q(p,p);if(P(b))return v=Ae(M(b),v),new Q(M(v.g),M(v.h));if(P(v))return v=Ae(b,M(v)),new Q(M(v.g),v.h);if(30<b.g.length){if(P(b)||P(v))throw Error("slowDivide_ only works with positive integers.");for(var I=m,w=v;0>=w.l(b);)I=Ot(I),w=Ot(w);var D=De(I,1),T=De(w,1);for(w=De(w,2),I=De(I,2);!S(w);){var E=T.add(w);0>=E.l(b)&&(D=D.add(I),T=E),w=De(w,1),I=De(I,1)}return v=j(b,D.j(v)),new Q(D,v)}for(D=p;0<=b.l(v);){for(I=Math.max(1,Math.floor(b.m()/v.m())),w=Math.ceil(Math.log(I)/Math.LN2),w=48>=w?1:Math.pow(2,w-48),T=l(I),E=T.j(v);P(E)||0<E.l(b);)I-=w,T=l(I),E=T.j(v);S(T)&&(T=m),D=D.add(T),b=j(b,E)}return new Q(D,b)}t.A=function(b){return Ae(this,b).h},t.and=function(b){for(var v=Math.max(this.g.length,b.g.length),I=[],w=0;w<v;w++)I[w]=this.i(w)&b.i(w);return new s(I,this.h&b.h)},t.or=function(b){for(var v=Math.max(this.g.length,b.g.length),I=[],w=0;w<v;w++)I[w]=this.i(w)|b.i(w);return new s(I,this.h|b.h)},t.xor=function(b){for(var v=Math.max(this.g.length,b.g.length),I=[],w=0;w<v;w++)I[w]=this.i(w)^b.i(w);return new s(I,this.h^b.h)};function Ot(b){for(var v=b.g.length+1,I=[],w=0;w<v;w++)I[w]=b.i(w)<<1|b.i(w-1)>>>31;return new s(I,b.h)}function De(b,v){var I=v>>5;v%=32;for(var w=b.g.length-I,D=[],T=0;T<w;T++)D[T]=0<v?b.i(T+I)>>>v|b.i(T+I+1)<<32-v:b.i(T+I);return new s(D,b.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,u_=pA.Md5=r,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.A,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=l,s.fromString=h,Pr=pA.Integer=s}).apply(typeof fA<"u"?fA:typeof self<"u"?self:typeof window<"u"?window:{});var rf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},xr={};var l_,MB,na,d_,Iu,of,h_,f_,p_;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(c,d,f){return c==Array.prototype||c==Object.prototype||(c[d]=f.value),c};function n(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof rf=="object"&&rf];for(var d=0;d<c.length;++d){var f=c[d];if(f&&f.Math==Math)return f}throw Error("Cannot find global object")}var r=n(this);function i(c,d){if(d)e:{var f=r;c=c.split(".");for(var g=0;g<c.length-1;g++){var C=c[g];if(!(C in f))break e;f=f[C]}c=c[c.length-1],g=f[c],d=d(g),d!=g&&d!=null&&e(f,c,{configurable:!0,writable:!0,value:d})}}function o(c,d){c instanceof String&&(c+="");var f=0,g=!1,C={next:function(){if(!g&&f<c.length){var A=f++;return{value:d(A,c[A]),done:!1}}return g=!0,{done:!0,value:void 0}}};return C[Symbol.iterator]=function(){return C},C}i("Array.prototype.values",function(c){return c||function(){return o(this,function(d,f){return f})}});var s=s||{},a=this||self;function u(c){var d=typeof c;return d=d!="object"?d:c?Array.isArray(c)?"array":d:"null",d=="array"||d=="object"&&typeof c.length=="number"}function l(c){var d=typeof c;return d=="object"&&c!=null||d=="function"}function h(c,d,f){return c.call.apply(c.bind,arguments)}function p(c,d,f){if(!c)throw Error();if(2<arguments.length){var g=Array.prototype.slice.call(arguments,2);return function(){var C=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(C,g),c.apply(d,C)}}return function(){return c.apply(d,arguments)}}function m(c,d,f){return m=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:p,m.apply(null,arguments)}function y(c,d){var f=Array.prototype.slice.call(arguments,1);return function(){var g=f.slice();return g.push.apply(g,arguments),c.apply(this,g)}}function S(c,d){function f(){}f.prototype=d.prototype,c.aa=d.prototype,c.prototype=new f,c.prototype.constructor=c,c.Qb=function(g,C,A){for(var L=Array(arguments.length-2),Re=2;Re<arguments.length;Re++)L[Re-2]=arguments[Re];return d.prototype[C].apply(g,L)}}function P(c){let d=c.length;if(0<d){let f=Array(d);for(let g=0;g<d;g++)f[g]=c[g];return f}return[]}function M(c,d){for(let f=1;f<arguments.length;f++){let g=arguments[f];if(u(g)){let C=c.length||0,A=g.length||0;c.length=C+A;for(let L=0;L<A;L++)c[C+L]=g[L]}else c.push(g)}}class j{constructor(d,f){this.i=d,this.j=f,this.h=0,this.g=null}get(){let d;return 0<this.h?(this.h--,d=this.g,this.g=d.next,d.next=null):d=this.i(),d}}function K(c){return/^[\s\xa0]*$/.test(c)}function Q(){var c=a.navigator;return c&&(c=c.userAgent)?c:""}function Ae(c){return Ae[" "](c),c}Ae[" "]=function(){};var Ot=Q().indexOf("Gecko")!=-1&&!(Q().toLowerCase().indexOf("webkit")!=-1&&Q().indexOf("Edge")==-1)&&!(Q().indexOf("Trident")!=-1||Q().indexOf("MSIE")!=-1)&&Q().indexOf("Edge")==-1;function De(c,d,f){for(let g in c)d.call(f,c[g],g,c)}function b(c,d){for(let f in c)d.call(void 0,c[f],f,c)}function v(c){let d={};for(let f in c)d[f]=c[f];return d}let I="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function w(c,d){let f,g;for(let C=1;C<arguments.length;C++){g=arguments[C];for(f in g)c[f]=g[f];for(let A=0;A<I.length;A++)f=I[A],Object.prototype.hasOwnProperty.call(g,f)&&(c[f]=g[f])}}function D(c){var d=1;c=c.split(":");let f=[];for(;0<d&&c.length;)f.push(c.shift()),d--;return c.length&&f.push(c.join(":")),f}function T(c){a.setTimeout(()=>{throw c},0)}function E(){var c=Rp;let d=null;return c.g&&(d=c.g,c.g=c.g.next,c.g||(c.h=null),d.next=null),d}class lr{constructor(){this.h=this.g=null}add(d,f){let g=xa.get();g.set(d,f),this.h?this.h.next=g:this.g=g,this.h=g}}var xa=new j(()=>new iP,c=>c.reset());class iP{constructor(){this.next=this.g=this.h=null}set(d,f){this.h=d,this.g=f,this.next=null}reset(){this.next=this.g=this.h=null}}let ka,Oa=!1,Rp=new lr,ow=()=>{let c=a.Promise.resolve(void 0);ka=()=>{c.then(oP)}};var oP=()=>{for(var c;c=E();){try{c.h.call(c.g)}catch(f){T(f)}var d=xa;d.j(c),100>d.h&&(d.h++,c.next=d.g,d.g=c)}Oa=!1};function Hr(){this.s=this.s,this.C=this.C}Hr.prototype.s=!1,Hr.prototype.ma=function(){this.s||(this.s=!0,this.N())},Hr.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function bt(c,d){this.type=c,this.g=this.target=d,this.defaultPrevented=!1}bt.prototype.h=function(){this.defaultPrevented=!0};var sP=(function(){if(!a.addEventListener||!Object.defineProperty)return!1;var c=!1,d=Object.defineProperty({},"passive",{get:function(){c=!0}});try{let f=()=>{};a.addEventListener("test",f,d),a.removeEventListener("test",f,d)}catch{}return c})();function Fa(c,d){if(bt.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c){var f=this.type=c.type,g=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;if(this.target=c.target||c.srcElement,this.g=d,d=c.relatedTarget){if(Ot){e:{try{Ae(d.nodeName);var C=!0;break e}catch{}C=!1}C||(d=null)}}else f=="mouseover"?d=c.fromElement:f=="mouseout"&&(d=c.toElement);this.relatedTarget=d,g?(this.clientX=g.clientX!==void 0?g.clientX:g.pageX,this.clientY=g.clientY!==void 0?g.clientY:g.pageY,this.screenX=g.screenX||0,this.screenY=g.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=typeof c.pointerType=="string"?c.pointerType:aP[c.pointerType]||"",this.state=c.state,this.i=c,c.defaultPrevented&&Fa.aa.h.call(this)}}S(Fa,bt);var aP={2:"touch",3:"pen",4:"mouse"};Fa.prototype.h=function(){Fa.aa.h.call(this);var c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var La="closure_listenable_"+(1e6*Math.random()|0),cP=0;function uP(c,d,f,g,C){this.listener=c,this.proxy=null,this.src=d,this.type=f,this.capture=!!g,this.ha=C,this.key=++cP,this.da=this.fa=!1}function Ju(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function Xu(c){this.src=c,this.g={},this.h=0}Xu.prototype.add=function(c,d,f,g,C){var A=c.toString();c=this.g[A],c||(c=this.g[A]=[],this.h++);var L=Mp(c,d,g,C);return-1<L?(d=c[L],f||(d.fa=!1)):(d=new uP(d,this.src,A,!!g,C),d.fa=f,c.push(d)),d};function Np(c,d){var f=d.type;if(f in c.g){var g=c.g[f],C=Array.prototype.indexOf.call(g,d,void 0),A;(A=0<=C)&&Array.prototype.splice.call(g,C,1),A&&(Ju(d),c.g[f].length==0&&(delete c.g[f],c.h--))}}function Mp(c,d,f,g){for(var C=0;C<c.length;++C){var A=c[C];if(!A.da&&A.listener==d&&A.capture==!!f&&A.ha==g)return C}return-1}var Pp="closure_lm_"+(1e6*Math.random()|0),xp={};function sw(c,d,f,g,C){if(g&&g.once)return cw(c,d,f,g,C);if(Array.isArray(d)){for(var A=0;A<d.length;A++)sw(c,d[A],f,g,C);return null}return f=Lp(f),c&&c[La]?c.K(d,f,l(g)?!!g.capture:!!g,C):aw(c,d,f,!1,g,C)}function aw(c,d,f,g,C,A){if(!d)throw Error("Invalid event type");var L=l(C)?!!C.capture:!!C,Re=Op(c);if(Re||(c[Pp]=Re=new Xu(c)),f=Re.add(d,f,g,L,A),f.proxy)return f;if(g=lP(),f.proxy=g,g.src=c,g.listener=f,c.addEventListener)sP||(C=L),C===void 0&&(C=!1),c.addEventListener(d.toString(),g,C);else if(c.attachEvent)c.attachEvent(lw(d.toString()),g);else if(c.addListener&&c.removeListener)c.addListener(g);else throw Error("addEventListener and attachEvent are unavailable.");return f}function lP(){function c(f){return d.call(c.src,c.listener,f)}let d=dP;return c}function cw(c,d,f,g,C){if(Array.isArray(d)){for(var A=0;A<d.length;A++)cw(c,d[A],f,g,C);return null}return f=Lp(f),c&&c[La]?c.L(d,f,l(g)?!!g.capture:!!g,C):aw(c,d,f,!0,g,C)}function uw(c,d,f,g,C){if(Array.isArray(d))for(var A=0;A<d.length;A++)uw(c,d[A],f,g,C);else g=l(g)?!!g.capture:!!g,f=Lp(f),c&&c[La]?(c=c.i,d=String(d).toString(),d in c.g&&(A=c.g[d],f=Mp(A,f,g,C),-1<f&&(Ju(A[f]),Array.prototype.splice.call(A,f,1),A.length==0&&(delete c.g[d],c.h--)))):c&&(c=Op(c))&&(d=c.g[d.toString()],c=-1,d&&(c=Mp(d,f,g,C)),(f=-1<c?d[c]:null)&&kp(f))}function kp(c){if(typeof c!="number"&&c&&!c.da){var d=c.src;if(d&&d[La])Np(d.i,c);else{var f=c.type,g=c.proxy;d.removeEventListener?d.removeEventListener(f,g,c.capture):d.detachEvent?d.detachEvent(lw(f),g):d.addListener&&d.removeListener&&d.removeListener(g),(f=Op(d))?(Np(f,c),f.h==0&&(f.src=null,d[Pp]=null)):Ju(c)}}}function lw(c){return c in xp?xp[c]:xp[c]="on"+c}function dP(c,d){if(c.da)c=!0;else{d=new Fa(d,this);var f=c.listener,g=c.ha||c.src;c.fa&&kp(c),c=f.call(g,d)}return c}function Op(c){return c=c[Pp],c instanceof Xu?c:null}var Fp="__closure_events_fn_"+(1e9*Math.random()>>>0);function Lp(c){return typeof c=="function"?c:(c[Fp]||(c[Fp]=function(d){return c.handleEvent(d)}),c[Fp])}function Dt(){Hr.call(this),this.i=new Xu(this),this.M=this,this.F=null}S(Dt,Hr),Dt.prototype[La]=!0,Dt.prototype.removeEventListener=function(c,d,f,g){uw(this,c,d,f,g)};function Ft(c,d){var f,g=c.F;if(g)for(f=[];g;g=g.F)f.push(g);if(c=c.M,g=d.type||d,typeof d=="string")d=new bt(d,c);else if(d instanceof bt)d.target=d.target||c;else{var C=d;d=new bt(g,c),w(d,C)}if(C=!0,f)for(var A=f.length-1;0<=A;A--){var L=d.g=f[A];C=el(L,g,!0,d)&&C}if(L=d.g=c,C=el(L,g,!0,d)&&C,C=el(L,g,!1,d)&&C,f)for(A=0;A<f.length;A++)L=d.g=f[A],C=el(L,g,!1,d)&&C}Dt.prototype.N=function(){if(Dt.aa.N.call(this),this.i){var c=this.i,d;for(d in c.g){for(var f=c.g[d],g=0;g<f.length;g++)Ju(f[g]);delete c.g[d],c.h--}}this.F=null},Dt.prototype.K=function(c,d,f,g){return this.i.add(String(c),d,!1,f,g)},Dt.prototype.L=function(c,d,f,g){return this.i.add(String(c),d,!0,f,g)};function el(c,d,f,g){if(d=c.i.g[String(d)],!d)return!0;d=d.concat();for(var C=!0,A=0;A<d.length;++A){var L=d[A];if(L&&!L.da&&L.capture==f){var Re=L.listener,mt=L.ha||L.src;L.fa&&Np(c.i,L),C=Re.call(mt,g)!==!1&&C}}return C&&!g.defaultPrevented}function dw(c,d,f){if(typeof c=="function")f&&(c=m(c,f));else if(c&&typeof c.handleEvent=="function")c=m(c.handleEvent,c);else throw Error("Invalid listener argument");return 2147483647<Number(d)?-1:a.setTimeout(c,d||0)}function hw(c){c.g=dw(()=>{c.g=null,c.i&&(c.i=!1,hw(c))},c.l);let d=c.h;c.h=null,c.m.apply(null,d)}class hP extends Hr{constructor(d,f){super(),this.m=d,this.l=f,this.h=null,this.i=!1,this.g=null}j(d){this.h=arguments,this.g?this.i=!0:hw(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Va(c){Hr.call(this),this.h=c,this.g={}}S(Va,Hr);var fw=[];function pw(c){De(c.g,function(d,f){this.g.hasOwnProperty(f)&&kp(d)},c),c.g={}}Va.prototype.N=function(){Va.aa.N.call(this),pw(this)},Va.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Vp=a.JSON.stringify,fP=a.JSON.parse,pP=class{stringify(c){return a.JSON.stringify(c,void 0)}parse(c){return a.JSON.parse(c,void 0)}};function jp(){}jp.prototype.h=null;function gw(c){return c.h||(c.h=c.i())}function mw(){}var ja={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Up(){bt.call(this,"d")}S(Up,bt);function Bp(){bt.call(this,"c")}S(Bp,bt);var Fi={},yw=null;function tl(){return yw=yw||new Dt}Fi.La="serverreachability";function vw(c){bt.call(this,Fi.La,c)}S(vw,bt);function Ua(c){let d=tl();Ft(d,new vw(d))}Fi.STAT_EVENT="statevent";function _w(c,d){bt.call(this,Fi.STAT_EVENT,c),this.stat=d}S(_w,bt);function Lt(c){let d=tl();Ft(d,new _w(d,c))}Fi.Ma="timingevent";function Ew(c,d){bt.call(this,Fi.Ma,c),this.size=d}S(Ew,bt);function Ba(c,d){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){c()},d)}function $a(){this.g=!0}$a.prototype.xa=function(){this.g=!1};function gP(c,d,f,g,C,A){c.info(function(){if(c.g)if(A)for(var L="",Re=A.split("&"),mt=0;mt<Re.length;mt++){var ve=Re[mt].split("=");if(1<ve.length){var Ct=ve[0];ve=ve[1];var Tt=Ct.split("_");L=2<=Tt.length&&Tt[1]=="type"?L+(Ct+"="+ve+"&"):L+(Ct+"=redacted&")}}else L=null;else L=A;return"XMLHTTP REQ ("+g+") [attempt "+C+"]: "+d+`
`+f+`
`+L})}function mP(c,d,f,g,C,A,L){c.info(function(){return"XMLHTTP RESP ("+g+") [ attempt "+C+"]: "+d+`
`+f+`
`+A+" "+L})}function Xo(c,d,f,g){c.info(function(){return"XMLHTTP TEXT ("+d+"): "+vP(c,f)+(g?" "+g:"")})}function yP(c,d){c.info(function(){return"TIMEOUT: "+d})}$a.prototype.info=function(){};function vP(c,d){if(!c.g)return d;if(!d)return null;try{var f=JSON.parse(d);if(f){for(c=0;c<f.length;c++)if(Array.isArray(f[c])){var g=f[c];if(!(2>g.length)){var C=g[1];if(Array.isArray(C)&&!(1>C.length)){var A=C[0];if(A!="noop"&&A!="stop"&&A!="close")for(var L=1;L<C.length;L++)C[L]=""}}}}return Vp(f)}catch{return d}}var nl={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Iw={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},$p;function rl(){}S(rl,jp),rl.prototype.g=function(){return new XMLHttpRequest},rl.prototype.i=function(){return{}},$p=new rl;function qr(c,d,f,g){this.j=c,this.i=d,this.l=f,this.R=g||1,this.U=new Va(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new ww}function ww(){this.i=null,this.g="",this.h=!1}var bw={},Hp={};function qp(c,d,f){c.L=1,c.v=al(dr(d)),c.m=f,c.P=!0,Dw(c,null)}function Dw(c,d){c.F=Date.now(),il(c),c.A=dr(c.v);var f=c.A,g=c.R;Array.isArray(g)||(g=[String(g)]),Vw(f.i,"t",g),c.C=0,f=c.j.J,c.h=new ww,c.g=nb(c.j,f?d:null,!c.m),0<c.O&&(c.M=new hP(m(c.Y,c,c.g),c.O)),d=c.U,f=c.g,g=c.ca;var C="readystatechange";Array.isArray(C)||(C&&(fw[0]=C.toString()),C=fw);for(var A=0;A<C.length;A++){var L=sw(f,C[A],g||d.handleEvent,!1,d.h||d);if(!L)break;d.g[L.key]=L}d=c.H?v(c.H):{},c.m?(c.u||(c.u="POST"),d["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.A,c.u,c.m,d)):(c.u="GET",c.g.ea(c.A,c.u,null,d)),Ua(),gP(c.i,c.u,c.A,c.l,c.R,c.m)}qr.prototype.ca=function(c){c=c.target;let d=this.M;d&&hr(c)==3?d.j():this.Y(c)},qr.prototype.Y=function(c){try{if(c==this.g)e:{let Tt=hr(this.g);var d=this.g.Ba();let ns=this.g.Z();if(!(3>Tt)&&(Tt!=3||this.g&&(this.h.h||this.g.oa()||zw(this.g)))){this.J||Tt!=4||d==7||(d==8||0>=ns?Ua(3):Ua(2)),zp(this);var f=this.g.Z();this.X=f;t:if(Cw(this)){var g=zw(this.g);c="";var C=g.length,A=hr(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Li(this),Ha(this);var L="";break t}this.h.i=new a.TextDecoder}for(d=0;d<C;d++)this.h.h=!0,c+=this.h.i.decode(g[d],{stream:!(A&&d==C-1)});g.length=0,this.h.g+=c,this.C=0,L=this.h.g}else L=this.g.oa();if(this.o=f==200,mP(this.i,this.u,this.A,this.l,this.R,Tt,f),this.o){if(this.T&&!this.K){t:{if(this.g){var Re,mt=this.g;if((Re=mt.g?mt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!K(Re)){var ve=Re;break t}}ve=null}if(f=ve)Xo(this.i,this.l,f,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Gp(this,f);else{this.o=!1,this.s=3,Lt(12),Li(this),Ha(this);break e}}if(this.P){f=!0;let En;for(;!this.J&&this.C<L.length;)if(En=_P(this,L),En==Hp){Tt==4&&(this.s=4,Lt(14),f=!1),Xo(this.i,this.l,null,"[Incomplete Response]");break}else if(En==bw){this.s=4,Lt(15),Xo(this.i,this.l,L,"[Invalid Chunk]"),f=!1;break}else Xo(this.i,this.l,En,null),Gp(this,En);if(Cw(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Tt!=4||L.length!=0||this.h.h||(this.s=1,Lt(16),f=!1),this.o=this.o&&f,!f)Xo(this.i,this.l,L,"[Invalid Chunked Response]"),Li(this),Ha(this);else if(0<L.length&&!this.W){this.W=!0;var Ct=this.j;Ct.g==this&&Ct.ba&&!Ct.M&&(Ct.j.info("Great, no buffering proxy detected. Bytes received: "+L.length),Jp(Ct),Ct.M=!0,Lt(11))}}else Xo(this.i,this.l,L,null),Gp(this,L);Tt==4&&Li(this),this.o&&!this.J&&(Tt==4?Jw(this.j,this):(this.o=!1,il(this)))}else FP(this.g),f==400&&0<L.indexOf("Unknown SID")?(this.s=3,Lt(12)):(this.s=0,Lt(13)),Li(this),Ha(this)}}}catch{}finally{}};function Cw(c){return c.g?c.u=="GET"&&c.L!=2&&c.j.Ca:!1}function _P(c,d){var f=c.C,g=d.indexOf(`
`,f);return g==-1?Hp:(f=Number(d.substring(f,g)),isNaN(f)?bw:(g+=1,g+f>d.length?Hp:(d=d.slice(g,g+f),c.C=g+f,d)))}qr.prototype.cancel=function(){this.J=!0,Li(this)};function il(c){c.S=Date.now()+c.I,Tw(c,c.I)}function Tw(c,d){if(c.B!=null)throw Error("WatchDog timer not null");c.B=Ba(m(c.ba,c),d)}function zp(c){c.B&&(a.clearTimeout(c.B),c.B=null)}qr.prototype.ba=function(){this.B=null;let c=Date.now();0<=c-this.S?(yP(this.i,this.A),this.L!=2&&(Ua(),Lt(17)),Li(this),this.s=2,Ha(this)):Tw(this,this.S-c)};function Ha(c){c.j.G==0||c.J||Jw(c.j,c)}function Li(c){zp(c);var d=c.M;d&&typeof d.ma=="function"&&d.ma(),c.M=null,pw(c.U),c.g&&(d=c.g,c.g=null,d.abort(),d.ma())}function Gp(c,d){try{var f=c.j;if(f.G!=0&&(f.g==c||Wp(f.h,c))){if(!c.K&&Wp(f.h,c)&&f.G==3){try{var g=f.Da.g.parse(d)}catch{g=null}if(Array.isArray(g)&&g.length==3){var C=g;if(C[0]==0){e:if(!f.u){if(f.g)if(f.g.F+3e3<c.F)hl(f),ll(f);else break e;Zp(f),Lt(18)}}else f.za=C[1],0<f.za-f.T&&37500>C[2]&&f.F&&f.v==0&&!f.C&&(f.C=Ba(m(f.Za,f),6e3));if(1>=Rw(f.h)&&f.ca){try{f.ca()}catch{}f.ca=void 0}}else ji(f,11)}else if((c.K||f.g==c)&&hl(f),!K(d))for(C=f.Da.g.parse(d),d=0;d<C.length;d++){let ve=C[d];if(f.T=ve[0],ve=ve[1],f.G==2)if(ve[0]=="c"){f.K=ve[1],f.ia=ve[2];let Ct=ve[3];Ct!=null&&(f.la=Ct,f.j.info("VER="+f.la));let Tt=ve[4];Tt!=null&&(f.Aa=Tt,f.j.info("SVER="+f.Aa));let ns=ve[5];ns!=null&&typeof ns=="number"&&0<ns&&(g=1.5*ns,f.L=g,f.j.info("backChannelRequestTimeoutMs_="+g)),g=f;let En=c.g;if(En){let pl=En.g?En.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(pl){var A=g.h;A.g||pl.indexOf("spdy")==-1&&pl.indexOf("quic")==-1&&pl.indexOf("h2")==-1||(A.j=A.l,A.g=new Set,A.h&&(Kp(A,A.h),A.h=null))}if(g.D){let Xp=En.g?En.g.getResponseHeader("X-HTTP-Session-Id"):null;Xp&&(g.ya=Xp,xe(g.I,g.D,Xp))}}f.G=3,f.l&&f.l.ua(),f.ba&&(f.R=Date.now()-c.F,f.j.info("Handshake RTT: "+f.R+"ms")),g=f;var L=c;if(g.qa=tb(g,g.J?g.ia:null,g.W),L.K){Nw(g.h,L);var Re=L,mt=g.L;mt&&(Re.I=mt),Re.B&&(zp(Re),il(Re)),g.g=L}else Yw(g);0<f.i.length&&dl(f)}else ve[0]!="stop"&&ve[0]!="close"||ji(f,7);else f.G==3&&(ve[0]=="stop"||ve[0]=="close"?ve[0]=="stop"?ji(f,7):Yp(f):ve[0]!="noop"&&f.l&&f.l.ta(ve),f.v=0)}}Ua(4)}catch{}}var EP=class{constructor(c,d){this.g=c,this.map=d}};function Sw(c){this.l=c||10,a.PerformanceNavigationTiming?(c=a.performance.getEntriesByType("navigation"),c=0<c.length&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Aw(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function Rw(c){return c.h?1:c.g?c.g.size:0}function Wp(c,d){return c.h?c.h==d:c.g?c.g.has(d):!1}function Kp(c,d){c.g?c.g.add(d):c.h=d}function Nw(c,d){c.h&&c.h==d?c.h=null:c.g&&c.g.has(d)&&c.g.delete(d)}Sw.prototype.cancel=function(){if(this.i=Mw(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let c of this.g.values())c.cancel();this.g.clear()}};function Mw(c){if(c.h!=null)return c.i.concat(c.h.D);if(c.g!=null&&c.g.size!==0){let d=c.i;for(let f of c.g.values())d=d.concat(f.D);return d}return P(c.i)}function IP(c){if(c.V&&typeof c.V=="function")return c.V();if(typeof Map<"u"&&c instanceof Map||typeof Set<"u"&&c instanceof Set)return Array.from(c.values());if(typeof c=="string")return c.split("");if(u(c)){for(var d=[],f=c.length,g=0;g<f;g++)d.push(c[g]);return d}d=[],f=0;for(g in c)d[f++]=c[g];return d}function wP(c){if(c.na&&typeof c.na=="function")return c.na();if(!c.V||typeof c.V!="function"){if(typeof Map<"u"&&c instanceof Map)return Array.from(c.keys());if(!(typeof Set<"u"&&c instanceof Set)){if(u(c)||typeof c=="string"){var d=[];c=c.length;for(var f=0;f<c;f++)d.push(f);return d}d=[],f=0;for(let g in c)d[f++]=g;return d}}}function Pw(c,d){if(c.forEach&&typeof c.forEach=="function")c.forEach(d,void 0);else if(u(c)||typeof c=="string")Array.prototype.forEach.call(c,d,void 0);else for(var f=wP(c),g=IP(c),C=g.length,A=0;A<C;A++)d.call(void 0,g[A],f&&f[A],c)}var xw=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function bP(c,d){if(c){c=c.split("&");for(var f=0;f<c.length;f++){var g=c[f].indexOf("="),C=null;if(0<=g){var A=c[f].substring(0,g);C=c[f].substring(g+1)}else A=c[f];d(A,C?decodeURIComponent(C.replace(/\+/g," ")):"")}}}function Vi(c){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,c instanceof Vi){this.h=c.h,ol(this,c.j),this.o=c.o,this.g=c.g,sl(this,c.s),this.l=c.l;var d=c.i,f=new Ga;f.i=d.i,d.g&&(f.g=new Map(d.g),f.h=d.h),kw(this,f),this.m=c.m}else c&&(d=String(c).match(xw))?(this.h=!1,ol(this,d[1]||"",!0),this.o=qa(d[2]||""),this.g=qa(d[3]||"",!0),sl(this,d[4]),this.l=qa(d[5]||"",!0),kw(this,d[6]||"",!0),this.m=qa(d[7]||"")):(this.h=!1,this.i=new Ga(null,this.h))}Vi.prototype.toString=function(){var c=[],d=this.j;d&&c.push(za(d,Ow,!0),":");var f=this.g;return(f||d=="file")&&(c.push("//"),(d=this.o)&&c.push(za(d,Ow,!0),"@"),c.push(encodeURIComponent(String(f)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f=this.s,f!=null&&c.push(":",String(f))),(f=this.l)&&(this.g&&f.charAt(0)!="/"&&c.push("/"),c.push(za(f,f.charAt(0)=="/"?TP:CP,!0))),(f=this.i.toString())&&c.push("?",f),(f=this.m)&&c.push("#",za(f,AP)),c.join("")};function dr(c){return new Vi(c)}function ol(c,d,f){c.j=f?qa(d,!0):d,c.j&&(c.j=c.j.replace(/:$/,""))}function sl(c,d){if(d){if(d=Number(d),isNaN(d)||0>d)throw Error("Bad port number "+d);c.s=d}else c.s=null}function kw(c,d,f){d instanceof Ga?(c.i=d,RP(c.i,c.h)):(f||(d=za(d,SP)),c.i=new Ga(d,c.h))}function xe(c,d,f){c.i.set(d,f)}function al(c){return xe(c,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),c}function qa(c,d){return c?d?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function za(c,d,f){return typeof c=="string"?(c=encodeURI(c).replace(d,DP),f&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function DP(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var Ow=/[#\/\?@]/g,CP=/[#\?:]/g,TP=/[#\?]/g,SP=/[#\?@]/g,AP=/#/g;function Ga(c,d){this.h=this.g=null,this.i=c||null,this.j=!!d}function zr(c){c.g||(c.g=new Map,c.h=0,c.i&&bP(c.i,function(d,f){c.add(decodeURIComponent(d.replace(/\+/g," ")),f)}))}t=Ga.prototype,t.add=function(c,d){zr(this),this.i=null,c=es(this,c);var f=this.g.get(c);return f||this.g.set(c,f=[]),f.push(d),this.h+=1,this};function Fw(c,d){zr(c),d=es(c,d),c.g.has(d)&&(c.i=null,c.h-=c.g.get(d).length,c.g.delete(d))}function Lw(c,d){return zr(c),d=es(c,d),c.g.has(d)}t.forEach=function(c,d){zr(this),this.g.forEach(function(f,g){f.forEach(function(C){c.call(d,C,g,this)},this)},this)},t.na=function(){zr(this);let c=Array.from(this.g.values()),d=Array.from(this.g.keys()),f=[];for(let g=0;g<d.length;g++){let C=c[g];for(let A=0;A<C.length;A++)f.push(d[g])}return f},t.V=function(c){zr(this);let d=[];if(typeof c=="string")Lw(this,c)&&(d=d.concat(this.g.get(es(this,c))));else{c=Array.from(this.g.values());for(let f=0;f<c.length;f++)d=d.concat(c[f])}return d},t.set=function(c,d){return zr(this),this.i=null,c=es(this,c),Lw(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[d]),this.h+=1,this},t.get=function(c,d){return c?(c=this.V(c),0<c.length?String(c[0]):d):d};function Vw(c,d,f){Fw(c,d),0<f.length&&(c.i=null,c.g.set(es(c,d),P(f)),c.h+=f.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";let c=[],d=Array.from(this.g.keys());for(var f=0;f<d.length;f++){var g=d[f];let A=encodeURIComponent(String(g)),L=this.V(g);for(g=0;g<L.length;g++){var C=A;L[g]!==""&&(C+="="+encodeURIComponent(String(L[g]))),c.push(C)}}return this.i=c.join("&")};function es(c,d){return d=String(d),c.j&&(d=d.toLowerCase()),d}function RP(c,d){d&&!c.j&&(zr(c),c.i=null,c.g.forEach(function(f,g){var C=g.toLowerCase();g!=C&&(Fw(this,g),Vw(this,C,f))},c)),c.j=d}function NP(c,d){let f=new $a;if(a.Image){let g=new Image;g.onload=y(Gr,f,"TestLoadImage: loaded",!0,d,g),g.onerror=y(Gr,f,"TestLoadImage: error",!1,d,g),g.onabort=y(Gr,f,"TestLoadImage: abort",!1,d,g),g.ontimeout=y(Gr,f,"TestLoadImage: timeout",!1,d,g),a.setTimeout(function(){g.ontimeout&&g.ontimeout()},1e4),g.src=c}else d(!1)}function MP(c,d){let f=new $a,g=new AbortController,C=setTimeout(()=>{g.abort(),Gr(f,"TestPingServer: timeout",!1,d)},1e4);fetch(c,{signal:g.signal}).then(A=>{clearTimeout(C),A.ok?Gr(f,"TestPingServer: ok",!0,d):Gr(f,"TestPingServer: server error",!1,d)}).catch(()=>{clearTimeout(C),Gr(f,"TestPingServer: error",!1,d)})}function Gr(c,d,f,g,C){try{C&&(C.onload=null,C.onerror=null,C.onabort=null,C.ontimeout=null),g(f)}catch{}}function PP(){this.g=new pP}function xP(c,d,f){let g=f||"";try{Pw(c,function(C,A){let L=C;l(C)&&(L=Vp(C)),d.push(g+A+"="+encodeURIComponent(L))})}catch(C){throw d.push(g+"type="+encodeURIComponent("_badmap")),C}}function Wa(c){this.l=c.Ub||null,this.j=c.eb||!1}S(Wa,jp),Wa.prototype.g=function(){return new cl(this.l,this.j)},Wa.prototype.i=(function(c){return function(){return c}})({});function cl(c,d){Dt.call(this),this.D=c,this.o=d,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}S(cl,Dt),t=cl.prototype,t.open=function(c,d){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=c,this.A=d,this.readyState=1,Qa(this)},t.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let d={headers:this.u,method:this.B,credentials:this.m,cache:void 0};c&&(d.body=c),(this.D||a).fetch(new Request(this.A,d)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Ka(this)),this.readyState=0},t.Sa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,Qa(this)),this.g&&(this.readyState=3,Qa(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;jw(this)}else c.text().then(this.Ra.bind(this),this.ga.bind(this))};function jw(c){c.j.read().then(c.Pa.bind(c)).catch(c.ga.bind(c))}t.Pa=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var d=c.value?c.value:new Uint8Array(0);(d=this.v.decode(d,{stream:!c.done}))&&(this.response=this.responseText+=d)}c.done?Ka(this):Qa(this),this.readyState==3&&jw(this)}},t.Ra=function(c){this.g&&(this.response=this.responseText=c,Ka(this))},t.Qa=function(c){this.g&&(this.response=c,Ka(this))},t.ga=function(){this.g&&Ka(this)};function Ka(c){c.readyState=4,c.l=null,c.j=null,c.v=null,Qa(c)}t.setRequestHeader=function(c,d){this.u.append(c,d)},t.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";let c=[],d=this.h.entries();for(var f=d.next();!f.done;)f=f.value,c.push(f[0]+": "+f[1]),f=d.next();return c.join(`\r
`)};function Qa(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(cl.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function Uw(c){let d="";return De(c,function(f,g){d+=g,d+=":",d+=f,d+=`\r
`}),d}function Qp(c,d,f){e:{for(g in f){var g=!1;break e}g=!0}g||(f=Uw(f),typeof c=="string"?f!=null&&encodeURIComponent(String(f)):xe(c,d,f))}function je(c){Dt.call(this),this.headers=new Map,this.o=c||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}S(je,Dt);var kP=/^https?$/i,OP=["POST","PUT"];t=je.prototype,t.Ha=function(c){this.J=c},t.ea=function(c,d,f,g){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);d=d?d.toUpperCase():"GET",this.D=c,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():$p.g(),this.v=this.o?gw(this.o):gw($p),this.g.onreadystatechange=m(this.Ea,this);try{this.B=!0,this.g.open(d,String(c),!0),this.B=!1}catch(A){Bw(this,A);return}if(c=f||"",f=new Map(this.headers),g)if(Object.getPrototypeOf(g)===Object.prototype)for(var C in g)f.set(C,g[C]);else if(typeof g.keys=="function"&&typeof g.get=="function")for(let A of g.keys())f.set(A,g.get(A));else throw Error("Unknown input type for opt_headers: "+String(g));g=Array.from(f.keys()).find(A=>A.toLowerCase()=="content-type"),C=a.FormData&&c instanceof a.FormData,!(0<=Array.prototype.indexOf.call(OP,d,void 0))||g||C||f.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[A,L]of f)this.g.setRequestHeader(A,L);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{qw(this),this.u=!0,this.g.send(c),this.u=!1}catch(A){Bw(this,A)}};function Bw(c,d){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=d,c.m=5,$w(c),ul(c)}function $w(c){c.A||(c.A=!0,Ft(c,"complete"),Ft(c,"error"))}t.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=c||7,Ft(this,"complete"),Ft(this,"abort"),ul(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ul(this,!0)),je.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?Hw(this):this.bb())},t.bb=function(){Hw(this)};function Hw(c){if(c.h&&typeof s<"u"&&(!c.v[1]||hr(c)!=4||c.Z()!=2)){if(c.u&&hr(c)==4)dw(c.Ea,0,c);else if(Ft(c,"readystatechange"),hr(c)==4){c.h=!1;try{let L=c.Z();e:switch(L){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var d=!0;break e;default:d=!1}var f;if(!(f=d)){var g;if(g=L===0){var C=String(c.D).match(xw)[1]||null;!C&&a.self&&a.self.location&&(C=a.self.location.protocol.slice(0,-1)),g=!kP.test(C?C.toLowerCase():"")}f=g}if(f)Ft(c,"complete"),Ft(c,"success");else{c.m=6;try{var A=2<hr(c)?c.g.statusText:""}catch{A=""}c.l=A+" ["+c.Z()+"]",$w(c)}}finally{ul(c)}}}}function ul(c,d){if(c.g){qw(c);let f=c.g,g=c.v[0]?()=>{}:null;c.g=null,c.v=null,d||Ft(c,"ready");try{f.onreadystatechange=g}catch{}}}function qw(c){c.I&&(a.clearTimeout(c.I),c.I=null)}t.isActive=function(){return!!this.g};function hr(c){return c.g?c.g.readyState:0}t.Z=function(){try{return 2<hr(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(c){if(this.g){var d=this.g.responseText;return c&&d.indexOf(c)==0&&(d=d.substring(c.length)),fP(d)}};function zw(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.H){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function FP(c){let d={};c=(c.g&&2<=hr(c)&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let g=0;g<c.length;g++){if(K(c[g]))continue;var f=D(c[g]);let C=f[0];if(f=f[1],typeof f!="string")continue;f=f.trim();let A=d[C]||[];d[C]=A,A.push(f)}b(d,function(g){return g.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ya(c,d,f){return f&&f.internalChannelParams&&f.internalChannelParams[c]||d}function Gw(c){this.Aa=0,this.i=[],this.j=new $a,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Ya("failFast",!1,c),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Ya("baseRetryDelayMs",5e3,c),this.cb=Ya("retryDelaySeedMs",1e4,c),this.Wa=Ya("forwardChannelMaxRetries",2,c),this.wa=Ya("forwardChannelRequestTimeoutMs",2e4,c),this.pa=c&&c.xmlHttpFactory||void 0,this.Xa=c&&c.Tb||void 0,this.Ca=c&&c.useFetchStreams||!1,this.L=void 0,this.J=c&&c.supportsCrossDomainXhr||!1,this.K="",this.h=new Sw(c&&c.concurrentRequestLimit),this.Da=new PP,this.P=c&&c.fastHandshake||!1,this.O=c&&c.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=c&&c.Rb||!1,c&&c.xa&&this.j.xa(),c&&c.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&c&&c.detectBufferingProxy||!1,this.ja=void 0,c&&c.longPollingTimeout&&0<c.longPollingTimeout&&(this.ja=c.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=Gw.prototype,t.la=8,t.G=1,t.connect=function(c,d,f,g){Lt(0),this.W=c,this.H=d||{},f&&g!==void 0&&(this.H.OSID=f,this.H.OAID=g),this.F=this.X,this.I=tb(this,null,this.W),dl(this)};function Yp(c){if(Ww(c),c.G==3){var d=c.U++,f=dr(c.I);if(xe(f,"SID",c.K),xe(f,"RID",d),xe(f,"TYPE","terminate"),Za(c,f),d=new qr(c,c.j,d),d.L=2,d.v=al(dr(f)),f=!1,a.navigator&&a.navigator.sendBeacon)try{f=a.navigator.sendBeacon(d.v.toString(),"")}catch{}!f&&a.Image&&(new Image().src=d.v,f=!0),f||(d.g=nb(d.j,null),d.g.ea(d.v)),d.F=Date.now(),il(d)}eb(c)}function ll(c){c.g&&(Jp(c),c.g.cancel(),c.g=null)}function Ww(c){ll(c),c.u&&(a.clearTimeout(c.u),c.u=null),hl(c),c.h.cancel(),c.s&&(typeof c.s=="number"&&a.clearTimeout(c.s),c.s=null)}function dl(c){if(!Aw(c.h)&&!c.s){c.s=!0;var d=c.Ga;ka||ow(),Oa||(ka(),Oa=!0),Rp.add(d,c),c.B=0}}function LP(c,d){return Rw(c.h)>=c.h.j-(c.s?1:0)?!1:c.s?(c.i=d.D.concat(c.i),!0):c.G==1||c.G==2||c.B>=(c.Va?0:c.Wa)?!1:(c.s=Ba(m(c.Ga,c,d),Xw(c,c.B)),c.B++,!0)}t.Ga=function(c){if(this.s)if(this.s=null,this.G==1){if(!c){this.U=Math.floor(1e5*Math.random()),c=this.U++;let C=new qr(this,this.j,c),A=this.o;if(this.S&&(A?(A=v(A),w(A,this.S)):A=this.S),this.m!==null||this.O||(C.H=A,A=null),this.P)e:{for(var d=0,f=0;f<this.i.length;f++){t:{var g=this.i[f];if("__data__"in g.map&&(g=g.map.__data__,typeof g=="string")){g=g.length;break t}g=void 0}if(g===void 0)break;if(d+=g,4096<d){d=f;break e}if(d===4096||f===this.i.length-1){d=f+1;break e}}d=1e3}else d=1e3;d=Qw(this,C,d),f=dr(this.I),xe(f,"RID",c),xe(f,"CVER",22),this.D&&xe(f,"X-HTTP-Session-Id",this.D),Za(this,f),A&&(this.O?d="headers="+encodeURIComponent(String(Uw(A)))+"&"+d:this.m&&Qp(f,this.m,A)),Kp(this.h,C),this.Ua&&xe(f,"TYPE","init"),this.P?(xe(f,"$req",d),xe(f,"SID","null"),C.T=!0,qp(C,f,null)):qp(C,f,d),this.G=2}}else this.G==3&&(c?Kw(this,c):this.i.length==0||Aw(this.h)||Kw(this))};function Kw(c,d){var f;d?f=d.l:f=c.U++;let g=dr(c.I);xe(g,"SID",c.K),xe(g,"RID",f),xe(g,"AID",c.T),Za(c,g),c.m&&c.o&&Qp(g,c.m,c.o),f=new qr(c,c.j,f,c.B+1),c.m===null&&(f.H=c.o),d&&(c.i=d.D.concat(c.i)),d=Qw(c,f,1e3),f.I=Math.round(.5*c.wa)+Math.round(.5*c.wa*Math.random()),Kp(c.h,f),qp(f,g,d)}function Za(c,d){c.H&&De(c.H,function(f,g){xe(d,g,f)}),c.l&&Pw({},function(f,g){xe(d,g,f)})}function Qw(c,d,f){f=Math.min(c.i.length,f);var g=c.l?m(c.l.Na,c.l,c):null;e:{var C=c.i;let A=-1;for(;;){let L=["count="+f];A==-1?0<f?(A=C[0].g,L.push("ofs="+A)):A=0:L.push("ofs="+A);let Re=!0;for(let mt=0;mt<f;mt++){let ve=C[mt].g,Ct=C[mt].map;if(ve-=A,0>ve)A=Math.max(0,C[mt].g-100),Re=!1;else try{xP(Ct,L,"req"+ve+"_")}catch{g&&g(Ct)}}if(Re){g=L.join("&");break e}}}return c=c.i.splice(0,f),d.D=c,g}function Yw(c){if(!c.g&&!c.u){c.Y=1;var d=c.Fa;ka||ow(),Oa||(ka(),Oa=!0),Rp.add(d,c),c.v=0}}function Zp(c){return c.g||c.u||3<=c.v?!1:(c.Y++,c.u=Ba(m(c.Fa,c),Xw(c,c.v)),c.v++,!0)}t.Fa=function(){if(this.u=null,Zw(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var c=2*this.R;this.j.info("BP detection timer enabled: "+c),this.A=Ba(m(this.ab,this),c)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Lt(10),ll(this),Zw(this))};function Jp(c){c.A!=null&&(a.clearTimeout(c.A),c.A=null)}function Zw(c){c.g=new qr(c,c.j,"rpc",c.Y),c.m===null&&(c.g.H=c.o),c.g.O=0;var d=dr(c.qa);xe(d,"RID","rpc"),xe(d,"SID",c.K),xe(d,"AID",c.T),xe(d,"CI",c.F?"0":"1"),!c.F&&c.ja&&xe(d,"TO",c.ja),xe(d,"TYPE","xmlhttp"),Za(c,d),c.m&&c.o&&Qp(d,c.m,c.o),c.L&&(c.g.I=c.L);var f=c.g;c=c.ia,f.L=1,f.v=al(dr(d)),f.m=null,f.P=!0,Dw(f,c)}t.Za=function(){this.C!=null&&(this.C=null,ll(this),Zp(this),Lt(19))};function hl(c){c.C!=null&&(a.clearTimeout(c.C),c.C=null)}function Jw(c,d){var f=null;if(c.g==d){hl(c),Jp(c),c.g=null;var g=2}else if(Wp(c.h,d))f=d.D,Nw(c.h,d),g=1;else return;if(c.G!=0){if(d.o)if(g==1){f=d.m?d.m.length:0,d=Date.now()-d.F;var C=c.B;g=tl(),Ft(g,new Ew(g,f)),dl(c)}else Yw(c);else if(C=d.s,C==3||C==0&&0<d.X||!(g==1&&LP(c,d)||g==2&&Zp(c)))switch(f&&0<f.length&&(d=c.h,d.i=d.i.concat(f)),C){case 1:ji(c,5);break;case 4:ji(c,10);break;case 3:ji(c,6);break;default:ji(c,2)}}}function Xw(c,d){let f=c.Ta+Math.floor(Math.random()*c.cb);return c.isActive()||(f*=2),f*d}function ji(c,d){if(c.j.info("Error code "+d),d==2){var f=m(c.fb,c),g=c.Xa;let C=!g;g=new Vi(g||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||ol(g,"https"),al(g),C?NP(g.toString(),f):MP(g.toString(),f)}else Lt(2);c.G=0,c.l&&c.l.sa(d),eb(c),Ww(c)}t.fb=function(c){c?(this.j.info("Successfully pinged google.com"),Lt(2)):(this.j.info("Failed to ping google.com"),Lt(1))};function eb(c){if(c.G=0,c.ka=[],c.l){let d=Mw(c.h);(d.length!=0||c.i.length!=0)&&(M(c.ka,d),M(c.ka,c.i),c.h.i.length=0,P(c.i),c.i.length=0),c.l.ra()}}function tb(c,d,f){var g=f instanceof Vi?dr(f):new Vi(f);if(g.g!="")d&&(g.g=d+"."+g.g),sl(g,g.s);else{var C=a.location;g=C.protocol,d=d?d+"."+C.hostname:C.hostname,C=+C.port;var A=new Vi(null);g&&ol(A,g),d&&(A.g=d),C&&sl(A,C),f&&(A.l=f),g=A}return f=c.D,d=c.ya,f&&d&&xe(g,f,d),xe(g,"VER",c.la),Za(c,g),g}function nb(c,d,f){if(d&&!c.J)throw Error("Can't create secondary domain capable XhrIo object.");return d=c.Ca&&!c.pa?new je(new Wa({eb:f})):new je(c.pa),d.Ha(c.J),d}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function rb(){}t=rb.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function fl(){}fl.prototype.g=function(c,d){return new Yt(c,d)};function Yt(c,d){Dt.call(this),this.g=new Gw(d),this.l=c,this.h=d&&d.messageUrlParams||null,c=d&&d.messageHeaders||null,d&&d.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=d&&d.initMessageHeaders||null,d&&d.messageContentType&&(c?c["X-WebChannel-Content-Type"]=d.messageContentType:c={"X-WebChannel-Content-Type":d.messageContentType}),d&&d.va&&(c?c["X-WebChannel-Client-Profile"]=d.va:c={"X-WebChannel-Client-Profile":d.va}),this.g.S=c,(c=d&&d.Sb)&&!K(c)&&(this.g.m=c),this.v=d&&d.supportsCrossDomainXhr||!1,this.u=d&&d.sendRawJson||!1,(d=d&&d.httpSessionIdParam)&&!K(d)&&(this.g.D=d,c=this.h,c!==null&&d in c&&(c=this.h,d in c&&delete c[d])),this.j=new ts(this)}S(Yt,Dt),Yt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Yt.prototype.close=function(){Yp(this.g)},Yt.prototype.o=function(c){var d=this.g;if(typeof c=="string"){var f={};f.__data__=c,c=f}else this.u&&(f={},f.__data__=Vp(c),c=f);d.i.push(new EP(d.Ya++,c)),d.G==3&&dl(d)},Yt.prototype.N=function(){this.g.l=null,delete this.j,Yp(this.g),delete this.g,Yt.aa.N.call(this)};function ib(c){Up.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var d=c.__sm__;if(d){e:{for(let f in d){c=f;break e}c=void 0}(this.i=c)&&(c=this.i,d=d!==null&&c in d?d[c]:void 0),this.data=d}else this.data=c}S(ib,Up);function ob(){Bp.call(this),this.status=1}S(ob,Bp);function ts(c){this.g=c}S(ts,rb),ts.prototype.ua=function(){Ft(this.g,"a")},ts.prototype.ta=function(c){Ft(this.g,new ib(c))},ts.prototype.sa=function(c){Ft(this.g,new ob)},ts.prototype.ra=function(){Ft(this.g,"b")},fl.prototype.createWebChannel=fl.prototype.g,Yt.prototype.send=Yt.prototype.o,Yt.prototype.open=Yt.prototype.m,Yt.prototype.close=Yt.prototype.close,p_=xr.createWebChannelTransport=function(){return new fl},f_=xr.getStatEventTarget=function(){return tl()},h_=xr.Event=Fi,of=xr.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},nl.NO_ERROR=0,nl.TIMEOUT=8,nl.HTTP_ERROR=6,Iu=xr.ErrorCode=nl,Iw.COMPLETE="complete",d_=xr.EventType=Iw,mw.EventType=ja,ja.OPEN="a",ja.CLOSE="b",ja.ERROR="c",ja.MESSAGE="d",Dt.prototype.listen=Dt.prototype.K,na=xr.WebChannel=mw,MB=xr.FetchXmlHttpFactory=Wa,je.prototype.listenOnce=je.prototype.L,je.prototype.getLastError=je.prototype.Ka,je.prototype.getLastErrorCode=je.prototype.Ba,je.prototype.getStatus=je.prototype.Z,je.prototype.getResponseJson=je.prototype.Oa,je.prototype.getResponseText=je.prototype.oa,je.prototype.send=je.prototype.ea,je.prototype.setWithCredentials=je.prototype.Ha,l_=xr.XhrIo=je}).apply(typeof rf<"u"?rf:typeof self<"u"?self:typeof window<"u"?window:{});var gA="@firebase/firestore",mA="4.8.0";var ft=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};ft.UNAUTHENTICATED=new ft(null),ft.GOOGLE_CREDENTIALS=new ft("google-credentials-uid"),ft.FIRST_PARTY=new ft("first-party-uid"),ft.MOCK_USER=new ft("mock-user");var ba="11.10.0";var Vo=new er("@firebase/firestore");function ra(){return Vo.logLevel}function B(t,...e){if(Vo.logLevel<=le.DEBUG){let n=e.map(iI);Vo.debug(`Firestore (${ba}): ${t}`,...n)}}function Or(t,...e){if(Vo.logLevel<=le.ERROR){let n=e.map(iI);Vo.error(`Firestore (${ba}): ${t}`,...n)}}function Ci(t,...e){if(Vo.logLevel<=le.WARN){let n=e.map(iI);Vo.warn(`Firestore (${ba}): ${t}`,...n)}}function iI(t){if(typeof t=="string")return t;try{return(function(n){return JSON.stringify(n)})(t)}catch{return t}}function W(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,aR(t,r,n)}function aR(t,e,n){let r=`FIRESTORE (${ba}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw Or(r),new Error(r)}function be(t,e,n,r){let i="Unexpected state";typeof n=="string"?i=n:r=n,t||aR(e,i,r)}function J(t,e){return t}var N={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},V=class extends Qt{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var kn=class{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}};var hf=class{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},__=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(ft.UNAUTHENTICATED))}shutdown(){}},E_=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}},I_=class{constructor(e){this.t=e,this.currentUser=ft.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){be(this.o===void 0,42304);let r=this.i,i=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve(),o=new kn;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new kn,e.enqueueRetryable(()=>i(this.currentUser))};let s=()=>{let u=o;e.enqueueRetryable(()=>_(this,null,function*(){yield u.promise,yield i(this.currentUser)}))},a=u=>{B("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit(u=>a(u)),setTimeout(()=>{if(!this.auth){let u=this.t.getImmediate({optional:!0});u?a(u):(B("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new kn)}},0),s()}getToken(){let e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(B("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(be(typeof r.accessToken=="string",31837,{l:r}),new hf(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return be(e===null||typeof e=="string",2055,{h:e}),new ft(e)}},w_=class{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=ft.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);let e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}},b_=class{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new w_(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(ft.FIRST_PARTY))}shutdown(){}invalidateToken(){}},ff=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},D_=class{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Sr(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){be(this.o===void 0,3512);let r=o=>{o.error!=null&&B("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);let s=o.token!==this.m;return this.m=o.token,B("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?n(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};let i=o=>{B("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){let o=this.V.getImmediate({optional:!0});o?i(o):B("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new ff(this.p));let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(be(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new ff(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function PB(t){let e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}function cR(){return new TextEncoder}var Su=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516),r="";for(;r.length<20;){let i=PB(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<n&&(r+=e.charAt(i[o]%62))}return r}};function ce(t,e){return t<e?-1:t>e?1:0}function C_(t,e){let n=0;for(;n<t.length&&n<e.length;){let r=t.codePointAt(n),i=e.codePointAt(n);if(r!==i){if(r<128&&i<128)return ce(r,i);{let o=cR(),s=xB(o.encode(yA(t,n)),o.encode(yA(e,n)));return s!==0?s:ce(r,i)}}n+=r>65535?2:1}return ce(t.length,e.length)}function yA(t,e){return t.codePointAt(e)>65535?t.substring(e,e+2):t.substring(e,e+1)}function xB(t,e){for(let n=0;n<t.length&&n<e.length;++n)if(t[n]!==e[n])return ce(t[n],e[n]);return ce(t.length,e.length)}function da(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}var vA="__name__",pf=class t{constructor(e,n,r){n===void 0?n=0:n>e.length&&W(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&W(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return t.comparator(this,e)===0}child(e){let n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){let r=Math.min(e.length,n.length);for(let i=0;i<r;i++){let o=t.compareSegments(e.get(i),n.get(i));if(o!==0)return o}return ce(e.length,n.length)}static compareSegments(e,n){let r=t.isNumericId(e),i=t.isNumericId(n);return r&&!i?-1:!r&&i?1:r&&i?t.extractNumericId(e).compare(t.extractNumericId(n)):C_(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Pr.fromString(e.substring(4,e.length-2))}},Oe=class t extends pf{construct(e,n,r){return new t(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let n=[];for(let r of e){if(r.indexOf("//")>=0)throw new V(N.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new t(n)}static emptyPath(){return new t([])}},kB=/^[_a-zA-Z][_a-zA-Z0-9]*$/,cn=class t extends pf{construct(e,n,r){return new t(e,n,r)}static isValidIdentifier(e){return kB.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),t.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===vA}static keyField(){return new t([vA])}static fromServerFormat(e){let n=[],r="",i=0,o=()=>{if(r.length===0)throw new V(N.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""},s=!1;for(;i<e.length;){let a=e[i];if(a==="\\"){if(i+1===e.length)throw new V(N.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let u=e[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new V(N.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else a==="`"?(s=!s,i++):a!=="."||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new V(N.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new t(n)}static emptyPath(){return new t([])}};var G=class t{constructor(e){this.path=e}static fromPath(e){return new t(Oe.fromString(e))}static fromName(e){return new t(Oe.fromString(e).popFirst(5))}static empty(){return new t(Oe.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Oe.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Oe.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new t(new Oe(e.slice()))}};function uR(t,e,n){if(!n)throw new V(N.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function OB(t,e,n,r){if(e===!0&&r===!0)throw new V(N.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function _A(t){if(!G.isDocumentKey(t))throw new V(N.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function EA(t){if(G.isDocumentKey(t))throw new V(N.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function lR(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function Qf(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{let e=(function(r){return r.constructor?r.constructor.name:null})(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":W(12329,{type:typeof t})}function ir(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new V(N.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let n=Qf(t);throw new V(N.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function tt(t,e){let n={typeString:t};return e&&(n.value=e),n}function Lu(t,e){if(!lR(t))throw new V(N.INVALID_ARGUMENT,"JSON must be an object");let n;for(let r in e)if(e[r]){let i=e[r].typeString,o="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}let s=t[r];if(i&&typeof s!==i){n=`JSON field '${r}' must be a ${i}.`;break}if(o!==void 0&&s!==o.value){n=`Expected '${r}' field to equal '${o.value}'`;break}}if(n)throw new V(N.INVALID_ARGUMENT,n);return!0}var IA=-62135596800,wA=1e6,nt=class t{static now(){return t.fromMillis(Date.now())}static fromDate(e){return t.fromMillis(e.getTime())}static fromMillis(e){let n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*wA);return new t(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new V(N.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new V(N.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<IA)throw new V(N.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new V(N.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/wA}_compareTo(e){return this.seconds===e.seconds?ce(this.nanoseconds,e.nanoseconds):ce(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:t._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Lu(e,t._jsonSchema))return new t(e.seconds,e.nanoseconds)}valueOf(){let e=this.seconds-IA;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};nt._jsonSchemaVersion="firestore/timestamp/1.0",nt._jsonSchema={type:tt("string",nt._jsonSchemaVersion),seconds:tt("number"),nanoseconds:tt("number")};var te=class t{static fromTimestamp(e){return new t(e)}static min(){return new t(new nt(0,0))}static max(){return new t(new nt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var Au=-1,T_=class{constructor(e,n,r,i){this.indexId=e,this.collectionGroup=n,this.fields=r,this.indexState=i}};T_.UNKNOWN_ID=-1;function FB(t,e){let n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=te.fromTimestamp(r===1e9?new nt(n+1,0):new nt(n,r));return new jo(i,G.empty(),e)}function LB(t){return new jo(t.readTime,t.key,Au)}var jo=class t{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new t(te.min(),G.empty(),Au)}static max(){return new t(te.max(),G.empty(),Au)}};function VB(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=G.comparator(t.documentKey,e.documentKey),n!==0?n:ce(t.largestBatchId,e.largestBatchId))}var jB="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",S_=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function Da(t){return _(this,null,function*(){if(t.code!==N.FAILED_PRECONDITION||t.message!==jB)throw t;B("LocalStore","Unexpectedly lost primary lease")})}var k=class t{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&W(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new t((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(n,o).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{let n=e();return n instanceof t?n:t.resolve(n)}catch(n){return t.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):t.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):t.reject(n)}static resolve(e){return new t((n,r)=>{n(e)})}static reject(e){return new t((n,r)=>{r(e)})}static waitFor(e){return new t((n,r)=>{let i=0,o=0,s=!1;e.forEach(a=>{++i,a.next(()=>{++o,s&&o===i&&n()},u=>r(u))}),s=!0,o===i&&n()})}static or(e){let n=t.resolve(!1);for(let r of e)n=n.next(i=>i?t.resolve(i):r());return n}static forEach(e,n){let r=[];return e.forEach((i,o)=>{r.push(n.call(this,i,o))}),this.waitFor(r)}static mapArray(e,n){return new t((r,i)=>{let o=e.length,s=new Array(o),a=0;for(let u=0;u<o;u++){let l=u;n(e[l]).next(h=>{s[l]=h,++a,a===o&&r(s)},h=>i(h))}})}static doWhile(e,n){return new t((r,i)=>{let o=()=>{e()===!0?n().next(()=>{o()},i):r()};o()})}};function UB(t){let e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Ca(t){return t.name==="IndexedDbTransactionError"}var oI=(()=>{class t{constructor(n,r){this.previousValue=n,r&&(r.sequenceNumberHandler=i=>this._e(i),this.ae=i=>r.writeSequenceNumber(i))}_e(n){return this.previousValue=Math.max(n,this.previousValue),this.previousValue}next(){let n=++this.previousValue;return this.ae&&this.ae(n),n}}t.ue=-1;return t})(),sI=-1;function Yf(t){return t==null}function Ru(t){return t===0&&1/t==-1/0}function BB(t){return typeof t=="number"&&Number.isInteger(t)&&!Ru(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}var dR="";function $B(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=bA(e)),e=HB(t.get(n),e);return bA(e)}function HB(t,e){let n=e,r=t.length;for(let i=0;i<r;i++){let o=t.charAt(i);switch(o){case"\0":n+="";break;case dR:n+="";break;default:n+=o}}return n}function bA(t){return t+dR+""}var qB="remoteDocuments",hR="owner";var fR="mutationQueues";var pR="mutations";var gR="documentMutations",zB="remoteDocumentsV14";var mR="remoteDocumentGlobal";var yR="targets";var vR="targetDocuments";var _R="targetGlobal",ER="collectionParents";var IR="clientMetadata";var wR="bundles";var bR="namedQueries";var GB="indexConfiguration";var WB="indexState";var KB="indexEntries";var DR="documentOverlays";var QB="globals";var YB=[fR,pR,gR,qB,yR,hR,_R,vR,IR,mR,ER,wR,bR],Woe=[...YB,DR],ZB=[fR,pR,gR,zB,yR,hR,_R,vR,IR,mR,ER,wR,bR,DR],JB=ZB,XB=[...JB,GB,WB,KB];var Koe=[...XB,QB];function DA(t){let e=0;for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Mi(t,e){for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function CR(t){for(let e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}var qe=class t{constructor(e,n){this.comparator=e,this.root=n||tr.EMPTY}insert(e,n){return new t(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,tr.BLACK,null,null))}remove(e){return new t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,tr.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){let r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){let e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new aa(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new aa(this.root,e,this.comparator,!1)}getReverseIterator(){return new aa(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new aa(this.root,e,this.comparator,!0)}},aa=class{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=n?r(e.key,n):1,n&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},tr=class t{constructor(e,n,r,i,o){this.key=e,this.value=n,this.color=r??t.RED,this.left=i??t.EMPTY,this.right=o??t.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,o){return new t(e??this.key,n??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this,o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,n,r),null):o===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return t.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw W(43730,{key:this.key,value:this.value});if(this.right.isRed())throw W(14113,{key:this.key,value:this.value});let e=this.left.check();if(e!==this.right.check())throw W(27949);return e+(this.isRed()?0:1)}};tr.EMPTY=null,tr.RED=!0,tr.BLACK=!1;tr.EMPTY=new class{constructor(){this.size=0}get key(){throw W(57766)}get value(){throw W(16141)}get color(){throw W(16727)}get left(){throw W(29726)}get right(){throw W(36894)}copy(e,n,r,i,o){return this}insert(e,n,r){return new tr(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var pt=class t{constructor(e){this.comparator=e,this.data=new qe(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new gf(this.data.getIterator())}getIteratorFrom(e){return new gf(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){let i=n.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(n=>{e.push(n)}),e}toString(){let e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){let n=new t(this.comparator);return n.data=e,n}},gf=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var _n=class t{constructor(e){this.fields=e,e.sort(cn.comparator)}static empty(){return new t([])}unionWith(e){let n=new pt(cn.comparator);for(let r of this.fields)n=n.add(r);for(let r of e)n=n.add(r);return new t(n.toArray())}covers(e){for(let n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return da(this.fields,e.fields,(n,r)=>n.isEqual(r))}};var mf=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var Mt=class t{constructor(e){this.binaryString=e}static fromBase64String(e){let n=(function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new mf("Invalid base64 string: "+o):o}})(e);return new t(n)}static fromUint8Array(e){let n=(function(i){let o="";for(let s=0;s<i.length;++s)o+=String.fromCharCode(i[s]);return o})(e);return new t(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){let r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ce(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};Mt.EMPTY_BYTE_STRING=new Mt("");var e$=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Fr(t){if(be(!!t,39018),typeof t=="string"){let e=0,n=e$.exec(t);if(be(!!n,46558,{timestamp:t}),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:ke(t.seconds),nanos:ke(t.nanos)}}function ke(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Lr(t){return typeof t=="string"?Mt.fromBase64String(t):Mt.fromUint8Array(t)}var TR="server_timestamp",SR="__type__",AR="__previous_value__",RR="__local_write_time__";function aI(t){var e,n;return((n=(((e=t?.mapValue)===null||e===void 0?void 0:e.fields)||{})[SR])===null||n===void 0?void 0:n.stringValue)===TR}function Zf(t){let e=t.mapValue.fields[AR];return aI(e)?Zf(e):e}function Nu(t){let e=Fr(t.mapValue.fields[RR].timestampValue);return new nt(e.seconds,e.nanos)}var A_=class{constructor(e,n,r,i,o,s,a,u,l,h){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=s,this.autoDetectLongPolling=a,this.longPollingOptions=u,this.useFetchStreams=l,this.isUsingEmulator=h}},yf="(default)",vf=class t{constructor(e,n){this.projectId=e,this.database=n||yf}static empty(){return new t("","")}get isDefaultDatabase(){return this.database===yf}isEqual(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database}};var cI="__type__",NR="__max__",sf={mapValue:{fields:{__type__:{stringValue:NR}}}},uI="__vector__",ha="value";function Ti(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?aI(t)?4:PR(t)?9007199254740991:MR(t)?10:11:W(28295,{value:t})}function or(t,e){if(t===e)return!0;let n=Ti(t);if(n!==Ti(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Nu(t).isEqual(Nu(e));case 3:return(function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;let s=Fr(i.timestampValue),a=Fr(o.timestampValue);return s.seconds===a.seconds&&s.nanos===a.nanos})(t,e);case 5:return t.stringValue===e.stringValue;case 6:return(function(i,o){return Lr(i.bytesValue).isEqual(Lr(o.bytesValue))})(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return(function(i,o){return ke(i.geoPointValue.latitude)===ke(o.geoPointValue.latitude)&&ke(i.geoPointValue.longitude)===ke(o.geoPointValue.longitude)})(t,e);case 2:return(function(i,o){if("integerValue"in i&&"integerValue"in o)return ke(i.integerValue)===ke(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){let s=ke(i.doubleValue),a=ke(o.doubleValue);return s===a?Ru(s)===Ru(a):isNaN(s)&&isNaN(a)}return!1})(t,e);case 9:return da(t.arrayValue.values||[],e.arrayValue.values||[],or);case 10:case 11:return(function(i,o){let s=i.mapValue.fields||{},a=o.mapValue.fields||{};if(DA(s)!==DA(a))return!1;for(let u in s)if(s.hasOwnProperty(u)&&(a[u]===void 0||!or(s[u],a[u])))return!1;return!0})(t,e);default:return W(52216,{left:t})}}function Mu(t,e){return(t.values||[]).find(n=>or(n,e))!==void 0}function fa(t,e){if(t===e)return 0;let n=Ti(t),r=Ti(e);if(n!==r)return ce(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return ce(t.booleanValue,e.booleanValue);case 2:return(function(o,s){let a=ke(o.integerValue||o.doubleValue),u=ke(s.integerValue||s.doubleValue);return a<u?-1:a>u?1:a===u?0:isNaN(a)?isNaN(u)?0:-1:1})(t,e);case 3:return CA(t.timestampValue,e.timestampValue);case 4:return CA(Nu(t),Nu(e));case 5:return C_(t.stringValue,e.stringValue);case 6:return(function(o,s){let a=Lr(o),u=Lr(s);return a.compareTo(u)})(t.bytesValue,e.bytesValue);case 7:return(function(o,s){let a=o.split("/"),u=s.split("/");for(let l=0;l<a.length&&l<u.length;l++){let h=ce(a[l],u[l]);if(h!==0)return h}return ce(a.length,u.length)})(t.referenceValue,e.referenceValue);case 8:return(function(o,s){let a=ce(ke(o.latitude),ke(s.latitude));return a!==0?a:ce(ke(o.longitude),ke(s.longitude))})(t.geoPointValue,e.geoPointValue);case 9:return TA(t.arrayValue,e.arrayValue);case 10:return(function(o,s){var a,u,l,h;let p=o.fields||{},m=s.fields||{},y=(a=p[ha])===null||a===void 0?void 0:a.arrayValue,S=(u=m[ha])===null||u===void 0?void 0:u.arrayValue,P=ce(((l=y?.values)===null||l===void 0?void 0:l.length)||0,((h=S?.values)===null||h===void 0?void 0:h.length)||0);return P!==0?P:TA(y,S)})(t.mapValue,e.mapValue);case 11:return(function(o,s){if(o===sf.mapValue&&s===sf.mapValue)return 0;if(o===sf.mapValue)return 1;if(s===sf.mapValue)return-1;let a=o.fields||{},u=Object.keys(a),l=s.fields||{},h=Object.keys(l);u.sort(),h.sort();for(let p=0;p<u.length&&p<h.length;++p){let m=C_(u[p],h[p]);if(m!==0)return m;let y=fa(a[u[p]],l[h[p]]);if(y!==0)return y}return ce(u.length,h.length)})(t.mapValue,e.mapValue);default:throw W(23264,{le:n})}}function CA(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return ce(t,e);let n=Fr(t),r=Fr(e),i=ce(n.seconds,r.seconds);return i!==0?i:ce(n.nanos,r.nanos)}function TA(t,e){let n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){let o=fa(n[i],r[i]);if(o)return o}return ce(n.length,r.length)}function pa(t){return R_(t)}function R_(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?(function(n){let r=Fr(n);return`time(${r.seconds},${r.nanos})`})(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?(function(n){return Lr(n).toBase64()})(t.bytesValue):"referenceValue"in t?(function(n){return G.fromName(n).toString()})(t.referenceValue):"geoPointValue"in t?(function(n){return`geo(${n.latitude},${n.longitude})`})(t.geoPointValue):"arrayValue"in t?(function(n){let r="[",i=!0;for(let o of n.values||[])i?i=!1:r+=",",r+=R_(o);return r+"]"})(t.arrayValue):"mapValue"in t?(function(n){let r=Object.keys(n.fields||{}).sort(),i="{",o=!0;for(let s of r)o?o=!1:i+=",",i+=`${s}:${R_(n.fields[s])}`;return i+"}"})(t.mapValue):W(61005,{value:t})}function uf(t){switch(Ti(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:let e=Zf(t);return e?16+uf(e):16;case 5:return 2*t.stringValue.length;case 6:return Lr(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce((i,o)=>i+uf(o),0)})(t.arrayValue);case 10:case 11:return(function(r){let i=0;return Mi(r.fields,(o,s)=>{i+=o.length+uf(s)}),i})(t.mapValue);default:throw W(13486,{value:t})}}function SA(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function N_(t){return!!t&&"integerValue"in t}function lI(t){return!!t&&"arrayValue"in t}function AA(t){return!!t&&"nullValue"in t}function RA(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function lf(t){return!!t&&"mapValue"in t}function MR(t){var e,n;return((n=(((e=t?.mapValue)===null||e===void 0?void 0:e.fields)||{})[cI])===null||n===void 0?void 0:n.stringValue)===uI}function bu(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){let e={mapValue:{fields:{}}};return Mi(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=bu(r)),e}if(t.arrayValue){let e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=bu(t.arrayValue.values[n]);return e}return Object.assign({},t)}function PR(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===NR}var Yoe={mapValue:{fields:{[cI]:{stringValue:uI},[ha]:{arrayValue:{}}}}};var an=class t{constructor(e){this.value=e}static empty(){return new t({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!lf(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=bu(n)}setAll(e){let n=cn.emptyPath(),r={},i=[];e.forEach((s,a)=>{if(!n.isImmediateParentOf(a)){let u=this.getFieldsMap(n);this.applyChanges(u,r,i),r={},i=[],n=a.popLast()}s?r[a.lastSegment()]=bu(s):i.push(a.lastSegment())});let o=this.getFieldsMap(n);this.applyChanges(o,r,i)}delete(e){let n=this.field(e.popLast());lf(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return or(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];lf(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){Mi(n,(i,o)=>e[i]=o);for(let i of r)delete e[i]}clone(){return new t(bu(this.value))}};function xR(t){let e=[];return Mi(t.fields,(n,r)=>{let i=new cn([n]);if(lf(r)){let o=xR(r.mapValue).fields;if(o.length===0)e.push(i);else for(let s of o)e.push(i.child(s))}else e.push(i)}),new _n(e)}var On=class t{constructor(e,n,r,i,o,s,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=o,this.data=s,this.documentState=a}static newInvalidDocument(e){return new t(e,0,te.min(),te.min(),te.min(),an.empty(),0)}static newFoundDocument(e,n,r,i){return new t(e,1,n,te.min(),r,i,0)}static newNoDocument(e,n){return new t(e,2,n,te.min(),te.min(),an.empty(),0)}static newUnknownDocument(e,n){return new t(e,3,n,te.min(),te.min(),an.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(te.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=an.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=an.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=te.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new t(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var ga=class{constructor(e,n){this.position=e,this.inclusive=n}};function NA(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){let o=e[i],s=t.position[i];if(o.field.isKeyField()?r=G.comparator(G.fromName(s.referenceValue),n.key):r=fa(s,n.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function MA(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!or(t.position[n],e.position[n]))return!1;return!0}var Uo=class{constructor(e,n="asc"){this.field=e,this.dir=n}};function t$(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}var _f=class{},et=class t extends _f{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new P_(e,n,r):n==="array-contains"?new O_(e,r):n==="in"?new F_(e,r):n==="not-in"?new L_(e,r):n==="array-contains-any"?new V_(e,r):new t(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new x_(e,r):new k_(e,r)}matches(e){let n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(fa(n,this.value)):n!==null&&Ti(this.value)===Ti(n)&&this.matchesComparison(fa(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return W(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},Fn=class t extends _f{constructor(e,n){super(),this.filters=e,this.op=n,this.he=null}static create(e,n){return new t(e,n)}matches(e){return kR(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.he!==null||(this.he=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.he}getFilters(){return Object.assign([],this.filters)}};function kR(t){return t.op==="and"}function OR(t){return n$(t)&&kR(t)}function n$(t){for(let e of t.filters)if(e instanceof Fn)return!1;return!0}function M_(t){if(t instanceof et)return t.field.canonicalString()+t.op.toString()+pa(t.value);if(OR(t))return t.filters.map(e=>M_(e)).join(",");{let e=t.filters.map(n=>M_(n)).join(",");return`${t.op}(${e})`}}function FR(t,e){return t instanceof et?(function(r,i){return i instanceof et&&r.op===i.op&&r.field.isEqual(i.field)&&or(r.value,i.value)})(t,e):t instanceof Fn?(function(r,i){return i instanceof Fn&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((o,s,a)=>o&&FR(s,i.filters[a]),!0):!1})(t,e):void W(19439)}function LR(t){return t instanceof et?(function(n){return`${n.field.canonicalString()} ${n.op} ${pa(n.value)}`})(t):t instanceof Fn?(function(n){return n.op.toString()+" {"+n.getFilters().map(LR).join(" ,")+"}"})(t):"Filter"}var P_=class extends et{constructor(e,n,r){super(e,n,r),this.key=G.fromName(r.referenceValue)}matches(e){let n=G.comparator(e.key,this.key);return this.matchesComparison(n)}},x_=class extends et{constructor(e,n){super(e,"in",n),this.keys=VR("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}},k_=class extends et{constructor(e,n){super(e,"not-in",n),this.keys=VR("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}};function VR(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>G.fromName(r.referenceValue))}var O_=class extends et{constructor(e,n){super(e,"array-contains",n)}matches(e){let n=e.data.field(this.field);return lI(n)&&Mu(n.arrayValue,this.value)}},F_=class extends et{constructor(e,n){super(e,"in",n)}matches(e){let n=e.data.field(this.field);return n!==null&&Mu(this.value.arrayValue,n)}},L_=class extends et{constructor(e,n){super(e,"not-in",n)}matches(e){if(Mu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Mu(this.value.arrayValue,n)}},V_=class extends et{constructor(e,n){super(e,"array-contains-any",n)}matches(e){let n=e.data.field(this.field);return!(!lI(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Mu(this.value.arrayValue,r))}};var j_=class{constructor(e,n=null,r=[],i=[],o=null,s=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=s,this.endAt=a,this.Pe=null}};function PA(t,e=null,n=[],r=[],i=null,o=null,s=null){return new j_(t,e,n,r,i,o,s)}function dI(t){let e=J(t);if(e.Pe===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>M_(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>(function(o){return o.field.canonicalString()+o.dir})(r)).join(","),Yf(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>pa(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>pa(r)).join(",")),e.Pe=n}return e.Pe}function hI(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!t$(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!FR(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!MA(t.startAt,e.startAt)&&MA(t.endAt,e.endAt)}function U_(t){return G.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}var Si=class{constructor(e,n=null,r=[],i=[],o=null,s="F",a=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=s,this.startAt=a,this.endAt=u,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}};function r$(t,e,n,r,i,o,s,a){return new Si(t,e,n,r,i,o,s,a)}function fI(t){return new Si(t)}function xA(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function jR(t){return t.collectionGroup!==null}function Du(t){let e=J(t);if(e.Te===null){e.Te=[];let n=new Set;for(let o of e.explicitOrderBy)e.Te.push(o),n.add(o.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let a=new pt(cn.comparator);return s.filters.forEach(u=>{u.getFlattenedFilters().forEach(l=>{l.isInequality()&&(a=a.add(l.field))})}),a})(e).forEach(o=>{n.has(o.canonicalString())||o.isKeyField()||e.Te.push(new Uo(o,r))}),n.has(cn.keyField().canonicalString())||e.Te.push(new Uo(cn.keyField(),r))}return e.Te}function nr(t){let e=J(t);return e.Ie||(e.Ie=i$(e,Du(t))),e.Ie}function i$(t,e){if(t.limitType==="F")return PA(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{let o=i.dir==="desc"?"asc":"desc";return new Uo(i.field,o)});let n=t.endAt?new ga(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new ga(t.startAt.position,t.startAt.inclusive):null;return PA(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function B_(t,e){let n=t.filters.concat([e]);return new Si(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function $_(t,e,n){return new Si(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Jf(t,e){return hI(nr(t),nr(e))&&t.limitType===e.limitType}function UR(t){return`${dI(nr(t))}|lt:${t.limitType}`}function ia(t){return`Query(target=${(function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>LR(i)).join(", ")}]`),Yf(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>(function(s){return`${s.field.canonicalString()} (${s.dir})`})(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>pa(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>pa(i)).join(",")),`Target(${r})`})(nr(t))}; limitType=${t.limitType})`}function Xf(t,e){return e.isFoundDocument()&&(function(r,i){let o=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):G.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)})(t,e)&&(function(r,i){for(let o of Du(r))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0})(t,e)&&(function(r,i){for(let o of r.filters)if(!o.matches(i))return!1;return!0})(t,e)&&(function(r,i){return!(r.startAt&&!(function(s,a,u){let l=NA(s,a,u);return s.inclusive?l<=0:l<0})(r.startAt,Du(r),i)||r.endAt&&!(function(s,a,u){let l=NA(s,a,u);return s.inclusive?l>=0:l>0})(r.endAt,Du(r),i))})(t,e)}function o$(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function BR(t){return(e,n)=>{let r=!1;for(let i of Du(t)){let o=s$(i,e,n);if(o!==0)return o;r=r||i.field.isKeyField()}return 0}}function s$(t,e,n){let r=t.field.isKeyField()?G.comparator(e.key,n.key):(function(o,s,a){let u=s.data.field(o),l=a.data.field(o);return u!==null&&l!==null?fa(u,l):W(42886)})(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return W(19790,{direction:t.dir})}}var Vr=class{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){let n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(let[i,o]of r)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,n){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){let n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Mi(this.inner,(n,r)=>{for(let[i,o]of r)e(i,o)})}isEmpty(){return CR(this.inner)}size(){return this.innerSize}};var a$=new qe(G.comparator);function jr(){return a$}var $R=new qe(G.comparator);function wu(...t){let e=$R;for(let n of t)e=e.insert(n.key,n);return e}function HR(t){let e=$R;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function ko(){return Cu()}function qR(){return Cu()}function Cu(){return new Vr(t=>t.toString(),(t,e)=>t.isEqual(e))}var c$=new qe(G.comparator),u$=new pt(G.comparator);function fe(...t){let e=u$;for(let n of t)e=e.add(n);return e}var l$=new pt(ce);function d$(){return l$}function pI(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ru(e)?"-0":e}}function zR(t){return{integerValue:""+t}}function h$(t,e){return BB(e)?zR(e):pI(t,e)}var ma=class{constructor(){this._=void 0}};function f$(t,e,n){return t instanceof Bo?(function(i,o){let s={fields:{[SR]:{stringValue:TR},[RR]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&aI(o)&&(o=Zf(o)),o&&(s.fields[AR]=o),{mapValue:s}})(n,e):t instanceof $o?WR(t,e):t instanceof Ho?KR(t,e):(function(i,o){let s=GR(i,o),a=kA(s)+kA(i.Ee);return N_(s)&&N_(i.Ee)?zR(a):pI(i.serializer,a)})(t,e)}function p$(t,e,n){return t instanceof $o?WR(t,e):t instanceof Ho?KR(t,e):n}function GR(t,e){return t instanceof ya?(function(r){return N_(r)||(function(o){return!!o&&"doubleValue"in o})(r)})(e)?e:{integerValue:0}:null}var Bo=class extends ma{},$o=class extends ma{constructor(e){super(),this.elements=e}};function WR(t,e){let n=QR(e);for(let r of t.elements)n.some(i=>or(i,r))||n.push(r);return{arrayValue:{values:n}}}var Ho=class extends ma{constructor(e){super(),this.elements=e}};function KR(t,e){let n=QR(e);for(let r of t.elements)n=n.filter(i=>!or(i,r));return{arrayValue:{values:n}}}var ya=class extends ma{constructor(e,n){super(),this.serializer=e,this.Ee=n}};function kA(t){return ke(t.integerValue||t.doubleValue)}function QR(t){return lI(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}var H_=class{constructor(e,n){this.field=e,this.transform=n}};function g$(t,e){return t.field.isEqual(e.field)&&(function(r,i){return r instanceof $o&&i instanceof $o||r instanceof Ho&&i instanceof Ho?da(r.elements,i.elements,or):r instanceof ya&&i instanceof ya?or(r.Ee,i.Ee):r instanceof Bo&&i instanceof Bo})(t.transform,e.transform)}var q_=class{constructor(e,n){this.version=e,this.transformResults=n}},kr=class t{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new t}static exists(e){return new t(void 0,e)}static updateTime(e){return new t(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function df(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}var va=class{};function YR(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Ef(t.key,kr.none()):new qo(t.key,t.data,kr.none());{let n=t.data,r=an.empty(),i=new pt(cn.comparator);for(let o of e.fields)if(!i.has(o)){let s=n.field(o);s===null&&o.length>1&&(o=o.popLast(),s=n.field(o)),s===null?r.delete(o):r.set(o,s),i=i.add(o)}return new sr(t.key,r,new _n(i.toArray()),kr.none())}}function m$(t,e,n){t instanceof qo?(function(i,o,s){let a=i.value.clone(),u=FA(i.fieldTransforms,o,s.transformResults);a.setAll(u),o.convertToFoundDocument(s.version,a).setHasCommittedMutations()})(t,e,n):t instanceof sr?(function(i,o,s){if(!df(i.precondition,o))return void o.convertToUnknownDocument(s.version);let a=FA(i.fieldTransforms,o,s.transformResults),u=o.data;u.setAll(ZR(i)),u.setAll(a),o.convertToFoundDocument(s.version,u).setHasCommittedMutations()})(t,e,n):(function(i,o,s){o.convertToNoDocument(s.version).setHasCommittedMutations()})(0,e,n)}function Tu(t,e,n,r){return t instanceof qo?(function(o,s,a,u){if(!df(o.precondition,s))return a;let l=o.value.clone(),h=LA(o.fieldTransforms,u,s);return l.setAll(h),s.convertToFoundDocument(s.version,l).setHasLocalMutations(),null})(t,e,n,r):t instanceof sr?(function(o,s,a,u){if(!df(o.precondition,s))return a;let l=LA(o.fieldTransforms,u,s),h=s.data;return h.setAll(ZR(o)),h.setAll(l),s.convertToFoundDocument(s.version,h).setHasLocalMutations(),a===null?null:a.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(p=>p.field))})(t,e,n,r):(function(o,s,a){return df(o.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):a})(t,e,n)}function y$(t,e){let n=null;for(let r of t.fieldTransforms){let i=e.data.field(r.field),o=GR(r.transform,i||null);o!=null&&(n===null&&(n=an.empty()),n.set(r.field,o))}return n||null}function OA(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!(function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&da(r,i,(o,s)=>g$(o,s))})(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}var qo=class extends va{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},sr=class extends va{constructor(e,n,r,i,o=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}};function ZR(t){let e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){let r=t.data.field(n);e.set(n,r)}}),e}function FA(t,e,n){let r=new Map;be(t.length===n.length,32656,{Ae:n.length,Re:t.length});for(let i=0;i<n.length;i++){let o=t[i],s=o.transform,a=e.data.field(o.field);r.set(o.field,p$(s,a,n[i]))}return r}function LA(t,e,n){let r=new Map;for(let i of t){let o=i.transform,s=n.data.field(i.field);r.set(i.field,f$(o,s,e))}return r}var Ef=class extends va{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},z_=class extends va{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var G_=class{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){let r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){let o=this.mutations[i];o.key.isEqual(e.key)&&m$(o,e,r[i])}}applyToLocalView(e,n){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(n=Tu(r,e,n,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(n=Tu(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){let r=qR();return this.mutations.forEach(i=>{let o=e.get(i.key),s=o.overlayedDocument,a=this.applyToLocalView(s,o.mutatedFields);a=n.has(i.key)?null:a;let u=YR(s,a);u!==null&&r.set(i.key,u),s.isValidDocument()||s.convertToNoDocument(te.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),fe())}isEqual(e){return this.batchId===e.batchId&&da(this.mutations,e.mutations,(n,r)=>OA(n,r))&&da(this.baseMutations,e.baseMutations,(n,r)=>OA(n,r))}},W_=class t{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){be(e.mutations.length===r.length,58842,{Ve:e.mutations.length,me:r.length});let i=(function(){return c$})(),o=e.mutations;for(let s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new t(e,n,r,i)}};var K_=class{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var Q_=class{constructor(e,n){this.count=e,this.unchangedNames=n}};var Je,ye;function v$(t){switch(t){case N.OK:return W(64938);case N.CANCELLED:case N.UNKNOWN:case N.DEADLINE_EXCEEDED:case N.RESOURCE_EXHAUSTED:case N.INTERNAL:case N.UNAVAILABLE:case N.UNAUTHENTICATED:return!1;case N.INVALID_ARGUMENT:case N.NOT_FOUND:case N.ALREADY_EXISTS:case N.PERMISSION_DENIED:case N.FAILED_PRECONDITION:case N.ABORTED:case N.OUT_OF_RANGE:case N.UNIMPLEMENTED:case N.DATA_LOSS:return!0;default:return W(15467,{code:t})}}function JR(t){if(t===void 0)return Or("GRPC error has no .code"),N.UNKNOWN;switch(t){case Je.OK:return N.OK;case Je.CANCELLED:return N.CANCELLED;case Je.UNKNOWN:return N.UNKNOWN;case Je.DEADLINE_EXCEEDED:return N.DEADLINE_EXCEEDED;case Je.RESOURCE_EXHAUSTED:return N.RESOURCE_EXHAUSTED;case Je.INTERNAL:return N.INTERNAL;case Je.UNAVAILABLE:return N.UNAVAILABLE;case Je.UNAUTHENTICATED:return N.UNAUTHENTICATED;case Je.INVALID_ARGUMENT:return N.INVALID_ARGUMENT;case Je.NOT_FOUND:return N.NOT_FOUND;case Je.ALREADY_EXISTS:return N.ALREADY_EXISTS;case Je.PERMISSION_DENIED:return N.PERMISSION_DENIED;case Je.FAILED_PRECONDITION:return N.FAILED_PRECONDITION;case Je.ABORTED:return N.ABORTED;case Je.OUT_OF_RANGE:return N.OUT_OF_RANGE;case Je.UNIMPLEMENTED:return N.UNIMPLEMENTED;case Je.DATA_LOSS:return N.DATA_LOSS;default:return W(39323,{code:t})}}(ye=Je||(Je={}))[ye.OK=0]="OK",ye[ye.CANCELLED=1]="CANCELLED",ye[ye.UNKNOWN=2]="UNKNOWN",ye[ye.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ye[ye.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ye[ye.NOT_FOUND=5]="NOT_FOUND",ye[ye.ALREADY_EXISTS=6]="ALREADY_EXISTS",ye[ye.PERMISSION_DENIED=7]="PERMISSION_DENIED",ye[ye.UNAUTHENTICATED=16]="UNAUTHENTICATED",ye[ye.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ye[ye.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ye[ye.ABORTED=10]="ABORTED",ye[ye.OUT_OF_RANGE=11]="OUT_OF_RANGE",ye[ye.UNIMPLEMENTED=12]="UNIMPLEMENTED",ye[ye.INTERNAL=13]="INTERNAL",ye[ye.UNAVAILABLE=14]="UNAVAILABLE",ye[ye.DATA_LOSS=15]="DATA_LOSS";var VA=null;var _$=new Pr([4294967295,4294967295],0);function jA(t){let e=cR().encode(t),n=new u_;return n.update(e),new Uint8Array(n.digest())}function UA(t){let e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new Pr([n,r],0),new Pr([i,o],0)]}var Y_=class t{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Oo(`Invalid padding: ${n}`);if(r<0)throw new Oo(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Oo(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Oo(`Invalid padding when bitmap length is 0: ${n}`);this.fe=8*e.length-n,this.ge=Pr.fromNumber(this.fe)}pe(e,n,r){let i=e.add(n.multiply(Pr.fromNumber(r)));return i.compare(_$)===1&&(i=new Pr([i.getBits(0),i.getBits(1)],0)),i.modulo(this.ge).toNumber()}ye(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.fe===0)return!1;let n=jA(e),[r,i]=UA(n);for(let o=0;o<this.hashCount;o++){let s=this.pe(r,i,o);if(!this.ye(s))return!1}return!0}static create(e,n,r){let i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),s=new t(o,i,n);return r.forEach(a=>s.insert(a)),s}insert(e){if(this.fe===0)return;let n=jA(e),[r,i]=UA(n);for(let o=0;o<this.hashCount;o++){let s=this.pe(r,i,o);this.we(s)}}we(e){let n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}},Oo=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var If=class t{constructor(e,n,r,i,o){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,n,r){let i=new Map;return i.set(e,Pu.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new t(te.min(),i,new qe(ce),jr(),fe())}},Pu=class t{constructor(e,n,r,i,o){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new t(r,n,fe(),fe(),fe())}};var ca=class{constructor(e,n,r,i){this.Se=e,this.removedTargetIds=n,this.key=r,this.be=i}},wf=class{constructor(e,n){this.targetId=e,this.De=n}},bf=class{constructor(e,n,r=Mt.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}},Df=class{constructor(){this.ve=0,this.Ce=BA(),this.Fe=Mt.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return this.ve!==0}get Ne(){return this.xe}Be(e){e.approximateByteSize()>0&&(this.xe=!0,this.Fe=e)}Le(){let e=fe(),n=fe(),r=fe();return this.Ce.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:W(38017,{changeType:o})}}),new Pu(this.Fe,this.Me,e,n,r)}ke(){this.xe=!1,this.Ce=BA()}qe(e,n){this.xe=!0,this.Ce=this.Ce.insert(e,n)}Qe(e){this.xe=!0,this.Ce=this.Ce.remove(e)}$e(){this.ve+=1}Ue(){this.ve-=1,be(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}},Z_=class{constructor(e){this.We=e,this.Ge=new Map,this.ze=jr(),this.je=af(),this.Je=af(),this.He=new qe(ce)}Ye(e){for(let n of e.Se)e.be&&e.be.isFoundDocument()?this.Ze(n,e.be):this.Xe(n,e.key,e.be);for(let n of e.removedTargetIds)this.Xe(n,e.key,e.be)}et(e){this.forEachTarget(e,n=>{let r=this.tt(n);switch(e.state){case 0:this.nt(n)&&r.Be(e.resumeToken);break;case 1:r.Ue(),r.Oe||r.ke(),r.Be(e.resumeToken);break;case 2:r.Ue(),r.Oe||this.removeTarget(n);break;case 3:this.nt(n)&&(r.Ke(),r.Be(e.resumeToken));break;case 4:this.nt(n)&&(this.rt(n),r.Be(e.resumeToken));break;default:W(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Ge.forEach((r,i)=>{this.nt(i)&&n(i)})}it(e){let n=e.targetId,r=e.De.count,i=this.st(n);if(i){let o=i.target;if(U_(o))if(r===0){let s=new G(o.path);this.Xe(n,s,On.newNoDocument(s,te.min()))}else be(r===1,20013,{expectedCount:r});else{let s=this.ot(n);if(s!==r){let a=this._t(e),u=a?this.ut(a,e,s):1;if(u!==0){this.rt(n);let l=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.He=this.He.insert(n,l)}VA?.ct((function(h,p,m,y,S){var P,M,j,K,Q,Ae;let Ot={localCacheCount:h,existenceFilterCount:p.count,databaseId:m.database,projectId:m.projectId},De=p.unchangedNames;return De&&(Ot.bloomFilter={applied:S===0,hashCount:(P=De?.hashCount)!==null&&P!==void 0?P:0,bitmapLength:(K=(j=(M=De?.bits)===null||M===void 0?void 0:M.bitmap)===null||j===void 0?void 0:j.length)!==null&&K!==void 0?K:0,padding:(Ae=(Q=De?.bits)===null||Q===void 0?void 0:Q.padding)!==null&&Ae!==void 0?Ae:0,mightContain:b=>{var v;return(v=y?.mightContain(b))!==null&&v!==void 0&&v}}),Ot})(s,e.De,this.We.lt(),a,u))}}}}_t(e){let n=e.De.unchangedNames;if(!n||!n.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=n,s,a;try{s=Lr(r).toUint8Array()}catch(u){if(u instanceof mf)return Ci("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{a=new Y_(s,i,o)}catch(u){return Ci(u instanceof Oo?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return a.fe===0?null:a}ut(e,n,r){return n.De.count===r-this.ht(e,n.targetId)?0:2}ht(e,n){let r=this.We.getRemoteKeysForTarget(n),i=0;return r.forEach(o=>{let s=this.We.lt(),a=`projects/${s.projectId}/databases/${s.database}/documents/${o.path.canonicalString()}`;e.mightContain(a)||(this.Xe(n,o,null),i++)}),i}Pt(e){let n=new Map;this.Ge.forEach((o,s)=>{let a=this.st(s);if(a){if(o.current&&U_(a.target)){let u=new G(a.target.path);this.Tt(u).has(s)||this.It(s,u)||this.Xe(s,u,On.newNoDocument(u,e))}o.Ne&&(n.set(s,o.Le()),o.ke())}});let r=fe();this.Je.forEach((o,s)=>{let a=!0;s.forEachWhile(u=>{let l=this.st(u);return!l||l.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(o))}),this.ze.forEach((o,s)=>s.setReadTime(e));let i=new If(e,n,this.He,this.ze,r);return this.ze=jr(),this.je=af(),this.Je=af(),this.He=new qe(ce),i}Ze(e,n){if(!this.nt(e))return;let r=this.It(e,n.key)?2:0;this.tt(e).qe(n.key,r),this.ze=this.ze.insert(n.key,n),this.je=this.je.insert(n.key,this.Tt(n.key).add(e)),this.Je=this.Je.insert(n.key,this.dt(n.key).add(e))}Xe(e,n,r){if(!this.nt(e))return;let i=this.tt(e);this.It(e,n)?i.qe(n,1):i.Qe(n),this.Je=this.Je.insert(n,this.dt(n).delete(e)),this.Je=this.Je.insert(n,this.dt(n).add(e)),r&&(this.ze=this.ze.insert(n,r))}removeTarget(e){this.Ge.delete(e)}ot(e){let n=this.tt(e).Le();return this.We.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}$e(e){this.tt(e).$e()}tt(e){let n=this.Ge.get(e);return n||(n=new Df,this.Ge.set(e,n)),n}dt(e){let n=this.Je.get(e);return n||(n=new pt(ce),this.Je=this.Je.insert(e,n)),n}Tt(e){let n=this.je.get(e);return n||(n=new pt(ce),this.je=this.je.insert(e,n)),n}nt(e){let n=this.st(e)!==null;return n||B("WatchChangeAggregator","Detected inactive target",e),n}st(e){let n=this.Ge.get(e);return n&&n.Oe?null:this.We.Et(e)}rt(e){this.Ge.set(e,new Df),this.We.getRemoteKeysForTarget(e).forEach(n=>{this.Xe(e,n,null)})}It(e,n){return this.We.getRemoteKeysForTarget(e).has(n)}};function af(){return new qe(G.comparator)}function BA(){return new qe(G.comparator)}var E$={asc:"ASCENDING",desc:"DESCENDING"},I$={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},w$={and:"AND",or:"OR"},J_=class{constructor(e,n){this.databaseId=e,this.useProto3Json=n}};function X_(t,e){return t.useProto3Json||Yf(e)?e:{value:e}}function Cf(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function XR(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function b$(t,e){return Cf(t,e.toTimestamp())}function rr(t){return be(!!t,49232),te.fromTimestamp((function(n){let r=Fr(n);return new nt(r.seconds,r.nanos)})(t))}function gI(t,e){return eE(t,e).canonicalString()}function eE(t,e){let n=(function(i){return new Oe(["projects",i.projectId,"databases",i.database])})(t).child("documents");return e===void 0?n:n.child(e)}function eN(t){let e=Oe.fromString(t);return be(oN(e),10190,{key:e.toString()}),e}function tE(t,e){return gI(t.databaseId,e.path)}function g_(t,e){let n=eN(e);if(n.get(1)!==t.databaseId.projectId)throw new V(N.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new V(N.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new G(nN(n))}function tN(t,e){return gI(t.databaseId,e)}function D$(t){let e=eN(t);return e.length===4?Oe.emptyPath():nN(e)}function nE(t){return new Oe(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function nN(t){return be(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function $A(t,e,n){return{name:tE(t,e),fields:n.value.mapValue.fields}}function C$(t,e){let n;if("targetChange"in e){e.targetChange;let r=(function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:W(39313,{state:l})})(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=(function(l,h){return l.useProto3Json?(be(h===void 0||typeof h=="string",58123),Mt.fromBase64String(h||"")):(be(h===void 0||h instanceof Buffer||h instanceof Uint8Array,16193),Mt.fromUint8Array(h||new Uint8Array))})(t,e.targetChange.resumeToken),s=e.targetChange.cause,a=s&&(function(l){let h=l.code===void 0?N.UNKNOWN:JR(l.code);return new V(h,l.message||"")})(s);n=new bf(r,i,o,a||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=g_(t,r.document.name),o=rr(r.document.updateTime),s=r.document.createTime?rr(r.document.createTime):te.min(),a=new an({mapValue:{fields:r.document.fields}}),u=On.newFoundDocument(i,o,s,a),l=r.targetIds||[],h=r.removedTargetIds||[];n=new ca(l,h,u.key,u)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=g_(t,r.document),o=r.readTime?rr(r.readTime):te.min(),s=On.newNoDocument(i,o),a=r.removedTargetIds||[];n=new ca([],a,s.key,s)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=g_(t,r.document),o=r.removedTargetIds||[];n=new ca([],o,i,null)}else{if(!("filter"in e))return W(11601,{At:e});{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:o}=r,s=new Q_(i,o),a=r.targetId;n=new wf(a,s)}}return n}function T$(t,e){let n;if(e instanceof qo)n={update:$A(t,e.key,e.value)};else if(e instanceof Ef)n={delete:tE(t,e.key)};else if(e instanceof sr)n={update:$A(t,e.key,e.data),updateMask:O$(e.fieldMask)};else{if(!(e instanceof z_))return W(16599,{Rt:e.type});n={verify:tE(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>(function(o,s){let a=s.transform;if(a instanceof Bo)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof $o)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Ho)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof ya)return{fieldPath:s.field.canonicalString(),increment:a.Ee};throw W(20930,{transform:s.transform})})(0,r))),e.precondition.isNone||(n.currentDocument=(function(i,o){return o.updateTime!==void 0?{updateTime:b$(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:W(27497)})(t,e.precondition)),n}function S$(t,e){return t&&t.length>0?(be(e!==void 0,14353),t.map(n=>(function(i,o){let s=i.updateTime?rr(i.updateTime):rr(o);return s.isEqual(te.min())&&(s=rr(o)),new q_(s,i.transformResults||[])})(n,e))):[]}function A$(t,e){return{documents:[tN(t,e.path)]}}function R$(t,e){let n={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=tN(t,i);let o=(function(l){if(l.length!==0)return iN(Fn.create(l,"and"))})(e.filters);o&&(n.structuredQuery.where=o);let s=(function(l){if(l.length!==0)return l.map(h=>(function(m){return{field:oa(m.field),direction:P$(m.dir)}})(h))})(e.orderBy);s&&(n.structuredQuery.orderBy=s);let a=X_(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=(function(l){return{before:l.inclusive,values:l.position}})(e.startAt)),e.endAt&&(n.structuredQuery.endAt=(function(l){return{before:!l.inclusive,values:l.position}})(e.endAt)),{Vt:n,parent:i}}function N$(t){let e=D$(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){be(r===1,65062);let h=n.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let o=[];n.where&&(o=(function(p){let m=rN(p);return m instanceof Fn&&OR(m)?m.getFilters():[m]})(n.where));let s=[];n.orderBy&&(s=(function(p){return p.map(m=>(function(S){return new Uo(sa(S.field),(function(M){switch(M){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(S.direction))})(m))})(n.orderBy));let a=null;n.limit&&(a=(function(p){let m;return m=typeof p=="object"?p.value:p,Yf(m)?null:m})(n.limit));let u=null;n.startAt&&(u=(function(p){let m=!!p.before,y=p.values||[];return new ga(y,m)})(n.startAt));let l=null;return n.endAt&&(l=(function(p){let m=!p.before,y=p.values||[];return new ga(y,m)})(n.endAt)),r$(e,i,s,o,a,"F",u,l)}function M$(t,e){let n=(function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return W(28987,{purpose:i})}})(e.purpose);return n==null?null:{"goog-listen-tags":n}}function rN(t){return t.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":let r=sa(n.unaryFilter.field);return et.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=sa(n.unaryFilter.field);return et.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let o=sa(n.unaryFilter.field);return et.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let s=sa(n.unaryFilter.field);return et.create(s,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return W(61313);default:return W(60726)}})(t):t.fieldFilter!==void 0?(function(n){return et.create(sa(n.fieldFilter.field),(function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return W(58110);default:return W(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(t):t.compositeFilter!==void 0?(function(n){return Fn.create(n.compositeFilter.filters.map(r=>rN(r)),(function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return W(1026)}})(n.compositeFilter.op))})(t):W(30097,{filter:t})}function P$(t){return E$[t]}function x$(t){return I$[t]}function k$(t){return w$[t]}function oa(t){return{fieldPath:t.canonicalString()}}function sa(t){return cn.fromServerFormat(t.fieldPath)}function iN(t){return t instanceof et?(function(n){if(n.op==="=="){if(RA(n.value))return{unaryFilter:{field:oa(n.field),op:"IS_NAN"}};if(AA(n.value))return{unaryFilter:{field:oa(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(RA(n.value))return{unaryFilter:{field:oa(n.field),op:"IS_NOT_NAN"}};if(AA(n.value))return{unaryFilter:{field:oa(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:oa(n.field),op:x$(n.op),value:n.value}}})(t):t instanceof Fn?(function(n){let r=n.getFilters().map(i=>iN(i));return r.length===1?r[0]:{compositeFilter:{op:k$(n.op),filters:r}}})(t):W(54877,{filter:t})}function O$(t){let e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function oN(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}var xu=class t{constructor(e,n,r,i,o=te.min(),s=te.min(),a=Mt.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=a,this.expectedCount=u}withSequenceNumber(e){return new t(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var rE=class{constructor(e){this.gt=e}};function F$(t){let e=N$({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?$_(e,e.limit,"L"):e}var Tf=class{constructor(){}bt(e,n){this.Dt(e,n),n.vt()}Dt(e,n){if("nullValue"in e)this.Ct(n,5);else if("booleanValue"in e)this.Ct(n,10),n.Ft(e.booleanValue?1:0);else if("integerValue"in e)this.Ct(n,15),n.Ft(ke(e.integerValue));else if("doubleValue"in e){let r=ke(e.doubleValue);isNaN(r)?this.Ct(n,13):(this.Ct(n,15),Ru(r)?n.Ft(0):n.Ft(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Ct(n,20),typeof r=="string"&&(r=Fr(r)),n.Mt(`${r.seconds||""}`),n.Ft(r.nanos||0)}else if("stringValue"in e)this.xt(e.stringValue,n),this.Ot(n);else if("bytesValue"in e)this.Ct(n,30),n.Nt(Lr(e.bytesValue)),this.Ot(n);else if("referenceValue"in e)this.Bt(e.referenceValue,n);else if("geoPointValue"in e){let r=e.geoPointValue;this.Ct(n,45),n.Ft(r.latitude||0),n.Ft(r.longitude||0)}else"mapValue"in e?PR(e)?this.Ct(n,Number.MAX_SAFE_INTEGER):MR(e)?this.Lt(e.mapValue,n):(this.kt(e.mapValue,n),this.Ot(n)):"arrayValue"in e?(this.qt(e.arrayValue,n),this.Ot(n)):W(19022,{Qt:e})}xt(e,n){this.Ct(n,25),this.$t(e,n)}$t(e,n){n.Mt(e)}kt(e,n){let r=e.fields||{};this.Ct(n,55);for(let i of Object.keys(r))this.xt(i,n),this.Dt(r[i],n)}Lt(e,n){var r,i;let o=e.fields||{};this.Ct(n,53);let s=ha,a=((i=(r=o[s].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.length)||0;this.Ct(n,15),n.Ft(ke(a)),this.xt(s,n),this.Dt(o[s],n)}qt(e,n){let r=e.values||[];this.Ct(n,50);for(let i of r)this.Dt(i,n)}Bt(e,n){this.Ct(n,37),G.fromName(e).path.forEach(r=>{this.Ct(n,60),this.$t(r,n)})}Ct(e,n){e.Ft(n)}Ot(e){e.Ft(2)}};Tf.Ut=new Tf;var iE=class{constructor(){this.Dn=new oE}addToCollectionParentIndex(e,n){return this.Dn.add(n),k.resolve()}getCollectionParents(e,n){return k.resolve(this.Dn.getEntries(n))}addFieldIndex(e,n){return k.resolve()}deleteFieldIndex(e,n){return k.resolve()}deleteAllFieldIndexes(e){return k.resolve()}createTargetIndexes(e,n){return k.resolve()}getDocumentsMatchingTarget(e,n){return k.resolve(null)}getIndexType(e,n){return k.resolve(0)}getFieldIndexes(e,n){return k.resolve([])}getNextCollectionGroupToUpdate(e){return k.resolve(null)}getMinOffset(e,n){return k.resolve(jo.min())}getMinOffsetFromCollectionGroup(e,n){return k.resolve(jo.min())}updateCollectionGroup(e,n,r){return k.resolve()}updateIndexEntries(e,n){return k.resolve()}},oE=class{constructor(){this.index={}}add(e){let n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new pt(Oe.comparator),o=!i.has(r);return this.index[n]=i.add(r),o}has(e){let n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new pt(Oe.comparator)).toArray()}};var Zoe=new Uint8Array(0);var HA={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},sN=41943040,vn=class t{static withCacheSize(e){return new t(e,t.DEFAULT_COLLECTION_PERCENTILE,t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}};vn.DEFAULT_COLLECTION_PERCENTILE=10,vn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,vn.DEFAULT=new vn(sN,vn.DEFAULT_COLLECTION_PERCENTILE,vn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),vn.DISABLED=new vn(-1,0,0);var ku=class t{constructor(e){this._r=e}next(){return this._r+=2,this._r}static ar(){return new t(0)}static ur(){return new t(-1)}};var qA="LruGarbageCollector",L$=1048576;function zA([t,e],[n,r]){let i=ce(t,n);return i===0?ce(e,r):i}var sE=class{constructor(e){this.Tr=e,this.buffer=new pt(zA),this.Ir=0}dr(){return++this.Ir}Er(e){let n=[e,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(n);else{let r=this.buffer.last();zA(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}},aE=class{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Ar=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return this.Ar!==null}Rr(e){B(qA,`Garbage collection scheduled in ${e}ms`),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,()=>_(this,null,function*(){this.Ar=null;try{yield this.localStore.collectGarbage(this.garbageCollector)}catch(n){Ca(n)?B(qA,"Ignoring IndexedDB error during garbage collection: ",n):yield Da(n)}yield this.Rr(3e5)}))}},cE=class{constructor(e,n){this.Vr=e,this.params=n}calculateTargetCount(e,n){return this.Vr.mr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return k.resolve(oI.ue);let r=new sE(n);return this.Vr.forEachTarget(e,i=>r.Er(i.sequenceNumber)).next(()=>this.Vr.gr(e,i=>r.Er(i))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.Vr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.Vr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(B("LruGarbageCollector","Garbage collection skipped; disabled"),k.resolve(HA)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(B("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),HA):this.pr(e,n))}getCacheSize(e){return this.Vr.getCacheSize(e)}pr(e,n){let r,i,o,s,a,u,l,h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(p=>(p>this.params.maximumSequenceNumbersToCollect?(B("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${p}`),i=this.params.maximumSequenceNumbersToCollect):i=p,s=Date.now(),this.nthSequenceNumber(e,i))).next(p=>(r=p,a=Date.now(),this.removeTargets(e,r,n))).next(p=>(o=p,u=Date.now(),this.removeOrphanedDocuments(e,r))).next(p=>(l=Date.now(),ra()<=le.DEBUG&&B("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${s-h}ms
	Determined least recently used ${i} in `+(a-s)+`ms
	Removed ${o} targets in `+(u-a)+`ms
	Removed ${p} documents in `+(l-u)+`ms
Total Duration: ${l-h}ms`),k.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:p})))}};function V$(t,e){return new cE(t,e)}var uE=class{constructor(){this.changes=new Vr(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,On.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();let r=this.changes.get(n);return r!==void 0?k.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var lE=class{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}};var dE=class{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&Tu(r.mutation,i,_n.empty(),nt.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,fe()).next(()=>r))}getLocalViewOfDocuments(e,n,r=fe()){let i=ko();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(o=>{let s=wu();return o.forEach((a,u)=>{s=s.insert(a,u.overlayedDocument)}),s}))}getOverlayedDocuments(e,n){let r=ko();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,fe()))}populateOverlays(e,n,r){let i=[];return r.forEach(o=>{n.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((s,a)=>{n.set(s,a)})})}computeViews(e,n,r,i){let o=jr(),s=Cu(),a=(function(){return Cu()})();return n.forEach((u,l)=>{let h=r.get(l.key);i.has(l.key)&&(h===void 0||h.mutation instanceof sr)?o=o.insert(l.key,l):h!==void 0?(s.set(l.key,h.mutation.getFieldMask()),Tu(h.mutation,l,h.mutation.getFieldMask(),nt.now())):s.set(l.key,_n.empty())}),this.recalculateAndSaveOverlays(e,o).next(u=>(u.forEach((l,h)=>s.set(l,h)),n.forEach((l,h)=>{var p;return a.set(l,new lE(h,(p=s.get(l))!==null&&p!==void 0?p:null))}),a))}recalculateAndSaveOverlays(e,n){let r=Cu(),i=new qe((s,a)=>s-a),o=fe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(s=>{for(let a of s)a.keys().forEach(u=>{let l=n.get(u);if(l===null)return;let h=r.get(u)||_n.empty();h=a.applyToLocalView(l,h),r.set(u,h);let p=(i.get(a.batchId)||fe()).add(u);i=i.insert(a.batchId,p)})}).next(()=>{let s=[],a=i.getReverseIterator();for(;a.hasNext();){let u=a.getNext(),l=u.key,h=u.value,p=qR();h.forEach(m=>{if(!o.has(m)){let y=YR(n.get(m),r.get(m));y!==null&&p.set(m,y),o=o.add(m)}}),s.push(this.documentOverlayCache.saveOverlays(e,l,p))}return k.waitFor(s)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return(function(s){return G.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0})(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):jR(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(o=>{let s=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-o.size):k.resolve(ko()),a=Au,u=o;return s.next(l=>k.forEach(l,(h,p)=>(a<p.largestBatchId&&(a=p.largestBatchId),o.get(h)?k.resolve():this.remoteDocumentCache.getEntry(e,h).next(m=>{u=u.insert(h,m)}))).next(()=>this.populateOverlays(e,l,o)).next(()=>this.computeViews(e,u,l,fe())).next(h=>({batchId:a,changes:HR(h)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new G(n)).next(r=>{let i=wu();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){let o=n.collectionGroup,s=wu();return this.indexManager.getCollectionParents(e,o).next(a=>k.forEach(a,u=>{let l=(function(p,m){return new Si(m,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)})(n,u.child(o));return this.getDocumentsMatchingCollectionQuery(e,l,r,i).next(h=>{h.forEach((p,m)=>{s=s.insert(p,m)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,n,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(s=>(o=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,o,i))).next(s=>{o.forEach((u,l)=>{let h=l.getKey();s.get(h)===null&&(s=s.insert(h,On.newInvalidDocument(h)))});let a=wu();return s.forEach((u,l)=>{let h=o.get(u);h!==void 0&&Tu(h.mutation,l,_n.empty(),nt.now()),Xf(n,l)&&(a=a.insert(u,l))}),a})}};var hE=class{constructor(e){this.serializer=e,this.Br=new Map,this.Lr=new Map}getBundleMetadata(e,n){return k.resolve(this.Br.get(n))}saveBundleMetadata(e,n){return this.Br.set(n.id,(function(i){return{id:i.id,version:i.version,createTime:rr(i.createTime)}})(n)),k.resolve()}getNamedQuery(e,n){return k.resolve(this.Lr.get(n))}saveNamedQuery(e,n){return this.Lr.set(n.name,(function(i){return{name:i.name,query:F$(i.bundledQuery),readTime:rr(i.readTime)}})(n)),k.resolve()}};var fE=class{constructor(){this.overlays=new qe(G.comparator),this.kr=new Map}getOverlay(e,n){return k.resolve(this.overlays.get(n))}getOverlays(e,n){let r=ko();return k.forEach(n,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,o)=>{this.wt(e,n,o)}),k.resolve()}removeOverlaysForBatchId(e,n,r){let i=this.kr.get(r);return i!==void 0&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.kr.delete(r)),k.resolve()}getOverlaysForCollection(e,n,r){let i=ko(),o=n.length+1,s=new G(n.child("")),a=this.overlays.getIteratorFrom(s);for(;a.hasNext();){let u=a.getNext().value,l=u.getKey();if(!n.isPrefixOf(l.path))break;l.path.length===o&&u.largestBatchId>r&&i.set(u.getKey(),u)}return k.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let o=new qe((l,h)=>l-h),s=this.overlays.getIterator();for(;s.hasNext();){let l=s.getNext().value;if(l.getKey().getCollectionGroup()===n&&l.largestBatchId>r){let h=o.get(l.largestBatchId);h===null&&(h=ko(),o=o.insert(l.largestBatchId,h)),h.set(l.getKey(),l)}}let a=ko(),u=o.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((l,h)=>a.set(l,h)),!(a.size()>=i)););return k.resolve(a)}wt(e,n,r){let i=this.overlays.get(r.key);if(i!==null){let s=this.kr.get(i.largestBatchId).delete(r.key);this.kr.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(r.key,new K_(n,r));let o=this.kr.get(n);o===void 0&&(o=fe(),this.kr.set(n,o)),this.kr.set(n,o.add(r.key))}};var pE=class{constructor(){this.sessionToken=Mt.EMPTY_BYTE_STRING}getSessionToken(e){return k.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,k.resolve()}};var Ou=class{constructor(){this.qr=new pt(Xe.Qr),this.$r=new pt(Xe.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(e,n){let r=new Xe(e,n);this.qr=this.qr.add(r),this.$r=this.$r.add(r)}Kr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Wr(new Xe(e,n))}Gr(e,n){e.forEach(r=>this.removeReference(r,n))}zr(e){let n=new G(new Oe([])),r=new Xe(n,e),i=new Xe(n,e+1),o=[];return this.$r.forEachInRange([r,i],s=>{this.Wr(s),o.push(s.key)}),o}jr(){this.qr.forEach(e=>this.Wr(e))}Wr(e){this.qr=this.qr.delete(e),this.$r=this.$r.delete(e)}Jr(e){let n=new G(new Oe([])),r=new Xe(n,e),i=new Xe(n,e+1),o=fe();return this.$r.forEachInRange([r,i],s=>{o=o.add(s.key)}),o}containsKey(e){let n=new Xe(e,0),r=this.qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}},Xe=class{constructor(e,n){this.key=e,this.Hr=n}static Qr(e,n){return G.comparator(e.key,n.key)||ce(e.Hr,n.Hr)}static Ur(e,n){return ce(e.Hr,n.Hr)||G.comparator(e.key,n.key)}};var gE=class{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.er=1,this.Yr=new pt(Xe.Qr)}checkEmpty(e){return k.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){let o=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let s=new G_(o,n,r,i);this.mutationQueue.push(s);for(let a of i)this.Yr=this.Yr.add(new Xe(a.key,o)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return k.resolve(s)}lookupMutationBatch(e,n){return k.resolve(this.Zr(n))}getNextMutationBatchAfterBatchId(e,n){let r=n+1,i=this.Xr(r),o=i<0?0:i;return k.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return k.resolve(this.mutationQueue.length===0?sI:this.er-1)}getAllMutationBatches(e){return k.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){let r=new Xe(n,0),i=new Xe(n,Number.POSITIVE_INFINITY),o=[];return this.Yr.forEachInRange([r,i],s=>{let a=this.Zr(s.Hr);o.push(a)}),k.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new pt(ce);return n.forEach(i=>{let o=new Xe(i,0),s=new Xe(i,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([o,s],a=>{r=r.add(a.Hr)})}),k.resolve(this.ei(r))}getAllMutationBatchesAffectingQuery(e,n){let r=n.path,i=r.length+1,o=r;G.isDocumentKey(o)||(o=o.child(""));let s=new Xe(new G(o),0),a=new pt(ce);return this.Yr.forEachWhile(u=>{let l=u.key.path;return!!r.isPrefixOf(l)&&(l.length===i&&(a=a.add(u.Hr)),!0)},s),k.resolve(this.ei(a))}ei(e){let n=[];return e.forEach(r=>{let i=this.Zr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){be(this.ti(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Yr;return k.forEach(n.mutations,i=>{let o=new Xe(i.key,n.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Yr=r})}rr(e){}containsKey(e,n){let r=new Xe(n,0),i=this.Yr.firstAfterOrEqual(r);return k.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,k.resolve()}ti(e,n){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){let n=this.Xr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}};var mE=class{constructor(e){this.ni=e,this.docs=(function(){return new qe(G.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){let r=n.key,i=this.docs.get(r),o=i?i.size:0,s=this.ni(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:s}),this.size+=s-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){let r=this.docs.get(n);return k.resolve(r?r.document.mutableCopy():On.newInvalidDocument(n))}getEntries(e,n){let r=jr();return n.forEach(i=>{let o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():On.newInvalidDocument(i))}),k.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let o=jr(),s=n.path,a=new G(s.child("__id-9223372036854775808__")),u=this.docs.getIteratorFrom(a);for(;u.hasNext();){let{key:l,value:{document:h}}=u.getNext();if(!s.isPrefixOf(l.path))break;l.path.length>s.length+1||VB(LB(h),r)<=0||(i.has(h.key)||Xf(n,h))&&(o=o.insert(h.key,h.mutableCopy()))}return k.resolve(o)}getAllFromCollectionGroup(e,n,r,i){W(9500)}ri(e,n){return k.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new yE(this)}getSize(e){return k.resolve(this.size)}},yE=class extends uE{constructor(e){super(),this.Or=e}applyChanges(e){let n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.Or.addEntry(e,i)):this.Or.removeEntry(r)}),k.waitFor(n)}getFromCache(e,n){return this.Or.getEntry(e,n)}getAllFromCache(e,n){return this.Or.getEntries(e,n)}};var vE=class{constructor(e){this.persistence=e,this.ii=new Vr(n=>dI(n),hI),this.lastRemoteSnapshotVersion=te.min(),this.highestTargetId=0,this.si=0,this.oi=new Ou,this.targetCount=0,this._i=ku.ar()}forEachTarget(e,n){return this.ii.forEach((r,i)=>n(i)),k.resolve()}getLastRemoteSnapshotVersion(e){return k.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return k.resolve(this.si)}allocateTargetId(e){return this.highestTargetId=this._i.next(),k.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.si&&(this.si=n),k.resolve()}hr(e){this.ii.set(e.target,e);let n=e.targetId;n>this.highestTargetId&&(this._i=new ku(n),this.highestTargetId=n),e.sequenceNumber>this.si&&(this.si=e.sequenceNumber)}addTargetData(e,n){return this.hr(n),this.targetCount+=1,k.resolve()}updateTargetData(e,n){return this.hr(n),k.resolve()}removeTargetData(e,n){return this.ii.delete(n.target),this.oi.zr(n.targetId),this.targetCount-=1,k.resolve()}removeTargets(e,n,r){let i=0,o=[];return this.ii.forEach((s,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.ii.delete(s),o.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),k.waitFor(o).next(()=>i)}getTargetCount(e){return k.resolve(this.targetCount)}getTargetData(e,n){let r=this.ii.get(n)||null;return k.resolve(r)}addMatchingKeys(e,n,r){return this.oi.Kr(n,r),k.resolve()}removeMatchingKeys(e,n,r){this.oi.Gr(n,r);let i=this.persistence.referenceDelegate,o=[];return i&&n.forEach(s=>{o.push(i.markPotentiallyOrphaned(e,s))}),k.waitFor(o)}removeMatchingKeysForTargetId(e,n){return this.oi.zr(n),k.resolve()}getMatchingKeysForTargetId(e,n){let r=this.oi.Jr(n);return k.resolve(r)}containsKey(e,n){return k.resolve(this.oi.containsKey(n))}};var Sf=class{constructor(e,n){this.ai={},this.overlays={},this.ui=new oI(0),this.ci=!1,this.ci=!0,this.li=new pE,this.referenceDelegate=e(this),this.hi=new vE(this),this.indexManager=new iE,this.remoteDocumentCache=(function(i){return new mE(i)})(r=>this.referenceDelegate.Pi(r)),this.serializer=new rE(n),this.Ti=new hE(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new fE,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ai[e.toKey()];return r||(r=new gE(n,this.referenceDelegate),this.ai[e.toKey()]=r),r}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(e,n,r){B("MemoryPersistence","Starting transaction:",e);let i=new _E(this.ui.next());return this.referenceDelegate.Ii(),r(i).next(o=>this.referenceDelegate.di(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Ei(e,n){return k.or(Object.values(this.ai).map(r=>()=>r.containsKey(e,n)))}},_E=class extends S_{constructor(e){super(),this.currentSequenceNumber=e}},EE=class t{constructor(e){this.persistence=e,this.Ai=new Ou,this.Ri=null}static Vi(e){return new t(e)}get mi(){if(this.Ri)return this.Ri;throw W(60996)}addReference(e,n,r){return this.Ai.addReference(r,n),this.mi.delete(r.toString()),k.resolve()}removeReference(e,n,r){return this.Ai.removeReference(r,n),this.mi.add(r.toString()),k.resolve()}markPotentiallyOrphaned(e,n){return this.mi.add(n.toString()),k.resolve()}removeTarget(e,n){this.Ai.zr(n.targetId).forEach(i=>this.mi.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(o=>this.mi.add(o.toString()))}).next(()=>r.removeTargetData(e,n))}Ii(){this.Ri=new Set}di(e){let n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return k.forEach(this.mi,r=>{let i=G.fromPath(r);return this.fi(e,i).next(o=>{o||n.removeEntry(i,te.min())})}).next(()=>(this.Ri=null,n.apply(e)))}updateLimboDocument(e,n){return this.fi(e,n).next(r=>{r?this.mi.delete(n.toString()):this.mi.add(n.toString())})}Pi(e){return 0}fi(e,n){return k.or([()=>k.resolve(this.Ai.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ei(e,n)])}},Af=class t{constructor(e,n){this.persistence=e,this.gi=new Vr(r=>$B(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=V$(this,n)}static Vi(e,n){return new t(e,n)}Ii(){}di(e){return k.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}mr(e){let n=this.yr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(i=>r+i))}yr(e){let n=0;return this.gr(e,r=>{n++}).next(()=>n)}gr(e,n){return k.forEach(this.gi,(r,i)=>this.Sr(e,r,i).next(o=>o?k.resolve():n(i)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0,i=this.persistence.getRemoteDocumentCache(),o=i.newChangeBuffer();return i.ri(e,s=>this.Sr(e,s,n).next(a=>{a||(r++,o.removeEntry(s,te.min()))})).next(()=>o.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.gi.set(n,e.currentSequenceNumber),k.resolve()}removeTarget(e,n){let r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.gi.set(r,e.currentSequenceNumber),k.resolve()}removeReference(e,n,r){return this.gi.set(r,e.currentSequenceNumber),k.resolve()}updateLimboDocument(e,n){return this.gi.set(n,e.currentSequenceNumber),k.resolve()}Pi(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=uf(e.data.value)),n}Sr(e,n,r){return k.or([()=>this.persistence.Ei(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{let i=this.gi.get(n);return k.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}};var IE=class t{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.Is=r,this.ds=i}static Es(e,n){let r=fe(),i=fe();for(let o of n.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new t(e,n.fromCache,r,i)}};var wE=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var bE=class{constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=(function(){return _S()?8:UB(sn())>0?6:4})()}initialize(e,n){this.gs=e,this.indexManager=n,this.As=!0}getDocumentsMatchingQuery(e,n,r,i){let o={result:null};return this.ps(e,n).next(s=>{o.result=s}).next(()=>{if(!o.result)return this.ys(e,n,i,r).next(s=>{o.result=s})}).next(()=>{if(o.result)return;let s=new wE;return this.ws(e,n,s).next(a=>{if(o.result=a,this.Rs)return this.Ss(e,n,s,a.size)})}).next(()=>o.result)}Ss(e,n,r,i){return r.documentReadCount<this.Vs?(ra()<=le.DEBUG&&B("QueryEngine","SDK will not create cache indexes for query:",ia(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),k.resolve()):(ra()<=le.DEBUG&&B("QueryEngine","Query:",ia(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.fs*i?(ra()<=le.DEBUG&&B("QueryEngine","The SDK decides to create cache indexes for query:",ia(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,nr(n))):k.resolve())}ps(e,n){if(xA(n))return k.resolve(null);let r=nr(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=$_(n,null,"F"),r=nr(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{let s=fe(...o);return this.gs.getDocuments(e,s).next(a=>this.indexManager.getMinOffset(e,r).next(u=>{let l=this.bs(n,a);return this.Ds(n,l,s,u.readTime)?this.ps(e,$_(n,null,"F")):this.vs(e,l,n,u)}))})))}ys(e,n,r,i){return xA(n)||i.isEqual(te.min())?k.resolve(null):this.gs.getDocuments(e,r).next(o=>{let s=this.bs(n,o);return this.Ds(n,s,r,i)?k.resolve(null):(ra()<=le.DEBUG&&B("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),ia(n)),this.vs(e,s,n,FB(i,Au)).next(a=>a))})}bs(e,n){let r=new pt(BR(e));return n.forEach((i,o)=>{Xf(e,o)&&(r=r.add(o))}),r}Ds(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;let o=e.limitType==="F"?n.last():n.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}ws(e,n,r){return ra()<=le.DEBUG&&B("QueryEngine","Using full collection scan to execute query:",ia(n)),this.gs.getDocumentsMatchingQuery(e,n,jo.min(),r)}vs(e,n,r,i){return this.gs.getDocumentsMatchingQuery(e,r,i).next(o=>(n.forEach(s=>{o=o.insert(s.key,s)}),o))}};var mI="LocalStore",j$=3e8,DE=class{constructor(e,n,r,i){this.persistence=e,this.Cs=n,this.serializer=i,this.Fs=new qe(ce),this.Ms=new Vr(o=>dI(o),hI),this.xs=new Map,this.Os=e.getRemoteDocumentCache(),this.hi=e.getTargetCache(),this.Ti=e.getBundleCache(),this.Ns(r)}Ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new dE(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Fs))}};function U$(t,e,n,r){return new DE(t,e,n,r)}function aN(t,e){return _(this,null,function*(){let n=J(t);return yield n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,n.Ns(e),n.mutationQueue.getAllMutationBatches(r))).next(o=>{let s=[],a=[],u=fe();for(let l of i){s.push(l.batchId);for(let h of l.mutations)u=u.add(h.key)}for(let l of o){a.push(l.batchId);for(let h of l.mutations)u=u.add(h.key)}return n.localDocuments.getDocuments(r,u).next(l=>({Bs:l,removedBatchIds:s,addedBatchIds:a}))})})})}function B$(t,e){let n=J(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),o=n.Os.newChangeBuffer({trackRemovals:!0});return(function(a,u,l,h){let p=l.batch,m=p.keys(),y=k.resolve();return m.forEach(S=>{y=y.next(()=>h.getEntry(u,S)).next(P=>{let M=l.docVersions.get(S);be(M!==null,48541),P.version.compareTo(M)<0&&(p.applyToRemoteDocument(P,l),P.isValidDocument()&&(P.setReadTime(l.commitVersion),h.addEntry(P)))})}),y.next(()=>a.mutationQueue.removeMutationBatch(u,p))})(n,r,e,o).next(()=>o.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(a){let u=fe();for(let l=0;l<a.mutationResults.length;++l)a.mutationResults[l].transformResults.length>0&&(u=u.add(a.batch.mutations[l].key));return u})(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function cN(t){let e=J(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.hi.getLastRemoteSnapshotVersion(n))}function $$(t,e){let n=J(t),r=e.snapshotVersion,i=n.Fs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{let s=n.Os.newChangeBuffer({trackRemovals:!0});i=n.Fs;let a=[];e.targetChanges.forEach((h,p)=>{let m=i.get(p);if(!m)return;a.push(n.hi.removeMatchingKeys(o,h.removedDocuments,p).next(()=>n.hi.addMatchingKeys(o,h.addedDocuments,p)));let y=m.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(p)!==null?y=y.withResumeToken(Mt.EMPTY_BYTE_STRING,te.min()).withLastLimboFreeSnapshotVersion(te.min()):h.resumeToken.approximateByteSize()>0&&(y=y.withResumeToken(h.resumeToken,r)),i=i.insert(p,y),(function(P,M,j){return P.resumeToken.approximateByteSize()===0||M.snapshotVersion.toMicroseconds()-P.snapshotVersion.toMicroseconds()>=j$?!0:j.addedDocuments.size+j.modifiedDocuments.size+j.removedDocuments.size>0})(m,y,h)&&a.push(n.hi.updateTargetData(o,y))});let u=jr(),l=fe();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(o,h))}),a.push(H$(o,s,e.documentUpdates).next(h=>{u=h.Ls,l=h.ks})),!r.isEqual(te.min())){let h=n.hi.getLastRemoteSnapshotVersion(o).next(p=>n.hi.setTargetsMetadata(o,o.currentSequenceNumber,r));a.push(h)}return k.waitFor(a).next(()=>s.apply(o)).next(()=>n.localDocuments.getLocalViewOfDocuments(o,u,l)).next(()=>u)}).then(o=>(n.Fs=i,o))}function H$(t,e,n){let r=fe(),i=fe();return n.forEach(o=>r=r.add(o)),e.getEntries(t,r).next(o=>{let s=jr();return n.forEach((a,u)=>{let l=o.get(a);u.isFoundDocument()!==l.isFoundDocument()&&(i=i.add(a)),u.isNoDocument()&&u.version.isEqual(te.min())?(e.removeEntry(a,u.readTime),s=s.insert(a,u)):!l.isValidDocument()||u.version.compareTo(l.version)>0||u.version.compareTo(l.version)===0&&l.hasPendingWrites?(e.addEntry(u),s=s.insert(a,u)):B(mI,"Ignoring outdated watch update for ",a,". Current version:",l.version," Watch version:",u.version)}),{Ls:s,ks:i}})}function q$(t,e){let n=J(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=sI),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function z$(t,e){let n=J(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.hi.getTargetData(r,e).next(o=>o?(i=o,k.resolve(i)):n.hi.allocateTargetId(r).next(s=>(i=new xu(e,s,"TargetPurposeListen",r.currentSequenceNumber),n.hi.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=n.Fs.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.Fs=n.Fs.insert(r.targetId,r),n.Ms.set(e,r.targetId)),r})}function CE(t,e,n){return _(this,null,function*(){let r=J(t),i=r.Fs.get(e),o=n?"readwrite":"readwrite-primary";try{n||(yield r.persistence.runTransaction("Release target",o,s=>r.persistence.referenceDelegate.removeTarget(s,i)))}catch(s){if(!Ca(s))throw s;B(mI,`Failed to update sequence numbers for target ${e}: ${s}`)}r.Fs=r.Fs.remove(e),r.Ms.delete(i.target)})}function GA(t,e,n){let r=J(t),i=te.min(),o=fe();return r.persistence.runTransaction("Execute query","readwrite",s=>(function(u,l,h){let p=J(u),m=p.Ms.get(h);return m!==void 0?k.resolve(p.Fs.get(m)):p.hi.getTargetData(l,h)})(r,s,nr(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.hi.getMatchingKeysForTargetId(s,a.targetId).next(u=>{o=u})}).next(()=>r.Cs.getDocumentsMatchingQuery(s,e,n?i:te.min(),n?o:fe())).next(a=>(G$(r,o$(e),a),{documents:a,qs:o})))}function G$(t,e,n){let r=t.xs.get(e)||te.min();n.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),t.xs.set(e,r)}var Rf=class{constructor(){this.activeTargetIds=d$()}Gs(e){this.activeTargetIds=this.activeTargetIds.add(e)}zs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}};var TE=class{constructor(){this.Fo=new Rf,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Fo.Gs(e),this.Mo[e]||"not-current"}updateQueryState(e,n,r){this.Mo[e]=n}removeLocalQueryTarget(e){this.Fo.zs(e)}isLocalQueryTarget(e){return this.Fo.activeTargetIds.has(e)}clearQueryState(e){delete this.Mo[e]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(e){return this.Fo.activeTargetIds.has(e)}start(){return this.Fo=new Rf,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var SE=class{xo(e){}shutdown(){}};var WA="ConnectivityMonitor",Nf=class{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(e){this.ko.push(e)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){B(WA,"Network connectivity changed: AVAILABLE");for(let e of this.ko)e(0)}Lo(){B(WA,"Network connectivity changed: UNAVAILABLE");for(let e of this.ko)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var cf=null;function AE(){return cf===null?cf=(function(){return 268435456+Math.round(2147483648*Math.random())})():cf++,"0x"+cf.toString(16)}var m_="RestConnection",W$={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"},RE=class{get Qo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;let n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.$o=n+"://"+e.host,this.Uo=`projects/${r}/databases/${i}`,this.Ko=this.databaseId.database===yf?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Wo(e,n,r,i,o){let s=AE(),a=this.Go(e,n.toUriEncodedString());B(m_,`Sending RPC '${e}' ${s}:`,a,r);let u={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(u,i,o);let{host:l}=new URL(a),h=Do(l);return this.jo(e,a,u,r,h).then(p=>(B(m_,`Received RPC '${e}' ${s}: `,p),p),p=>{throw Ci(m_,`RPC '${e}' ${s} failed with error: `,p,"url: ",a,"request:",r),p})}Jo(e,n,r,i,o,s){return this.Wo(e,n,r,i,o)}zo(e,n,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+ba})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((i,o)=>e[o]=i),r&&r.headers.forEach((i,o)=>e[o]=i)}Go(e,n){let r=W$[e];return`${this.$o}/v1/${n}:${r}`}terminate(){}};var NE=class{constructor(e){this.Ho=e.Ho,this.Yo=e.Yo}Zo(e){this.Xo=e}e_(e){this.t_=e}n_(e){this.r_=e}onMessage(e){this.i_=e}close(){this.Yo()}send(e){this.Ho(e)}s_(){this.Xo()}o_(){this.t_()}__(e){this.r_(e)}a_(e){this.i_(e)}};var Nt="WebChannelConnection",ME=class extends RE{constructor(e){super(e),this.u_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}jo(e,n,r,i,o){let s=AE();return new Promise((a,u)=>{let l=new l_;l.setWithCredentials(!0),l.listenOnce(d_.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case Iu.NO_ERROR:let p=l.getResponseJson();B(Nt,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(p)),a(p);break;case Iu.TIMEOUT:B(Nt,`RPC '${e}' ${s} timed out`),u(new V(N.DEADLINE_EXCEEDED,"Request time out"));break;case Iu.HTTP_ERROR:let m=l.getStatus();if(B(Nt,`RPC '${e}' ${s} failed with status:`,m,"response text:",l.getResponseText()),m>0){let y=l.getResponseJson();Array.isArray(y)&&(y=y[0]);let S=y?.error;if(S&&S.status&&S.message){let P=(function(j){let K=j.toLowerCase().replace(/_/g,"-");return Object.values(N).indexOf(K)>=0?K:N.UNKNOWN})(S.status);u(new V(P,S.message))}else u(new V(N.UNKNOWN,"Server responded with status "+l.getStatus()))}else u(new V(N.UNAVAILABLE,"Connection failed."));break;default:W(9055,{c_:e,streamId:s,l_:l.getLastErrorCode(),h_:l.getLastError()})}}finally{B(Nt,`RPC '${e}' ${s} completed.`)}});let h=JSON.stringify(i);B(Nt,`RPC '${e}' ${s} sending request:`,i),l.send(n,"POST",h,r,15)})}P_(e,n,r){let i=AE(),o=[this.$o,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=p_(),a=f_(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;l!==void 0&&(u.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(u.useFetchStreams=!0),this.zo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;let h=o.join("");B(Nt,`Creating RPC '${e}' stream ${i}: ${h}`,u);let p=s.createWebChannel(h,u);this.T_(p);let m=!1,y=!1,S=new NE({Ho:M=>{y?B(Nt,`Not sending because RPC '${e}' stream ${i} is closed:`,M):(m||(B(Nt,`Opening RPC '${e}' stream ${i} transport.`),p.open(),m=!0),B(Nt,`RPC '${e}' stream ${i} sending:`,M),p.send(M))},Yo:()=>p.close()}),P=(M,j,K)=>{M.listen(j,Q=>{try{K(Q)}catch(Ae){setTimeout(()=>{throw Ae},0)}})};return P(p,na.EventType.OPEN,()=>{y||(B(Nt,`RPC '${e}' stream ${i} transport opened.`),S.s_())}),P(p,na.EventType.CLOSE,()=>{y||(y=!0,B(Nt,`RPC '${e}' stream ${i} transport closed`),S.__(),this.I_(p))}),P(p,na.EventType.ERROR,M=>{y||(y=!0,Ci(Nt,`RPC '${e}' stream ${i} transport errored. Name:`,M.name,"Message:",M.message),S.__(new V(N.UNAVAILABLE,"The operation could not be completed")))}),P(p,na.EventType.MESSAGE,M=>{var j;if(!y){let K=M.data[0];be(!!K,16349);let Q=K,Ae=Q?.error||((j=Q[0])===null||j===void 0?void 0:j.error);if(Ae){B(Nt,`RPC '${e}' stream ${i} received error:`,Ae);let Ot=Ae.status,De=(function(I){let w=Je[I];if(w!==void 0)return JR(w)})(Ot),b=Ae.message;De===void 0&&(De=N.INTERNAL,b="Unknown error status: "+Ot+" with message "+Ae.message),y=!0,S.__(new V(De,b)),p.close()}else B(Nt,`RPC '${e}' stream ${i} received:`,K),S.a_(K)}}),P(a,h_.STAT_EVENT,M=>{M.stat===of.PROXY?B(Nt,`RPC '${e}' stream ${i} detected buffering proxy`):M.stat===of.NOPROXY&&B(Nt,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{S.o_()},0),S}terminate(){this.u_.forEach(e=>e.close()),this.u_=[]}T_(e){this.u_.push(e)}I_(e){this.u_=this.u_.filter(n=>n===e)}};function y_(){return typeof document<"u"?document:null}function ep(t){return new J_(t,!0)}var Mf=class{constructor(e,n,r=1e3,i=1.5,o=6e4){this.Fi=e,this.timerId=n,this.d_=r,this.E_=i,this.A_=o,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(e){this.cancel();let n=Math.floor(this.R_+this.p_()),r=Math.max(0,Date.now()-this.m_),i=Math.max(0,n-r);i>0&&B("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.R_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,i,()=>(this.m_=Date.now(),e())),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}};var KA="PersistentStream",Pf=class{constructor(e,n,r,i,o,s,a,u){this.Fi=e,this.w_=r,this.S_=i,this.connection=o,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=a,this.listener=u,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new Mf(e,n)}M_(){return this.state===1||this.state===5||this.x_()}x_(){return this.state===2||this.state===3}start(){this.C_=0,this.state!==4?this.auth():this.O_()}stop(){return _(this,null,function*(){this.M_()&&(yield this.close(0))})}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&this.D_===null&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,()=>this.L_()))}k_(e){this.q_(),this.stream.send(e)}L_(){return _(this,null,function*(){if(this.x_())return this.close(0)})}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}close(e,n){return _(this,null,function*(){this.q_(),this.Q_(),this.F_.cancel(),this.b_++,e!==4?this.F_.reset():n&&n.code===N.RESOURCE_EXHAUSTED?(Or(n.toString()),Or("Using maximum backoff delay to prevent overloading the backend."),this.F_.f_()):n&&n.code===N.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.U_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.n_(n)})}U_(){}auth(){this.state=1;let e=this.K_(this.b_),n=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.b_===n&&this.W_(r,i)},r=>{e(()=>{let i=new V(N.UNKNOWN,"Fetching auth token failed: "+r.message);return this.G_(i)})})}W_(e,n){let r=this.K_(this.b_);this.stream=this.z_(e,n),this.stream.Zo(()=>{r(()=>this.listener.Zo())}),this.stream.e_(()=>{r(()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,()=>(this.x_()&&(this.state=3),Promise.resolve())),this.listener.e_()))}),this.stream.n_(i=>{r(()=>this.G_(i))}),this.stream.onMessage(i=>{r(()=>++this.C_==1?this.j_(i):this.onNext(i))})}O_(){this.state=5,this.F_.g_(()=>_(this,null,function*(){this.state=0,this.start()}))}G_(e){return B(KA,`close with error: ${e}`),this.stream=null,this.close(4,e)}K_(e){return n=>{this.Fi.enqueueAndForget(()=>this.b_===e?n():(B(KA,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},PE=class extends Pf{constructor(e,n,r,i,o,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,s),this.serializer=o}z_(e,n){return this.connection.P_("Listen",e,n)}j_(e){return this.onNext(e)}onNext(e){this.F_.reset();let n=C$(this.serializer,e),r=(function(o){if(!("targetChange"in o))return te.min();let s=o.targetChange;return s.targetIds&&s.targetIds.length?te.min():s.readTime?rr(s.readTime):te.min()})(e);return this.listener.J_(n,r)}H_(e){let n={};n.database=nE(this.serializer),n.addTarget=(function(o,s){let a,u=s.target;if(a=U_(u)?{documents:A$(o,u)}:{query:R$(o,u).Vt},a.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){a.resumeToken=XR(o,s.resumeToken);let l=X_(o,s.expectedCount);l!==null&&(a.expectedCount=l)}else if(s.snapshotVersion.compareTo(te.min())>0){a.readTime=Cf(o,s.snapshotVersion.toTimestamp());let l=X_(o,s.expectedCount);l!==null&&(a.expectedCount=l)}return a})(this.serializer,e);let r=M$(this.serializer,e);r&&(n.labels=r),this.k_(n)}Y_(e){let n={};n.database=nE(this.serializer),n.removeTarget=e,this.k_(n)}},xE=class extends Pf{constructor(e,n,r,i,o,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,s),this.serializer=o}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(e,n){return this.connection.P_("Write",e,n)}j_(e){return be(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,be(!e.writeResults||e.writeResults.length===0,55816),this.listener.ea()}onNext(e){be(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.F_.reset();let n=S$(e.writeResults,e.commitTime),r=rr(e.commitTime);return this.listener.ta(r,n)}na(){let e={};e.database=nE(this.serializer),this.k_(e)}X_(e){let n={streamToken:this.lastStreamToken,writes:e.map(r=>T$(this.serializer,r))};this.k_(n)}};var kE=class{},OE=class extends kE{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.ra=!1}ia(){if(this.ra)throw new V(N.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,n,r,i){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,s])=>this.connection.Wo(e,eE(n,r),i,o,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===N.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new V(N.UNKNOWN,o.toString())})}Jo(e,n,r,i,o){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.Jo(e,eE(n,r),i,s,a,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===N.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new V(N.UNKNOWN,s.toString())})}terminate(){this.ra=!0,this.connection.terminate()}},FE=class{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){this.sa===0&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve())))}la(e){this.state==="Online"?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ua("Offline")))}set(e){this.ha(),this.sa=0,e==="Online"&&(this._a=!1),this.ua(e)}ua(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ca(e){let n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this._a?(Or(n),this._a=!1):B("OnlineStateTracker",n)}ha(){this.oa!==null&&(this.oa.cancel(),this.oa=null)}};var zo="RemoteStore",LE=class{constructor(e,n,r,i,o){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=o,this.Ea.xo(s=>{r.enqueueAndForget(()=>_(this,null,function*(){Wo(this)&&(B(zo,"Restarting streams for network reachability change."),yield(function(u){return _(this,null,function*(){let l=J(u);l.Ia.add(4),yield Vu(l),l.Aa.set("Unknown"),l.Ia.delete(4),yield tp(l)})})(this))}))}),this.Aa=new FE(r,i)}};function tp(t){return _(this,null,function*(){if(Wo(t))for(let e of t.da)yield e(!0)})}function Vu(t){return _(this,null,function*(){for(let e of t.da)yield e(!1)})}function uN(t,e){let n=J(t);n.Ta.has(e.targetId)||(n.Ta.set(e.targetId,e),EI(n)?_I(n):Ta(n).x_()&&vI(n,e))}function yI(t,e){let n=J(t),r=Ta(n);n.Ta.delete(e),r.x_()&&lN(n,e),n.Ta.size===0&&(r.x_()?r.B_():Wo(n)&&n.Aa.set("Unknown"))}function vI(t,e){if(t.Ra.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(te.min())>0){let n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Ta(t).H_(e)}function lN(t,e){t.Ra.$e(e),Ta(t).Y_(e)}function _I(t){t.Ra=new Z_({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>t.Ta.get(e)||null,lt:()=>t.datastore.serializer.databaseId}),Ta(t).start(),t.Aa.aa()}function EI(t){return Wo(t)&&!Ta(t).M_()&&t.Ta.size>0}function Wo(t){return J(t).Ia.size===0}function dN(t){t.Ra=void 0}function K$(t){return _(this,null,function*(){t.Aa.set("Online")})}function Q$(t){return _(this,null,function*(){t.Ta.forEach((e,n)=>{vI(t,e)})})}function Y$(t,e){return _(this,null,function*(){dN(t),EI(t)?(t.Aa.la(e),_I(t)):t.Aa.set("Unknown")})}function Z$(t,e,n){return _(this,null,function*(){if(t.Aa.set("Online"),e instanceof bf&&e.state===2&&e.cause)try{yield(function(i,o){return _(this,null,function*(){let s=o.cause;for(let a of o.targetIds)i.Ta.has(a)&&(yield i.remoteSyncer.rejectListen(a,s),i.Ta.delete(a),i.Ra.removeTarget(a))})})(t,e)}catch(r){B(zo,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield xf(t,r)}else if(e instanceof ca?t.Ra.Ye(e):e instanceof wf?t.Ra.it(e):t.Ra.et(e),!n.isEqual(te.min()))try{let r=yield cN(t.localStore);n.compareTo(r)>=0&&(yield(function(o,s){let a=o.Ra.Pt(s);return a.targetChanges.forEach((u,l)=>{if(u.resumeToken.approximateByteSize()>0){let h=o.Ta.get(l);h&&o.Ta.set(l,h.withResumeToken(u.resumeToken,s))}}),a.targetMismatches.forEach((u,l)=>{let h=o.Ta.get(u);if(!h)return;o.Ta.set(u,h.withResumeToken(Mt.EMPTY_BYTE_STRING,h.snapshotVersion)),lN(o,u);let p=new xu(h.target,u,l,h.sequenceNumber);vI(o,p)}),o.remoteSyncer.applyRemoteEvent(a)})(t,n))}catch(r){B(zo,"Failed to raise snapshot:",r),yield xf(t,r)}})}function xf(t,e,n){return _(this,null,function*(){if(!Ca(e))throw e;t.Ia.add(1),yield Vu(t),t.Aa.set("Offline"),n||(n=()=>cN(t.localStore)),t.asyncQueue.enqueueRetryable(()=>_(null,null,function*(){B(zo,"Retrying IndexedDB access"),yield n(),t.Ia.delete(1),yield tp(t)}))})}function hN(t,e){return e().catch(n=>xf(t,n,e))}function np(t){return _(this,null,function*(){let e=J(t),n=Ai(e),r=e.Pa.length>0?e.Pa[e.Pa.length-1].batchId:sI;for(;J$(e);)try{let i=yield q$(e.localStore,r);if(i===null){e.Pa.length===0&&n.B_();break}r=i.batchId,X$(e,i)}catch(i){yield xf(e,i)}fN(e)&&pN(e)})}function J$(t){return Wo(t)&&t.Pa.length<10}function X$(t,e){t.Pa.push(e);let n=Ai(t);n.x_()&&n.Z_&&n.X_(e.mutations)}function fN(t){return Wo(t)&&!Ai(t).M_()&&t.Pa.length>0}function pN(t){Ai(t).start()}function eH(t){return _(this,null,function*(){Ai(t).na()})}function tH(t){return _(this,null,function*(){let e=Ai(t);for(let n of t.Pa)e.X_(n.mutations)})}function nH(t,e,n){return _(this,null,function*(){let r=t.Pa.shift(),i=W_.from(r,e,n);yield hN(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),yield np(t)})}function rH(t,e){return _(this,null,function*(){e&&Ai(t).Z_&&(yield(function(r,i){return _(this,null,function*(){if((function(s){return v$(s)&&s!==N.ABORTED})(i.code)){let o=r.Pa.shift();Ai(r).N_(),yield hN(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i)),yield np(r)}})})(t,e)),fN(t)&&pN(t)})}function QA(t,e){return _(this,null,function*(){let n=J(t);n.asyncQueue.verifyOperationInProgress(),B(zo,"RemoteStore received new credentials");let r=Wo(n);n.Ia.add(3),yield Vu(n),r&&n.Aa.set("Unknown"),yield n.remoteSyncer.handleCredentialChange(e),n.Ia.delete(3),yield tp(n)})}function iH(t,e){return _(this,null,function*(){let n=J(t);e?(n.Ia.delete(2),yield tp(n)):e||(n.Ia.add(2),yield Vu(n),n.Aa.set("Unknown"))})}function Ta(t){return t.Va||(t.Va=(function(n,r,i){let o=J(n);return o.ia(),new PE(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)})(t.datastore,t.asyncQueue,{Zo:K$.bind(null,t),e_:Q$.bind(null,t),n_:Y$.bind(null,t),J_:Z$.bind(null,t)}),t.da.push(e=>_(null,null,function*(){e?(t.Va.N_(),EI(t)?_I(t):t.Aa.set("Unknown")):(yield t.Va.stop(),dN(t))}))),t.Va}function Ai(t){return t.ma||(t.ma=(function(n,r,i){let o=J(n);return o.ia(),new xE(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)})(t.datastore,t.asyncQueue,{Zo:()=>Promise.resolve(),e_:eH.bind(null,t),n_:rH.bind(null,t),ea:tH.bind(null,t),ta:nH.bind(null,t)}),t.da.push(e=>_(null,null,function*(){e?(t.ma.N_(),yield np(t)):(yield t.ma.stop(),t.Pa.length>0&&(B(zo,`Stopping write stream with ${t.Pa.length} pending writes`),t.Pa=[]))}))),t.ma}var VE=class t{constructor(e,n,r,i,o){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new kn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,o){let s=Date.now()+r,a=new t(e,n,s,i,o);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new V(N.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function II(t,e){if(Or("AsyncQueue",`${e}: ${t}`),Ca(t))return new V(N.UNAVAILABLE,`${e}: ${t}`);throw t}var kf=class t{static emptySet(e){return new t(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||G.comparator(n.key,r.key):(n,r)=>G.comparator(n.key,r.key),this.keyedMap=wu(),this.sortedSet=new qe(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){let n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){let n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){let i=n.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){let e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){let r=new t;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}};var Of=class{constructor(){this.fa=new qe(G.comparator)}track(e){let n=e.doc.key,r=this.fa.get(n);r?e.type!==0&&r.type===3?this.fa=this.fa.insert(n,e):e.type===3&&r.type!==1?this.fa=this.fa.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.fa=this.fa.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.fa=this.fa.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.fa=this.fa.remove(n):e.type===1&&r.type===2?this.fa=this.fa.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.fa=this.fa.insert(n,{type:2,doc:e.doc}):W(63341,{At:e,ga:r}):this.fa=this.fa.insert(n,e)}pa(){let e=[];return this.fa.inorderTraversal((n,r)=>{e.push(r)}),e}},_a=class t{constructor(e,n,r,i,o,s,a,u,l){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=s,this.syncStateChanged=a,this.excludesMetadataChanges=u,this.hasCachedResults=l}static fromInitialDocuments(e,n,r,i,o){let s=[];return n.forEach(a=>{s.push({type:0,doc:a})}),new t(e,n,kf.emptySet(n),s,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Jf(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}};var jE=class{constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some(e=>e.ba())}},UE=class{constructor(){this.queries=YA(),this.onlineState="Unknown",this.Da=new Set}terminate(){(function(n,r){let i=J(n),o=i.queries;i.queries=YA(),o.forEach((s,a)=>{for(let u of a.wa)u.onError(r)})})(this,new V(N.ABORTED,"Firestore shutting down"))}};function YA(){return new Vr(t=>UR(t),Jf)}function gN(t,e){return _(this,null,function*(){let n=J(t),r=3,i=e.query,o=n.queries.get(i);o?!o.Sa()&&e.ba()&&(r=2):(o=new jE,r=e.ba()?0:1);try{switch(r){case 0:o.ya=yield n.onListen(i,!0);break;case 1:o.ya=yield n.onListen(i,!1);break;case 2:yield n.onFirstRemoteStoreListen(i)}}catch(s){let a=II(s,`Initialization of query '${ia(e.query)}' failed`);return void e.onError(a)}n.queries.set(i,o),o.wa.push(e),e.va(n.onlineState),o.ya&&e.Ca(o.ya)&&wI(n)})}function mN(t,e){return _(this,null,function*(){let n=J(t),r=e.query,i=3,o=n.queries.get(r);if(o){let s=o.wa.indexOf(e);s>=0&&(o.wa.splice(s,1),o.wa.length===0?i=e.ba()?0:1:!o.Sa()&&e.ba()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}})}function oH(t,e){let n=J(t),r=!1;for(let i of e){let o=i.query,s=n.queries.get(o);if(s){for(let a of s.wa)a.Ca(i)&&(r=!0);s.ya=i}}r&&wI(n)}function sH(t,e,n){let r=J(t),i=r.queries.get(e);if(i)for(let o of i.wa)o.onError(n);r.queries.delete(e)}function wI(t){t.Da.forEach(e=>{e.next()})}var BE,ZA;(ZA=BE||(BE={})).Fa="default",ZA.Cache="cache";var Ff=class{constructor(e,n,r){this.query=e,this.Ma=n,this.xa=!1,this.Oa=null,this.onlineState="Unknown",this.options=r||{}}Ca(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new _a(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.xa?this.Na(e)&&(this.Ma.next(e),n=!0):this.Ba(e,this.onlineState)&&(this.La(e),n=!0),this.Oa=e,n}onError(e){this.Ma.error(e)}va(e){this.onlineState=e;let n=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,e)&&(this.La(this.Oa),n=!0),n}Ba(e,n){if(!e.fromCache||!this.ba())return!0;let r=n!=="Offline";return(!this.options.ka||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Na(e){if(e.docChanges.length>0)return!0;let n=this.Oa&&this.Oa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}La(e){e=_a.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.xa=!0,this.Ma.next(e)}ba(){return this.options.source!==BE.Cache}};var Lf=class{constructor(e){this.key=e}},Vf=class{constructor(e){this.key=e}},$E=class{constructor(e,n){this.query=e,this.Ha=n,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=fe(),this.mutatedKeys=fe(),this.Xa=BR(e),this.eu=new kf(this.Xa)}get tu(){return this.Ha}nu(e,n){let r=n?n.ru:new Of,i=n?n.eu:this.eu,o=n?n.mutatedKeys:this.mutatedKeys,s=i,a=!1,u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,l=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((h,p)=>{let m=i.get(h),y=Xf(this.query,p)?p:null,S=!!m&&this.mutatedKeys.has(m.key),P=!!y&&(y.hasLocalMutations||this.mutatedKeys.has(y.key)&&y.hasCommittedMutations),M=!1;m&&y?m.data.isEqual(y.data)?S!==P&&(r.track({type:3,doc:y}),M=!0):this.iu(m,y)||(r.track({type:2,doc:y}),M=!0,(u&&this.Xa(y,u)>0||l&&this.Xa(y,l)<0)&&(a=!0)):!m&&y?(r.track({type:0,doc:y}),M=!0):m&&!y&&(r.track({type:1,doc:m}),M=!0,(u||l)&&(a=!0)),M&&(y?(s=s.add(y),o=P?o.add(h):o.delete(h)):(s=s.delete(h),o=o.delete(h)))}),this.query.limit!==null)for(;s.size>this.query.limit;){let h=this.query.limitType==="F"?s.last():s.first();s=s.delete(h.key),o=o.delete(h.key),r.track({type:1,doc:h})}return{eu:s,ru:r,Ds:a,mutatedKeys:o}}iu(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){let o=this.eu;this.eu=e.eu,this.mutatedKeys=e.mutatedKeys;let s=e.ru.pa();s.sort((h,p)=>(function(y,S){let P=M=>{switch(M){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return W(20277,{At:M})}};return P(y)-P(S)})(h.type,p.type)||this.Xa(h.doc,p.doc)),this.su(r),i=i!=null&&i;let a=n&&!i?this.ou():[],u=this.Za.size===0&&this.current&&!i?1:0,l=u!==this.Ya;return this.Ya=u,s.length!==0||l?{snapshot:new _a(this.query,e.eu,o,s,e.mutatedKeys,u===0,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),_u:a}:{_u:a}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({eu:this.eu,ru:new Of,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(e){return!this.Ha.has(e)&&!!this.eu.has(e)&&!this.eu.get(e).hasLocalMutations}su(e){e&&(e.addedDocuments.forEach(n=>this.Ha=this.Ha.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ha=this.Ha.delete(n)),this.current=e.current)}ou(){if(!this.current)return[];let e=this.Za;this.Za=fe(),this.eu.forEach(r=>{this.au(r.key)&&(this.Za=this.Za.add(r.key))});let n=[];return e.forEach(r=>{this.Za.has(r)||n.push(new Vf(r))}),this.Za.forEach(r=>{e.has(r)||n.push(new Lf(r))}),n}uu(e){this.Ha=e.qs,this.Za=fe();let n=this.nu(e.documents);return this.applyChanges(n,!0)}cu(){return _a.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,this.Ya===0,this.hasCachedResults)}},bI="SyncEngine",HE=class{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}},qE=class{constructor(e){this.key=e,this.lu=!1}},zE=class{constructor(e,n,r,i,o,s){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.hu={},this.Pu=new Vr(a=>UR(a),Jf),this.Tu=new Map,this.Iu=new Set,this.du=new qe(G.comparator),this.Eu=new Map,this.Au=new Ou,this.Ru={},this.Vu=new Map,this.mu=ku.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return this.fu===!0}};function aH(t,e,n=!0){return _(this,null,function*(){let r=wN(t),i,o=r.Pu.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.cu()):i=yield yN(r,e,n,!0),i})}function cH(t,e){return _(this,null,function*(){let n=wN(t);yield yN(n,e,!0,!1)})}function yN(t,e,n,r){return _(this,null,function*(){let i=yield z$(t.localStore,nr(e)),o=i.targetId,s=t.sharedClientState.addLocalQueryTarget(o,n),a;return r&&(a=yield uH(t,e,o,s==="current",i.resumeToken)),t.isPrimaryClient&&n&&uN(t.remoteStore,i),a})}function uH(t,e,n,r,i){return _(this,null,function*(){t.gu=(p,m,y)=>(function(P,M,j,K){return _(this,null,function*(){let Q=M.view.nu(j);Q.Ds&&(Q=yield GA(P.localStore,M.query,!1).then(({documents:b})=>M.view.nu(b,Q)));let Ae=K&&K.targetChanges.get(M.targetId),Ot=K&&K.targetMismatches.get(M.targetId)!=null,De=M.view.applyChanges(Q,P.isPrimaryClient,Ae,Ot);return XA(P,M.targetId,De._u),De.snapshot})})(t,p,m,y);let o=yield GA(t.localStore,e,!0),s=new $E(e,o.qs),a=s.nu(o.documents),u=Pu.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),l=s.applyChanges(a,t.isPrimaryClient,u);XA(t,n,l._u);let h=new HE(e,n,s);return t.Pu.set(e,h),t.Tu.has(n)?t.Tu.get(n).push(e):t.Tu.set(n,[e]),l.snapshot})}function lH(t,e,n){return _(this,null,function*(){let r=J(t),i=r.Pu.get(e),o=r.Tu.get(i.targetId);if(o.length>1)return r.Tu.set(i.targetId,o.filter(s=>!Jf(s,e))),void r.Pu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield CE(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&yI(r.remoteStore,i.targetId),GE(r,i.targetId)}).catch(Da))):(GE(r,i.targetId),yield CE(r.localStore,i.targetId,!0))})}function dH(t,e){return _(this,null,function*(){let n=J(t),r=n.Pu.get(e),i=n.Tu.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),yI(n.remoteStore,r.targetId))})}function hH(t,e,n){return _(this,null,function*(){let r=_H(t);try{let i=yield(function(s,a){let u=J(s),l=nt.now(),h=a.reduce((y,S)=>y.add(S.key),fe()),p,m;return u.persistence.runTransaction("Locally write mutations","readwrite",y=>{let S=jr(),P=fe();return u.Os.getEntries(y,h).next(M=>{S=M,S.forEach((j,K)=>{K.isValidDocument()||(P=P.add(j))})}).next(()=>u.localDocuments.getOverlayedDocuments(y,S)).next(M=>{p=M;let j=[];for(let K of a){let Q=y$(K,p.get(K.key).overlayedDocument);Q!=null&&j.push(new sr(K.key,Q,xR(Q.value.mapValue),kr.exists(!0)))}return u.mutationQueue.addMutationBatch(y,l,j,a)}).next(M=>{m=M;let j=M.applyToLocalDocumentSet(p,P);return u.documentOverlayCache.saveOverlays(y,M.batchId,j)})}).then(()=>({batchId:m.batchId,changes:HR(p)}))})(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),(function(s,a,u){let l=s.Ru[s.currentUser.toKey()];l||(l=new qe(ce)),l=l.insert(a,u),s.Ru[s.currentUser.toKey()]=l})(r,i.batchId,n),yield ju(r,i.changes),yield np(r.remoteStore)}catch(i){let o=II(i,"Failed to persist write");n.reject(o)}})}function vN(t,e){return _(this,null,function*(){let n=J(t);try{let r=yield $$(n.localStore,e);e.targetChanges.forEach((i,o)=>{let s=n.Eu.get(o);s&&(be(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?s.lu=!0:i.modifiedDocuments.size>0?be(s.lu,14607):i.removedDocuments.size>0&&(be(s.lu,42227),s.lu=!1))}),yield ju(n,r,e)}catch(r){yield Da(r)}})}function JA(t,e,n){let r=J(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){let i=[];r.Pu.forEach((o,s)=>{let a=s.view.va(e);a.snapshot&&i.push(a.snapshot)}),(function(s,a){let u=J(s);u.onlineState=a;let l=!1;u.queries.forEach((h,p)=>{for(let m of p.wa)m.va(a)&&(l=!0)}),l&&wI(u)})(r.eventManager,e),i.length&&r.hu.J_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function fH(t,e,n){return _(this,null,function*(){let r=J(t);r.sharedClientState.updateQueryState(e,"rejected",n);let i=r.Eu.get(e),o=i&&i.key;if(o){let s=new qe(G.comparator);s=s.insert(o,On.newNoDocument(o,te.min()));let a=fe().add(o),u=new If(te.min(),new Map,new qe(ce),s,a);yield vN(r,u),r.du=r.du.remove(o),r.Eu.delete(e),DI(r)}else yield CE(r.localStore,e,!1).then(()=>GE(r,e,n)).catch(Da)})}function pH(t,e){return _(this,null,function*(){let n=J(t),r=e.batch.batchId;try{let i=yield B$(n.localStore,e);EN(n,r,null),_N(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),yield ju(n,i)}catch(i){yield Da(i)}})}function gH(t,e,n){return _(this,null,function*(){let r=J(t);try{let i=yield(function(s,a){let u=J(s);return u.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let h;return u.mutationQueue.lookupMutationBatch(l,a).next(p=>(be(p!==null,37113),h=p.keys(),u.mutationQueue.removeMutationBatch(l,p))).next(()=>u.mutationQueue.performConsistencyCheck(l)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(l,h,a)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,h)).next(()=>u.localDocuments.getDocuments(l,h))})})(r.localStore,e);EN(r,e,n),_N(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),yield ju(r,i)}catch(i){yield Da(i)}})}function _N(t,e){(t.Vu.get(e)||[]).forEach(n=>{n.resolve()}),t.Vu.delete(e)}function EN(t,e,n){let r=J(t),i=r.Ru[r.currentUser.toKey()];if(i){let o=i.get(e);o&&(n?o.reject(n):o.resolve(),i=i.remove(e)),r.Ru[r.currentUser.toKey()]=i}}function GE(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(let r of t.Tu.get(e))t.Pu.delete(r),n&&t.hu.pu(r,n);t.Tu.delete(e),t.isPrimaryClient&&t.Au.zr(e).forEach(r=>{t.Au.containsKey(r)||IN(t,r)})}function IN(t,e){t.Iu.delete(e.path.canonicalString());let n=t.du.get(e);n!==null&&(yI(t.remoteStore,n),t.du=t.du.remove(e),t.Eu.delete(n),DI(t))}function XA(t,e,n){for(let r of n)r instanceof Lf?(t.Au.addReference(r.key,e),mH(t,r)):r instanceof Vf?(B(bI,"Document no longer in limbo: "+r.key),t.Au.removeReference(r.key,e),t.Au.containsKey(r.key)||IN(t,r.key)):W(19791,{yu:r})}function mH(t,e){let n=e.key,r=n.path.canonicalString();t.du.get(n)||t.Iu.has(r)||(B(bI,"New document in limbo: "+n),t.Iu.add(r),DI(t))}function DI(t){for(;t.Iu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){let e=t.Iu.values().next().value;t.Iu.delete(e);let n=new G(Oe.fromString(e)),r=t.mu.next();t.Eu.set(r,new qE(n)),t.du=t.du.insert(n,r),uN(t.remoteStore,new xu(nr(fI(n.path)),r,"TargetPurposeLimboResolution",oI.ue))}}function ju(t,e,n){return _(this,null,function*(){let r=J(t),i=[],o=[],s=[];r.Pu.isEmpty()||(r.Pu.forEach((a,u)=>{s.push(r.gu(u,e,n).then(l=>{var h;if((l||n)&&r.isPrimaryClient){let p=l?!l.fromCache:(h=n?.targetChanges.get(u.targetId))===null||h===void 0?void 0:h.current;r.sharedClientState.updateQueryState(u.targetId,p?"current":"not-current")}if(l){i.push(l);let p=IE.Es(u.targetId,l);o.push(p)}}))}),yield Promise.all(s),r.hu.J_(i),yield(function(u,l){return _(this,null,function*(){let h=J(u);try{yield h.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>k.forEach(l,m=>k.forEach(m.Is,y=>h.persistence.referenceDelegate.addReference(p,m.targetId,y)).next(()=>k.forEach(m.ds,y=>h.persistence.referenceDelegate.removeReference(p,m.targetId,y)))))}catch(p){if(!Ca(p))throw p;B(mI,"Failed to update sequence numbers: "+p)}for(let p of l){let m=p.targetId;if(!p.fromCache){let y=h.Fs.get(m),S=y.snapshotVersion,P=y.withLastLimboFreeSnapshotVersion(S);h.Fs=h.Fs.insert(m,P)}}})})(r.localStore,o))})}function yH(t,e){return _(this,null,function*(){let n=J(t);if(!n.currentUser.isEqual(e)){B(bI,"User change. New user:",e.toKey());let r=yield aN(n.localStore,e);n.currentUser=e,(function(o,s){o.Vu.forEach(a=>{a.forEach(u=>{u.reject(new V(N.CANCELLED,s))})}),o.Vu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield ju(n,r.Bs)}})}function vH(t,e){let n=J(t),r=n.Eu.get(e);if(r&&r.lu)return fe().add(r.key);{let i=fe(),o=n.Tu.get(e);if(!o)return i;for(let s of o){let a=n.Pu.get(s);i=i.unionWith(a.view.tu)}return i}}function wN(t){let e=J(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=vN.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=vH.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=fH.bind(null,e),e.hu.J_=oH.bind(null,e.eventManager),e.hu.pu=sH.bind(null,e.eventManager),e}function _H(t){let e=J(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=pH.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=gH.bind(null,e),e}var bN=(()=>{class t{constructor(){this.kind="memory",this.synchronizeTabs=!1}initialize(n){return _(this,null,function*(){this.serializer=ep(n.databaseInfo.databaseId),this.sharedClientState=this.bu(n),this.persistence=this.Du(n),yield this.persistence.start(),this.localStore=this.vu(n),this.gcScheduler=this.Cu(n,this.localStore),this.indexBackfillerScheduler=this.Fu(n,this.localStore)})}Cu(n,r){return null}Fu(n,r){return null}vu(n){return U$(this.persistence,new bE,n.initialUser,this.serializer)}Du(n){return new Sf(EE.Vi,this.serializer)}bu(n){return new TE}terminate(){return _(this,null,function*(){var n,r;(n=this.gcScheduler)===null||n===void 0||n.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}}return t.provider={build:()=>new t},t})(),WE=class extends bN{constructor(e){super(),this.cacheSizeBytes=e}Cu(e,n){be(this.persistence.referenceDelegate instanceof Af,46915);let r=this.persistence.referenceDelegate.garbageCollector;return new aE(r,e.asyncQueue,n)}Du(e){let n=this.cacheSizeBytes!==void 0?vn.withCacheSize(this.cacheSizeBytes):vn.DEFAULT;return new Sf(r=>Af.Vi(r,n),this.serializer)}};var EH=(()=>{class t{initialize(n,r){return _(this,null,function*(){this.localStore||(this.localStore=n.localStore,this.sharedClientState=n.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!n.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>JA(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=yH.bind(null,this.syncEngine),yield iH(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(n){return(function(){return new UE})()}createDatastore(n){let r=ep(n.databaseInfo.databaseId),i=(function(s){return new ME(s)})(n.databaseInfo);return(function(s,a,u,l){return new OE(s,a,u,l)})(n.authCredentials,n.appCheckCredentials,i,r)}createRemoteStore(n){return(function(i,o,s,a,u){return new LE(i,o,s,a,u)})(this.localStore,this.datastore,n.asyncQueue,r=>JA(this.syncEngine,r,0),(function(){return Nf.C()?new Nf:new SE})())}createSyncEngine(n,r){return(function(o,s,a,u,l,h,p){let m=new zE(o,s,a,u,l,h);return p&&(m.fu=!0),m})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,n.initialUser,n.maxConcurrentLimboResolutions,r)}terminate(){return _(this,null,function*(){var n,r;yield(function(o){return _(this,null,function*(){let s=J(o);B(zo,"RemoteStore shutting down."),s.Ia.add(5),yield Vu(s),s.Ea.shutdown(),s.Aa.set("Unknown")})})(this.remoteStore),(n=this.datastore)===null||n===void 0||n.terminate(),(r=this.eventManager)===null||r===void 0||r.terminate()})}}return t.provider={build:()=>new t},t})();var jf=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.xu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.xu(this.observer.error,e):Or("Uncaught Error in snapshot listener:",e.toString()))}Ou(){this.muted=!0}xu(e,n){setTimeout(()=>{this.muted||e(n)},0)}};var Ri="FirestoreClient",KE=class{constructor(e,n,r,i,o){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=ft.UNAUTHENTICATED,this.clientId=Su.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,s=>_(this,null,function*(){B(Ri,"Received user=",s.uid),yield this.authCredentialListener(s),this.user=s})),this.appCheckCredentials.start(r,s=>(B(Ri,"Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new kn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>_(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){let r=II(n,"Failed to shutdown persistence");e.reject(r)}})),e.promise}};function v_(t,e){return _(this,null,function*(){t.asyncQueue.verifyOperationInProgress(),B(Ri,"Initializing OfflineComponentProvider");let n=t.configuration;yield e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(i=>_(null,null,function*(){r.isEqual(i)||(yield aN(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener(()=>{Ci("Terminating Firestore due to IndexedDb database deletion"),t.terminate().then(()=>{B("Terminating Firestore due to IndexedDb database deletion completed successfully")}).catch(i=>{Ci("Terminating Firestore due to IndexedDb database deletion failed",i)})}),t._offlineComponents=e})}function eR(t,e){return _(this,null,function*(){t.asyncQueue.verifyOperationInProgress();let n=yield IH(t);B(Ri,"Initializing OnlineComponentProvider"),yield e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>QA(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>QA(e.remoteStore,i)),t._onlineComponents=e})}function IH(t){return _(this,null,function*(){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){B(Ri,"Using user provided OfflineComponentProvider");try{yield v_(t,t._uninitializedComponentsProvider._offline)}catch(e){let n=e;if(!(function(i){return i.name==="FirebaseError"?i.code===N.FAILED_PRECONDITION||i.code===N.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11})(n))throw n;Ci("Error using user provided cache. Falling back to memory cache: "+n),yield v_(t,new bN)}}else B(Ri,"Using default OfflineComponentProvider"),yield v_(t,new WE(void 0));return t._offlineComponents})}function DN(t){return _(this,null,function*(){return t._onlineComponents||(t._uninitializedComponentsProvider?(B(Ri,"Using user provided OnlineComponentProvider"),yield eR(t,t._uninitializedComponentsProvider._online)):(B(Ri,"Using default OnlineComponentProvider"),yield eR(t,new EH))),t._onlineComponents})}function wH(t){return DN(t).then(e=>e.syncEngine)}function CN(t){return _(this,null,function*(){let e=yield DN(t),n=e.eventManager;return n.onListen=aH.bind(null,e.syncEngine),n.onUnlisten=lH.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=cH.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=dH.bind(null,e.syncEngine),n})}function bH(t,e,n={}){let r=new kn;return t.asyncQueue.enqueueAndForget(()=>_(null,null,function*(){return(function(o,s,a,u,l){let h=new jf({next:m=>{h.Ou(),s.enqueueAndForget(()=>mN(o,p));let y=m.docs.has(a);!y&&m.fromCache?l.reject(new V(N.UNAVAILABLE,"Failed to get document because the client is offline.")):y&&m.fromCache&&u&&u.source==="server"?l.reject(new V(N.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):l.resolve(m)},error:m=>l.reject(m)}),p=new Ff(fI(a.path),h,{includeMetadataChanges:!0,ka:!0});return gN(o,p)})(yield CN(t),t.asyncQueue,e,n,r)})),r.promise}function DH(t,e,n={}){let r=new kn;return t.asyncQueue.enqueueAndForget(()=>_(null,null,function*(){return(function(o,s,a,u,l){let h=new jf({next:m=>{h.Ou(),s.enqueueAndForget(()=>mN(o,p)),m.fromCache&&u.source==="server"?l.reject(new V(N.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):l.resolve(m)},error:m=>l.reject(m)}),p=new Ff(a,h,{includeMetadataChanges:!0,ka:!0});return gN(o,p)})(yield CN(t),t.asyncQueue,e,n,r)})),r.promise}function TN(t){let e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}var tR=new Map;var SN="firestore.googleapis.com",nR=!0,Uf=class{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new V(N.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=SN,this.ssl=nR}else this.host=e.host,this.ssl=(n=e.ssl)!==null&&n!==void 0?n:nR;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=sN;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<L$)throw new V(N.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}OB("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=TN((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),(function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new V(N.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new V(N.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new V(N.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,i){return r.timeoutSeconds===i.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},Ea=class{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Uf({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new V(N.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new V(N.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Uf(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new __;switch(r.type){case"firstParty":return new b_(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new V(N.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}_restart(){return _(this,null,function*(){this._terminateTask==="notTerminated"?yield this._terminate():this._terminateTask="notTerminated"})}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){let r=tR.get(n);r&&(B("ComponentProvider","Removing Datastore"),tR.delete(n),r.terminate())})(this),Promise.resolve()}};function AN(t,e,n,r={}){var i;t=ir(t,Ea);let o=Do(e),s=t._getSettings(),a=Object.assign(Object.assign({},s),{emulatorOptions:t._getEmulatorOptions()}),u=`${e}:${n}`;o&&(Dv(`https://${u}`),Cv("Firestore",!0)),s.host!==SN&&s.host!==u&&Ci("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");let l=Object.assign(Object.assign({},s),{host:u,ssl:o,emulatorOptions:r});if(!To(l,a)&&(t._setSettings(l),r.mockUserToken)){let h,p;if(typeof r.mockUserToken=="string")h=r.mockUserToken,p=ft.MOCK_USER;else{h=pS(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);let m=r.mockUserToken.sub||r.mockUserToken.user_id;if(!m)throw new V(N.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");p=new ft(m)}t._authCredentials=new E_(new hf(h,p))}}var Go=class t{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new t(this.firestore,e,this._query)}},gt=class t{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ii(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new t(this.firestore,e,this._key)}toJSON(){return{type:t._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(Lu(n,t._jsonSchema))return new t(e,r||null,new G(Oe.fromString(n.referencePath)))}};gt._jsonSchemaVersion="firestore/documentReference/1.0",gt._jsonSchema={type:tt("string",gt._jsonSchemaVersion),referencePath:tt("string")};var Ii=class t extends Go{constructor(e,n,r){super(e,n,fI(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new gt(this.firestore,null,new G(e))}withConverter(e){return new t(this.firestore,e,this._path)}};function RN(t,e,...n){if(t=Ze(t),uR("collection","path",e),t instanceof Ea){let r=Oe.fromString(e,...n);return EA(r),new Ii(t,null,r)}{if(!(t instanceof gt||t instanceof Ii))throw new V(N.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=t._path.child(Oe.fromString(e,...n));return EA(r),new Ii(t.firestore,null,r)}}function CI(t,e,...n){if(t=Ze(t),arguments.length===1&&(e=Su.newId()),uR("doc","path",e),t instanceof Ea){let r=Oe.fromString(e,...n);return _A(r),new gt(t,null,new G(r))}{if(!(t instanceof gt||t instanceof Ii))throw new V(N.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=t._path.child(Oe.fromString(e,...n));return _A(r),new gt(t.firestore,t instanceof Ii?t.converter:null,new G(r))}}var rR="AsyncQueue",Bf=class{constructor(e=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new Mf(this,"async_queue_retry"),this.oc=()=>{let r=y_();r&&B(rR,"Visibility state changed to "+r.visibilityState),this.F_.y_()},this._c=e;let n=y_();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ac(),this.uc(e)}enterRestrictedMode(e){if(!this.Xu){this.Xu=!0,this.rc=e||!1;let n=y_();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.oc)}}enqueue(e){if(this.ac(),this.Xu)return new Promise(()=>{});let n=new kn;return this.uc(()=>this.Xu&&this.rc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Zu.push(e),this.cc()))}cc(){return _(this,null,function*(){if(this.Zu.length!==0){try{yield this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(e){if(!Ca(e))throw e;B(rR,"Operation failed with retryable error: "+e)}this.Zu.length>0&&this.F_.g_(()=>this.cc())}})}uc(e){let n=this._c.then(()=>(this.nc=!0,e().catch(r=>{throw this.tc=r,this.nc=!1,Or("INTERNAL UNHANDLED ERROR: ",iR(r)),r}).then(r=>(this.nc=!1,r))));return this._c=n,n}enqueueAfterDelay(e,n,r){this.ac(),this.sc.indexOf(e)>-1&&(n=0);let i=VE.createAndSchedule(this,e,n,r,o=>this.lc(o));return this.ec.push(i),i}ac(){this.tc&&W(47125,{hc:iR(this.tc)})}verifyOperationInProgress(){}Pc(){return _(this,null,function*(){let e;do e=this._c,yield e;while(e!==this._c)})}Tc(e){for(let n of this.ec)if(n.timerId===e)return!0;return!1}Ic(e){return this.Pc().then(()=>{this.ec.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(let n of this.ec)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Pc()})}dc(e){this.sc.push(e)}lc(e){let n=this.ec.indexOf(e);this.ec.splice(n,1)}};function iR(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}var Ni=class extends Ea{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new Bf,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return _(this,null,function*(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new Bf(e),this._firestoreClient=void 0,yield e}})}};function NN(t,e){let n=typeof t=="object"?t:Ar(),r=typeof t=="string"?t:e||yf,i=Tr(n,"firestore").getImmediate({identifier:r});if(!i._initialized){let o=hS("firestore");o&&AN(i,...o)}return i}function TI(t){if(t._terminated)throw new V(N.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||CH(t),t._firestoreClient}function CH(t){var e,n,r;let i=t._freezeSettings(),o=(function(a,u,l,h){return new A_(a,u,l,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,TN(h.experimentalLongPollingOptions),h.useFetchStreams,h.isUsingEmulator)})(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._componentsProvider||!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),t._firestoreClient=new KE(t._authCredentials,t._appCheckCredentials,t._queue,o,t._componentsProvider&&(function(a){let u=a?._online.build();return{_offline:a?._offline.build(u),_online:u}})(t._componentsProvider))}var wi=class t{constructor(e){this._byteString=e}static fromBase64String(e){try{return new t(Mt.fromBase64String(e))}catch(n){throw new V(N.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new t(Mt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:t._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Lu(e,t._jsonSchema))return t.fromBase64String(e.bytes)}};wi._jsonSchemaVersion="firestore/bytes/1.0",wi._jsonSchema={type:tt("string",wi._jsonSchemaVersion),bytes:tt("string")};var Ia=class{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new V(N.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new cn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var wa=class{constructor(e){this._methodName=e}};var bi=class t{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new V(N.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new V(N.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return ce(this._lat,e._lat)||ce(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:t._jsonSchemaVersion}}static fromJSON(e){if(Lu(e,t._jsonSchema))return new t(e.latitude,e.longitude)}};bi._jsonSchemaVersion="firestore/geoPoint/1.0",bi._jsonSchema={type:tt("string",bi._jsonSchemaVersion),latitude:tt("number"),longitude:tt("number")};var Di=class t{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return(function(r,i){if(r.length!==i.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0})(this._values,e._values)}toJSON(){return{type:t._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Lu(e,t._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new t(e.vectorValues);throw new V(N.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}};Di._jsonSchemaVersion="firestore/vectorValue/1.0",Di._jsonSchema={type:tt("string",Di._jsonSchemaVersion),vectorValues:tt("object")};var TH=/^__.*__$/,QE=class{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new sr(e,this.data,this.fieldMask,n,this.fieldTransforms):new qo(e,this.data,n,this.fieldTransforms)}},$f=class{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new sr(e,this.data,this.fieldMask,n,this.fieldTransforms)}};function MN(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw W(40011,{Ec:t})}}var YE=class t{constructor(e,n,r,i,o,s){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,o===void 0&&this.Ac(),this.fieldTransforms=o||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(e){return new t(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(e){var n;let r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Rc({path:r,mc:!1});return i.fc(e),i}gc(e){var n;let r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Rc({path:r,mc:!1});return i.Ac(),i}yc(e){return this.Rc({path:void 0,mc:!0})}wc(e){return qf(e,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Ac(){if(this.path)for(let e=0;e<this.path.length;e++)this.fc(this.path.get(e))}fc(e){if(e.length===0)throw this.wc("Document fields must not be empty");if(MN(this.Ec)&&TH.test(e))throw this.wc('Document fields cannot begin and end with "__"')}},ZE=class{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||ep(e)}Dc(e,n,r,i=!1){return new YE({Ec:e,methodName:n,bc:r,path:cn.emptyPath(),mc:!1,Sc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function rp(t){let e=t._freezeSettings(),n=ep(t._databaseId);return new ZE(t._databaseId,!!e.ignoreUndefinedProperties,n)}function PN(t,e,n,r,i,o={}){let s=t.Dc(o.merge||o.mergeFields?2:0,e,n,i);SI("Data must be an object, but it was:",s,r);let a=xN(r,s),u,l;if(o.merge)u=new _n(s.fieldMask),l=s.fieldTransforms;else if(o.mergeFields){let h=[];for(let p of o.mergeFields){let m=XE(e,p,n);if(!s.contains(m))throw new V(N.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);ON(h,m)||h.push(m)}u=new _n(h),l=s.fieldTransforms.filter(p=>u.covers(p.field))}else u=null,l=s.fieldTransforms;return new QE(new an(a),u,l)}var Hf=class t extends wa{_toFieldTransform(e){if(e.Ec!==2)throw e.Ec===1?e.wc(`${this._methodName}() can only appear at the top level of your update data`):e.wc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof t}};var JE=class t extends wa{_toFieldTransform(e){return new H_(e.path,new Bo)}isEqual(e){return e instanceof t}};function SH(t,e,n,r){let i=t.Dc(1,e,n);SI("Data must be an object, but it was:",i,r);let o=[],s=an.empty();Mi(r,(u,l)=>{let h=AI(e,u,n);l=Ze(l);let p=i.gc(h);if(l instanceof Hf)o.push(h);else{let m=Uu(l,p);m!=null&&(o.push(h),s.set(h,m))}});let a=new _n(o);return new $f(s,a,i.fieldTransforms)}function AH(t,e,n,r,i,o){let s=t.Dc(1,e,n),a=[XE(e,r,n)],u=[i];if(o.length%2!=0)throw new V(N.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let m=0;m<o.length;m+=2)a.push(XE(e,o[m])),u.push(o[m+1]);let l=[],h=an.empty();for(let m=a.length-1;m>=0;--m)if(!ON(l,a[m])){let y=a[m],S=u[m];S=Ze(S);let P=s.gc(y);if(S instanceof Hf)l.push(y);else{let M=Uu(S,P);M!=null&&(l.push(y),h.set(y,M))}}let p=new _n(l);return new $f(h,p,s.fieldTransforms)}function RH(t,e,n,r=!1){return Uu(n,t.Dc(r?4:3,e))}function Uu(t,e){if(kN(t=Ze(t)))return SI("Unsupported field value:",e,t),xN(t,e);if(t instanceof wa)return(function(r,i){if(!MN(i.Ec))throw i.wc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.wc(`${r._methodName}() is not currently supported inside arrays`);let o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)})(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.mc&&e.Ec!==4)throw e.wc("Nested arrays are not supported");return(function(r,i){let o=[],s=0;for(let a of r){let u=Uu(a,i.yc(s));u==null&&(u={nullValue:"NULL_VALUE"}),o.push(u),s++}return{arrayValue:{values:o}}})(t,e)}return(function(r,i){if((r=Ze(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return h$(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let o=nt.fromDate(r);return{timestampValue:Cf(i.serializer,o)}}if(r instanceof nt){let o=new nt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Cf(i.serializer,o)}}if(r instanceof bi)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof wi)return{bytesValue:XR(i.serializer,r._byteString)};if(r instanceof gt){let o=i.databaseId,s=r.firestore._databaseId;if(!s.isEqual(o))throw i.wc(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:gI(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Di)return(function(s,a){return{mapValue:{fields:{[cI]:{stringValue:uI},[ha]:{arrayValue:{values:s.toArray().map(l=>{if(typeof l!="number")throw a.wc("VectorValues must only contain numeric values.");return pI(a.serializer,l)})}}}}}})(r,i);throw i.wc(`Unsupported field value: ${Qf(r)}`)})(t,e)}function xN(t,e){let n={};return CR(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Mi(t,(r,i)=>{let o=Uu(i,e.Vc(r));o!=null&&(n[r]=o)}),{mapValue:{fields:n}}}function kN(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof nt||t instanceof bi||t instanceof wi||t instanceof gt||t instanceof wa||t instanceof Di)}function SI(t,e,n){if(!kN(n)||!lR(n)){let r=Qf(n);throw r==="an object"?e.wc(t+" a custom object"):e.wc(t+" "+r)}}function XE(t,e,n){if((e=Ze(e))instanceof Ia)return e._internalPath;if(typeof e=="string")return AI(t,e);throw qf("Field path arguments must be of type string or ",t,!1,void 0,n)}var NH=new RegExp("[~\\*/\\[\\]]");function AI(t,e,n){if(e.search(NH)>=0)throw qf(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Ia(...e.split("."))._internalPath}catch{throw qf(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function qf(t,e,n,r,i){let o=r&&!r.isEmpty(),s=i!==void 0,a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let u="";return(o||s)&&(u+=" (found",o&&(u+=` in field ${r}`),s&&(u+=` in document ${i}`),u+=")"),new V(N.INVALID_ARGUMENT,a+t+u)}function ON(t,e){return t.some(n=>n.isEqual(e))}var zf=class{constructor(e,n,r,i,o){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new gt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new eI(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let n=this._document.data.field(ip("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}},eI=class extends zf{data(){return super.data()}};function ip(t,e){return typeof e=="string"?AI(t,e):e instanceof Ia?e._internalPath:e._delegate._internalPath}function MH(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new V(N.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var Fu=class{},Gf=class extends Fu{};function FN(t,e,...n){let r=[];e instanceof Fu&&r.push(e),r=r.concat(n),(function(o){let s=o.filter(u=>u instanceof tI).length,a=o.filter(u=>u instanceof Wf).length;if(s>1||s>0&&a>0)throw new V(N.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(let i of r)t=i._apply(t);return t}var Wf=class t extends Gf{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new t(e,n,r)}_apply(e){let n=this._parse(e);return jN(e._query,n),new Go(e.firestore,e.converter,B_(e._query,n))}_parse(e){let n=rp(e.firestore);return(function(o,s,a,u,l,h,p){let m;if(l.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new V(N.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){sR(p,h);let S=[];for(let P of p)S.push(oR(u,o,P));m={arrayValue:{values:S}}}else m=oR(u,o,p)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||sR(p,h),m=RH(a,s,p,h==="in"||h==="not-in");return et.create(l,h,m)})(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}};function LN(t,e,n){let r=e,i=ip("where",t);return Wf._create(i,r,n)}var tI=class t extends Fu{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new t(e,n)}_parse(e){let n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:Fn.create(n,this._getOperator())}_apply(e){let n=this._parse(e);return n.getFilters().length===0?e:((function(i,o){let s=i,a=o.getFlattenedFilters();for(let u of a)jN(s,u),s=B_(s,u)})(e._query,n),new Go(e.firestore,e.converter,B_(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};var nI=class t extends Gf{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new t(e,n)}_apply(e){let n=(function(i,o,s){if(i.startAt!==null)throw new V(N.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new V(N.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Uo(o,s)})(e._query,this._field,this._direction);return new Go(e.firestore,e.converter,(function(i,o){let s=i.explicitOrderBy.concat([o]);return new Si(i.path,i.collectionGroup,s,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)})(e._query,n))}};function VN(t,e="asc"){let n=e,r=ip("orderBy",t);return nI._create(r,n)}function oR(t,e,n){if(typeof(n=Ze(n))=="string"){if(n==="")throw new V(N.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!jR(e)&&n.indexOf("/")!==-1)throw new V(N.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);let r=e.path.child(Oe.fromString(n));if(!G.isDocumentKey(r))throw new V(N.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return SA(t,new G(r))}if(n instanceof gt)return SA(t,n._key);throw new V(N.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Qf(n)}.`)}function sR(t,e){if(!Array.isArray(t)||t.length===0)throw new V(N.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function jN(t,e){let n=(function(i,o){for(let s of i)for(let a of s.getFlattenedFilters())if(o.indexOf(a.op)>=0)return a.op;return null})(t.filters,(function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(n!==null)throw n===e.op?new V(N.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new V(N.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}var rI=class{convertValue(e,n="none"){switch(Ti(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ke(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Lr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw W(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){let r={};return Mi(e,(i,o)=>{r[i]=this.convertValue(o,n)}),r}convertVectorValue(e){var n,r,i;let o=(i=(r=(n=e.fields)===null||n===void 0?void 0:n[ha].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(s=>ke(s.doubleValue));return new Di(o)}convertGeoPoint(e){return new bi(ke(e.latitude),ke(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":let r=Zf(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Nu(e));default:return null}}convertTimestamp(e){let n=Fr(e);return new nt(n.seconds,n.nanos)}convertDocumentKey(e,n){let r=Oe.fromString(e);be(oN(r),9688,{name:e});let i=new vf(r.get(1),r.get(3)),o=new G(r.popFirst(5));return i.isEqual(n)||Or(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),o}};function UN(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}var Fo=class{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},Lo=class t extends zf{constructor(e,n,r,i,o,s){super(e,n,r,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let n=new ua(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){let r=this._document.data.field(ip("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new V(N.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e=this._document,n={};return n.type=t._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}};Lo._jsonSchemaVersion="firestore/documentSnapshot/1.0",Lo._jsonSchema={type:tt("string",Lo._jsonSchemaVersion),bundleSource:tt("string","DocumentSnapshot"),bundleName:tt("string"),bundle:tt("string")};var ua=class extends Lo{data(e={}){return super.data(e)}},la=class t{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new Fo(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new ua(this._firestore,this._userDataWriter,r.key,r,new Fo(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new V(N.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(i,o){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(a=>{let u=new ua(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Fo(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:u,oldIndex:-1,newIndex:s++}})}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>o||a.type!==3).map(a=>{let u=new ua(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Fo(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),l=-1,h=-1;return a.type!==0&&(l=s.indexOf(a.doc.key),s=s.delete(a.doc.key)),a.type!==1&&(s=s.add(a.doc),h=s.indexOf(a.doc.key)),{type:PH(a.type),doc:u,oldIndex:l,newIndex:h}})}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new V(N.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e={};e.type=t._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Su.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;let n=[],r=[],i=[];return this.docs.forEach(o=>{o._document!==null&&(n.push(o._document),r.push(this._userDataWriter.convertObjectMap(o._document.data.value.mapValue.fields,"previous")),i.push(o.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}};function PH(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return W(61501,{type:t})}}function BN(t){t=ir(t,gt);let e=ir(t.firestore,Ni);return bH(TI(e),t._key).then(n=>xH(e,t,n))}la._jsonSchemaVersion="firestore/querySnapshot/1.0",la._jsonSchema={type:tt("string",la._jsonSchemaVersion),bundleSource:tt("string","QuerySnapshot"),bundleName:tt("string"),bundle:tt("string")};var Kf=class extends rI{constructor(e){super(),this.firestore=e}convertBytes(e){return new wi(e)}convertReference(e){let n=this.convertDocumentKey(e,this.firestore._databaseId);return new gt(this.firestore,null,n)}};function $N(t){t=ir(t,Go);let e=ir(t.firestore,Ni),n=TI(e),r=new Kf(e);return MH(t._query),DH(n,t._query).then(i=>new la(e,r,t,i))}function HN(t,e,n){t=ir(t,gt);let r=ir(t.firestore,Ni),i=UN(t.converter,e,n);return RI(r,[PN(rp(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,kr.none())])}function qN(t,e,n,...r){t=ir(t,gt);let i=ir(t.firestore,Ni),o=rp(i),s;return s=typeof(e=Ze(e))=="string"||e instanceof Ia?AH(o,"updateDoc",t._key,e,n,r):SH(o,"updateDoc",t._key,e),RI(i,[s.toMutation(t._key,kr.exists(!0))])}function zN(t,e){let n=ir(t.firestore,Ni),r=CI(t),i=UN(t.converter,e);return RI(n,[PN(rp(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,kr.exists(!1))]).then(()=>r)}function RI(t,e){return(function(r,i){let o=new kn;return r.asyncQueue.enqueueAndForget(()=>_(null,null,function*(){return hH(yield wH(r),i,o)})),o.promise})(TI(t),e)}function xH(t,e,n){let r=n.docs.get(e._key),i=new Kf(t);return new Lo(t,i,e._key,r,new Fo(n.hasPendingWrites,n.fromCache),e.converter)}function GN(){return new JE("serverTimestamp")}(function(e,n=!0){(function(i){ba=i})(Xs),wt(new ze("firestore",(r,{instanceIdentifier:i,options:o})=>{let s=r.getProvider("app").getImmediate(),a=new Ni(new I_(r.getProvider("auth-internal")),new D_(s,r.getProvider("app-check-internal")),(function(l,h){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new V(N.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new vf(l.options.projectId,h)})(s,i),s);return o=Object.assign({useFetchStreams:n},o),a._setSettings(o),a},"PUBLIC").setMultipleInstances(!0)),Ce(gA,mA,e),Ce(gA,mA,"esm2017")})();var st=class{constructor(e){return e}},WN="firestore",NI=class{constructor(){return vi(WN)}};var MI=new q("angularfire2.firestore-instances");function kH(t,e){let n=ta(WN,t,e);return n&&new st(n)}function OH(t){return(e,n)=>{let r=e.runOutsideAngular(()=>t(n));return new st(r)}}var FH={provide:NI,deps:[[new mn,MI]]},LH={provide:st,useFactory:kH,deps:[[new mn,MI],Mr]};function KN(t,...e){return Ce("angularfire",Rr.full,"fst"),Bn([LH,FH,{provide:MI,useFactory:OH(t),multi:!0,deps:[Se,Ne,Nr,No,[new mn,nf],[new mn,qh],...e]}])}var op=ht(zN,!0,2);var Pt=ht(RN,!0,2);var Ko=ht(CI,!0,2);var Sa=ht(BN,!0);var xt=ht($N,!0);var QN=ht(NN,!0);var YN=ht(VN,!0,2),un=ht(FN,!0,2);var Pi=ht(HN,!0,2);var ZN=ht(qN,!0,2);var Ur=ht(LN,!0,2);var eM="@firebase/installations",OI="0.6.18";var tM=1e4,nM=`w:${OI}`,rM="FIS_v2",jH="https://firebaseinstallations.googleapis.com/v1",UH=3600*1e3,BH="installations",$H="Installations";var HH={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},Yo=new $t(BH,$H,HH);function iM(t){return t instanceof Qt&&t.code.includes("request-failed")}function oM({projectId:t}){return`${jH}/projects/${t}/installations`}function sM(t){return{token:t.token,requestStatus:2,expiresIn:zH(t.expiresIn),creationTime:Date.now()}}function aM(t,e){return _(this,null,function*(){let r=(yield e.json()).error;return Yo.create("request-failed",{requestName:t,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})})}function cM({apiKey:t}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function qH(t,{refreshToken:e}){let n=cM(t);return n.append("Authorization",GH(e)),n}function uM(t){return _(this,null,function*(){let e=yield t();return e.status>=500&&e.status<600?t():e})}function zH(t){return Number(t.replace("s","000"))}function GH(t){return`${rM} ${t}`}function WH(r,i){return _(this,arguments,function*({appConfig:t,heartbeatServiceProvider:e},{fid:n}){let o=oM(t),s=cM(t),a=e.getImmediate({optional:!0});if(a){let p=yield a.getHeartbeatsHeader();p&&s.append("x-firebase-client",p)}let u={fid:n,authVersion:rM,appId:t.appId,sdkVersion:nM},l={method:"POST",headers:s,body:JSON.stringify(u)},h=yield uM(()=>fetch(o,l));if(h.ok){let p=yield h.json();return{fid:p.fid||n,registrationStatus:2,refreshToken:p.refreshToken,authToken:sM(p.authToken)}}else throw yield aM("Create Installation",h)})}function lM(t){return new Promise(e=>{setTimeout(e,t)})}function KH(t){return btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_")}var QH=/^[cdef][\w-]{21}$/,kI="";function YH(){try{let t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;let n=ZH(t);return QH.test(n)?n:kI}catch{return kI}}function ZH(t){return KH(t).substr(0,22)}function ap(t){return`${t.appName}!${t.appId}`}var dM=new Map;function hM(t,e){let n=ap(t);fM(n,e),JH(n,e)}function fM(t,e){let n=dM.get(t);if(n)for(let r of n)r(e)}function JH(t,e){let n=XH();n&&n.postMessage({key:t,fid:e}),e4()}var Qo=null;function XH(){return!Qo&&"BroadcastChannel"in self&&(Qo=new BroadcastChannel("[Firebase] FID Change"),Qo.onmessage=t=>{fM(t.data.key,t.data.fid)}),Qo}function e4(){dM.size===0&&Qo&&(Qo.close(),Qo=null)}var t4="firebase-installations-database",n4=1,Zo="firebase-installations-store",PI=null;function FI(){return PI||(PI=Ao(t4,n4,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(Zo)}}})),PI}function sp(t,e){return _(this,null,function*(){let n=ap(t),i=(yield FI()).transaction(Zo,"readwrite"),o=i.objectStore(Zo),s=yield o.get(n);return yield o.put(e,n),yield i.done,(!s||s.fid!==e.fid)&&hM(t,e.fid),e})}function pM(t){return _(this,null,function*(){let e=ap(t),r=(yield FI()).transaction(Zo,"readwrite");yield r.objectStore(Zo).delete(e),yield r.done})}function cp(t,e){return _(this,null,function*(){let n=ap(t),i=(yield FI()).transaction(Zo,"readwrite"),o=i.objectStore(Zo),s=yield o.get(n),a=e(s);return a===void 0?yield o.delete(n):yield o.put(a,n),yield i.done,a&&(!s||s.fid!==a.fid)&&hM(t,a.fid),a})}function LI(t){return _(this,null,function*(){let e,n=yield cp(t.appConfig,r=>{let i=r4(r),o=i4(t,i);return e=o.registrationPromise,o.installationEntry});return n.fid===kI?{installationEntry:yield e}:{installationEntry:n,registrationPromise:e}})}function r4(t){let e=t||{fid:YH(),registrationStatus:0};return gM(e)}function i4(t,e){if(e.registrationStatus===0){if(!navigator.onLine){let i=Promise.reject(Yo.create("app-offline"));return{installationEntry:e,registrationPromise:i}}let n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=o4(t,n);return{installationEntry:n,registrationPromise:r}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:s4(t)}:{installationEntry:e}}function o4(t,e){return _(this,null,function*(){try{let n=yield WH(t,e);return sp(t.appConfig,n)}catch(n){throw iM(n)&&n.customData.serverCode===409?yield pM(t.appConfig):yield sp(t.appConfig,{fid:e.fid,registrationStatus:0}),n}})}function s4(t){return _(this,null,function*(){let e=yield JN(t.appConfig);for(;e.registrationStatus===1;)yield lM(100),e=yield JN(t.appConfig);if(e.registrationStatus===0){let{installationEntry:n,registrationPromise:r}=yield LI(t);return r||n}return e})}function JN(t){return cp(t,e=>{if(!e)throw Yo.create("installation-not-found");return gM(e)})}function gM(t){return a4(t)?{fid:t.fid,registrationStatus:0}:t}function a4(t){return t.registrationStatus===1&&t.registrationTime+tM<Date.now()}function c4(r,i){return _(this,arguments,function*({appConfig:t,heartbeatServiceProvider:e},n){let o=u4(t,n),s=qH(t,n),a=e.getImmediate({optional:!0});if(a){let p=yield a.getHeartbeatsHeader();p&&s.append("x-firebase-client",p)}let u={installation:{sdkVersion:nM,appId:t.appId}},l={method:"POST",headers:s,body:JSON.stringify(u)},h=yield uM(()=>fetch(o,l));if(h.ok){let p=yield h.json();return sM(p)}else throw yield aM("Generate Auth Token",h)})}function u4(t,{fid:e}){return`${oM(t)}/${e}/authTokens:generate`}function VI(t,e=!1){return _(this,null,function*(){let n,r=yield cp(t.appConfig,o=>{if(!mM(o))throw Yo.create("not-registered");let s=o.authToken;if(!e&&h4(s))return o;if(s.requestStatus===1)return n=l4(t,e),o;{if(!navigator.onLine)throw Yo.create("app-offline");let a=p4(o);return n=d4(t,a),a}});return n?yield n:r.authToken})}function l4(t,e){return _(this,null,function*(){let n=yield XN(t.appConfig);for(;n.authToken.requestStatus===1;)yield lM(100),n=yield XN(t.appConfig);let r=n.authToken;return r.requestStatus===0?VI(t,e):r})}function XN(t){return cp(t,e=>{if(!mM(e))throw Yo.create("not-registered");let n=e.authToken;return g4(n)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}function d4(t,e){return _(this,null,function*(){try{let n=yield c4(t,e),r=Object.assign(Object.assign({},e),{authToken:n});return yield sp(t.appConfig,r),n}catch(n){if(iM(n)&&(n.customData.serverCode===401||n.customData.serverCode===404))yield pM(t.appConfig);else{let r=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});yield sp(t.appConfig,r)}throw n}})}function mM(t){return t!==void 0&&t.registrationStatus===2}function h4(t){return t.requestStatus===2&&!f4(t)}function f4(t){let e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+UH}function p4(t){let e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},t),{authToken:e})}function g4(t){return t.requestStatus===1&&t.requestTime+tM<Date.now()}function m4(t){return _(this,null,function*(){let e=t,{installationEntry:n,registrationPromise:r}=yield LI(e);return r?r.catch(console.error):VI(e).catch(console.error),n.fid})}function y4(t,e=!1){return _(this,null,function*(){let n=t;return yield v4(n),(yield VI(n,e)).token})}function v4(t){return _(this,null,function*(){let{registrationPromise:e}=yield LI(t);e&&(yield e)})}function _4(t){if(!t||!t.options)throw xI("App Configuration");if(!t.name)throw xI("App Name");let e=["projectId","apiKey","appId"];for(let n of e)if(!t.options[n])throw xI(n);return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}function xI(t){return Yo.create("missing-app-config-values",{valueName:t})}var yM="installations",E4="installations-internal",I4=t=>{let e=t.getProvider("app").getImmediate(),n=_4(e),r=Tr(e,"heartbeat");return{app:e,appConfig:n,heartbeatServiceProvider:r,_delete:()=>Promise.resolve()}},w4=t=>{let e=t.getProvider("app").getImmediate(),n=Tr(e,yM).getImmediate();return{getId:()=>m4(n),getToken:i=>y4(n,i)}};function b4(){wt(new ze(yM,I4,"PUBLIC")),wt(new ze(E4,w4,"PRIVATE"))}b4();Ce(eM,OI);Ce(eM,OI,"esm2017");var D4="/firebase-messaging-sw.js",C4="/firebase-cloud-messaging-push-scope",DM="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",T4="https://fcmregistrations.googleapis.com/v1",CM="google.c.a.c_id",S4="google.c.a.c_l",A4="google.c.a.ts",R4="google.c.a.e",vM=1e4;var up=(function(t){return t.PUSH_RECEIVED="push-received",t.NOTIFICATION_CLICKED="notification-clicked",t})(up||{});function Br(t){let e=new Uint8Array(t);return btoa(String.fromCharCode(...e)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function N4(t){let e="=".repeat((4-t.length%4)%4),n=(t+e).replace(/\-/g,"+").replace(/_/g,"/"),r=atob(n),i=new Uint8Array(r.length);for(let o=0;o<r.length;++o)i[o]=r.charCodeAt(o);return i}var jI="fcm_token_details_db",M4=5,_M="fcm_token_object_Store";function P4(t){return _(this,null,function*(){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(o=>o.name).includes(jI))return null;let e=null;return(yield Ao(jI,M4,{upgrade:(r,i,o,s)=>_(null,null,function*(){var a;if(i<2||!r.objectStoreNames.contains(_M))return;let u=s.objectStore(_M),l=yield u.index("fcmSenderId").get(t);if(yield u.clear(),!!l){if(i===2){let h=l;if(!h.auth||!h.p256dh||!h.endpoint)return;e={token:h.fcmToken,createTime:(a=h.createTime)!==null&&a!==void 0?a:Date.now(),subscriptionOptions:{auth:h.auth,p256dh:h.p256dh,endpoint:h.endpoint,swScope:h.swScope,vapidKey:typeof h.vapidKey=="string"?h.vapidKey:Br(h.vapidKey)}}}else if(i===3){let h=l;e={token:h.fcmToken,createTime:h.createTime,subscriptionOptions:{auth:Br(h.auth),p256dh:Br(h.p256dh),endpoint:h.endpoint,swScope:h.swScope,vapidKey:Br(h.vapidKey)}}}else if(i===4){let h=l;e={token:h.fcmToken,createTime:h.createTime,subscriptionOptions:{auth:Br(h.auth),p256dh:Br(h.p256dh),endpoint:h.endpoint,swScope:h.swScope,vapidKey:Br(h.vapidKey)}}}}})})).close(),yield Uh(jI),yield Uh("fcm_vapid_details_db"),yield Uh("undefined"),x4(e)?e:null})}function x4(t){if(!t||!t.subscriptionOptions)return!1;let{subscriptionOptions:e}=t;return typeof t.createTime=="number"&&t.createTime>0&&typeof t.token=="string"&&t.token.length>0&&typeof e.auth=="string"&&e.auth.length>0&&typeof e.p256dh=="string"&&e.p256dh.length>0&&typeof e.endpoint=="string"&&e.endpoint.length>0&&typeof e.swScope=="string"&&e.swScope.length>0&&typeof e.vapidKey=="string"&&e.vapidKey.length>0}var k4="firebase-messaging-database",O4=1,Bu="firebase-messaging-store",UI=null;function TM(){return UI||(UI=Ao(k4,O4,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(Bu)}}})),UI}function F4(t){return _(this,null,function*(){let e=SM(t),r=yield(yield TM()).transaction(Bu).objectStore(Bu).get(e);if(r)return r;{let i=yield P4(t.appConfig.senderId);if(i)return yield HI(t,i),i}})}function HI(t,e){return _(this,null,function*(){let n=SM(t),i=(yield TM()).transaction(Bu,"readwrite");return yield i.objectStore(Bu).put(e,n),yield i.done,e})}function SM({appConfig:t}){return t.appId}var L4={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."},kt=new $t("messaging","Messaging",L4);function V4(t,e){return _(this,null,function*(){let n=yield zI(t),r=AM(e),i={method:"POST",headers:n,body:JSON.stringify(r)},o;try{o=yield(yield fetch(qI(t.appConfig),i)).json()}catch(s){throw kt.create("token-subscribe-failed",{errorInfo:s?.toString()})}if(o.error){let s=o.error.message;throw kt.create("token-subscribe-failed",{errorInfo:s})}if(!o.token)throw kt.create("token-subscribe-no-token");return o.token})}function j4(t,e){return _(this,null,function*(){let n=yield zI(t),r=AM(e.subscriptionOptions),i={method:"PATCH",headers:n,body:JSON.stringify(r)},o;try{o=yield(yield fetch(`${qI(t.appConfig)}/${e.token}`,i)).json()}catch(s){throw kt.create("token-update-failed",{errorInfo:s?.toString()})}if(o.error){let s=o.error.message;throw kt.create("token-update-failed",{errorInfo:s})}if(!o.token)throw kt.create("token-update-no-token");return o.token})}function U4(t,e){return _(this,null,function*(){let r={method:"DELETE",headers:yield zI(t)};try{let o=yield(yield fetch(`${qI(t.appConfig)}/${e}`,r)).json();if(o.error){let s=o.error.message;throw kt.create("token-unsubscribe-failed",{errorInfo:s})}}catch(i){throw kt.create("token-unsubscribe-failed",{errorInfo:i?.toString()})}})}function qI({projectId:t}){return`${T4}/projects/${t}/registrations`}function zI(n){return _(this,arguments,function*({appConfig:t,installations:e}){let r=yield e.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t.apiKey,"x-goog-firebase-installations-auth":`FIS ${r}`})})}function AM({p256dh:t,auth:e,endpoint:n,vapidKey:r}){let i={web:{endpoint:n,auth:e,p256dh:t}};return r!==DM&&(i.web.applicationPubKey=r),i}var B4=10080*60*1e3;function $4(t){return _(this,null,function*(){let e=yield q4(t.swRegistration,t.vapidKey),n={vapidKey:t.vapidKey,swScope:t.swRegistration.scope,endpoint:e.endpoint,auth:Br(e.getKey("auth")),p256dh:Br(e.getKey("p256dh"))},r=yield F4(t.firebaseDependencies);if(r){if(z4(r.subscriptionOptions,n))return Date.now()>=r.createTime+B4?H4(t,{token:r.token,createTime:Date.now(),subscriptionOptions:n}):r.token;try{yield U4(t.firebaseDependencies,r.token)}catch(i){console.warn(i)}return EM(t.firebaseDependencies,n)}else return EM(t.firebaseDependencies,n)})}function H4(t,e){return _(this,null,function*(){try{let n=yield j4(t.firebaseDependencies,e),r=Object.assign(Object.assign({},e),{token:n,createTime:Date.now()});return yield HI(t.firebaseDependencies,r),n}catch(n){throw n}})}function EM(t,e){return _(this,null,function*(){let r={token:yield V4(t,e),createTime:Date.now(),subscriptionOptions:e};return yield HI(t,r),r.token})}function q4(t,e){return _(this,null,function*(){let n=yield t.pushManager.getSubscription();return n||t.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:N4(e)})})}function z4(t,e){let n=e.vapidKey===t.vapidKey,r=e.endpoint===t.endpoint,i=e.auth===t.auth,o=e.p256dh===t.p256dh;return n&&r&&i&&o}function IM(t){let e={from:t.from,collapseKey:t.collapse_key,messageId:t.fcmMessageId};return G4(e,t),W4(e,t),K4(e,t),e}function G4(t,e){if(!e.notification)return;t.notification={};let n=e.notification.title;n&&(t.notification.title=n);let r=e.notification.body;r&&(t.notification.body=r);let i=e.notification.image;i&&(t.notification.image=i);let o=e.notification.icon;o&&(t.notification.icon=o)}function W4(t,e){e.data&&(t.data=e.data)}function K4(t,e){var n,r,i,o,s;if(!e.fcmOptions&&!(!((n=e.notification)===null||n===void 0)&&n.click_action))return;t.fcmOptions={};let a=(i=(r=e.fcmOptions)===null||r===void 0?void 0:r.link)!==null&&i!==void 0?i:(o=e.notification)===null||o===void 0?void 0:o.click_action;a&&(t.fcmOptions.link=a);let u=(s=e.fcmOptions)===null||s===void 0?void 0:s.analytics_label;u&&(t.fcmOptions.analyticsLabel=u)}function Q4(t){return typeof t=="object"&&!!t&&CM in t}Y4("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");function Y4(t,e){let n=[];for(let r=0;r<t.length;r++)n.push(t.charAt(r)),r<e.length&&n.push(e.charAt(r));return n.join("")}function Z4(t){if(!t||!t.options)throw BI("App Configuration Object");if(!t.name)throw BI("App Name");let e=["projectId","apiKey","appId","messagingSenderId"],{options:n}=t;for(let r of e)if(!n[r])throw BI(r);return{appName:t.name,projectId:n.projectId,apiKey:n.apiKey,appId:n.appId,senderId:n.messagingSenderId}}function BI(t){return kt.create("missing-app-config-values",{valueName:t})}var $I=class{constructor(e,n,r){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;let i=Z4(e);this.firebaseDependencies={app:e,appConfig:i,installations:n,analyticsProvider:r}}_delete(){return Promise.resolve()}};function J4(t){return _(this,null,function*(){try{t.swRegistration=yield navigator.serviceWorker.register(D4,{scope:C4}),t.swRegistration.update().catch(()=>{}),yield X4(t.swRegistration)}catch(e){throw kt.create("failed-service-worker-registration",{browserErrorMessage:e?.message})}})}function X4(t){return _(this,null,function*(){return new Promise((e,n)=>{let r=setTimeout(()=>n(new Error(`Service worker not registered after ${vM} ms`)),vM),i=t.installing||t.waiting;t.active?(clearTimeout(r),e()):i?i.onstatechange=o=>{var s;((s=o.target)===null||s===void 0?void 0:s.state)==="activated"&&(i.onstatechange=null,clearTimeout(r),e())}:(clearTimeout(r),n(new Error("No incoming service worker found.")))})})}function e3(t,e){return _(this,null,function*(){if(!e&&!t.swRegistration&&(yield J4(t)),!(!e&&t.swRegistration)){if(!(e instanceof ServiceWorkerRegistration))throw kt.create("invalid-sw-registration");t.swRegistration=e}})}function t3(t,e){return _(this,null,function*(){e?t.vapidKey=e:t.vapidKey||(t.vapidKey=DM)})}function RM(t,e){return _(this,null,function*(){if(!navigator)throw kt.create("only-available-in-window");if(Notification.permission==="default"&&(yield Notification.requestPermission()),Notification.permission!=="granted")throw kt.create("permission-blocked");return yield t3(t,e?.vapidKey),yield e3(t,e?.serviceWorkerRegistration),$4(t)})}function n3(t,e,n){return _(this,null,function*(){let r=r3(e);(yield t.firebaseDependencies.analyticsProvider.get()).logEvent(r,{message_id:n[CM],message_name:n[S4],message_time:n[A4],message_device_time:Math.floor(Date.now()/1e3)})})}function r3(t){switch(t){case up.NOTIFICATION_CLICKED:return"notification_open";case up.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function i3(t,e){return _(this,null,function*(){let n=e.data;if(!n.isFirebaseMessaging)return;t.onMessageHandler&&n.messageType===up.PUSH_RECEIVED&&(typeof t.onMessageHandler=="function"?t.onMessageHandler(IM(n)):t.onMessageHandler.next(IM(n)));let r=n.data;Q4(r)&&r[R4]==="1"&&(yield n3(t,n.messageType,r))})}var wM="@firebase/messaging",bM="0.12.22";var o3=t=>{let e=new $I(t.getProvider("app").getImmediate(),t.getProvider("installations-internal").getImmediate(),t.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",n=>i3(e,n)),e},s3=t=>{let e=t.getProvider("messaging").getImmediate();return{getToken:r=>RM(e,r)}};function a3(){wt(new ze("messaging",o3,"PUBLIC")),wt(new ze("messaging-internal",s3,"PRIVATE")),Ce(wM,bM),Ce(wM,bM,"esm2017")}function NM(){return _(this,null,function*(){try{yield Lh()}catch{return!1}return typeof window<"u"&&Co()&&ES()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})}function c3(t,e){if(!navigator)throw kt.create("only-available-in-window");return t.onMessageHandler=e,()=>{t.onMessageHandler=null}}function $u(t=Ar()){return NM().then(e=>{if(!e)throw kt.create("unsupported-browser")},e=>{throw kt.create("indexed-db-unsupported")}),Tr(Ze(t),"messaging").getImmediate()}function GI(t,e){return _(this,null,function*(){return t=Ze(t),RM(t,e)})}function WI(t,e){return t=Ze(t),c3(t,e)}a3();var Hu=class{constructor(e){return e}},MM="messaging",KI=class{constructor(){return vi(MM)}};var QI=new q("angularfire2.messaging-instances");function u3(t,e,n){if(jy(n))return null;let r=ta(MM,t,e);return r&&new Hu(r)}function l3(t){return(e,n,r)=>{if(jy(r))return null;let i=e.runOutsideAngular(()=>t(n));return new Hu(i)}}var d3={provide:KI,deps:[[new mn,QI]]},h3={provide:Hu,useFactory:u3,deps:[[new mn,QI],Mr,Tn]};function PM(t,...e){return Ce("angularfire",Rr.full,"fcm"),Bn([h3,d3,{provide:QI,useFactory:l3(t),multi:!0,deps:[Se,Ne,Tn,Nr,No,...e]}])}var xM=ht($u,!0);var lp={firebase:{apiKey:"AIzaSyA9JTo5iNHrCxH2caYD2IZrPfYq1oB3L8c",authDomain:"webapp-amigo-secreto.firebaseapp.com",projectId:"webapp-amigo-secreto",storageBucket:"webapp-amigo-secreto.firebasestorage.app",messagingSenderId:"193359921823",appId:"1:193359921823:web:7804bad616fafc1f4618aa",vapidKey:"BOpmapUTxq-3KXtiXhkLSrXFVZgng4Gvi43kWr9TrrTF1nb1Dpuijc2buO_NGfSm1sBqZi5CvdxpCb7fPaCqE4c"}};var $M=(()=>{class t{_renderer;_elementRef;onChange=n=>{};onTouched=()=>{};constructor(n,r){this._renderer=n,this._elementRef=r}setProperty(n,r){this._renderer.setProperty(this._elementRef.nativeElement,n,r)}registerOnTouched(n){this.onTouched=n}registerOnChange(n){this.onChange=n}setDisabledState(n){this.setProperty("disabled",n)}static \u0275fac=function(r){return new(r||t)(pe(uo),pe(li))};static \u0275dir=Ye({type:t})}return t})(),f3=(()=>{class t extends $M{static \u0275fac=(()=>{let n;return function(i){return(n||(n=ui(t)))(i||t)}})();static \u0275dir=Ye({type:t,features:[An]})}return t})(),HM=new q("");var p3={provide:HM,useExisting:jn(()=>ar),multi:!0};function g3(){let t=yn()?yn().getUserAgent():"";return/android (\d+)/.test(t.toLowerCase())}var m3=new q(""),ar=(()=>{class t extends $M{_compositionMode;_composing=!1;constructor(n,r,i){super(n,r),this._compositionMode=i,this._compositionMode==null&&(this._compositionMode=!g3())}writeValue(n){let r=n??"";this.setProperty("value",r)}_handleInput(n){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(n)}_compositionStart(){this._composing=!0}_compositionEnd(n){this._composing=!1,this._compositionMode&&this.onChange(n)}static \u0275fac=function(r){return new(r||t)(pe(uo),pe(li),pe(m3,8))};static \u0275dir=Ye({type:t,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){r&1&&ae("input",function(s){return i._handleInput(s.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(s){return i._compositionEnd(s.target.value)})},standalone:!1,features:[fo([p3]),An]})}return t})();function y3(t){return t==null||qM(t)===0}function qM(t){return t==null?null:Array.isArray(t)||typeof t=="string"?t.length:t instanceof Set?t.size:null}var vp=new q(""),zM=new q("");function v3(t){return y3(t.value)?{required:!0}:null}function _3(t){return e=>{let n=e.value?.length??qM(e.value);return n!==null&&n>t?{maxlength:{requiredLength:t,actualLength:n}}:null}}function kM(t){return null}function GM(t){return t!=null}function WM(t){return hi(t)?Be(t):t}function KM(t){let e={};return t.forEach(n=>{e=n!=null?F(F({},e),n):e}),Object.keys(e).length===0?null:e}function QM(t,e){return e.map(n=>n(t))}function E3(t){return!t.validate}function YM(t){return t.map(e=>E3(e)?e:n=>e.validate(n))}function I3(t){if(!t)return null;let e=t.filter(GM);return e.length==0?null:function(n){return KM(QM(n,e))}}function XI(t){return t!=null?I3(YM(t)):null}function w3(t){if(!t)return null;let e=t.filter(GM);return e.length==0?null:function(n){let r=QM(n,e).map(WM);return wg(r).pipe(he(KM))}}function ew(t){return t!=null?w3(YM(t)):null}function OM(t,e){return t===null?[e]:Array.isArray(t)?[...t,e]:[t,e]}function b3(t){return t._rawValidators}function D3(t){return t._rawAsyncValidators}function YI(t){return t?Array.isArray(t)?t:[t]:[]}function hp(t,e){return Array.isArray(t)?t.includes(e):t===e}function FM(t,e){let n=YI(e);return YI(t).forEach(i=>{hp(n,i)||n.push(i)}),n}function LM(t,e){return YI(e).filter(n=>!hp(t,n))}var fp=class{get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators=[];_rawAsyncValidators=[];_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=XI(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=ew(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_onDestroyCallbacks=[];_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,n){return this.control?this.control.hasError(e,n):!1}getError(e,n){return this.control?this.control.getError(e,n):null}},Na=class extends fp{name;get formDirective(){return null}get path(){return null}},Qu=class extends fp{_parent=null;name=null;valueAccessor=null},pp=class{_cd;constructor(e){this._cd=e}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}},C3={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},qae=re(F({},C3),{"[class.ng-submitted]":"isSubmitted"}),ki=(()=>{class t extends pp{constructor(n){super(n)}static \u0275fac=function(r){return new(r||t)(pe(Qu,2))};static \u0275dir=Ye({type:t,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){r&2&&Lc("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},standalone:!1,features:[An]})}return t})(),Ma=(()=>{class t extends pp{constructor(n){super(n)}static \u0275fac=function(r){return new(r||t)(pe(Na,10))};static \u0275dir=Ye({type:t,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(r,i){r&2&&Lc("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)("ng-submitted",i.isSubmitted)},standalone:!1,features:[An]})}return t})();var qu="VALID",dp="INVALID",Aa="PENDING",zu="DISABLED",xi=class{},gp=class extends xi{value;source;constructor(e,n){super(),this.value=e,this.source=n}},Wu=class extends xi{pristine;source;constructor(e,n){super(),this.pristine=e,this.source=n}},Ku=class extends xi{touched;source;constructor(e,n){super(),this.touched=e,this.source=n}},Ra=class extends xi{status;source;constructor(e,n){super(),this.status=e,this.source=n}},ZI=class extends xi{source;constructor(e){super(),this.source=e}},JI=class extends xi{source;constructor(e){super(),this.source=e}};function ZM(t){return(_p(t)?t.validators:t)||null}function T3(t){return Array.isArray(t)?XI(t):t||null}function JM(t,e){return(_p(e)?e.asyncValidators:t)||null}function S3(t){return Array.isArray(t)?ew(t):t||null}function _p(t){return t!=null&&!Array.isArray(t)&&typeof t=="object"}function A3(t,e,n){let r=t.controls;if(!(e?Object.keys(r):r).length)throw new H(1e3,"");if(!r[n])throw new H(1001,"")}function R3(t,e,n){t._forEachChild((r,i)=>{if(n[i]===void 0)throw new H(1002,"")})}var mp=class{_pendingDirty=!1;_hasOwnPendingAsyncValidator=null;_pendingTouched=!1;_onCollectionChange=()=>{};_updateOn;_parent=null;_asyncValidationSubscription;_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators;_rawAsyncValidators;value;constructor(e,n){this._assignValidators(e),this._assignAsyncValidators(n)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get status(){return ut(this.statusReactive)}set status(e){ut(()=>this.statusReactive.set(e))}_status=Ls(()=>this.statusReactive());statusReactive=ct(void 0);get valid(){return this.status===qu}get invalid(){return this.status===dp}get pending(){return this.status==Aa}get disabled(){return this.status===zu}get enabled(){return this.status!==zu}errors;get pristine(){return ut(this.pristineReactive)}set pristine(e){ut(()=>this.pristineReactive.set(e))}_pristine=Ls(()=>this.pristineReactive());pristineReactive=ct(!0);get dirty(){return!this.pristine}get touched(){return ut(this.touchedReactive)}set touched(e){ut(()=>this.touchedReactive.set(e))}_touched=Ls(()=>this.touchedReactive());touchedReactive=ct(!1);get untouched(){return!this.touched}_events=new Ge;events=this._events.asObservable();valueChanges;statusChanges;get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(FM(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(FM(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(LM(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(LM(e,this._rawAsyncValidators))}hasValidator(e){return hp(this._rawValidators,e)}hasAsyncValidator(e){return hp(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){let n=this.touched===!1;this.touched=!0;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsTouched(re(F({},e),{sourceControl:r})),n&&e.emitEvent!==!1&&this._events.next(new Ku(!0,r))}markAllAsDirty(e={}){this.markAsDirty({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(n=>n.markAllAsDirty(e))}markAllAsTouched(e={}){this.markAsTouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(n=>n.markAllAsTouched(e))}markAsUntouched(e={}){let n=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsUntouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:r})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,r),n&&e.emitEvent!==!1&&this._events.next(new Ku(!1,r))}markAsDirty(e={}){let n=this.pristine===!0;this.pristine=!1;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsDirty(re(F({},e),{sourceControl:r})),n&&e.emitEvent!==!1&&this._events.next(new Wu(!1,r))}markAsPristine(e={}){let n=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsPristine({onlySelf:!0,emitEvent:e.emitEvent})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e,r),n&&e.emitEvent!==!1&&this._events.next(new Wu(!0,r))}markAsPending(e={}){this.status=Aa;let n=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Ra(this.status,n)),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.markAsPending(re(F({},e),{sourceControl:n}))}disable(e={}){let n=this._parentMarkedDirty(e.onlySelf);this.status=zu,this.errors=null,this._forEachChild(i=>{i.disable(re(F({},e),{onlySelf:!0}))}),this._updateValue();let r=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new gp(this.value,r)),this._events.next(new Ra(this.status,r)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(re(F({},e),{skipPristineCheck:n}),this),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){let n=this._parentMarkedDirty(e.onlySelf);this.status=qu,this._forEachChild(r=>{r.enable(re(F({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(re(F({},e),{skipPristineCheck:n}),this),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e,n){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine({},n),this._parent._updateTouched({},n))}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let r=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===qu||this.status===Aa)&&this._runAsyncValidator(r,e.emitEvent)}let n=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new gp(this.value,n)),this._events.next(new Ra(this.status,n)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(re(F({},e),{sourceControl:n}))}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(n=>n._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?zu:qu}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e,n){if(this.asyncValidator){this.status=Aa,this._hasOwnPendingAsyncValidator={emitEvent:n!==!1,shouldHaveEmitted:e!==!1};let r=WM(this.asyncValidator(this));this._asyncValidationSubscription=r.subscribe(i=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(i,{emitEvent:n,shouldHaveEmitted:e})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let e=(this._hasOwnPendingAsyncValidator?.emitEvent||this._hasOwnPendingAsyncValidator?.shouldHaveEmitted)??!1;return this._hasOwnPendingAsyncValidator=null,e}return!1}setErrors(e,n={}){this.errors=e,this._updateControlsErrors(n.emitEvent!==!1,this,n.shouldHaveEmitted)}get(e){let n=e;return n==null||(Array.isArray(n)||(n=n.split(".")),n.length===0)?null:n.reduce((r,i)=>r&&r._find(i),this)}getError(e,n){let r=n?this.get(n):this;return r&&r.errors?r.errors[e]:null}hasError(e,n){return!!this.getError(e,n)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e,n,r){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),(e||r)&&this._events.next(new Ra(this.status,n)),this._parent&&this._parent._updateControlsErrors(e,n,r)}_initObservables(){this.valueChanges=new Qe,this.statusChanges=new Qe}_calculateStatus(){return this._allControlsDisabled()?zu:this.errors?dp:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Aa)?Aa:this._anyControlsHaveStatus(dp)?dp:qu}_anyControlsHaveStatus(e){return this._anyControls(n=>n.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e,n){let r=!this._anyControlsDirty(),i=this.pristine!==r;this.pristine=r,this._parent&&!e.onlySelf&&this._parent._updatePristine(e,n),i&&this._events.next(new Wu(this.pristine,n))}_updateTouched(e={},n){this.touched=this._anyControlsTouched(),this._events.next(new Ku(this.touched,n)),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,n)}_onDisabledChange=[];_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){_p(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let n=this._parent&&this._parent.dirty;return!e&&!!n&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=T3(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=S3(this._rawAsyncValidators)}},yp=class extends mp{constructor(e,n,r){super(ZM(n),JM(r,n)),this.controls=e,this._initObservables(),this._setUpdateStrategy(n),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}controls;registerControl(e,n){return this.controls[e]?this.controls[e]:(this.controls[e]=n,n.setParent(this),n._registerOnCollectionChange(this._onCollectionChange),n)}addControl(e,n,r={}){this.registerControl(e,n),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,n={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}setControl(e,n,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],n&&this.registerControl(e,n),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,n={}){R3(this,!0,e),Object.keys(e).forEach(r=>{A3(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n)}patchValue(e,n={}){e!=null&&(Object.keys(e).forEach(r=>{let i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n))}reset(e={},n={}){this._forEachChild((r,i)=>{r.reset(e?e[i]:null,{onlySelf:!0,emitEvent:n.emitEvent})}),this._updatePristine(n,this),this._updateTouched(n,this),this.updateValueAndValidity(n)}getRawValue(){return this._reduceChildren({},(e,n,r)=>(e[r]=n.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(n,r)=>r._syncPendingControls()?!0:n);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(n=>{let r=this.controls[n];r&&e(r,n)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(let[n,r]of Object.entries(this.controls))if(this.contains(n)&&e(r))return!0;return!1}_reduceValue(){let e={};return this._reduceChildren(e,(n,r,i)=>((r.enabled||this.disabled)&&(n[i]=r.value),n))}_reduceChildren(e,n){let r=e;return this._forEachChild((i,o)=>{r=n(r,i,o)}),r}_allControlsDisabled(){for(let e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}};var tw=new q("",{providedIn:"root",factory:()=>nw}),nw="always";function N3(t,e){return[...e.path,t]}function XM(t,e,n=nw){eP(t,e),e.valueAccessor.writeValue(t.value),(t.disabled||n==="always")&&e.valueAccessor.setDisabledState?.(t.disabled),P3(t,e),k3(t,e),x3(t,e),M3(t,e)}function VM(t,e){t.forEach(n=>{n.registerOnValidatorChange&&n.registerOnValidatorChange(e)})}function M3(t,e){if(e.valueAccessor.setDisabledState){let n=r=>{e.valueAccessor.setDisabledState(r)};t.registerOnDisabledChange(n),e._registerOnDestroy(()=>{t._unregisterOnDisabledChange(n)})}}function eP(t,e){let n=b3(t);e.validator!==null?t.setValidators(OM(n,e.validator)):typeof n=="function"&&t.setValidators([n]);let r=D3(t);e.asyncValidator!==null?t.setAsyncValidators(OM(r,e.asyncValidator)):typeof r=="function"&&t.setAsyncValidators([r]);let i=()=>t.updateValueAndValidity();VM(e._rawValidators,i),VM(e._rawAsyncValidators,i)}function P3(t,e){e.valueAccessor.registerOnChange(n=>{t._pendingValue=n,t._pendingChange=!0,t._pendingDirty=!0,t.updateOn==="change"&&tP(t,e)})}function x3(t,e){e.valueAccessor.registerOnTouched(()=>{t._pendingTouched=!0,t.updateOn==="blur"&&t._pendingChange&&tP(t,e),t.updateOn!=="submit"&&t.markAsTouched()})}function tP(t,e){t._pendingDirty&&t.markAsDirty(),t.setValue(t._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(t._pendingValue),t._pendingChange=!1}function k3(t,e){let n=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};t.registerOnChange(n),e._registerOnDestroy(()=>{t._unregisterOnChange(n)})}function O3(t,e){t==null,eP(t,e)}function F3(t,e){if(!t.hasOwnProperty("model"))return!1;let n=t.model;return n.isFirstChange()?!0:!Object.is(e,n.currentValue)}function L3(t){return Object.getPrototypeOf(t.constructor)===f3}function V3(t,e){t._syncPendingControls(),e.forEach(n=>{let r=n.control;r.updateOn==="submit"&&r._pendingChange&&(n.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function j3(t,e){if(!e)return null;Array.isArray(e);let n,r,i;return e.forEach(o=>{o.constructor===ar?n=o:L3(o)?r=o:i=o}),i||r||n||null}var U3={provide:Na,useExisting:jn(()=>Jo)},Gu=Promise.resolve(),Jo=(()=>{class t extends Na{callSetDisabledState;get submitted(){return ut(this.submittedReactive)}_submitted=Ls(()=>this.submittedReactive());submittedReactive=ct(!1);_directives=new Set;form;ngSubmit=new Qe;options;constructor(n,r,i){super(),this.callSetDisabledState=i,this.form=new yp({},XI(n),ew(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(n){Gu.then(()=>{let r=this._findContainer(n.path);n.control=r.registerControl(n.name,n.control),XM(n.control,n,this.callSetDisabledState),n.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(n)})}getControl(n){return this.form.get(n.path)}removeControl(n){Gu.then(()=>{let r=this._findContainer(n.path);r&&r.removeControl(n.name),this._directives.delete(n)})}addFormGroup(n){Gu.then(()=>{let r=this._findContainer(n.path),i=new yp({});O3(i,n),r.registerControl(n.name,i),i.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(n){Gu.then(()=>{let r=this._findContainer(n.path);r&&r.removeControl(n.name)})}getFormGroup(n){return this.form.get(n.path)}updateModel(n,r){Gu.then(()=>{this.form.get(n.path).setValue(r)})}setValue(n){this.control.setValue(n)}onSubmit(n){return this.submittedReactive.set(!0),V3(this.form,this._directives),this.ngSubmit.emit(n),this.form._events.next(new ZI(this.control)),n?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(n=void 0){this.form.reset(n),this.submittedReactive.set(!1),this.form._events.next(new JI(this.form))}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.form._updateOn=this.options.updateOn)}_findContainer(n){return n.pop(),n.length?this.form.get(n):this.form}static \u0275fac=function(r){return new(r||t)(pe(vp,10),pe(zM,10),pe(tw,8))};static \u0275dir=Ye({type:t,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(r,i){r&1&&ae("submit",function(s){return i.onSubmit(s)})("reset",function(){return i.onReset()})},inputs:{options:[0,"ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],standalone:!1,features:[fo([U3]),An]})}return t})();function jM(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function UM(t){return typeof t=="object"&&t!==null&&Object.keys(t).length===2&&"value"in t&&"disabled"in t}var B3=class extends mp{defaultValue=null;_onChange=[];_pendingValue;_pendingChange=!1;constructor(e=null,n,r){super(ZM(n),JM(r,n)),this._applyFormState(e),this._setUpdateStrategy(n),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),_p(n)&&(n.nonNullable||n.initialValueIsDefault)&&(UM(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,n={}){this.value=this._pendingValue=e,this._onChange.length&&n.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,n.emitViewToModelChange!==!1)),this.updateValueAndValidity(n)}patchValue(e,n={}){this.setValue(e,n)}reset(e=this.defaultValue,n={}){this._applyFormState(e),this.markAsPristine(n),this.markAsUntouched(n),this.setValue(this.value,n),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){jM(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){jM(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){UM(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var $3={provide:Qu,useExisting:jn(()=>$r)},BM=Promise.resolve(),$r=(()=>{class t extends Qu{_changeDetectorRef;callSetDisabledState;control=new B3;static ngAcceptInputType_isDisabled;_registered=!1;viewModel;name="";isDisabled;model;options;update=new Qe;constructor(n,r,i,o,s,a){super(),this._changeDetectorRef=s,this.callSetDisabledState=a,this._parent=n,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=j3(this,o)}ngOnChanges(n){if(this._checkForErrors(),!this._registered||"name"in n){if(this._registered&&(this._checkName(),this.formDirective)){let r=n.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in n&&this._updateDisabled(n),F3(n,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(n){this.viewModel=n,this.update.emit(n)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){XM(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._checkName()}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(n){BM.then(()=>{this.control.setValue(n,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(n){let r=n.isDisabled.currentValue,i=r!==0&&go(r);BM.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(n){return this._parent?N3(n,this._parent):[n]}static \u0275fac=function(r){return new(r||t)(pe(Na,9),pe(vp,10),pe(zM,10),pe(HM,10),pe(Vs,8),pe(tw,8))};static \u0275dir=Ye({type:t,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],standalone:!1,features:[fo([$3]),An,_r]})}return t})();var Pa=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275dir=Ye({type:t,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""],standalone:!1})}return t})();function H3(t){return typeof t=="number"?t:parseInt(t,10)}var nP=(()=>{class t{_validator=kM;_onChange;_enabled;ngOnChanges(n){if(this.inputName in n){let r=this.normalizeInput(n[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):kM,this._onChange&&this._onChange()}}validate(n){return this._validator(n)}registerOnValidatorChange(n){this._onChange=n}enabled(n){return n!=null}static \u0275fac=function(r){return new(r||t)};static \u0275dir=Ye({type:t,features:[_r]})}return t})();var q3={provide:vp,useExisting:jn(()=>Yu),multi:!0};var Yu=(()=>{class t extends nP{required;inputName="required";normalizeInput=go;createValidator=n=>v3;enabled(n){return n}static \u0275fac=(()=>{let n;return function(i){return(n||(n=ui(t)))(i||t)}})();static \u0275dir=Ye({type:t,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(r,i){r&2&&ho("required",i._enabled?"":null)},inputs:{required:"required"},standalone:!1,features:[fo([q3]),An]})}return t})();var z3={provide:vp,useExisting:jn(()=>Zu),multi:!0},Zu=(()=>{class t extends nP{maxlength;inputName="maxlength";normalizeInput=n=>H3(n);createValidator=n=>_3(n);static \u0275fac=(()=>{let n;return function(i){return(n||(n=ui(t)))(i||t)}})();static \u0275dir=Ye({type:t,selectors:[["","maxlength","","formControlName",""],["","maxlength","","formControl",""],["","maxlength","","ngModel",""]],hostVars:1,hostBindings:function(r,i){r&2&&ho("maxlength",i._enabled?i.maxlength:null)},inputs:{maxlength:"maxlength"},standalone:!1,features:[fo([z3]),An]})}return t})();var G3=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275mod=Er({type:t});static \u0275inj=Un({})}return t})();var Oi=(()=>{class t{static withConfig(n){return{ngModule:t,providers:[{provide:tw,useValue:n.callSetDisabledState??nw}]}}static \u0275fac=function(r){return new(r||t)};static \u0275mod=Er({type:t});static \u0275inj=Un({imports:[G3]})}return t})();var Ip=class t{correo="";celular="";nombre="";personaje="";pass=["","","",""];firestore=R(st);injector=R(Ne);onPasswordInput(e,n){let r=e.target,i=document.querySelectorAll(".password-inputs input")[n+1];r.value&&i&&i.focus()}onPasswordBackspace(e,n){let r=e.target;if(e.key==="Backspace"&&!r.value){let i=document.querySelectorAll(".password-inputs input")[n-1];i&&i.focus()}}registrarUsuario(e){return _(this,null,function*(){e.preventDefault();try{let n=Pt(this.firestore,"usuarios"),r=un(n,Ur("correo","==",this.correo));if(!(yield Me(this.injector,()=>_(this,null,function*(){return yield xt(r)}))).empty){alert("\u26A0\uFE0F Ya existe un usuario con este correo");return}let o=un(n,Ur("celular","==",this.celular));if(!(yield Me(this.injector,()=>_(this,null,function*(){return yield xt(o)}))).empty){alert("\u26A0\uFE0F Ya existe un usuario con este celular");return}yield Me(this.injector,()=>_(this,null,function*(){return yield op(n,{correo:this.correo,celular:this.celular,nombre:this.nombre,personaje:this.personaje,password:this.pass.join(""),fechaRegistro:GN()})})),alert("\u2705 Usuario registrado"),this.correo="",this.celular="",this.nombre="",this.personaje="",this.pass=["","","",""]}catch(n){console.error(n),n?.code==="permission-denied"||/permission/i.test(n?.message)?alert(`Error: permisos insuficientes en Firestore.
\u26A0\uFE0F Permite lectura/escritura p\xFAblica. Usa solo en desarrollo.`):alert("Error al registrar. Revisa la consola del navegador para m\xE1s detalles.")}})}static \u0275fac=function(n){return new(n||t)};static \u0275cmp=It({type:t,selectors:[["app-registro"]],decls:27,vars:8,consts:[[1,"container"],[1,"title"],[1,"form",3,"ngSubmit"],["type","email","placeholder","correo@ejemplo.com","required","","name","correo",3,"ngModelChange","ngModel"],["type","tel","placeholder","3001234567","required","","name","celular",3,"ngModelChange","ngModel"],["type","text","placeholder","Tu nombre","required","","name","nombre",3,"ngModelChange","ngModel"],["type","text","placeholder","Personaje favorito","required","","name","personaje",3,"ngModelChange","ngModel"],[1,"password-inputs"],["type","password","maxlength","1","required","","name","p0",3,"ngModelChange","input","keydown","ngModel"],["type","password","maxlength","1","required","","name","p1",3,"ngModelChange","input","keydown","ngModel"],["type","password","maxlength","1","required","","name","p2",3,"ngModelChange","input","keydown","ngModel"],["type","password","maxlength","1","required","","name","p3",3,"ngModelChange","input","keydown","ngModel"],["type","submit"],["type","button","routerLink","/login",1,"secondary-btn"]],template:function(n,r){n&1&&(x(0,"div",0)(1,"h1",1),U(2,"\u{1F381} Juego del Amigo Secreto \u{1F381}"),O(),x(3,"form",2),ae("ngSubmit",function(o){return r.registrarUsuario(o)}),x(4,"label"),U(5," Ingresa tu correo "),x(6,"input",3),Ve("ngModelChange",function(o){return He(r.correo,o)||(r.correo=o),o}),O()(),x(7,"label"),U(8," Ingresa tu celular "),x(9,"input",4),Ve("ngModelChange",function(o){return He(r.celular,o)||(r.celular=o),o}),O()(),x(10,"label"),U(11," Ingresa tu nombre "),x(12,"input",5),Ve("ngModelChange",function(o){return He(r.nombre,o)||(r.nombre=o),o}),O()(),x(13,"label"),U(14," Ingresa tu personaje "),x(15,"input",6),Ve("ngModelChange",function(o){return He(r.personaje,o)||(r.personaje=o),o}),O()(),x(16,"label"),U(17," Ingresa una contrase\xF1a "),x(18,"div",7)(19,"input",8),Ve("ngModelChange",function(o){return He(r.pass[0],o)||(r.pass[0]=o),o}),ae("input",function(o){return r.onPasswordInput(o,0)})("keydown",function(o){return r.onPasswordBackspace(o,0)}),O(),x(20,"input",9),Ve("ngModelChange",function(o){return He(r.pass[1],o)||(r.pass[1]=o),o}),ae("input",function(o){return r.onPasswordInput(o,1)})("keydown",function(o){return r.onPasswordBackspace(o,1)}),O(),x(21,"input",10),Ve("ngModelChange",function(o){return He(r.pass[2],o)||(r.pass[2]=o),o}),ae("input",function(o){return r.onPasswordInput(o,2)})("keydown",function(o){return r.onPasswordBackspace(o,2)}),O(),x(22,"input",11),Ve("ngModelChange",function(o){return He(r.pass[3],o)||(r.pass[3]=o),o}),ae("input",function(o){return r.onPasswordInput(o,3)})("keydown",function(o){return r.onPasswordBackspace(o,3)}),O()()(),x(23,"button",12),U(24,"Registrarse"),O(),x(25,"button",13),U(26," Ya tienes una cuenta? Inicia sesi\xF3n "),O()()()),n&2&&($(6),Le("ngModel",r.correo),$(3),Le("ngModel",r.celular),$(3),Le("ngModel",r.nombre),$(3),Le("ngModel",r.personaje),$(4),Le("ngModel",r.pass[0]),$(),Le("ngModel",r.pass[1]),$(),Le("ngModel",r.pass[2]),$(),Le("ngModel",r.pass[3]))},dependencies:[xh,Oi,Pa,ar,ki,Ma,Yu,Zu,$r,Jo],styles:[".container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;height:100vh;font-family:Arial,sans-serif;background:linear-gradient(135deg,#ff6a00,#ee0979);color:#fff}.title[_ngcontent-%COMP%]{font-size:clamp(1.8rem,4vw,3rem);margin-bottom:1.5rem;text-align:center;text-shadow:2px 2px 4px rgba(0,0,0,.4)}.form[_ngcontent-%COMP%]{background:#ffffff1a;padding:2rem;border-radius:1rem;box-shadow:0 8px 16px #0000004d;display:flex;flex-direction:column;gap:1rem;width:min(90%,400px)}.form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;padding:.7rem;border-radius:.5rem;border:none;outline:none;font-size:1rem}.password-inputs[_ngcontent-%COMP%]{display:flex;gap:.5rem}.password-inputs[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{flex:1;text-align:center;font-size:1.2rem}button[_ngcontent-%COMP%]{background:#fff;color:#ee0979;font-size:1rem;padding:.8rem;border:none;border-radius:.5rem;cursor:pointer;font-weight:700;transition:.3s}button[_ngcontent-%COMP%]:hover{background:#ffdeeb}.secondary-btn[_ngcontent-%COMP%]{margin-top:1rem;background:transparent;border:2px solid #fff;color:#fff;padding:.6rem;border-radius:.5rem;cursor:pointer;font-weight:700;transition:.3s}.secondary-btn[_ngcontent-%COMP%]:hover{background:#fff3}"]})};var cr="https://i.pinimg.com/736x/dc/9c/61/dc9c614e3007080a5aff36aebb949474.jpg";var rw="usuario_actual",ur=class t{usuario=ct(this.cargarUsuario());setUsuario(e){this.usuario.set(e),localStorage.setItem(rw,JSON.stringify(e))}clearUsuario(){this.usuario.set(null),localStorage.removeItem(rw)}cargarUsuario(){let e=localStorage.getItem(rw),n=e?JSON.parse(e):null;return n&&typeof n=="object"&&"nombre"in n&&(!n.imagen||n.imagen.trim()==="")&&(n.imagen=cr),n}static \u0275fac=function(n){return new(n||t)};static \u0275prov=z({token:t,factory:t.\u0275fac,providedIn:"root"})};var wp=class t{correo="";pass=["","","",""];firestore=R(st);injector=R(Ne);router=R(Dr);userSignal=R(ur);onPasswordInput(e,n){let r=e.target,i=document.querySelectorAll(".password-inputs input")[n+1];r.value&&i&&i.focus()}onPasswordBackspace(e,n){let r=e.target;if(e.key==="Backspace"&&!r.value){let i=document.querySelectorAll(".password-inputs input")[n-1];i&&i.focus()}}iniciarSesion(e){return _(this,null,function*(){e.preventDefault();let n=this.pass.join("");try{let r=Pt(this.firestore,"usuarios"),i=un(r,Ur("correo","==",this.correo)),o=yield Me(this.injector,()=>_(this,null,function*(){return yield xt(i)}));if(o.empty){alert("Usuario no encontrado");return}let s=o.docs[0],a=s.data();if(a.password!==n){alert("Contrase\xF1a incorrecta");return}let u={id:s.id,nombre:a.nombre,correo:a.correo,celular:a.celular,personaje:a.personaje,imagen:a.imagen};this.userSignal.setUsuario(u),this.router.navigate(["/inicio"])}catch(r){console.error(r),alert("Error al iniciar sesi\xF3n. Revisa la consola para m\xE1s detalles.")}})}static \u0275fac=function(n){return new(n||t)};static \u0275cmp=It({type:t,selectors:[["app-login"]],decls:16,vars:5,consts:[[1,"container"],[1,"title"],[1,"form",3,"submit"],["type","email","name","correo","placeholder","correo@ejemplo.com","required","",3,"ngModelChange","ngModel"],[1,"password-inputs"],["type","password","maxlength","1","name","p0","required","",3,"ngModelChange","input","keydown","ngModel"],["type","password","maxlength","1","name","p1","required","",3,"ngModelChange","input","keydown","ngModel"],["type","password","maxlength","1","name","p2","required","",3,"ngModelChange","input","keydown","ngModel"],["type","password","maxlength","1","name","p3","required","",3,"ngModelChange","input","keydown","ngModel"],["type","submit"]],template:function(n,r){n&1&&(x(0,"div",0)(1,"h1",1),U(2,"\u{1F381} Iniciar Sesi\xF3n - Amigo Secreto \u{1F381}"),O(),x(3,"form",2),ae("submit",function(o){return r.iniciarSesion(o)}),x(4,"label"),U(5," Ingresa tu correo "),x(6,"input",3),Ve("ngModelChange",function(o){return He(r.correo,o)||(r.correo=o),o}),O()(),x(7,"label"),U(8," Ingresa tu contrase\xF1a "),x(9,"div",4)(10,"input",5),Ve("ngModelChange",function(o){return He(r.pass[0],o)||(r.pass[0]=o),o}),ae("input",function(o){return r.onPasswordInput(o,0)})("keydown",function(o){return r.onPasswordBackspace(o,0)}),O(),x(11,"input",6),Ve("ngModelChange",function(o){return He(r.pass[1],o)||(r.pass[1]=o),o}),ae("input",function(o){return r.onPasswordInput(o,1)})("keydown",function(o){return r.onPasswordBackspace(o,1)}),O(),x(12,"input",7),Ve("ngModelChange",function(o){return He(r.pass[2],o)||(r.pass[2]=o),o}),ae("input",function(o){return r.onPasswordInput(o,2)})("keydown",function(o){return r.onPasswordBackspace(o,2)}),O(),x(13,"input",8),Ve("ngModelChange",function(o){return He(r.pass[3],o)||(r.pass[3]=o),o}),ae("input",function(o){return r.onPasswordInput(o,3)})("keydown",function(o){return r.onPasswordBackspace(o,3)}),O()()(),x(14,"button",9),U(15,"Iniciar Sesi\xF3n"),O()()()),n&2&&($(6),Le("ngModel",r.correo),$(4),Le("ngModel",r.pass[0]),$(),Le("ngModel",r.pass[1]),$(),Le("ngModel",r.pass[2]),$(),Le("ngModel",r.pass[3]))},dependencies:[Oi,Pa,ar,ki,Ma,Yu,Zu,$r,Jo],styles:["[_nghost-%COMP%]{--bg-gradient-start: #ff6a00;--bg-gradient-end: #ee0979;--text-color: #fff;--text-shadow: rgba(0,0,0,.4);--form-bg: rgba(255,255,255,.1);--form-shadow: rgba(0,0,0,.3);--button-bg: #fff;--button-hover-bg: #ffdeeb;--button-text: #ee0979;--input-bg: transparent;--input-text: #fff;--input-border-radius: .5rem}.container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;height:100vh;font-family:Arial,sans-serif;background:linear-gradient(135deg,var(--bg-gradient-start),var(--bg-gradient-end));color:var(--text-color)}.title[_ngcontent-%COMP%]{font-size:clamp(1.8rem,4vw,3rem);margin-bottom:1.5rem;text-align:center;text-shadow:2px 2px 4px var(--text-shadow)}.form[_ngcontent-%COMP%]{background:var(--form-bg);padding:2rem;border-radius:1rem;box-shadow:0 8px 16px var(--form-shadow);display:flex;flex-direction:column;gap:1rem;width:min(90%,400px)}.form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;padding:.7rem;border-radius:var(--input-border-radius);border:none;outline:none;font-size:1rem}.password-inputs[_ngcontent-%COMP%]{display:flex;gap:.5rem}.password-inputs[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{flex:1;text-align:center;font-size:1.2rem}button[_ngcontent-%COMP%]{background:var(--button-bg);color:var(--button-text);font-size:1rem;padding:.8rem;border:none;border-radius:var(--input-border-radius);cursor:pointer;font-weight:700;transition:.3s}button[_ngcontent-%COMP%]:hover{background:var(--button-hover-bg)}"]})};var bp=class t{constructor(e){this.firestore=e}registerServiceWorker(){return _(this,null,function*(){if(!("serviceWorker"in navigator))return null;try{let e=document.getElementsByTagName("base")[0]?.getAttribute("href")||"/";return yield navigator.serviceWorker.register(`${e}firebase-messaging-sw.js`)}catch(e){return console.error("Service worker registration failed",e),null}})}requestPermissionAndSave(e){return _(this,null,function*(){try{if(Notification.permission!=="granted"&&(yield Notification.requestPermission())!=="granted")return console.warn("Notification permission not granted"),null;let n=yield this.registerServiceWorker(),r=$u(),i={vapidKey:lp.firebase.vapidKey};n&&(i.serviceWorkerRegistration=n);let o=yield GI(r,i);if(!o)return console.warn("No FCM token returned"),null;let s=Ko(this.firestore,"devices",o),a=yield Sa(s),u=new Date;return a.exists()?a.data().userId!==e?yield Pi(s,{userId:e,lastSeen:u},{merge:!0}):yield Pi(s,{lastSeen:u},{merge:!0}):yield Pi(s,{userId:e,token:o,createdAt:u,lastSeen:u,platform:navigator.platform||null,userAgent:navigator.userAgent||null}),localStorage.setItem("fcm_token",o),o}catch(n){return console.error("FCM permission/token error",n),null}})}ensureDeviceSaved(e){return _(this,null,function*(){let n=localStorage.getItem("fcm_token");if(n)try{let r=Ko(this.firestore,"devices",n),i=yield Sa(r);if(i.exists())return i.data().userId!==e?yield Pi(r,{userId:e,lastSeen:new Date},{merge:!0}):yield Pi(r,{lastSeen:new Date},{merge:!0}),n}catch(r){console.error("Error validating local token",r)}return yield this.requestPermissionAndSave(e)})}listenForeground(){try{let e=$u();WI(e,n=>{console.log("Foreground message:",n),n.notification&&new Notification(n.notification.title||"Notification",{body:n.notification.body})})}catch(e){console.error("Error listening to messages",e)}}static \u0275fac=function(n){return new(n||t)(Z(st))};static \u0275prov=z({token:t,factory:t.\u0275fac,providedIn:"root"})};function W3(t,e){if(t&1){let n=Rn();x(0,"button",11),ae("click",function(){let i=it(n).$implicit,o=_e();return ot(o.seleccionar(i.ruta))}),U(1),O()}if(t&2){let n=e.$implicit;$(),Kt(" ",n.titulo," ")}}function K3(t,e){t&1&&(x(0,"div",12)(1,"div",13)(2,"h1"),U(3,"\u{1F381} Amigo Secreto \u{1F381}"),O(),x(4,"p",14),U(5," \xA1Bienvenido al juego del Amigo Secreto! \u{1F389}"),Ir(6,"br"),U(7," Cada participante deber\xE1 regalar un obsequio con un valor entre "),x(8,"strong"),U(9,"$50.000"),O(),U(10," y "),x(11,"strong"),U(12,"$100.000"),O(),U(13,". "),O(),x(14,"p",15),U(15," El juego se realizar\xE1 el "),x(16,"strong"),U(17,"3 de octubre"),O(),U(18,"."),Ir(19,"br"),U(20," Adem\xE1s, habr\xE1 "),x(21,"strong"),U(22,"2 endulzadas de $10.000"),O(),U(23,", una cada viernes correspondiente a la semana del juego \u{1F36C}. "),O(),x(24,"p",16),U(25," Prep\xE1rate, divi\xE9rtete y disfruta descubriendo qui\xE9n es tu amigo secreto. \xA1Sorpresas y dulces te esperan! "),O()()())}var Dp=class t{firestore=R(st);injector=R(Ne);userSignal=R(ur);router=R(Dr);notificationService=R(bp);usuario=this.userSignal.usuario;menu=[{titulo:"Preferencias",ruta:"/inicio/preferencias"},{titulo:"Jugadores",ruta:"/inicio/jugadores"},{titulo:"Mi Amigo Secreto",ruta:"/inicio/preferencias?readonly=true"}];isChildActive=!1;ngOnInit(){let e=this.usuario();e?.id&&(this.notificationService.ensureDeviceSaved(e.id),this.notificationService.listenForeground())}onImgError(e){e.target.src=cr}onActivate(){this.isChildActive=!0}onDeactivate(){this.isChildActive=!1}seleccionar(e){let[n,r]=e.split("?"),i={};r&&r.split("&").forEach(o=>{let[s,a]=o.split("=");i[s]=a}),this.router.navigate([n],{queryParams:i})}cambiarImagen(){return _(this,null,function*(){let e=prompt("Ingresa la URL de tu nueva imagen:");if(!e)return;let n=this.usuario();if(n)try{let r=Pt(this.firestore,"usuarios"),i=un(r,Ur("correo","==",n.correo)),o=yield xt(i);if(!o.empty){let s=o.docs[0].ref;yield ZN(s,{imagen:e})}this.userSignal.setUsuario(re(F({},n),{imagen:e}))}catch(r){console.error("Error al actualizar imagen:",r),alert("Error al actualizar imagen. Revisa la consola.")}})}static \u0275fac=function(n){return new(n||t)};static \u0275cmp=It({type:t,selectors:[["app-indexlogin"]],decls:16,vars:5,consts:[[1,"container"],[1,"sidebar"],[1,"user-info"],[1,"user-avatar-wrapper"],["alt","Avatar",1,"avatar",3,"error","src"],[1,"camera-btn",3,"click"],[1,"menu"],[3,"click",4,"ngFor","ngForOf"],[1,"content"],["class","game-info",4,"ngIf"],[3,"activate","deactivate"],[3,"click"],[1,"game-info"],[1,"info-container"],[1,"description"],[1,"dates"],[1,"instructions"]],template:function(n,r){if(n&1&&(x(0,"div",0)(1,"aside",1)(2,"div",2)(3,"div",3)(4,"img",4),ae("error",function(o){return r.onImgError(o)}),O(),x(5,"button",5),ae("click",function(){return r.cambiarImagen()}),U(6,"\u{1F4F7}"),O()(),x(7,"h2"),U(8),O(),x(9,"p"),U(10),O()(),x(11,"nav",6),Fe(12,W3,2,1,"button",7),O()(),x(13,"main",8),Fe(14,K3,26,0,"div",9),x(15,"router-outlet",10),ae("activate",function(){return r.onActivate()})("deactivate",function(){return r.onDeactivate()}),O()()()),n&2){let i,o,s;$(4),me("src",(i=r.usuario())==null?null:i.imagen,di),$(4),Ut((o=r.usuario())==null?null:o.nombre),$(2),Ut((s=r.usuario())==null?null:s.personaje),$(2),me("ngForOf",r.menu),$(2),me("ngIf",!r.isChildActive)}},dependencies:[Qn,Kn,mo,wo],styles:["[_nghost-%COMP%]{--sidebar-gradient-start: #ff6a00;--sidebar-gradient-end: #ee0979;--sidebar-text-color: #ffffff;--sidebar-border-color: #ffffff;--sidebar-hover-bg: rgba(255,255,255,.2);--content-bg-gradient-start: #ffe6f0;--content-bg-gradient-end: #fff7e6;--content-text-color: #333333;--game-box-bg: rgba(255, 255, 255, .95);--game-box-shadow: rgba(0,0,0,.2);--game-title-color: #ff6a00;--highlight-color: #ee0979;--avatar-border-color: #ffffff;--camera-btn-bg: #ffffff}.container[_ngcontent-%COMP%]{display:flex;height:100vh;font-family:Arial,sans-serif}.sidebar[_ngcontent-%COMP%]{width:25vw;background:linear-gradient(135deg,var(--sidebar-gradient-start),var(--sidebar-gradient-end));color:var(--sidebar-text-color);padding:1.5rem 1rem;display:flex;flex-direction:column;align-items:center;box-shadow:4px 0 8px #0003}.user-info[_ngcontent-%COMP%]{text-align:center;margin-bottom:3rem}.user-info[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:.3rem 0 .2rem;font-size:1.2rem}.user-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:.95rem;opacity:.9}.menu[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%;padding:.7rem;margin-bottom:.5rem;background:transparent;border:2px solid var(--sidebar-border-color);color:var(--sidebar-text-color);border-radius:.5rem;cursor:pointer;font-weight:700;transition:.3s}.menu[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background:var(--sidebar-hover-bg)}.user-avatar-wrapper[_ngcontent-%COMP%]{position:relative;width:100px;height:100px;margin:0 auto}.avatar[_ngcontent-%COMP%]{width:100%;height:100%;border-radius:50%;object-fit:cover;border:3px solid var(--avatar-border-color);box-shadow:0 4px 10px #0000004d}.camera-btn[_ngcontent-%COMP%]{position:absolute;bottom:0;right:0;background:var(--camera-btn-bg);border-radius:50%;border:none;width:28px;height:28px;cursor:pointer;font-size:14px;display:flex;align-items:center;justify-content:center;box-shadow:0 2px 5px #0000004d}.content[_ngcontent-%COMP%]{display:flex;flex:1;width:75vw;height:100vh;background:linear-gradient(135deg,var(--content-bg-gradient-start),var(--content-bg-gradient-end));box-sizing:border-box;overflow-y:auto}.game-info[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;justify-content:center;align-items:center}.info-container[_ngcontent-%COMP%]{max-width:600px;padding:2rem;background:var(--game-box-bg);border-radius:1rem;box-shadow:0 8px 20px var(--game-box-shadow)}.game-info[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:2.5rem;color:var(--game-title-color);margin-bottom:1rem}.game-info[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%], .game-info[_ngcontent-%COMP%]   .dates[_ngcontent-%COMP%], .game-info[_ngcontent-%COMP%]   .instructions[_ngcontent-%COMP%]{font-size:1.1rem;line-height:1.6;color:var(--content-text-color);margin-bottom:1rem}.game-info[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{color:var(--highlight-color)}"]})};var iw=()=>({standalone:!0});function Q3(t,e){t&1&&(x(0,"div",2)(1,"p"),U(2,"\u23F3 Espera el sorteo, a\xFAn no tienes amigo secreto asignado."),O()())}function Y3(t,e){t&1&&(x(0,"h1"),U(1,"\u{1F381} Mis Preferencias \u{1F381}"),O())}function Z3(t,e){t&1&&(x(0,"h1"),U(1,"\u{1F381} Preferencias de tu amigo secreto \u{1F381}"),O())}function J3(t,e){if(t&1){let n=Rn();x(0,"div",8)(1,"h2"),U(2),O(),x(3,"div",9)(4,"img",10),ae("error",function(i){it(n);let o=_e(2);return ot(o.onImgError(i))}),O(),x(5,"h3"),U(6),O()()()}if(t&2){let n=_e(2);$(2),Kt("Amigo Secreto del sorteo ",n.idSorteo||"N/A"),$(2),me("src",n.imagenAmigo,di),$(2),Ut(n.personajeAmigo||"Desconocido")}}function X3(t,e){if(t&1){let n=Rn();x(0,"button",19),ae("click",function(){it(n);let i=_e().index,o=_e(3);return ot(o.removeGusto(i))}),U(1,"\xD7"),O()}}function eq(t,e){if(t&1&&(x(0,"span"),U(1),Fe(2,X3,2,0,"button",18),O()),t&2){let n=e.$implicit,r=_e(3);$(),Kt(" ",n," "),$(),me("ngIf",!r.readonly)}}function tq(t,e){if(t&1){let n=Rn();x(0,"button",19),ae("click",function(){it(n);let i=_e().index,o=_e(3);return ot(o.removeNoGusto(i))}),U(1,"\xD7"),O()}}function nq(t,e){if(t&1&&(x(0,"span"),U(1),Fe(2,tq,2,0,"button",18),O()),t&2){let n=e.$implicit,r=_e(3);$(),Kt(" ",n," "),$(),me("ngIf",!r.readonly)}}function rq(t,e){if(t&1){let n=Rn();x(0,"button",19),ae("click",function(){it(n);let i=_e().index,o=_e(3);return ot(o.removeRegalo(i))}),U(1,"\xD7"),O()}}function iq(t,e){if(t&1&&(x(0,"span"),U(1),Fe(2,rq,2,0,"button",18),O()),t&2){let n=e.$implicit,r=_e(3);$(),Kt(" ",n," "),$(),me("ngIf",!r.readonly)}}function oq(t,e){if(t&1){let n=Rn();x(0,"form",11),ae("submit",function(){it(n);let i=_e(2);return ot(i.guardarPreferencias())}),x(1,"label"),U(2," Que dulces te gustan "),x(3,"input",12),Ve("ngModelChange",function(i){it(n);let o=_e(2);return He(o.dulcesGustanInput,i)||(o.dulcesGustanInput=i),ot(i)}),ae("keydown",function(i){it(n);let o=_e(2);return ot(o.addGusto(i))}),O()(),x(4,"div",13),Fe(5,eq,3,2,"span",14),O(),x(6,"label"),U(7," Que dulces no te gustan "),x(8,"input",12),Ve("ngModelChange",function(i){it(n);let o=_e(2);return He(o.dulcesNoGustanInput,i)||(o.dulcesNoGustanInput=i),ot(i)}),ae("keydown",function(i){it(n);let o=_e(2);return ot(o.addNoGusto(i))}),O()(),x(9,"div",13),Fe(10,nq,3,2,"span",14),O(),x(11,"label"),U(12," Que te gustar\xEDa de regalo "),x(13,"input",15),Ve("ngModelChange",function(i){it(n);let o=_e(2);return He(o.regalosInput,i)||(o.regalosInput=i),ot(i)}),ae("keydown",function(i){it(n);let o=_e(2);return ot(o.addRegalo(i))}),O()(),x(14,"div",16),Fe(15,iq,3,2,"span",14),O(),x(16,"button",17),ae("click",function(){it(n);let i=_e(2);return ot(i.guardarPreferencias())}),U(17,"Guardar"),O()()}if(t&2){let n=_e(2);$(3),Le("ngModel",n.dulcesGustanInput),me("ngModelOptions",Vc(9,iw)),$(2),me("ngForOf",n.dulcesGustan),$(3),Le("ngModel",n.dulcesNoGustanInput),me("ngModelOptions",Vc(10,iw)),$(2),me("ngForOf",n.dulcesNoGustan),$(3),Le("ngModel",n.regalosInput),me("ngModelOptions",Vc(11,iw)),$(2),me("ngForOf",n.regalos)}}function sq(t,e){if(t&1&&(x(0,"span"),U(1),O()),t&2){let n=e.$implicit;$(),Ut(n)}}function aq(t,e){if(t&1&&(x(0,"span"),U(1),O()),t&2){let n=e.$implicit;$(),Ut(n)}}function cq(t,e){if(t&1&&(x(0,"span"),U(1),O()),t&2){let n=e.$implicit;$(),Ut(n)}}function uq(t,e){if(t&1&&(x(0,"div",20)(1,"h3"),U(2,"Que dulces te gustan"),O(),x(3,"div",13),Fe(4,sq,2,1,"span",14),O(),x(5,"h3"),U(6,"Que dulces no te gustan"),O(),x(7,"div",13),Fe(8,aq,2,1,"span",14),O(),x(9,"h3"),U(10,"Que te gustar\xEDa de regalo"),O(),x(11,"div",16),Fe(12,cq,2,1,"span",14),O()()),t&2){let n=_e(2);$(4),me("ngForOf",n.dulcesGustan),$(4),me("ngForOf",n.dulcesNoGustan),$(4),me("ngForOf",n.regalos)}}function lq(t,e){if(t&1&&(x(0,"div",3),Fe(1,Y3,2,0,"h1",4)(2,Z3,2,0,"h1",4)(3,J3,7,3,"div",5)(4,oq,18,12,"form",6)(5,uq,13,3,"div",7),O()),t&2){let n=_e();$(),me("ngIf",!n.readonly),$(),me("ngIf",n.readonly),$(),me("ngIf",n.readonly),$(),me("ngIf",!n.readonly),$(),me("ngIf",n.readonly)}}var Cp=class t{constructor(e){this.route=e}firestore=R(st);userSignal=R(ur);correoUsuario;readonly=!1;usuarioActual=this.userSignal.usuario();imagenAmigo;personajeAmigo;idSorteo="";haySorteos=!1;tieneAmigoAsignado=!1;dulcesGustanInput="";dulcesNoGustanInput="";regalosInput="";dulcesGustan=[];dulcesNoGustan=[];regalos=[];ngOnInit(){return _(this,null,function*(){this.route.queryParamMap.subscribe(e=>_(this,null,function*(){if(this.readonly=e.get("readonly")==="true",this.readonly){let n=yield this.buscarCorreoAmigoSecreto();n&&n.correoAmigo?(this.idSorteo=n.idSorteo,this.correoUsuario=n.correoAmigo,this.imagenAmigo=n.imagen,this.personajeAmigo=n.personaje):(this.idSorteo="",this.correoUsuario=void 0,this.imagenAmigo=void 0,this.personajeAmigo=void 0,this.dulcesGustan=[],this.dulcesNoGustan=[],this.regalos=[])}else this.correoUsuario=this.usuarioActual?.correo,this.idSorteo="",this.imagenAmigo=void 0,this.personajeAmigo=void 0;yield this.cargarPreferencias()}))})}onImgError(e){e.target.src=cr}buscarCorreoAmigoSecreto(){return _(this,null,function*(){let n=this.usuarioActual?.id;if(!n)return console.warn("No user ID to search for draws"),this.haySorteos=!1,this.tieneAmigoAsignado=!1,null;try{let r=Pt(this.firestore,"sorteo"),i=un(r,Ur("idUsuario","==",n)),o=yield xt(i);if(o.empty)return this.haySorteos=!1,this.tieneAmigoAsignado=!1,null;this.haySorteos=!0;let a=o.docs.map(y=>y.data()).sort((y,S)=>S.idSorteo.localeCompare(y.idSorteo))[0];if(!a.idAmigo)return this.tieneAmigoAsignado=!1,null;this.tieneAmigoAsignado=!0;let u=Ko(this.firestore,"usuarios",a.idAmigo),l=yield Sa(u),h="",p="Unknown",m="";if(l.exists()){let y=l.data();h=y.imagen||cr,p=y.personaje||p,m=y.correo||""}return{idSorteo:a.idSorteo,amigoId:a.idAmigo,imagen:h,personaje:p,correoAmigo:m}}catch(r){return console.error("Error searching and loading secret friend:",r),this.haySorteos=!1,this.tieneAmigoAsignado=!1,null}})}cargarPreferencias(){return _(this,null,function*(){let e=this.correoUsuario;if(!e){this.dulcesGustan=[],this.dulcesNoGustan=[],this.regalos=[];return}try{let n=Ko(this.firestore,"preferencias",e),r=yield Sa(n);if(r.exists()){let i=r.data();this.dulcesGustan=i.dulcesGustan||[],this.dulcesNoGustan=i.dulcesNoGustan||[],this.regalos=i.regalos||[]}else this.dulcesGustan=[],this.dulcesNoGustan=[],this.regalos=[]}catch(n){console.error("Error al cargar las preferencias:",n),this.dulcesGustan=[],this.dulcesNoGustan=[],this.regalos=[]}})}addGusto(e){this.readonly||e.key==="Enter"&&this.dulcesGustanInput.trim()&&(this.dulcesGustan.push(this.dulcesGustanInput.trim()),this.dulcesGustanInput="",e.preventDefault())}addNoGusto(e){this.readonly||e.key==="Enter"&&this.dulcesNoGustanInput.trim()&&(this.dulcesNoGustan.push(this.dulcesNoGustanInput.trim()),this.dulcesNoGustanInput="",e.preventDefault())}addRegalo(e){this.readonly||e.key==="Enter"&&this.regalosInput.trim()&&(this.regalos.push(this.regalosInput.trim()),this.regalosInput="",e.preventDefault())}removeGusto(e){this.readonly||this.dulcesGustan.splice(e,1)}removeNoGusto(e){this.readonly||this.dulcesNoGustan.splice(e,1)}removeRegalo(e){this.readonly||this.regalos.splice(e,1)}guardarPreferencias(){return _(this,null,function*(){if(this.readonly)return;let e=this.usuarioActual?.correo;if(e)try{let n=Ko(this.firestore,"preferencias",e);yield Pi(n,{correo:e,dulcesGustan:this.dulcesGustan,dulcesNoGustan:this.dulcesNoGustan,regalos:this.regalos}),alert("\u2705 Preferencias guardadas correctamente!")}catch(n){console.error("Error al guardar las preferencias:",n),alert("Error al guardar preferencias. Revisa la consola.")}})}static \u0275fac=function(n){return new(n||t)(pe(Mn))};static \u0275cmp=It({type:t,selectors:[["app-preferencias"]],inputs:{correoUsuario:"correoUsuario",readonly:"readonly"},decls:2,vars:2,consts:[["class","espera-sorteo",4,"ngIf"],["class","preferencias-container",4,"ngIf"],[1,"espera-sorteo"],[1,"preferencias-container"],[4,"ngIf"],["class","amigo-secreto-box",4,"ngIf"],[3,"submit",4,"ngIf"],["class","readonly-preferences",4,"ngIf"],[1,"amigo-secreto-box"],[1,"amigo-secreto-info"],[1,"amigo-avatar",3,"error","src"],[3,"submit"],["type","text","placeholder","Agregar dulce y presiona Enter",3,"ngModelChange","keydown","ngModel","ngModelOptions"],[1,"tags"],[4,"ngFor","ngForOf"],["type","text","placeholder","Agregar regalo y presiona Enter",3,"ngModelChange","keydown","ngModel","ngModelOptions"],[1,"tags-vertical"],["type","button",3,"click"],["class","tag-close","type","button",3,"click",4,"ngIf"],["type","button",1,"tag-close",3,"click"],[1,"readonly-preferences"]],template:function(n,r){n&1&&Fe(0,Q3,3,0,"div",0)(1,lq,6,5,"div",1),n&2&&(me("ngIf",r.readonly&&!r.haySorteos),$(),me("ngIf",!(r.readonly&&!r.haySorteos)))},dependencies:[Qn,Kn,mo,Oi,Pa,ar,ki,Ma,$r,Jo],styles:["[_nghost-%COMP%]{width:100%;height:100%;display:flex;justify-content:center;align-items:center;text-align:center;--bg-primary: #ff6a00;--bg-secondary: #ee0979;--bg-tertiary: #f9f0ff;--text-primary: #fff;--text-secondary: #333;--accent-color: #9c27b0;--border-radius: .5rem;--tag-radius: .3rem;--input-padding: .5rem;--button-padding: .7rem 1rem}.preferencias-container[_ngcontent-%COMP%]{padding:2rem;font-family:Arial,sans-serif}label[_ngcontent-%COMP%]{display:block;margin-bottom:1rem}input[_ngcontent-%COMP%]{width:100%;padding:var(--input-padding);margin-top:.3rem}.tags[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:inline-block;background:var(--bg-secondary);color:var(--text-primary);border-radius:var(--tag-radius);padding:.2rem .5rem;margin:.2rem}.tags-vertical[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:block;background:var(--bg-primary);color:var(--text-primary);border-radius:var(--tag-radius);padding:.2rem .5rem;margin:.2rem 0}button[_ngcontent-%COMP%]{margin-top:1rem;padding:var(--button-padding);background:var(--bg-primary);color:var(--text-primary);border:none;border-radius:var(--border-radius);cursor:pointer;font-weight:700;transition:.3s}button[_ngcontent-%COMP%]:hover{background:var(--bg-secondary)}.amigo-secreto-box[_ngcontent-%COMP%]{border:2px dashed var(--accent-color);padding:1rem;margin-bottom:2rem;background-color:var(--bg-tertiary);text-align:center;border-radius:12px}.amigo-secreto-info[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;margin-top:1rem}.amigo-avatar[_ngcontent-%COMP%]{width:100px;height:100px;border-radius:50%;object-fit:cover;border:3px solid var(--accent-color);margin-bottom:.5rem}.espera-sorteo[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{text-align:center;font-size:1rem;color:var(--text-secondary)}.tag-close[_ngcontent-%COMP%]{background:none;border:none;color:var(--text-primary);font-weight:700;margin-left:.5rem;cursor:pointer;font-size:1rem;line-height:1;padding:0;margin-top:0}.tag-close[_ngcontent-%COMP%]:hover{color:#fff;background:#fff3;border-radius:50%}"]})};function dq(t,e){if(t&1){let n=Rn();x(0,"div",2)(1,"div",3)(2,"img",4),ae("error",function(i){it(n);let o=_e();return ot(o.onImgError(i))}),O()(),x(3,"h2"),U(4),O(),x(5,"p")(6,"strong"),U(7,"Registrado:"),O(),U(8),O()()}if(t&2){let n=e.$implicit,r=_e();$(2),me("src",n.imagen,di),$(2),Ut(n.personaje),$(4),Kt(" ",r.getFechaLegible(n.fechaRegistro)," ")}}var Tp=class t{firestore=R(st);injector=R(Ne);userSignal=R(ur);usuarios=ct([]);ngOnInit(){return _(this,null,function*(){try{let e=Pt(this.firestore,"usuarios"),n=un(e);yield Me(this.injector,()=>_(this,null,function*(){let r=yield xt(n);this.usuarios.set(r.docs.map(i=>{let o=i.data();return o.imagen=o.imagen||cr,o}))}))}catch(e){console.error("Error fetching users:",e)}})}onImgError(e){e.target.src=cr}getFechaLegible(e){if(!e)return"Sin fecha";try{return(typeof e.toDate=="function"?e.toDate():new Date(e)).toLocaleString("es-ES",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"})}catch(n){return console.error("Error al formatear fecha:",n),"Fecha inv\xE1lida"}}static \u0275fac=function(n){return new(n||t)};static \u0275cmp=It({type:t,selectors:[["app-userscardsgrid"]],decls:2,vars:1,consts:[[1,"users-container"],["class","user-card",4,"ngFor","ngForOf"],[1,"user-card"],[1,"avatar-wrapper"],["alt","Avatar",1,"avatar",3,"error","src"]],template:function(n,r){n&1&&(x(0,"div",0),Fe(1,dq,9,3,"div",1),O()),n&2&&($(),me("ngForOf",r.usuarios()))},dependencies:[Qn,Kn],styles:['[_nghost-%COMP%]{display:flex;--color-bg-card: #ffffff;--color-shadow: rgba(0, 0, 0, .1);--color-shadow-hover: rgba(0, 0, 0, .15);--color-border-avatar: #ff6a00;--color-heading: #333333;--color-text: #555555;--shadow-default: 0 4px 15px var(--color-shadow);--shadow-hover: 0 10px 25px var(--color-shadow-hover);--radius-lg: 1rem;--radius-full: 50%;--gap-grid: 1.5rem;--padding-container: 2rem;--padding-card: 1.5rem}.users-container[_ngcontent-%COMP%]{width:75vw;display:grid;grid-template-columns:repeat(auto-fit,minmax(250px,1fr));gap:var(--gap-grid);padding:var(--padding-container);margin:auto;box-sizing:border-box;padding:5%}.user-card[_ngcontent-%COMP%]{background:linear-gradient(135deg,var(--content-bg-gradient-start),var(--content-bg-gradient-end));border-radius:var(--radius-lg);box-shadow:0 8px 20px var(--game-box-shadow);padding:2rem;text-align:center;transition:transform .3s ease,box-shadow .3s ease,background .3s ease;position:relative;overflow:hidden}.user-card[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:0;width:100%;height:5px;background:linear-gradient(to right,var(--sidebar-gradient-start),var(--sidebar-gradient-end));border-top-left-radius:var(--radius-lg);border-top-right-radius:var(--radius-lg)}.user-card[_ngcontent-%COMP%]:hover{transform:translateY(-8px);box-shadow:0 12px 30px var(--game-box-shadow);background:linear-gradient(135deg,var(--content-bg-gradient-end),var(--content-bg-gradient-start))}.avatar[_ngcontent-%COMP%]{width:100px;height:100px;border-radius:var(--radius-full);object-fit:cover;margin-bottom:1rem;border:3px solid var(--color-border-avatar)}h2[_ngcontent-%COMP%]{margin:.5rem 0;font-size:1.2rem;color:var(--color-heading)}p[_ngcontent-%COMP%]{margin:.25rem 0;color:var(--color-text);font-size:.95rem}']})};function hq(t,e){if(t&1&&(x(0,"div")(1,"h3"),U(2,"Comando cURL:"),O(),x(3,"pre"),U(4),O()()),t&2){let n=_e();$(4),Ut(n.comandoGenerado)}}function fq(t,e){if(t&1&&(x(0,"li"),U(1),O()),t&2){let n=e.$implicit;$(),Zd(" ",n.personaje," \u2192 ",n.amigo," ")}}function pq(t,e){if(t&1&&(x(0,"div")(1,"h3"),U(2),O(),x(3,"ul"),Fe(4,fq,2,2,"li",6),O()()),t&2){let n=e.$implicit;$(2),Kt("Asignaciones del sorteo ",n.idSorteo,":"),$(2),me("ngForOf",n.asignaciones)}}var Sp=class t{firestore=R(st);tokenFCM="";comandoGenerado="";mensaje="";sorteos=[];ngOnInit(){return _(this,null,function*(){yield this.cargarTodosSorteos()})}cargarTodosSorteos(){return _(this,null,function*(){try{let e=Pt(this.firestore,"sorteo"),n=un(e,YN("idSorteo","desc")),i=(yield xt(n)).docs.map(h=>h.data());if(i.length===0){this.mensaje="No hay sorteos realizados a\xFAn.",this.sorteos=[];return}let o=Pt(this.firestore,"usuarios"),a=(yield xt(o)).docs.map(h=>({id:h.id,personaje:h.data().personaje})),u=new Map;a.forEach(h=>u.set(h.id,h.personaje));let l=new Map;i.forEach(h=>{let p=h.idSorteo;l.has(p)||l.set(p,[]),l.get(p).push(h)}),this.sorteos=[],l.forEach((h,p)=>{let m=h.map(y=>({personaje:u.get(y.idUsuario)||y.idUsuario,amigo:u.get(y.idAmigo)||y.idAmigo}));m=this.ordenarCadenaEnlazada(m),this.sorteos.push({idSorteo:p,asignaciones:m})}),this.sorteos.sort((h,p)=>p.idSorteo.localeCompare(h.idSorteo)),this.mensaje=`Cargados ${this.sorteos.length} sorteos.`}catch(e){console.error("Error cargando sorteos:",e),this.mensaje="Error cargando sorteos."}})}ordenarCadenaEnlazada(e){if(e.length===0)return e;let n=new Map;e.forEach(o=>{n.set(o.personaje,o)});let r=[],i=e[0].personaje;for(let o=0;o<e.length;o++){let s=n.get(i);if(!s)break;r.push(s),i=s.amigo}return r}ejecutarSorteo(){return _(this,null,function*(){try{let e=Pt(this.firestore,"usuarios"),r=(yield xt(e)).docs.map(u=>F({id:u.id},u.data()));if(r.length<2){this.mensaje="\u274C No hay suficientes usuarios para el sorteo";return}let i=[...r].sort(()=>Math.random()-.5),o=new Date,s=""+o.getFullYear().toString()+String(o.getMonth()+1).padStart(2,"0")+String(o.getDate()).padStart(2,"0")+String(o.getHours()).padStart(2,"0")+String(o.getMinutes()).padStart(2,"0")+String(o.getSeconds()).padStart(2,"0"),a=Pt(this.firestore,"sorteo");for(let u=0;u<i.length;u++){let l=i[u],h=i[(u+1)%i.length];yield op(a,{idSorteo:s,idUsuario:l.id,idAmigo:h.id,personajeUsuario:l.personaje,personajeAmigo:h.personaje})}this.mensaje="\u2705 Sorteo realizado con \xE9xito",yield this.cargarTodosSorteos()}catch(e){console.error("Error al ejecutar sorteo:",e),this.mensaje="\u274C Error al ejecutar sorteo. Ver consola."}})}generarComandoCurlNotificacion(){return _(this,null,function*(){try{let e=Pt(this.firestore,"devices"),r=(yield xt(e)).docs.map(o=>o.id);if(r.length===0){this.mensaje="\u26A0\uFE0F No hay dispositivos registrados en FCM";return}let i={message:{token:r[0],notification:{title:"Hola desde FCM \u{1F680}",body:"Tu notificaci\xF3n push est\xE1 funcionando!"}}};this.comandoGenerado=`curl -X POST https://fcm.googleapis.com/v1/projects/webapp-amigo-secreto/messages:send \\
    -H "Authorization: Bearer ${this.tokenFCM}" \\
    -H "Content-Type: application/json; UTF-8" \\
    -d '${JSON.stringify(i)}'`,this.mensaje="\u2705 Comando cURL generado."}catch(e){console.error("Error generando comando cURL:",e),this.mensaje="\u274C Error generando comando cURL. Ver consola."}})}static \u0275fac=function(n){return new(n||t)};static \u0275cmp=It({type:t,selectors:[["app-ejecutarsorteo"]],decls:13,vars:4,consts:[[1,"sorteo-container"],["for","token"],["id","token","type","text","placeholder","Ingresa el token FCM",3,"ngModelChange","ngModel"],[1,"btn-group"],[3,"click"],[4,"ngIf"],[4,"ngFor","ngForOf"]],template:function(n,r){n&1&&(x(0,"div",0)(1,"label",1),U(2,"Token FCM:"),O(),x(3,"input",2),Ve("ngModelChange",function(o){return He(r.tokenFCM,o)||(r.tokenFCM=o),o}),O(),x(4,"div",3)(5,"button",4),ae("click",function(){return r.generarComandoCurlNotificacion()}),U(6,"Generar comando cURL"),O(),x(7,"button",4),ae("click",function(){return r.ejecutarSorteo()}),U(8,"Ejecutar Sorteo"),O()(),Fe(9,hq,5,1,"div",5),x(10,"h2"),U(11),O(),Fe(12,pq,5,2,"div",6),O()),n&2&&($(3),Le("ngModel",r.tokenFCM),$(6),me("ngIf",r.comandoGenerado),$(2),Ut(r.mensaje),$(),me("ngForOf",r.sorteos))},dependencies:[Qn,Kn,mo,Oi,ar,ki,$r],styles:['.sorteo-container[_ngcontent-%COMP%]{max-width:700px;margin:2rem auto;padding:2rem;background:#fff;border-radius:14px;box-shadow:0 8px 20px #0000001f;font-family:Segoe UI,Tahoma,Geneva,Verdana,sans-serif;color:#333}.sorteo-container[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;font-weight:600;margin-bottom:.5rem;color:#2c3e50}.sorteo-container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;padding:.7rem 1rem;font-size:1rem;border:1px solid #ccd6dd;border-radius:8px;margin-bottom:1.5rem;outline:none;transition:all .3s ease;box-shadow:0 2px 5px #0000000d}.sorteo-container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{border-color:#4a90e2;box-shadow:0 0 0 3px #4a90e240}.sorteo-container[_ngcontent-%COMP%]   .btn-group[_ngcontent-%COMP%]{display:flex;gap:1rem;margin-bottom:1.5rem}.sorteo-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{flex:1;background:linear-gradient(135deg,#4a90e2,#357abd);color:#fff;border:none;padding:.8rem 1.2rem;font-size:1rem;font-weight:600;border-radius:8px;cursor:pointer;transition:all .3s ease;box-shadow:0 4px 10px #4a90e24d}.sorteo-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#357abd,#2d5ea8);box-shadow:0 6px 14px #357abd80;transform:translateY(-2px)}.sorteo-container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{text-align:center;margin:2rem 0 1rem;font-weight:700;color:#2c3e50}.sorteo-container[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{background-color:#4a90e2;color:#fff;padding:.6rem 1rem;border-radius:8px;margin-top:2rem;margin-bottom:.8rem;font-weight:700;box-shadow:0 3px 8px #4a90e280}.sorteo-container[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{list-style-type:none;padding-left:0;border-left:3px solid #4a90e2;margin-left:.5rem}.sorteo-container[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{background:#fdfdfd;margin-bottom:.6rem;padding:.8rem 1rem;border-radius:8px;box-shadow:0 2px 6px #00000014;font-weight:500;font-size:1rem;color:#34495e;transition:background-color .2s ease,transform .2s ease}.sorteo-container[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover{background-color:#e6f0fa;transform:translate(4px)}.sorteo-container[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:before{content:"\\1f3b2  "}pre[_ngcontent-%COMP%]{white-space:pre-wrap;word-wrap:break-word;overflow-x:auto;font-family:monospace;padding:1rem;background:#f4f4f4;border-radius:8px;font-size:.9rem;line-height:1.4}']})};var rP=[{path:"",component:Ip},{path:"sortear",component:Sp},{path:"login",component:wp},{path:"inicio",component:Dp,children:[{path:"preferencias",component:Cp},{path:"jugadores",component:Tp}]}];var Ap=class t{title=ct("webapp-amigo-secreto");static \u0275fac=function(n){return new(n||t)};static \u0275cmp=It({type:t,selectors:[["app-root"]],decls:1,vars:0,template:function(n,r){n&1&&Ir(0,"router-outlet")},dependencies:[wo],encapsulation:2})};Ky(Ap,{providers:[vv(rP),VS(()=>jS(lp.firebase)),KN(()=>QN()),PM(()=>xM())]}).catch(t=>console.error(t));
