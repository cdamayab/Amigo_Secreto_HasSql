var $k=Object.defineProperty,Hk=Object.defineProperties;var qk=Object.getOwnPropertyDescriptors;var PT=Object.getOwnPropertySymbols;var zk=Object.prototype.hasOwnProperty,Gk=Object.prototype.propertyIsEnumerable;var xT=(t,e,n)=>e in t?$k(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,j=(t,e)=>{for(var n in e||={})zk.call(e,n)&&xT(t,n,e[n]);if(PT)for(var n of PT(e))Gk.call(e,n)&&xT(t,n,e[n]);return t},X=(t,e)=>Hk(t,qk(e));var v=(t,e,n)=>new Promise((r,i)=>{var o=u=>{try{a(n.next(u))}catch(l){i(l)}},s=u=>{try{a(n.throw(u))}catch(l){i(l)}},a=u=>u.done?r(u.value):Promise.resolve(u.value).then(o,s);a((n=n.apply(t,e)).next())});var um;function ed(){return um}function mr(t){let e=um;return um=t,e}var kT=Symbol("NotFound");function Vs(t){return t===kT||t?.name==="\u0275NotFound"}function od(t,e){return Object.is(t,e)}var jt=null,td=!1,lm=1,Wk=null,Ut=Symbol("SIGNAL");function de(t){let e=jt;return jt=t,e}function sd(){return jt}var js={version:0,lastCleanEpoch:0,dirty:!1,producers:void 0,producersTail:void 0,consumers:void 0,consumersTail:void 0,recomputing:!1,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,kind:"unknown",producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function Us(t){if(td)throw new Error("");if(jt===null)return;jt.consumerOnSignalRead(t);let e=jt.producersTail;if(e!==void 0&&e.producer===t)return;let n,r=jt.recomputing;if(r&&(n=e!==void 0?e.nextProducer:jt.producers,n!==void 0&&n.producer===t)){jt.producersTail=n,n.lastReadVersion=t.version;return}let i=t.consumersTail;if(i!==void 0&&i.consumer===jt&&(!r||Qk(i,jt)))return;let o=$s(jt),s={producer:t,consumer:jt,nextProducer:n,prevConsumer:i,lastReadVersion:t.version,nextConsumer:void 0};jt.producersTail=s,e!==void 0?e.nextProducer=s:jt.producers=s,o&&VT(t,s)}function OT(){lm++}function ad(t){if(!($s(t)&&!t.dirty)&&!(!t.dirty&&t.lastCleanEpoch===lm)){if(!t.producerMustRecompute(t)&&!xc(t)){id(t);return}t.producerRecomputeValue(t),id(t)}}function dm(t){if(t.consumers===void 0)return;let e=td;td=!0;try{for(let n=t.consumers;n!==void 0;n=n.nextConsumer){let r=n.consumer;r.dirty||Kk(r)}}finally{td=e}}function fm(){return jt?.consumerAllowSignalWrites!==!1}function Kk(t){t.dirty=!0,dm(t),t.consumerMarkedDirty?.(t)}function id(t){t.dirty=!1,t.lastCleanEpoch=lm}function Bs(t){return t&&FT(t),de(t)}function FT(t){t.producersTail=void 0,t.recomputing=!0}function Pc(t,e){de(e),t&&LT(t)}function LT(t){t.recomputing=!1;let e=t.producersTail,n=e!==void 0?e.nextProducer:t.producers;if(n!==void 0){if($s(t))do n=hm(n);while(n!==void 0);e!==void 0?e.nextProducer=void 0:t.producers=void 0}}function xc(t){for(let e=t.producers;e!==void 0;e=e.nextProducer){let n=e.producer,r=e.lastReadVersion;if(r!==n.version||(ad(n),r!==n.version))return!0}return!1}function kc(t){if($s(t)){let e=t.producers;for(;e!==void 0;)e=hm(e)}t.producers=void 0,t.producersTail=void 0,t.consumers=void 0,t.consumersTail=void 0}function VT(t,e){let n=t.consumersTail,r=$s(t);if(n!==void 0?(e.nextConsumer=n.nextConsumer,n.nextConsumer=e):(e.nextConsumer=void 0,t.consumers=e),e.prevConsumer=n,t.consumersTail=e,!r)for(let i=t.producers;i!==void 0;i=i.nextProducer)VT(i.producer,i)}function hm(t){let e=t.producer,n=t.nextProducer,r=t.nextConsumer,i=t.prevConsumer;if(t.nextConsumer=void 0,t.prevConsumer=void 0,r!==void 0?r.prevConsumer=i:e.consumersTail=i,i!==void 0)i.nextConsumer=r;else if(e.consumers=r,!$s(e)){let o=e.producers;for(;o!==void 0;)o=hm(o)}return n}function $s(t){return t.consumerIsAlwaysLive||t.consumers!==void 0}function cd(t){Wk?.(t)}function Qk(t,e){let n=e.producersTail;if(n!==void 0){let r=e.producers;do{if(r===t)return!0;if(r===n)break;r=r.nextProducer}while(r!==void 0)}return!1}function ud(t,e){let n=Object.create(Yk);n.computation=t,e!==void 0&&(n.equal=e);let r=()=>{if(ad(n),Us(n),n.value===Mc)throw n.error;return n.value};return r[Ut]=n,cd(n),r}var nd=Symbol("UNSET"),rd=Symbol("COMPUTING"),Mc=Symbol("ERRORED"),Yk=X(j({},js),{value:nd,dirty:!0,error:null,equal:od,kind:"computed",producerMustRecompute(t){return t.value===nd||t.value===rd},producerRecomputeValue(t){if(t.value===rd)throw new Error("");let e=t.value;t.value=rd;let n=Bs(t),r,i=!1;try{r=t.computation(),de(null),i=e!==nd&&e!==Mc&&r!==Mc&&t.equal(e,r)}catch(o){r=Mc,t.error=o}finally{Pc(t,n)}if(i){t.value=e;return}t.value=r,t.version++}});function Jk(){throw new Error}var jT=Jk;function UT(t){jT(t)}function pm(t){jT=t}var Zk=null;function gm(t,e){let n=Object.create(ld);n.value=t,e!==void 0&&(n.equal=e);let r=()=>BT(n);return r[Ut]=n,cd(n),[r,s=>Hs(n,s),s=>mm(n,s)]}function BT(t){return Us(t),t.value}function Hs(t,e){fm()||UT(t),t.equal(t.value,e)||(t.value=e,Xk(t))}function mm(t,e){fm()||UT(t),Hs(t,e(t.value))}var ld=X(j({},js),{equal:od,value:void 0,kind:"signal"});function Xk(t){t.version++,OT(),dm(t),Zk?.(t)}function se(t){return typeof t=="function"}function qs(t){let n=t(r=>{Error.call(r),r.stack=new Error().stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var dd=qs(t=>function(n){t(this),this.message=n?`${n.length} errors occurred during unsubscription:
${n.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=n});function Io(t,e){if(t){let n=t.indexOf(e);0<=n&&t.splice(n,1)}}var Je=class t{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(let o of n)o.remove(this);else n.remove(this);let{initialTeardown:r}=this;if(se(r))try{r()}catch(o){e=o instanceof dd?o.errors:[o]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let o of i)try{$T(o)}catch(s){e=e??[],s instanceof dd?e=[...e,...s.errors]:e.push(s)}}if(e)throw new dd(e)}}add(e){var n;if(e&&e!==this)if(this.closed)$T(e);else{if(e instanceof t){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(e)}}_hasParent(e){let{_parentage:n}=this;return n===e||Array.isArray(n)&&n.includes(e)}_addParent(e){let{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(e),n):n?[n,e]:e}_removeParent(e){let{_parentage:n}=this;n===e?this._parentage=null:Array.isArray(n)&&Io(n,e)}remove(e){let{_finalizers:n}=this;n&&Io(n,e),e instanceof t&&e._removeParent(this)}};Je.EMPTY=(()=>{let t=new Je;return t.closed=!0,t})();var ym=Je.EMPTY;function fd(t){return t instanceof Je||t&&"closed"in t&&se(t.remove)&&se(t.add)&&se(t.unsubscribe)}function $T(t){se(t)?t():t.unsubscribe()}var Kn={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var zs={setTimeout(t,e,...n){let{delegate:r}=zs;return r?.setTimeout?r.setTimeout(t,e,...n):setTimeout(t,e,...n)},clearTimeout(t){let{delegate:e}=zs;return(e?.clearTimeout||clearTimeout)(t)},delegate:void 0};function hd(t){zs.setTimeout(()=>{let{onUnhandledError:e}=Kn;if(e)e(t);else throw t})}function Oc(){}var HT=vm("C",void 0,void 0);function qT(t){return vm("E",void 0,t)}function zT(t){return vm("N",t,void 0)}function vm(t,e,n){return{kind:t,value:e,error:n}}var bo=null;function Gs(t){if(Kn.useDeprecatedSynchronousErrorHandling){let e=!bo;if(e&&(bo={errorThrown:!1,error:null}),t(),e){let{errorThrown:n,error:r}=bo;if(bo=null,n)throw r}}else t()}function GT(t){Kn.useDeprecatedSynchronousErrorHandling&&bo&&(bo.errorThrown=!0,bo.error=t)}var To=class extends Je{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,fd(e)&&e.add(this)):this.destination=nO}static create(e,n,r){return new Ai(e,n,r)}next(e){this.isStopped?Em(zT(e),this):this._next(e)}error(e){this.isStopped?Em(qT(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?Em(HT,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},eO=Function.prototype.bind;function _m(t,e){return eO.call(t,e)}var wm=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:n}=this;if(n.next)try{n.next(e)}catch(r){pd(r)}}error(e){let{partialObserver:n}=this;if(n.error)try{n.error(e)}catch(r){pd(r)}else pd(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(n){pd(n)}}},Ai=class extends To{constructor(e,n,r){super();let i;if(se(e)||!e)i={next:e??void 0,error:n??void 0,complete:r??void 0};else{let o;this&&Kn.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&_m(e.next,o),error:e.error&&_m(e.error,o),complete:e.complete&&_m(e.complete,o)}):i=e}this.destination=new wm(i)}};function pd(t){Kn.useDeprecatedSynchronousErrorHandling?GT(t):hd(t)}function tO(t){throw t}function Em(t,e){let{onStoppedNotification:n}=Kn;n&&zs.setTimeout(()=>n(t,e))}var nO={closed:!0,next:Oc,error:tO,complete:Oc};var Ws=typeof Symbol=="function"&&Symbol.observable||"@@observable";function yn(t){return t}function Im(...t){return bm(t)}function bm(t){return t.length===0?yn:t.length===1?t[0]:function(n){return t.reduce((r,i)=>i(r),n)}}var ce=(()=>{class t{constructor(n){n&&(this._subscribe=n)}lift(n){let r=new t;return r.source=this,r.operator=n,r}subscribe(n,r,i){let o=iO(n)?n:new Ai(n,r,i);return Gs(()=>{let{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(n){try{return this._subscribe(n)}catch(r){n.error(r)}}forEach(n,r){return r=WT(r),new r((i,o)=>{let s=new Ai({next:a=>{try{n(a)}catch(u){o(u),s.unsubscribe()}},error:o,complete:i});this.subscribe(s)})}_subscribe(n){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(n)}[Ws](){return this}pipe(...n){return bm(n)(this)}toPromise(n){return n=WT(n),new n((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return t.create=e=>new t(e),t})();function WT(t){var e;return(e=t??Kn.Promise)!==null&&e!==void 0?e:Promise}function rO(t){return t&&se(t.next)&&se(t.error)&&se(t.complete)}function iO(t){return t&&t instanceof To||rO(t)&&fd(t)}function Tm(t){return se(t?.lift)}function we(t){return e=>{if(Tm(e))return e.lift(function(n){try{return t(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function ye(t,e,n,r,i){return new Cm(t,e,n,r,i)}var Cm=class extends To{constructor(e,n,r,i,o,s){super(e),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=n?function(a){try{n(a)}catch(u){e.error(u)}}:super._next,this._error=i?function(a){try{i(a)}catch(u){e.error(u)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:n}=this;super.unsubscribe(),!n&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function Ks(){return we((t,e)=>{let n=null;t._refCount++;let r=ye(e,void 0,void 0,void 0,()=>{if(!t||t._refCount<=0||0<--t._refCount){n=null;return}let i=t._connection,o=n;n=null,i&&(!o||i===o)&&i.unsubscribe(),e.unsubscribe()});t.subscribe(r),r.closed||(n=t.connect())})}var Qs=class extends ce{constructor(e,n){super(),this.source=e,this.subjectFactory=n,this._subject=null,this._refCount=0,this._connection=null,Tm(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Je;let n=this.getSubject();e.add(this.source.subscribe(ye(n,void 0,()=>{this._teardown(),n.complete()},r=>{this._teardown(),n.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Je.EMPTY)}return e}refCount(){return Ks()(this)}};var KT=qs(t=>function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var at=(()=>{class t extends ce{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){let r=new gd(this,this);return r.operator=n,r}_throwIfClosed(){if(this.closed)throw new KT}next(n){Gs(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(n)}})}error(n){Gs(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;let{observers:r}=this;for(;r.length;)r.shift().error(n)}})}complete(){Gs(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return((n=this.observers)===null||n===void 0?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){let{hasError:r,isStopped:i,observers:o}=this;return r||i?ym:(this.currentObservers=null,o.push(n),new Je(()=>{this.currentObservers=null,Io(o,n)}))}_checkFinalizedStatuses(n){let{hasError:r,thrownError:i,isStopped:o}=this;r?n.error(i):o&&n.complete()}asObservable(){let n=new ce;return n.source=this,n}}return t.create=(e,n)=>new gd(e,n),t})(),gd=class extends at{constructor(e,n){super(),this.destination=e,this.source=n}next(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.next)===null||r===void 0||r.call(n,e)}error(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.error)===null||r===void 0||r.call(n,e)}complete(){var e,n;(n=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||n===void 0||n.call(e)}_subscribe(e){var n,r;return(r=(n=this.source)===null||n===void 0?void 0:n.subscribe(e))!==null&&r!==void 0?r:ym}};var Rt=class extends at{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let n=super._subscribe(e);return!n.closed&&e.next(this._value),n}getValue(){let{hasError:e,thrownError:n,_value:r}=this;if(e)throw n;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var Dm={now(){return(Dm.delegate||Date).now()},delegate:void 0};var md=class extends Je{constructor(e,n){super()}schedule(e,n=0){return this}};var Fc={setInterval(t,e,...n){let{delegate:r}=Fc;return r?.setInterval?r.setInterval(t,e,...n):setInterval(t,e,...n)},clearInterval(t){let{delegate:e}=Fc;return(e?.clearInterval||clearInterval)(t)},delegate:void 0};var Ys=class extends md{constructor(e,n){super(e,n),this.scheduler=e,this.work=n,this.pending=!1}schedule(e,n=0){var r;if(this.closed)return this;this.state=e;let i=this.id,o=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(o,i,n)),this.pending=!0,this.delay=n,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(o,this.id,n),this}requestAsyncId(e,n,r=0){return Fc.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,n,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return n;n!=null&&Fc.clearInterval(n)}execute(e,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,n);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,n){let r=!1,i;try{this.work(e)}catch(o){r=!0,i=o||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:n}=this,{actions:r}=n;this.work=this.state=this.scheduler=null,this.pending=!1,Io(r,this),e!=null&&(this.id=this.recycleAsyncId(n,e,null)),this.delay=null,super.unsubscribe()}}};var Js=class t{constructor(e,n=t.now){this.schedulerActionCtor=e,this.now=n}schedule(e,n=0,r){return new this.schedulerActionCtor(this,e).schedule(r,n)}};Js.now=Dm.now;var Zs=class extends Js{constructor(e,n=Js.now){super(e,n),this.actions=[],this._active=!1}flush(e){let{actions:n}=this;if(this._active){n.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=n.shift());if(this._active=!1,r){for(;e=n.shift();)e.unsubscribe();throw r}}};var Sm=new Zs(Ys);var yd=class extends Ys{constructor(e,n){super(e,n),this.scheduler=e,this.work=n}schedule(e,n=0){return n>0?super.schedule(e,n):(this.delay=n,this.state=e,this.scheduler.flush(this),this)}execute(e,n){return n>0||this.closed?super.execute(e,n):this._execute(e,n)}requestAsyncId(e,n,r=0){return r!=null&&r>0||r==null&&this.delay>0?super.requestAsyncId(e,n,r):(e.flush(this),0)}};var vd=class extends Zs{};var Am=new vd(yd);var nn=new ce(t=>t.complete());function QT(t){return t&&se(t.schedule)}function YT(t){return t[t.length-1]}function _d(t){return se(YT(t))?t.pop():void 0}function Ri(t){return QT(YT(t))?t.pop():void 0}function Rm(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function ZT(t,e,n,r){function i(o){return o instanceof n?o:new n(function(s){s(o)})}return new(n||(n=Promise))(function(o,s){function a(f){try{l(r.next(f))}catch(p){s(p)}}function u(f){try{l(r.throw(f))}catch(p){s(p)}}function l(f){f.done?o(f.value):i(f.value).then(a,u)}l((r=r.apply(t,e||[])).next())})}function JT(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Co(t){return this instanceof Co?(this.v=t,this):new Co(t)}function XT(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),i,o=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",s),i[Symbol.asyncIterator]=function(){return this},i;function s(y){return function(D){return Promise.resolve(D).then(y,p)}}function a(y,D){r[y]&&(i[y]=function(x){return new Promise(function(R,O){o.push([y,x,R,O])>1||u(y,x)})},D&&(i[y]=D(i[y])))}function u(y,D){try{l(r[y](D))}catch(x){g(o[0][3],x)}}function l(y){y.value instanceof Co?Promise.resolve(y.value.v).then(f,p):g(o[0][2],y)}function f(y){u("next",y)}function p(y){u("throw",y)}function g(y,D){y(D),o.shift(),o.length&&u(o[0][0],o[0][1])}}function e0(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof JT=="function"?JT(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(o){n[o]=t[o]&&function(s){return new Promise(function(a,u){s=t[o](s),i(a,u,s.done,s.value)})}}function i(o,s,a,u){Promise.resolve(u).then(function(l){o({value:l,done:a})},s)}}var Ed=t=>t&&typeof t.length=="number"&&typeof t!="function";function wd(t){return se(t?.then)}function Id(t){return se(t[Ws])}function bd(t){return Symbol.asyncIterator&&se(t?.[Symbol.asyncIterator])}function Td(t){return new TypeError(`You provided ${t!==null&&typeof t=="object"?"an invalid object":`'${t}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function oO(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var Cd=oO();function Dd(t){return se(t?.[Cd])}function Sd(t){return XT(this,arguments,function*(){let n=t.getReader();try{for(;;){let{value:r,done:i}=yield Co(n.read());if(i)return yield Co(void 0);yield yield Co(r)}}finally{n.releaseLock()}})}function Ad(t){return se(t?.getReader)}function ct(t){if(t instanceof ce)return t;if(t!=null){if(Id(t))return sO(t);if(Ed(t))return aO(t);if(wd(t))return cO(t);if(bd(t))return t0(t);if(Dd(t))return uO(t);if(Ad(t))return lO(t)}throw Td(t)}function sO(t){return new ce(e=>{let n=t[Ws]();if(se(n.subscribe))return n.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function aO(t){return new ce(e=>{for(let n=0;n<t.length&&!e.closed;n++)e.next(t[n]);e.complete()})}function cO(t){return new ce(e=>{t.then(n=>{e.closed||(e.next(n),e.complete())},n=>e.error(n)).then(null,hd)})}function uO(t){return new ce(e=>{for(let n of t)if(e.next(n),e.closed)return;e.complete()})}function t0(t){return new ce(e=>{dO(t,e).catch(n=>e.error(n))})}function lO(t){return t0(Sd(t))}function dO(t,e){var n,r,i,o;return ZT(this,void 0,void 0,function*(){try{for(n=e0(t);r=yield n.next(),!r.done;){let s=r.value;if(e.next(s),e.closed)return}}catch(s){i={error:s}}finally{try{r&&!r.done&&(o=n.return)&&(yield o.call(n))}finally{if(i)throw i.error}}e.complete()})}function rn(t,e,n,r=0,i=!1){let o=e.schedule(function(){n(),i?t.add(this.schedule(null,r)):this.unsubscribe()},r);if(t.add(o),!i)return o}function Ni(t,e=0){return we((n,r)=>{n.subscribe(ye(r,i=>rn(r,t,()=>r.next(i),e),()=>rn(r,t,()=>r.complete(),e),i=>rn(r,t,()=>r.error(i),e)))})}function Mi(t,e=0){return we((n,r)=>{r.add(t.schedule(()=>n.subscribe(r),e))})}function n0(t,e){return ct(t).pipe(Mi(e),Ni(e))}function r0(t,e){return ct(t).pipe(Mi(e),Ni(e))}function i0(t,e){return new ce(n=>{let r=0;return e.schedule(function(){r===t.length?n.complete():(n.next(t[r++]),n.closed||this.schedule())})})}function o0(t,e){return new ce(n=>{let r;return rn(n,e,()=>{r=t[Cd](),rn(n,e,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(s){n.error(s);return}o?n.complete():n.next(i)},0,!0)}),()=>se(r?.return)&&r.return()})}function Rd(t,e){if(!t)throw new Error("Iterable cannot be null");return new ce(n=>{rn(n,e,()=>{let r=t[Symbol.asyncIterator]();rn(n,e,()=>{r.next().then(i=>{i.done?n.complete():n.next(i.value)})},0,!0)})})}function s0(t,e){return Rd(Sd(t),e)}function a0(t,e){if(t!=null){if(Id(t))return n0(t,e);if(Ed(t))return i0(t,e);if(wd(t))return r0(t,e);if(bd(t))return Rd(t,e);if(Dd(t))return o0(t,e);if(Ad(t))return s0(t,e)}throw Td(t)}function Ze(t,e){return e?a0(t,e):ct(t)}function ee(...t){let e=Ri(t);return Ze(t,e)}function Xs(t,e){let n=se(t)?t:()=>t,r=i=>i.error(n());return new ce(e?i=>e.schedule(r,0,i):r)}function Nm(t){return!!t&&(t instanceof ce||se(t.lift)&&se(t.subscribe))}var Qn=qs(t=>function(){t(this),this.name="EmptyError",this.message="no elements in sequence"});function Mm(t,e){let n=typeof e=="object";return new Promise((r,i)=>{let o=new Ai({next:s=>{r(s),o.unsubscribe()},error:i,complete:()=>{n?r(e.defaultValue):i(new Qn)}});t.subscribe(o)})}function fe(t,e){return we((n,r)=>{let i=0;n.subscribe(ye(r,o=>{r.next(t.call(e,o,i++))}))})}var{isArray:fO}=Array;function hO(t,e){return fO(e)?t(...e):t(e)}function Nd(t){return fe(e=>hO(t,e))}var{isArray:pO}=Array,{getPrototypeOf:gO,prototype:mO,keys:yO}=Object;function Md(t){if(t.length===1){let e=t[0];if(pO(e))return{args:e,keys:null};if(vO(e)){let n=yO(e);return{args:n.map(r=>e[r]),keys:n}}}return{args:t,keys:null}}function vO(t){return t&&typeof t=="object"&&gO(t)===mO}function Pd(t,e){return t.reduce((n,r,i)=>(n[r]=e[i],n),{})}function xd(...t){let e=Ri(t),n=_d(t),{args:r,keys:i}=Md(t);if(r.length===0)return Ze([],e);let o=new ce(_O(r,e,i?s=>Pd(i,s):yn));return n?o.pipe(Nd(n)):o}function _O(t,e,n=yn){return r=>{c0(e,()=>{let{length:i}=t,o=new Array(i),s=i,a=i;for(let u=0;u<i;u++)c0(e,()=>{let l=Ze(t[u],e),f=!1;l.subscribe(ye(r,p=>{o[u]=p,f||(f=!0,a--),a||r.next(n(o.slice()))},()=>{--s||r.complete()}))},r)},r)}}function c0(t,e,n){t?rn(n,t,e):e()}function u0(t,e,n,r,i,o,s,a){let u=[],l=0,f=0,p=!1,g=()=>{p&&!u.length&&!l&&e.complete()},y=x=>l<r?D(x):u.push(x),D=x=>{o&&e.next(x),l++;let R=!1;ct(n(x,f++)).subscribe(ye(e,O=>{i?.(O),o?y(O):e.next(O)},()=>{R=!0},void 0,()=>{if(R)try{for(l--;u.length&&l<r;){let O=u.shift();s?rn(e,s,()=>D(O)):D(O)}g()}catch(O){e.error(O)}}))};return t.subscribe(ye(e,y,()=>{p=!0,g()})),()=>{a?.()}}function mt(t,e,n=1/0){return se(e)?mt((r,i)=>fe((o,s)=>e(r,o,i,s))(ct(t(r,i))),n):(typeof e=="number"&&(n=e),we((r,i)=>u0(r,i,t,n)))}function l0(t=1/0){return mt(yn,t)}function d0(){return l0(1)}function ea(...t){return d0()(Ze(t,Ri(t)))}function Lc(t){return new ce(e=>{ct(t()).subscribe(e)})}function Pm(...t){let e=_d(t),{args:n,keys:r}=Md(t),i=new ce(o=>{let{length:s}=n;if(!s){o.complete();return}let a=new Array(s),u=s,l=s;for(let f=0;f<s;f++){let p=!1;ct(n[f]).subscribe(ye(o,g=>{p||(p=!0,l--),a[f]=g},()=>u--,void 0,()=>{(!u||!p)&&(l||o.next(r?Pd(r,a):a),o.complete())}))}});return e?i.pipe(Nd(e)):i}function on(t,e){return we((n,r)=>{let i=0;n.subscribe(ye(r,o=>t.call(e,o,i++)&&r.next(o)))})}function Pi(t){return we((e,n)=>{let r=null,i=!1,o;r=e.subscribe(ye(n,void 0,void 0,s=>{o=ct(t(s,Pi(t)(e))),r?(r.unsubscribe(),r=null,o.subscribe(n)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(n))})}function f0(t,e,n,r,i){return(o,s)=>{let a=n,u=e,l=0;o.subscribe(ye(s,f=>{let p=l++;u=a?t(u,f,p):(a=!0,f),r&&s.next(u)},i&&(()=>{a&&s.next(u),s.complete()})))}}function xi(t,e){return se(e)?mt(t,e,1):mt(t,1)}function ki(t){return we((e,n)=>{let r=!1;e.subscribe(ye(n,i=>{r=!0,n.next(i)},()=>{r||n.next(t),n.complete()}))})}function $r(t){return t<=0?()=>nn:we((e,n)=>{let r=0;e.subscribe(ye(n,i=>{++r<=t&&(n.next(i),t<=r&&n.complete())}))})}function kd(t=EO){return we((e,n)=>{let r=!1;e.subscribe(ye(n,i=>{r=!0,n.next(i)},()=>r?n.complete():n.error(t())))})}function EO(){return new Qn}function Oi(t){return we((e,n)=>{try{e.subscribe(n)}finally{n.add(t)}})}function Hr(t,e){let n=arguments.length>=2;return r=>r.pipe(t?on((i,o)=>t(i,o,r)):yn,$r(1),n?ki(e):kd(()=>new Qn))}function ta(t){return t<=0?()=>nn:we((e,n)=>{let r=[];e.subscribe(ye(n,i=>{r.push(i),t<r.length&&r.shift()},()=>{for(let i of r)n.next(i);n.complete()},void 0,()=>{r=null}))})}function xm(t,e){let n=arguments.length>=2;return r=>r.pipe(t?on((i,o)=>t(i,o,r)):yn,ta(1),n?ki(e):kd(()=>new Qn))}function km(t,e){return we(f0(t,e,arguments.length>=2,!0))}function Om(...t){let e=Ri(t);return we((n,r)=>{(e?ea(t,n,e):ea(t,n)).subscribe(r)})}function Bt(t,e){return we((n,r)=>{let i=null,o=0,s=!1,a=()=>s&&!i&&r.complete();n.subscribe(ye(r,u=>{i?.unsubscribe();let l=0,f=o++;ct(t(u,f)).subscribe(i=ye(r,p=>r.next(e?e(u,p,f,l++):p),()=>{i=null,a()}))},()=>{s=!0,a()}))})}function Od(t){return we((e,n)=>{ct(t).subscribe(ye(n,()=>n.complete(),Oc)),!n.closed&&e.subscribe(n)})}function wt(t,e,n){let r=se(t)||e||n?{next:t,error:e,complete:n}:t;return r?we((i,o)=>{var s;(s=r.subscribe)===null||s===void 0||s.call(r);let a=!0;i.subscribe(ye(o,u=>{var l;(l=r.next)===null||l===void 0||l.call(r,u),o.next(u)},()=>{var u;a=!1,(u=r.complete)===null||u===void 0||u.call(r),o.complete()},u=>{var l;a=!1,(l=r.error)===null||l===void 0||l.call(r,u),o.error(u)},()=>{var u,l;a&&((u=r.unsubscribe)===null||u===void 0||u.call(r)),(l=r.finalize)===null||l===void 0||l.call(r)}))}):yn}function h0(t){let e=de(null);try{return t()}finally{de(e)}}var So=class{full;major;minor;patch;constructor(e){this.full=e;let n=e.split(".");this.major=n[0],this.minor=n[1],this.patch=n.slice(2).join(".")}},Km=new So("20.3.1");var jd="https://angular.dev/best-practices/security#preventing-cross-site-scripting-xss",B=class extends Error{code;constructor(e,n){super(Bc(e,n)),this.code=e}};function wO(t){return`NG0${Math.abs(t)}`}function Bc(t,e){return`${wO(t)}${e?": "+e:""}`}var Wr=globalThis;function Se(t){for(let e in t)if(t[e]===Se)return e;throw Error("")}function m0(t,e){for(let n in e)e.hasOwnProperty(n)&&!t.hasOwnProperty(n)&&(t[n]=e[n])}function zr(t){if(typeof t=="string")return t;if(Array.isArray(t))return`[${t.map(zr).join(", ")}]`;if(t==null)return""+t;let e=t.overriddenName||t.name;if(e)return`${e}`;let n=t.toString();if(n==null)return""+n;let r=n.indexOf(`
`);return r>=0?n.slice(0,r):n}function Qm(t,e){return t?e?`${t} ${e}`:t:e||""}var IO=Se({__forward_ref__:Se});function Rn(t){return t.__forward_ref__=Rn,t.toString=function(){return zr(this())},t}function Nt(t){return Ym(t)?t():t}function Ym(t){return typeof t=="function"&&t.hasOwnProperty(IO)&&t.__forward_ref__===Rn}function G(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function Nn(t){return{providers:t.providers||[],imports:t.imports||[]}}function $c(t){return bO(t,Ud)}function Jm(t){return $c(t)!==null}function bO(t,e){return t.hasOwnProperty(e)&&t[e]||null}function TO(t){let e=t?.[Ud]??null;return e||null}function Lm(t){return t&&t.hasOwnProperty(Ld)?t[Ld]:null}var Ud=Se({\u0275prov:Se}),Ld=Se({\u0275inj:Se}),q=class{_desc;ngMetadataName="InjectionToken";\u0275prov;constructor(e,n){this._desc=e,this.\u0275prov=void 0,typeof n=="number"?this.__NG_ELEMENT_ID__=n:n!==void 0&&(this.\u0275prov=G({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function Zm(t){return t&&!!t.\u0275providers}var Xm=Se({\u0275cmp:Se}),ey=Se({\u0275dir:Se}),ty=Se({\u0275pipe:Se}),ny=Se({\u0275mod:Se}),jc=Se({\u0275fac:Se}),Mo=Se({__NG_ELEMENT_ID__:Se}),p0=Se({__NG_ENV_ID__:Se});function Po(t){return typeof t=="string"?t:t==null?"":String(t)}function y0(t){return typeof t=="function"?t.name||t.toString():typeof t=="object"&&t!=null&&typeof t.type=="function"?t.type.name||t.type.toString():Po(t)}var v0=Se({ngErrorCode:Se}),CO=Se({ngErrorMessage:Se}),DO=Se({ngTokenPath:Se});function ry(t,e){return _0("",-200,e)}function Bd(t,e){throw new B(-201,!1)}function _0(t,e,n){let r=new B(e,t);return r[v0]=e,r[CO]=t,n&&(r[DO]=n),r}function SO(t){return t[v0]}var Vm;function E0(){return Vm}function Jt(t){let e=Vm;return Vm=t,e}function iy(t,e,n){let r=$c(t);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(n&8)return null;if(e!==void 0)return e;Bd(t,"Injector")}var AO={},Do=AO,jm="__NG_DI_FLAG__",Um=class{injector;constructor(e){this.injector=e}retrieve(e,n){let r=Ao(n)||0;try{return this.injector.get(e,r&8?null:Do,r)}catch(i){if(Vs(i))return i;throw i}}};function RO(t,e=0){let n=ed();if(n===void 0)throw new B(-203,!1);if(n===null)return iy(t,void 0,e);{let r=NO(e),i=n.retrieve(t,r);if(Vs(i)){if(r.optional)return null;throw i}return i}}function K(t,e=0){return(E0()||RO)(Nt(t),e)}function A(t,e){return K(t,Ao(e))}function Ao(t){return typeof t>"u"||typeof t=="number"?t:0|(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function NO(t){return{optional:!!(t&8),host:!!(t&1),self:!!(t&2),skipSelf:!!(t&4)}}function Bm(t){let e=[];for(let n=0;n<t.length;n++){let r=Nt(t[n]);if(Array.isArray(r)){if(r.length===0)throw new B(900,!1);let i,o=0;for(let s=0;s<r.length;s++){let a=r[s],u=MO(a);typeof u=="number"?u===-1?i=a.token:o|=u:i=a}e.push(K(i,o))}else e.push(K(r))}return e}function w0(t,e){return t[jm]=e,t.prototype[jm]=e,t}function MO(t){return t[jm]}function Fi(t,e){let n=t.hasOwnProperty(jc);return n?t[jc]:null}function $d(t,e){t.forEach(n=>Array.isArray(n)?$d(n,e):e(n))}function oy(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function Hc(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function I0(t,e,n,r){let i=t.length;if(i==e)t.push(n,r);else if(i===1)t.push(r,t[0]),t[0]=n;else{for(i--,t.push(t[i-1],t[i]);i>e;){let o=i-2;t[i]=t[o],i--}t[e]=n,t[e+1]=r}}function b0(t,e,n){let r=ra(t,e);return r>=0?t[r|1]=n:(r=~r,I0(t,r,e,n)),r}function Hd(t,e){let n=ra(t,e);if(n>=0)return t[n|1]}function ra(t,e){return PO(t,e,1)}function PO(t,e,n){let r=0,i=t.length>>n;for(;i!==r;){let o=r+(i-r>>1),s=t[o<<n];if(e===s)return o<<n;s>e?i=o:r=o+1}return~(i<<n)}var Vi={},vn=[],ji=new q(""),sy=new q("",-1),ay=new q(""),Uc=class{get(e,n=Do){if(n===Do){let i=_0("",-201);throw i.name="\u0275NotFound",i}return n}};function cy(t){return t[ny]||null}function Ui(t){return t[Xm]||null}function uy(t){return t[ey]||null}function T0(t){return t[ty]||null}function Mn(t){return{\u0275providers:t}}function C0(...t){return{\u0275providers:ly(!0,t),\u0275fromNgModule:!0}}function ly(t,...e){let n=[],r=new Set,i,o=s=>{n.push(s)};return $d(e,s=>{let a=s;Vd(a,o,[],r)&&(i||=[],i.push(a))}),i!==void 0&&D0(i,o),n}function D0(t,e){for(let n=0;n<t.length;n++){let{ngModule:r,providers:i}=t[n];dy(i,o=>{e(o,r)})}}function Vd(t,e,n,r){if(t=Nt(t),!t)return!1;let i=null,o=Lm(t),s=!o&&Ui(t);if(!o&&!s){let u=t.ngModule;if(o=Lm(u),o)i=u;else return!1}else{if(s&&!s.standalone)return!1;i=t}let a=r.has(i);if(s){if(a)return!1;if(r.add(i),s.dependencies){let u=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let l of u)Vd(l,e,n,r)}}else if(o){if(o.imports!=null&&!a){r.add(i);let l;try{$d(o.imports,f=>{Vd(f,e,n,r)&&(l||=[],l.push(f))})}finally{}l!==void 0&&D0(l,e)}if(!a){let l=Fi(i)||(()=>new i);e({provide:i,useFactory:l,deps:vn},i),e({provide:ay,useValue:i,multi:!0},i),e({provide:ji,useValue:()=>K(i),multi:!0},i)}let u=o.providers;if(u!=null&&!a){let l=t;dy(u,f=>{e(f,l)})}}else return!1;return i!==t&&t.providers!==void 0}function dy(t,e){for(let n of t)Zm(n)&&(n=n.\u0275providers),Array.isArray(n)?dy(n,e):e(n)}var xO=Se({provide:String,useValue:Se});function S0(t){return t!==null&&typeof t=="object"&&xO in t}function kO(t){return!!(t&&t.useExisting)}function OO(t){return!!(t&&t.useFactory)}function Ro(t){return typeof t=="function"}function A0(t){return!!t.useClass}var qc=new q(""),Fd={},g0={},Fm;function zc(){return Fm===void 0&&(Fm=new Uc),Fm}var Xe=class{},No=class extends Xe{parent;source;scopes;records=new Map;_ngOnDestroyHooks=new Set;_onDestroyHooks=[];get destroyed(){return this._destroyed}_destroyed=!1;injectorDefTypes;constructor(e,n,r,i){super(),this.parent=n,this.source=r,this.scopes=i,Hm(e,s=>this.processProvider(s)),this.records.set(sy,na(void 0,this)),i.has("environment")&&this.records.set(Xe,na(void 0,this));let o=this.records.get(qc);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(ay,vn,{self:!0}))}retrieve(e,n){let r=Ao(n)||0;try{return this.get(e,Do,r)}catch(i){if(Vs(i))return i;throw i}}destroy(){Vc(this),this._destroyed=!0;let e=de(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let n=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of n)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),de(e)}}onDestroy(e){return Vc(this),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){Vc(this);let n=mr(this),r=Jt(void 0),i;try{return e()}finally{mr(n),Jt(r)}}get(e,n=Do,r){if(Vc(this),e.hasOwnProperty(p0))return e[p0](this);let i=Ao(r),o,s=mr(this),a=Jt(void 0);try{if(!(i&4)){let l=this.records.get(e);if(l===void 0){let f=UO(e)&&$c(e);f&&this.injectableDefInScope(f)?l=na($m(e),Fd):l=null,this.records.set(e,l)}if(l!=null)return this.hydrate(e,l,i)}let u=i&2?zc():this.parent;return n=i&8&&n===Do?null:n,u.get(e,n)}catch(u){let l=SO(u);throw l===-200||l===-201?new B(l,null):u}finally{Jt(a),mr(s)}}resolveInjectorInitializers(){let e=de(null),n=mr(this),r=Jt(void 0),i;try{let o=this.get(ji,vn,{self:!0});for(let s of o)s()}finally{mr(n),Jt(r),de(e)}}toString(){let e=[],n=this.records;for(let r of n.keys())e.push(zr(r));return`R3Injector[${e.join(", ")}]`}processProvider(e){e=Nt(e);let n=Ro(e)?e:Nt(e&&e.provide),r=LO(e);if(!Ro(e)&&e.multi===!0){let i=this.records.get(n);i||(i=na(void 0,Fd,!0),i.factory=()=>Bm(i.multi),this.records.set(n,i)),n=e,i.multi.push(e)}this.records.set(n,r)}hydrate(e,n,r){let i=de(null);try{if(n.value===g0)throw ry(zr(e));return n.value===Fd&&(n.value=g0,n.value=n.factory(void 0,r)),typeof n.value=="object"&&n.value&&jO(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}finally{de(i)}}injectableDefInScope(e){if(!e.providedIn)return!1;let n=Nt(e.providedIn);return typeof n=="string"?n==="any"||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(e){let n=this._onDestroyHooks.indexOf(e);n!==-1&&this._onDestroyHooks.splice(n,1)}};function $m(t){let e=$c(t),n=e!==null?e.factory:Fi(t);if(n!==null)return n;if(t instanceof q)throw new B(204,!1);if(t instanceof Function)return FO(t);throw new B(204,!1)}function FO(t){if(t.length>0)throw new B(204,!1);let n=TO(t);return n!==null?()=>n.factory(t):()=>new t}function LO(t){if(S0(t))return na(void 0,t.useValue);{let e=fy(t);return na(e,Fd)}}function fy(t,e,n){let r;if(Ro(t)){let i=Nt(t);return Fi(i)||$m(i)}else if(S0(t))r=()=>Nt(t.useValue);else if(OO(t))r=()=>t.useFactory(...Bm(t.deps||[]));else if(kO(t))r=(i,o)=>K(Nt(t.useExisting),o!==void 0&&o&8?8:void 0);else{let i=Nt(t&&(t.useClass||t.provide));if(VO(t))r=()=>new i(...Bm(t.deps));else return Fi(i)||$m(i)}return r}function Vc(t){if(t.destroyed)throw new B(205,!1)}function na(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function VO(t){return!!t.deps}function jO(t){return t!==null&&typeof t=="object"&&typeof t.ngOnDestroy=="function"}function UO(t){return typeof t=="function"||typeof t=="object"&&t.ngMetadataName==="InjectionToken"}function Hm(t,e){for(let n of t)Array.isArray(n)?Hm(n,e):n&&Zm(n)?Hm(n.\u0275providers,e):e(n)}function ve(t,e){let n;t instanceof No?(Vc(t),n=t):n=new Um(t);let r,i=mr(n),o=Jt(void 0);try{return e()}finally{mr(i),Jt(o)}}function R0(){return E0()!==void 0||ed()!=null}var Jn=0,ue=1,ie=2,Mt=3,Pn=4,xn=5,Gc=6,ia=7,$t=8,oa=9,yr=10,et=11,sa=12,hy=13,xo=14,kn=15,ko=16,Oo=17,Fo=18,Wc=19,py=20,qr=21,qd=22,Kc=23,_n=24,Lo=25,Zt=26,Xt=27,N0=1;var Bi=7,Qc=8,Yc=9,sn=10;function vr(t){return Array.isArray(t)&&typeof t[N0]=="object"}function Zn(t){return Array.isArray(t)&&t[N0]===!0}function gy(t){return(t.flags&4)!==0}function $i(t){return t.componentOffset>-1}function Jc(t){return(t.flags&1)===1}function _r(t){return!!t.template}function aa(t){return(t[ie]&512)!==0}function Vo(t){return(t[ie]&256)===256}var M0="svg",P0="math";function On(t){for(;Array.isArray(t);)t=t[Jn];return t}function my(t,e){return On(e[t])}function Xn(t,e){return On(e[t.index])}function zd(t,e){return t.data[e]}function x0(t,e){return t[e]}function yy(t,e,n,r){n>=t.data.length&&(t.data[n]=null,t.blueprint[n]=null),e[n]=r}function Fn(t,e){let n=e[t];return vr(n)?n:n[Jn]}function Gd(t){return(t[ie]&128)===128}function k0(t){return Zn(t[Mt])}function Zc(t,e){return e==null?null:t[e]}function vy(t){t[Oo]=0}function _y(t){t[ie]&1024||(t[ie]|=1024,Gd(t)&&ca(t))}function O0(t,e){for(;t>0;)e=e[xo],t--;return e}function Xc(t){return!!(t[ie]&9216||t[_n]?.dirty)}function Wd(t){t[yr].changeDetectionScheduler?.notify(8),t[ie]&64&&(t[ie]|=1024),Xc(t)&&ca(t)}function ca(t){t[yr].changeDetectionScheduler?.notify(0);let e=Li(t);for(;e!==null&&!(e[ie]&8192||(e[ie]|=8192,!Gd(e)));)e=Li(e)}function Ey(t,e){if(Vo(t))throw new B(911,!1);t[qr]===null&&(t[qr]=[]),t[qr].push(e)}function F0(t,e){if(t[qr]===null)return;let n=t[qr].indexOf(e);n!==-1&&t[qr].splice(n,1)}function Li(t){let e=t[Mt];return Zn(e)?e[Mt]:e}function L0(t){return t[ia]??=[]}function V0(t){return t.cleanup??=[]}var pe={lFrame:eC(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var qm=!1;function j0(){return pe.lFrame.elementDepthCount}function U0(){pe.lFrame.elementDepthCount++}function B0(){pe.lFrame.elementDepthCount--}function wy(){return pe.bindingsEnabled}function $0(){return pe.skipHydrationRootTNode!==null}function H0(t){return pe.skipHydrationRootTNode===t}function q0(){pe.skipHydrationRootTNode=null}function Te(){return pe.lFrame.lView}function an(){return pe.lFrame.tView}function Ve(t){return pe.lFrame.contextLView=t,t[$t]}function je(t){return pe.lFrame.contextLView=null,t}function Ht(){let t=Iy();for(;t!==null&&t.type===64;)t=t.parent;return t}function Iy(){return pe.lFrame.currentTNode}function z0(){let t=pe.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}function ua(t,e){let n=pe.lFrame;n.currentTNode=t,n.isParent=e}function by(){return pe.lFrame.isParent}function G0(){pe.lFrame.isParent=!1}function Ty(){return qm}function Cy(t){let e=qm;return qm=t,e}function Dy(){let t=pe.lFrame,e=t.bindingRootIndex;return e===-1&&(e=t.bindingRootIndex=t.tView.bindingStartIndex),e}function W0(){return pe.lFrame.bindingIndex}function K0(t){return pe.lFrame.bindingIndex=t}function eu(){return pe.lFrame.bindingIndex++}function Sy(t){let e=pe.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+t,n}function Q0(){return pe.lFrame.inI18n}function Y0(t,e){let n=pe.lFrame;n.bindingIndex=n.bindingRootIndex=t,Kd(e)}function J0(){return pe.lFrame.currentDirectiveIndex}function Kd(t){pe.lFrame.currentDirectiveIndex=t}function Z0(t){let e=pe.lFrame.currentDirectiveIndex;return e===-1?null:t[e]}function Ay(t){pe.lFrame.currentQueryIndex=t}function BO(t){let e=t[ue];return e.type===2?e.declTNode:e.type===1?t[xn]:null}function Ry(t,e,n){if(n&4){let i=e,o=t;for(;i=i.parent,i===null&&!(n&1);)if(i=BO(o),i===null||(o=o[xo],i.type&10))break;if(i===null)return!1;e=i,t=o}let r=pe.lFrame=X0();return r.currentTNode=e,r.lView=t,!0}function Qd(t){let e=X0(),n=t[ue];pe.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function X0(){let t=pe.lFrame,e=t===null?null:t.child;return e===null?eC(t):e}function eC(t){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return t!==null&&(t.child=e),e}function tC(){let t=pe.lFrame;return pe.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}var Ny=tC;function Yd(){let t=tC();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function nC(t){return(pe.lFrame.contextLView=O0(t,pe.lFrame.contextLView))[$t]}function Hi(){return pe.lFrame.selectedIndex}function qi(t){pe.lFrame.selectedIndex=t}function Jd(){let t=pe.lFrame;return zd(t.tView,t.selectedIndex)}function rC(){return pe.lFrame.currentNamespace}var iC=!0;function Zd(){return iC}function Xd(t){iC=t}function zm(t,e=null,n=null,r){let i=My(t,e,n,r);return i.resolveInjectorInitializers(),i}function My(t,e=null,n=null,r,i=new Set){let o=[n||vn,C0(t)];return r=r||(typeof t=="object"?void 0:zr(t)),new No(o,e||zc(),r||null,i)}var Ae=class t{static THROW_IF_NOT_FOUND=Do;static NULL=new Uc;static create(e,n){if(Array.isArray(e))return zm({name:""},n,e,"");{let r=e.name??"";return zm({name:r},e.parent,e.providers,r)}}static \u0275prov=G({token:t,providedIn:"any",factory:()=>K(sy)});static __NG_ELEMENT_ID__=-1},yt=new q(""),er=(()=>{class t{static __NG_ELEMENT_ID__=$O;static __NG_ENV_ID__=n=>n}return t})(),Gm=class extends er{_lView;constructor(e){super(),this._lView=e}get destroyed(){return Vo(this._lView)}onDestroy(e){let n=this._lView;return Ey(n,e),()=>F0(n,e)}};function $O(){return new Gm(Te())}var Yn=class{_console=console;handleError(e){this._console.error("ERROR",e)}},cn=new q("",{providedIn:"root",factory:()=>{let t=A(Xe),e;return n=>{t.destroyed&&!e?setTimeout(()=>{throw n}):(e??=t.get(Yn),e.handleError(n))}}}),oC={provide:ji,useValue:()=>void A(Yn),multi:!0};function Py(t){return typeof t=="function"&&t[Ut]!==void 0}function It(t,e){let[n,r,i]=gm(t,e?.equal),o=n,s=o[Ut];return o.set=r,o.update=i,o.asReadonly=sC.bind(o),o}function sC(){let t=this[Ut];if(t.readonlyFn===void 0){let e=()=>this();e[Ut]=t,t.readonlyFn=e}return t.readonlyFn}function xy(t){return Py(t)&&typeof t.set=="function"}var Gr=class{},ef=new q("",{providedIn:"root",factory:()=>!1});var ky=new q(""),Oy=new q("");var tf=(()=>{class t{view;node;constructor(n,r){this.view=n,this.node=r}static __NG_ELEMENT_ID__=HO}return t})();function HO(){return new tf(Te(),Ht())}var Er=(()=>{class t{taskId=0;pendingTasks=new Set;destroyed=!1;pendingTask=new Rt(!1);get hasPendingTasks(){return this.destroyed?!1:this.pendingTask.value}get hasPendingTasksObservable(){return this.destroyed?new ce(n=>{n.next(!1),n.complete()}):this.pendingTask}add(){!this.hasPendingTasks&&!this.destroyed&&this.pendingTask.next(!0);let n=this.taskId++;return this.pendingTasks.add(n),n}has(n){return this.pendingTasks.has(n)}remove(n){this.pendingTasks.delete(n),this.pendingTasks.size===0&&this.hasPendingTasks&&this.pendingTask.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks&&this.pendingTask.next(!1),this.destroyed=!0,this.pendingTask.unsubscribe()}static \u0275prov=G({token:t,providedIn:"root",factory:()=>new t})}return t})(),Kr=(()=>{class t{internalPendingTasks=A(Er);scheduler=A(Gr);errorHandler=A(cn);add(){let n=this.internalPendingTasks.add();return()=>{this.internalPendingTasks.has(n)&&(this.scheduler.notify(11),this.internalPendingTasks.remove(n))}}run(n){let r=this.add();n().catch(this.errorHandler).finally(r)}static \u0275prov=G({token:t,providedIn:"root",factory:()=>new t})}return t})();function tu(...t){}var Fy=(()=>{class t{static \u0275prov=G({token:t,providedIn:"root",factory:()=>new Wm})}return t})(),Wm=class{dirtyEffectCount=0;queues=new Map;add(e){this.enqueue(e),this.schedule(e)}schedule(e){e.dirty&&this.dirtyEffectCount++}remove(e){let n=e.zone,r=this.queues.get(n);r.has(e)&&(r.delete(e),e.dirty&&this.dirtyEffectCount--)}enqueue(e){let n=e.zone;this.queues.has(n)||this.queues.set(n,new Set);let r=this.queues.get(n);r.has(e)||r.add(e)}flush(){for(;this.dirtyEffectCount>0;){let e=!1;for(let[n,r]of this.queues)n===null?e||=this.flushQueue(r):e||=n.run(()=>this.flushQueue(r));e||(this.dirtyEffectCount=0)}}flushQueue(e){let n=!1;for(let r of e)r.dirty&&(this.dirtyEffectCount--,n=!0,r.run());return n}};function ga(t){return{toString:t}.toString()}var nf="__parameters__";function JO(t){return function(...n){if(t){let r=t(...n);for(let i in r)this[i]=r[i]}}}function ZO(t,e,n){return ga(()=>{let r=JO(e);function i(...o){if(this instanceof i)return r.apply(this,o),this;let s=new i(...o);return a.annotation=s,a;function a(u,l,f){let p=u.hasOwnProperty(nf)?u[nf]:Object.defineProperty(u,nf,{value:[]})[nf];for(;p.length<=f;)p.push(null);return(p[f]=p[f]||[]).push(s),u}}return i.prototype.ngMetadataName=t,i.annotationCls=i,i})}var Ln=w0(ZO("Optional"),8);function XO(t){return typeof t=="function"}var lf=class{previousValue;currentValue;firstChange;constructor(e,n,r){this.previousValue=e,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}};function VC(t,e,n,r){e!==null?e.applyValueToInputSignal(e,r):t[n]=r}var Yr=(()=>{let t=()=>jC;return t.ngInherit=!0,t})();function jC(t){return t.type.prototype.ngOnChanges&&(t.setInput=t1),e1}function e1(){let t=BC(this),e=t?.current;if(e){let n=t.previous;if(n===Vi)t.previous=e;else for(let r in e)n[r]=e[r];t.current=null,this.ngOnChanges(e)}}function t1(t,e,n,r,i){let o=this.declaredInputs[r],s=BC(t)||n1(t,{previous:Vi,current:null}),a=s.current||(s.current={}),u=s.previous,l=u[o];a[o]=new lf(l&&l.currentValue,n,u===Vi),VC(t,e,i,n)}var UC="__ngSimpleChanges__";function BC(t){return t[UC]||null}function n1(t,e){return t[UC]=e}var aC=[];var Me=function(t,e=null,n){for(let r=0;r<aC.length;r++){let i=aC[r];i(t,e,n)}};function r1(t,e,n){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){let s=jC(e);(n.preOrderHooks??=[]).push(t,s),(n.preOrderCheckHooks??=[]).push(t,s)}i&&(n.preOrderHooks??=[]).push(0-t,i),o&&((n.preOrderHooks??=[]).push(t,o),(n.preOrderCheckHooks??=[]).push(t,o))}function $C(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){let o=t.data[n].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:u,ngAfterViewChecked:l,ngOnDestroy:f}=o;s&&(t.contentHooks??=[]).push(-n,s),a&&((t.contentHooks??=[]).push(n,a),(t.contentCheckHooks??=[]).push(n,a)),u&&(t.viewHooks??=[]).push(-n,u),l&&((t.viewHooks??=[]).push(n,l),(t.viewCheckHooks??=[]).push(n,l)),f!=null&&(t.destroyHooks??=[]).push(n,f)}}function af(t,e,n){HC(t,e,3,n)}function cf(t,e,n,r){(t[ie]&3)===n&&HC(t,e,n,r)}function Ly(t,e){let n=t[ie];(n&3)===e&&(n&=16383,n+=1,t[ie]=n)}function HC(t,e,n,r){let i=r!==void 0?t[Oo]&65535:0,o=r??-1,s=e.length-1,a=0;for(let u=i;u<s;u++)if(typeof e[u+1]=="number"){if(a=e[u],r!=null&&a>=r)break}else e[u]<0&&(t[Oo]+=65536),(a<o||o==-1)&&(i1(t,n,e,u),t[Oo]=(t[Oo]&4294901760)+u+2),u++}function cC(t,e){Me(4,t,e);let n=de(null);try{e.call(t)}finally{de(n),Me(5,t,e)}}function i1(t,e,n,r){let i=n[r]<0,o=n[r+1],s=i?-n[r]:n[r],a=t[s];i?t[ie]>>14<t[Oo]>>16&&(t[ie]&3)===e&&(t[ie]+=16384,cC(a,o)):cC(a,o)}var da=-1,Uo=class{factory;name;injectImpl;resolving=!1;canSeeViewProviders;multi;componentProviders;index;providerFactory;constructor(e,n,r,i){this.factory=e,this.name=i,this.canSeeViewProviders=n,this.injectImpl=r}};function o1(t){return(t.flags&8)!==0}function s1(t){return(t.flags&16)!==0}function a1(t,e,n){let r=0;for(;r<n.length;){let i=n[r];if(typeof i=="number"){if(i!==0)break;r++;let o=n[r++],s=n[r++],a=n[r++];t.setAttribute(e,s,a,o)}else{let o=i,s=n[++r];c1(o)?t.setProperty(e,o,s):t.setAttribute(e,o,s),r++}}return r}function qC(t){return t===3||t===4||t===6}function c1(t){return t.charCodeAt(0)===64}function iu(t,e){if(!(e===null||e.length===0))if(t===null||t.length===0)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?n=i:n===0||(n===-1||n===2?uC(t,n,i,null,e[++r]):uC(t,n,i,null,null))}}return t}function uC(t,e,n,r,i){let o=0,s=t.length;if(e===-1)s=-1;else for(;o<t.length;){let a=t[o++];if(typeof a=="number"){if(a===e){s=-1;break}else if(a>e){s=o-1;break}}}for(;o<t.length;){let a=t[o];if(typeof a=="number")break;if(a===n){i!==null&&(t[o+1]=i);return}o++,i!==null&&o++}s!==-1&&(t.splice(s,0,e),o=s+1),t.splice(o++,0,n),i!==null&&t.splice(o++,0,i)}function zC(t){return t!==da}function df(t){return t&32767}function u1(t){return t>>16}function ff(t,e){let n=u1(t),r=e;for(;n>0;)r=r[xo],n--;return r}var Ky=!0;function hf(t){let e=Ky;return Ky=t,e}var l1=256,GC=l1-1,WC=5,d1=0,wr={};function f1(t,e,n){let r;typeof n=="string"?r=n.charCodeAt(0)||0:n.hasOwnProperty(Mo)&&(r=n[Mo]),r==null&&(r=n[Mo]=d1++);let i=r&GC,o=1<<i;e.data[t+(i>>WC)]|=o}function pf(t,e){let n=KC(t,e);if(n!==-1)return n;let r=e[ue];r.firstCreatePass&&(t.injectorIndex=e.length,Vy(r.data,t),Vy(e,null),Vy(r.blueprint,null));let i=hv(t,e),o=t.injectorIndex;if(zC(i)){let s=df(i),a=ff(i,e),u=a[ue].data;for(let l=0;l<8;l++)e[o+l]=a[s+l]|u[s+l]}return e[o+8]=i,o}function Vy(t,e){t.push(0,0,0,0,0,0,0,0,e)}function KC(t,e){return t.injectorIndex===-1||t.parent&&t.parent.injectorIndex===t.injectorIndex||e[t.injectorIndex+8]===null?-1:t.injectorIndex}function hv(t,e){if(t.parent&&t.parent.injectorIndex!==-1)return t.parent.injectorIndex;let n=0,r=null,i=e;for(;i!==null;){if(r=XC(i),r===null)return da;if(n++,i=i[xo],r.injectorIndex!==-1)return r.injectorIndex|n<<16}return da}function Qy(t,e,n){f1(t,e,n)}function h1(t,e){if(e==="class")return t.classes;if(e==="style")return t.styles;let n=t.attrs;if(n){let r=n.length,i=0;for(;i<r;){let o=n[i];if(qC(o))break;if(o===0)i=i+2;else if(typeof o=="number")for(i++;i<r&&typeof n[i]=="string";)i++;else{if(o===e)return n[i+1];i=i+2}}}return null}function QC(t,e,n){if(n&8||t!==void 0)return t;Bd(e,"NodeInjector")}function YC(t,e,n,r){if(n&8&&r===void 0&&(r=null),(n&3)===0){let i=t[oa],o=Jt(void 0);try{return i?i.get(e,r,n&8):iy(e,r,n&8)}finally{Jt(o)}}return QC(r,e,n)}function JC(t,e,n,r=0,i){if(t!==null){if(e[ie]&2048&&!(r&2)){let s=v1(t,e,n,r,wr);if(s!==wr)return s}let o=ZC(t,e,n,r,wr);if(o!==wr)return o}return YC(e,n,r,i)}function ZC(t,e,n,r,i){let o=m1(n);if(typeof o=="function"){if(!Ry(e,t,r))return r&1?QC(i,n,r):YC(e,n,r,i);try{let s;if(s=o(r),s==null&&!(r&8))Bd(n);else return s}finally{Ny()}}else if(typeof o=="number"){let s=null,a=KC(t,e),u=da,l=r&1?e[kn][xn]:null;for((a===-1||r&4)&&(u=a===-1?hv(t,e):e[a+8],u===da||!dC(r,!1)?a=-1:(s=e[ue],a=df(u),e=ff(u,e)));a!==-1;){let f=e[ue];if(lC(o,a,f.data)){let p=p1(a,e,n,s,r,l);if(p!==wr)return p}u=e[a+8],u!==da&&dC(r,e[ue].data[a+8]===l)&&lC(o,a,e)?(s=f,a=df(u),e=ff(u,e)):a=-1}}return i}function p1(t,e,n,r,i,o){let s=e[ue],a=s.data[t+8],u=r==null?$i(a)&&Ky:r!=s&&(a.type&3)!==0,l=i&1&&o===a,f=g1(a,s,n,u,l);return f!==null?gf(e,s,f,a,i):wr}function g1(t,e,n,r,i){let o=t.providerIndexes,s=e.data,a=o&1048575,u=t.directiveStart,l=t.directiveEnd,f=o>>20,p=r?a:a+f,g=i?a+f:l;for(let y=p;y<g;y++){let D=s[y];if(y<u&&n===D||y>=u&&D.type===n)return y}if(i){let y=s[u];if(y&&_r(y)&&y.type===n)return u}return null}function gf(t,e,n,r,i){let o=t[n],s=e.data;if(o instanceof Uo){let a=o;if(a.resolving){let y=y0(s[n]);throw ry(y)}let u=hf(a.canSeeViewProviders);a.resolving=!0;let l=s[n].type||s[n],f,p=a.injectImpl?Jt(a.injectImpl):null,g=Ry(t,r,0);try{o=t[n]=a.factory(void 0,i,s,t,r),e.firstCreatePass&&n>=r.directiveStart&&r1(n,s[n],e)}finally{p!==null&&Jt(p),hf(u),a.resolving=!1,Ny()}}return o}function m1(t){if(typeof t=="string")return t.charCodeAt(0)||0;let e=t.hasOwnProperty(Mo)?t[Mo]:void 0;return typeof e=="number"?e>=0?e&GC:y1:e}function lC(t,e,n){let r=1<<t;return!!(n[e+(t>>WC)]&r)}function dC(t,e){return!(t&2)&&!(t&1&&e)}var jo=class{_tNode;_lView;constructor(e,n){this._tNode=e,this._lView=n}get(e,n,r){return JC(this._tNode,this._lView,e,Ao(r),n)}};function y1(){return new jo(Ht(),Te())}function br(t){return ga(()=>{let e=t.prototype.constructor,n=e[jc]||Yy(e),r=Object.prototype,i=Object.getPrototypeOf(t.prototype).constructor;for(;i&&i!==r;){let o=i[jc]||Yy(i);if(o&&o!==n)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function Yy(t){return Ym(t)?()=>{let e=Yy(Nt(t));return e&&e()}:Fi(t)}function v1(t,e,n,r,i){let o=t,s=e;for(;o!==null&&s!==null&&s[ie]&2048&&!aa(s);){let a=ZC(o,s,n,r|2,wr);if(a!==wr)return a;let u=o.parent;if(!u){let l=s[py];if(l){let f=l.get(n,wr,r);if(f!==wr)return f}u=XC(s),s=s[xo]}o=u}return i}function XC(t){let e=t[ue],n=e.type;return n===2?e.declTNode:n===1?t[xn]:null}function cu(t){return h1(Ht(),t)}function _1(){return Sf(Ht(),Te())}function Sf(t,e){return new Tr(Xn(t,e))}var Tr=(()=>{class t{nativeElement;constructor(n){this.nativeElement=n}static __NG_ELEMENT_ID__=_1}return t})();function eD(t){return(t.flags&128)===128}var pv=(function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t})(pv||{}),tD=new Map,E1=0;function w1(){return E1++}function I1(t){tD.set(t[Wc],t)}function Jy(t){tD.delete(t[Wc])}var fC="__ngContext__";function fa(t,e){vr(e)?(t[fC]=e[Wc],I1(e)):t[fC]=e}function nD(t){return iD(t[sa])}function rD(t){return iD(t[Pn])}function iD(t){for(;t!==null&&!Zn(t);)t=t[Pn];return t}var Zy;function gv(t){Zy=t}function oD(){if(Zy!==void 0)return Zy;if(typeof document<"u")return document;throw new B(210,!1)}var Af=new q("",{providedIn:"root",factory:()=>b1}),b1="ng",Rf=new q(""),nr=new q("",{providedIn:"platform",factory:()=>"unknown"});var Nf=new q("",{providedIn:"root",factory:()=>oD().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var T1="h",C1="b";var sD=!1,aD=new q("",{providedIn:"root",factory:()=>sD});var D1=(t,e,n,r)=>{};function S1(t,e,n,r){D1(t,e,n,r)}function mv(t){return(t.flags&32)===32}var A1=()=>null;function cD(t,e,n=!1){return A1(t,e,n)}function uD(t,e){let n=t.contentQueries;if(n!==null){let r=de(null);try{for(let i=0;i<n.length;i+=2){let o=n[i],s=n[i+1];if(s!==-1){let a=t.data[s];Ay(o),a.contentQueries(2,e[s],s)}}}finally{de(r)}}}function Xy(t,e,n){Ay(0);let r=de(null);try{e(t,n)}finally{de(r)}}function lD(t,e,n){if(gy(e)){let r=de(null);try{let i=e.directiveStart,o=e.directiveEnd;for(let s=i;s<o;s++){let a=t.data[s];if(a.contentQueries){let u=n[s];a.contentQueries(1,u,s)}}}finally{de(r)}}}var Qr=(function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t})(Qr||{});var rf;function R1(){if(rf===void 0&&(rf=null,Wr.trustedTypes))try{rf=Wr.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch{}return rf}function hC(t){return R1()?.createScriptURL(t)||t}var mf=class{changingThisBreaksApplicationSecurity;constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${jd})`}};function Mf(t){return t instanceof mf?t.changingThisBreaksApplicationSecurity:t}function yv(t,e){let n=dD(t);if(n!=null&&n!==e){if(n==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${n} (see ${jd})`)}return n===e}function dD(t){return t instanceof mf&&t.getTypeName()||null}var N1=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function fD(t){return t=String(t),t.match(N1)?t:"unsafe:"+t}var Pf=(function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t})(Pf||{});function Gi(t){let e=pD();return e?e.sanitize(Pf.URL,t)||"":yv(t,"URL")?Mf(t):fD(Po(t))}function hD(t){let e=pD();if(e)return hC(e.sanitize(Pf.RESOURCE_URL,t)||"");if(yv(t,"ResourceURL"))return hC(Mf(t));throw new B(904,!1)}function M1(t,e){return e==="src"&&(t==="embed"||t==="frame"||t==="iframe"||t==="media"||t==="script")||e==="href"&&(t==="base"||t==="link")?hD:Gi}function vv(t,e,n){return M1(e,n)(t)}function pD(){let t=Te();return t&&t[yr].sanitizer}function gD(t){return t instanceof Function?t():t}function P1(t,e,n){let r=t.length;for(;;){let i=t.indexOf(e,n);if(i===-1)return i;if(i===0||t.charCodeAt(i-1)<=32){let o=e.length;if(i+o===r||t.charCodeAt(i+o)<=32)return i}n=i+1}}var mD="ng-template";function x1(t,e,n,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&P1(e[i+1].toLowerCase(),n,0)!==-1)return!0}else if(_v(t))return!1;if(i=e.indexOf(1,i),i>-1){let o;for(;++i<e.length&&typeof(o=e[i])=="string";)if(o.toLowerCase()===n)return!0}return!1}function _v(t){return t.type===4&&t.value!==mD}function k1(t,e,n){let r=t.type===4&&!n?mD:t.value;return e===r}function O1(t,e,n){let r=4,i=t.attrs,o=i!==null?V1(i):0,s=!1;for(let a=0;a<e.length;a++){let u=e[a];if(typeof u=="number"){if(!s&&!tr(r)&&!tr(u))return!1;if(s&&tr(u))continue;s=!1,r=u|r&1;continue}if(!s)if(r&4){if(r=2|r&1,u!==""&&!k1(t,u,n)||u===""&&e.length===1){if(tr(r))return!1;s=!0}}else if(r&8){if(i===null||!x1(t,i,u,n)){if(tr(r))return!1;s=!0}}else{let l=e[++a],f=F1(u,i,_v(t),n);if(f===-1){if(tr(r))return!1;s=!0;continue}if(l!==""){let p;if(f>o?p="":p=i[f+1].toLowerCase(),r&2&&l!==p){if(tr(r))return!1;s=!0}}}}return tr(r)||s}function tr(t){return(t&1)===0}function F1(t,e,n,r){if(e===null)return-1;let i=0;if(r||!n){let o=!1;for(;i<e.length;){let s=e[i];if(s===t)return i;if(s===3||s===6)o=!0;else if(s===1||s===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(s===4)break;if(s===0){i+=4;continue}}i+=o?1:2}return-1}else return j1(e,t)}function L1(t,e,n=!1){for(let r=0;r<e.length;r++)if(O1(t,e[r],n))return!0;return!1}function V1(t){for(let e=0;e<t.length;e++){let n=t[e];if(qC(n))return e}return t.length}function j1(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){let r=t[n];if(typeof r=="number")return-1;if(r===e)return n;n++}return-1}function pC(t,e){return t?":not("+e.trim()+")":e}function U1(t){let e=t[0],n=1,r=2,i="",o=!1;for(;n<t.length;){let s=t[n];if(typeof s=="string")if(r&2){let a=t[++n];i+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+s:r&4&&(i+=" "+s);else i!==""&&!tr(s)&&(e+=pC(o,i),i=""),r=s,o=o||!tr(r);n++}return i!==""&&(e+=pC(o,i)),e}function B1(t){return t.map(U1).join(",")}function $1(t){let e=[],n=[],r=1,i=2;for(;r<t.length;){let o=t[r];if(typeof o=="string")i===2?o!==""&&e.push(o,t[++r]):i===8&&n.push(o);else{if(!tr(i))break;i=o}r++}return n.length&&e.push(1,...n),e}var Vn={};function H1(t,e){return t.createText(e)}function q1(t,e,n){t.setValue(e,n)}function yD(t,e,n){return t.createElement(e,n)}function yf(t,e,n,r,i){t.insertBefore(e,n,r,i)}function vD(t,e,n){t.appendChild(e,n)}function gC(t,e,n,r,i){r!==null?yf(t,e,n,r,i):vD(t,e,n)}function z1(t,e,n){t.removeChild(null,e,n)}function G1(t,e,n){t.setAttribute(e,"style",n)}function W1(t,e,n){n===""?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n)}function _D(t,e,n){let{mergedAttrs:r,classes:i,styles:o}=n;r!==null&&a1(t,e,r),i!==null&&W1(t,e,i),o!==null&&G1(t,e,o)}function Ev(t,e,n,r,i,o,s,a,u,l,f){let p=Xt+r,g=p+i,y=K1(p,g),D=typeof l=="function"?l():l;return y[ue]={type:t,blueprint:y,template:n,queries:null,viewQuery:a,declTNode:e,data:y.slice().fill(null,p),bindingStartIndex:p,expandoStartIndex:g,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:u,consts:D,incompleteFirstPass:!1,ssrId:f}}function K1(t,e){let n=[];for(let r=0;r<e;r++)n.push(r<t?null:Vn);return n}function Q1(t){let e=t.tView;return e===null||e.incompleteFirstPass?t.tView=Ev(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts,t.id):e}function wv(t,e,n,r,i,o,s,a,u,l,f){let p=e.blueprint.slice();return p[Jn]=i,p[ie]=r|4|128|8|64|1024,(l!==null||t&&t[ie]&2048)&&(p[ie]|=2048),vy(p),p[Mt]=p[xo]=t,p[$t]=n,p[yr]=s||t&&t[yr],p[et]=a||t&&t[et],p[oa]=u||t&&t[oa]||null,p[xn]=o,p[Wc]=w1(),p[Gc]=f,p[py]=l,p[kn]=e.type==2?t[kn]:p,p}function Y1(t,e,n){let r=Xn(e,t),i=Q1(n),o=t[yr].rendererFactory,s=Iv(t,wv(t,i,null,ED(n),r,e,null,o.createRenderer(r,n),null,null,null));return t[e.index]=s}function ED(t){let e=16;return t.signals?e=4096:t.onPush&&(e=64),e}function wD(t,e,n,r){if(n===0)return-1;let i=e.length;for(let o=0;o<n;o++)e.push(r),t.blueprint.push(r),t.data.push(null);return i}function Iv(t,e){return t[sa]?t[hy][Pn]=e:t[sa]=e,t[hy]=e,e}function L(t=1){ID(an(),Te(),Hi()+t,!1)}function ID(t,e,n,r){if(!r)if((e[ie]&3)===3){let o=t.preOrderCheckHooks;o!==null&&af(e,o,n)}else{let o=t.preOrderHooks;o!==null&&cf(e,o,0,n)}qi(n)}var xf=(function(t){return t[t.None=0]="None",t[t.SignalBased=1]="SignalBased",t[t.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",t})(xf||{});function ev(t,e,n,r){let i=de(null);try{let[o,s,a]=t.inputs[n],u=null;(s&xf.SignalBased)!==0&&(u=e[o][Ut]),u!==null&&u.transformFn!==void 0?r=u.transformFn(r):a!==null&&(r=a.call(e,r)),t.setInput!==null?t.setInput(e,u,r,n,o):VC(e,u,o,r)}finally{de(i)}}var Ir=(function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t})(Ir||{}),J1;function bv(t,e){return J1(t,e)}var kf=new Set;function la(t,e,n,r,i,o){if(r!=null){let s,a=!1;Zn(r)?s=r:vr(r)&&(a=!0,r=r[Jn]);let u=On(r);t===0&&n!==null?i==null?vD(e,n,u):yf(e,n,u,i||null,!0):t===1&&n!==null?yf(e,n,u,i||null,!0):t===2?mC(o,()=>{z1(e,u,a)}):t===3&&mC(o,()=>{e.destroyNode(u)}),s!=null&&lF(e,t,s,n,i)}}function Z1(t,e){bD(t,e),e[Jn]=null,e[xn]=null}function X1(t,e,n,r,i,o){r[Jn]=i,r[xn]=e,Of(t,r,n,1,i,o)}function bD(t,e){e[yr].changeDetectionScheduler?.notify(9),Of(t,e,e[et],2,null,null)}function eF(t){let e=t[sa];if(!e)return jy(t[ue],t);for(;e;){let n=null;if(vr(e))n=e[sa];else{let r=e[sn];r&&(n=r)}if(!n){for(;e&&!e[Pn]&&e!==t;)vr(e)&&jy(e[ue],e),e=e[Mt];e===null&&(e=t),vr(e)&&jy(e[ue],e),n=e&&e[Pn]}e=n}}function Tv(t,e){let n=t[Yc],r=n.indexOf(e);n.splice(r,1)}function TD(t,e){if(Vo(e))return;let n=e[et];n.destroyNode&&Of(t,e,n,3,null,null),eF(e)}function jy(t,e){if(Vo(e))return;let n=de(null);try{e[ie]&=-129,e[ie]|=256,e[_n]&&kc(e[_n]),rF(t,e),nF(t,e),e[ue].type===1&&e[et].destroy();let r=e[ko];if(r!==null&&Zn(e[Mt])){r!==e[Mt]&&Tv(r,e);let i=e[Fo];i!==null&&i.detachView(t)}Jy(e)}finally{de(n)}}function mC(t,e){if(t&&t[Zt]&&t[Zt].leave)if(t[Zt].skipLeaveAnimations)t[Zt].skipLeaveAnimations=!1;else{let n=t[Zt].leave,r=[];for(let i=0;i<n.length;i++){let o=n[i];r.push(o())}t[Zt].running=Promise.allSettled(r),t[Zt].leave=void 0}tF(t,e)}function tF(t,e){if(t&&t[Zt]&&t[Zt].running){t[Zt].running.then(()=>{t[Zt]&&t[Zt].running&&(t[Zt].running=void 0),kf.delete(t),e()});return}e()}function nF(t,e){let n=t.cleanup,r=e[ia];if(n!==null)for(let s=0;s<n.length-1;s+=2)if(typeof n[s]=="string"){let a=n[s+3];a>=0?r[a]():r[-a].unsubscribe(),s+=2}else{let a=r[n[s+1]];n[s].call(a)}r!==null&&(e[ia]=null);let i=e[qr];if(i!==null){e[qr]=null;for(let s=0;s<i.length;s++){let a=i[s];a()}}let o=e[Kc];if(o!==null){e[Kc]=null;for(let s of o)s.destroy()}}function rF(t,e){let n;if(t!=null&&(n=t.destroyHooks)!=null)for(let r=0;r<n.length;r+=2){let i=e[n[r]];if(!(i instanceof Uo)){let o=n[r+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){let a=i[o[s]],u=o[s+1];Me(4,a,u);try{u.call(a)}finally{Me(5,a,u)}}else{Me(4,i,o);try{o.call(i)}finally{Me(5,i,o)}}}}}function iF(t,e,n){return oF(t,e.parent,n)}function oF(t,e,n){let r=e;for(;r!==null&&r.type&168;)e=r,r=e.parent;if(r===null)return n[Jn];if($i(r)){let{encapsulation:i}=t.data[r.directiveStart+r.componentOffset];if(i===Qr.None||i===Qr.Emulated)return null}return Xn(r,n)}function sF(t,e,n){return cF(t,e,n)}function aF(t,e,n){return t.type&40?Xn(t,n):null}var cF=aF,yC;function Cv(t,e,n,r){let i=iF(t,r,e),o=e[et],s=r.parent||e[xn],a=sF(s,r,e);if(i!=null)if(Array.isArray(n))for(let u=0;u<n.length;u++)gC(o,i,n[u],a,!1);else gC(o,i,n,a,!1);yC!==void 0&&yC(o,r,e,n,i)}function nu(t,e){if(e!==null){let n=e.type;if(n&3)return Xn(e,t);if(n&4)return tv(-1,t[e.index]);if(n&8){let r=e.child;if(r!==null)return nu(t,r);{let i=t[e.index];return Zn(i)?tv(-1,i):On(i)}}else{if(n&128)return nu(t,e.next);if(n&32)return bv(e,t)()||On(t[e.index]);{let r=CD(t,e);if(r!==null){if(Array.isArray(r))return r[0];let i=Li(t[kn]);return nu(i,r)}else return nu(t,e.next)}}}return null}function CD(t,e){if(e!==null){let r=t[kn][xn],i=e.projection;return r.projection[i]}return null}function tv(t,e){let n=sn+t+1;if(n<e.length){let r=e[n],i=r[ue].firstChild;if(i!==null)return nu(r,i)}return e[Bi]}function Dv(t,e,n,r,i,o,s){for(;n!=null;){if(n.type===128){n=n.next;continue}let a=r[n.index],u=n.type;if(s&&e===0&&(a&&fa(On(a),r),n.flags|=2),!mv(n))if(u&8)Dv(t,e,n.child,r,i,o,!1),la(e,t,i,a,o,r);else if(u&32){let l=bv(n,r),f;for(;f=l();)la(e,t,i,f,o,r);la(e,t,i,a,o,r)}else u&16?uF(t,e,r,n,i,o):la(e,t,i,a,o,r);n=s?n.projectionNext:n.next}}function Of(t,e,n,r,i,o){Dv(n,r,t.firstChild,e,i,o,!1)}function uF(t,e,n,r,i,o){let s=n[kn],u=s[xn].projection[r.projection];if(Array.isArray(u))for(let l=0;l<u.length;l++){let f=u[l];la(e,t,i,f,o,n)}else{let l=u,f=s[Mt];eD(r)&&(l.flags|=128),Dv(t,e,l,f,i,o,!0)}}function lF(t,e,n,r,i){let o=n[Bi],s=On(n);o!==s&&la(e,t,r,o,i);for(let a=sn;a<n.length;a++){let u=n[a];Of(u[ue],u,t,e,r,o)}}function dF(t,e,n,r,i){if(e)i?t.addClass(n,r):t.removeClass(n,r);else{let o=r.indexOf("-")===-1?void 0:Ir.DashCase;i==null?t.removeStyle(n,r,o):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),o|=Ir.Important),t.setStyle(n,r,i,o))}}function DD(t,e,n,r,i){let o=Hi(),s=r&2;try{qi(-1),s&&e.length>Xt&&ID(t,e,Xt,!1),Me(s?2:0,i,n),n(r,i)}finally{qi(o),Me(s?3:1,i,n)}}function Sv(t,e,n){vF(t,e,n),(n.flags&64)===64&&_F(t,e,n)}function SD(t,e,n=Xn){let r=e.localNames;if(r!==null){let i=e.index+1;for(let o=0;o<r.length;o+=2){let s=r[o+1],a=s===-1?n(e,t):t[s];t[i++]=a}}}function fF(t,e,n,r){let o=r.get(aD,sD)||n===Qr.ShadowDom,s=t.selectRootElement(e,o);return hF(s),s}function hF(t){pF(t)}var pF=()=>null;function gF(t){return t==="class"?"className":t==="for"?"htmlFor":t==="formaction"?"formAction":t==="innerHtml"?"innerHTML":t==="readonly"?"readOnly":t==="tabindex"?"tabIndex":t}function AD(t,e,n,r,i,o){let s=e[ue];if(Av(t,s,e,n,r)){$i(t)&&yF(e,t.index);return}t.type&3&&(n=gF(n)),mF(t,e,n,r,i,o)}function mF(t,e,n,r,i,o){if(t.type&3){let s=Xn(t,e);r=o!=null?o(r,t.value||"",n):r,i.setProperty(s,n,r)}else t.type&12}function yF(t,e){let n=Fn(e,t);n[ie]&16||(n[ie]|=64)}function vF(t,e,n){let r=n.directiveStart,i=n.directiveEnd;$i(n)&&Y1(e,n,t.data[r+n.componentOffset]),t.firstCreatePass||pf(n,e);let o=n.initialInputs;for(let s=r;s<i;s++){let a=t.data[s],u=gf(e,t,s,n);if(fa(u,e),o!==null&&bF(e,s-r,u,a,n,o),_r(a)){let l=Fn(n.index,e);l[$t]=gf(e,t,s,n)}}}function _F(t,e,n){let r=n.directiveStart,i=n.directiveEnd,o=n.index,s=J0();try{qi(o);for(let a=r;a<i;a++){let u=t.data[a],l=e[a];Kd(a),(u.hostBindings!==null||u.hostVars!==0||u.hostAttrs!==null)&&EF(u,l)}}finally{qi(-1),Kd(s)}}function EF(t,e){t.hostBindings!==null&&t.hostBindings(1,e)}function RD(t,e){let n=t.directiveRegistry,r=null;if(n)for(let i=0;i<n.length;i++){let o=n[i];L1(e,o.selectors,!1)&&(r??=[],_r(o)?r.unshift(o):r.push(o))}return r}function wF(t,e,n,r,i,o){let s=Xn(t,e);IF(e[et],s,o,t.value,n,r,i)}function IF(t,e,n,r,i,o,s){if(o==null)t.removeAttribute(e,i,n);else{let a=s==null?Po(o):s(o,r||"",i);t.setAttribute(e,i,a,n)}}function bF(t,e,n,r,i,o){let s=o[e];if(s!==null)for(let a=0;a<s.length;a+=2){let u=s[a],l=s[a+1];ev(r,n,u,l)}}function TF(t,e,n,r,i){let o=Xt+n,s=e[ue],a=i(s,e,t,r,n);e[o]=a,ua(t,!0);let u=t.type===2;return u?(_D(e[et],a,t),(j0()===0||Jc(t))&&fa(a,e),U0()):fa(a,e),Zd()&&(!u||!mv(t))&&Cv(s,e,a,t),t}function CF(t){let e=t;return by()?G0():(e=e.parent,ua(e,!1)),e}function DF(t,e){let n=t[oa];if(!n)return;let r;try{r=n.get(cn,null)}catch{r=null}r?.(e)}function Av(t,e,n,r,i){let o=t.inputs?.[r],s=t.hostDirectiveInputs?.[r],a=!1;if(s)for(let u=0;u<s.length;u+=2){let l=s[u],f=s[u+1],p=e.data[l];ev(p,n[l],f,i),a=!0}if(o)for(let u of o){let l=n[u],f=e.data[u];ev(f,l,r,i),a=!0}return a}function SF(t,e){let n=Fn(e,t),r=n[ue];AF(r,n);let i=n[Jn];i!==null&&n[Gc]===null&&(n[Gc]=cD(i,n[oa])),Me(18),Rv(r,n,n[$t]),Me(19,n[$t])}function AF(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}function Rv(t,e,n){Qd(e);try{let r=t.viewQuery;r!==null&&Xy(1,r,n);let i=t.template;i!==null&&DD(t,e,i,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),e[Fo]?.finishViewCreation(t),t.staticContentQueries&&uD(t,e),t.staticViewQueries&&Xy(2,t.viewQuery,n);let o=t.components;o!==null&&RF(e,o)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),r}finally{e[ie]&=-5,Yd()}}function RF(t,e){for(let n=0;n<e.length;n++)SF(t,e[n])}function NF(t,e,n,r){let i=de(null);try{let o=e.tView,a=t[ie]&4096?4096:16,u=wv(t,o,n,a,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),l=t[e.index];u[ko]=l;let f=t[Fo];return f!==null&&(u[Fo]=f.createEmbeddedView(o)),Rv(o,u,n),u}finally{de(i)}}function vC(t,e){return!e||e.firstChild===null||eD(t)}function ou(t,e,n,r,i=!1){for(;n!==null;){if(n.type===128){n=i?n.projectionNext:n.next;continue}let o=e[n.index];o!==null&&r.push(On(o)),Zn(o)&&ND(o,r);let s=n.type;if(s&8)ou(t,e,n.child,r);else if(s&32){let a=bv(n,e),u;for(;u=a();)r.push(u)}else if(s&16){let a=CD(e,n);if(Array.isArray(a))r.push(...a);else{let u=Li(e[kn]);ou(u[ue],u,a,r,!0)}}n=i?n.projectionNext:n.next}return r}function ND(t,e){for(let n=sn;n<t.length;n++){let r=t[n],i=r[ue].firstChild;i!==null&&ou(r[ue],r,i,e)}t[Bi]!==t[Jn]&&e.push(t[Bi])}function MD(t){if(t[Lo]!==null){for(let e of t[Lo])e.impl.addSequence(e);t[Lo].length=0}}var PD=[];function MF(t){return t[_n]??PF(t)}function PF(t){let e=PD.pop()??Object.create(kF);return e.lView=t,e}function xF(t){t.lView[_n]!==t&&(t.lView=null,PD.push(t))}var kF=X(j({},js),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:t=>{ca(t.lView)},consumerOnSignalRead(){this.lView[_n]=this}});function OF(t){let e=t[_n]??Object.create(FF);return e.lView=t,e}var FF=X(j({},js),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:t=>{let e=Li(t.lView);for(;e&&!xD(e[ue]);)e=Li(e);e&&_y(e)},consumerOnSignalRead(){this.lView[_n]=this}});function xD(t){return t.type!==2}function kD(t){if(t[Kc]===null)return;let e=!0;for(;e;){let n=!1;for(let r of t[Kc])r.dirty&&(n=!0,r.zone===null||Zone.current===r.zone?r.run():r.zone.run(()=>r.run()));e=n&&!!(t[ie]&8192)}}var LF=100;function OD(t,e=0){let r=t[yr].rendererFactory,i=!1;i||r.begin?.();try{VF(t,e)}finally{i||r.end?.()}}function VF(t,e){let n=Ty();try{Cy(!0),nv(t,e);let r=0;for(;Xc(t);){if(r===LF)throw new B(103,!1);r++,nv(t,1)}}finally{Cy(n)}}function jF(t,e,n,r){if(Vo(e))return;let i=e[ie],o=!1,s=!1;Qd(e);let a=!0,u=null,l=null;o||(xD(t)?(l=MF(e),u=Bs(l)):sd()===null?(a=!1,l=OF(e),u=Bs(l)):e[_n]&&(kc(e[_n]),e[_n]=null));try{vy(e),K0(t.bindingStartIndex),n!==null&&DD(t,e,n,2,r),UF(e);let f=(i&3)===3;if(!o)if(f){let y=t.preOrderCheckHooks;y!==null&&af(e,y,null)}else{let y=t.preOrderHooks;y!==null&&cf(e,y,0,null),Ly(e,0)}if(s||BF(e),kD(e),FD(e,0),t.contentQueries!==null&&uD(t,e),!o)if(f){let y=t.contentCheckHooks;y!==null&&af(e,y)}else{let y=t.contentHooks;y!==null&&cf(e,y,1),Ly(e,1)}HF(t,e);let p=t.components;p!==null&&VD(e,p,0);let g=t.viewQuery;if(g!==null&&Xy(2,g,r),!o)if(f){let y=t.viewCheckHooks;y!==null&&af(e,y)}else{let y=t.viewHooks;y!==null&&cf(e,y,2),Ly(e,2)}if(t.firstUpdatePass===!0&&(t.firstUpdatePass=!1),e[qd]){for(let y of e[qd])y();e[qd]=null}o||(MD(e),e[ie]&=-73)}catch(f){throw o||ca(e),f}finally{l!==null&&(Pc(l,u),a&&xF(l)),Yd()}}function UF(t){let e=t[Zt];if(e?.enter){for(let n of e.enter)n();e.enter=void 0}}function FD(t,e){for(let n=nD(t);n!==null;n=rD(n))for(let r=sn;r<n.length;r++){let i=n[r];LD(i,e)}}function BF(t){for(let e=nD(t);e!==null;e=rD(e)){if(!(e[ie]&2))continue;let n=e[Yc];for(let r=0;r<n.length;r++){let i=n[r];_y(i)}}}function $F(t,e,n){Me(18);let r=Fn(e,t);LD(r,n),Me(19,r[$t])}function LD(t,e){Gd(t)&&nv(t,e)}function nv(t,e){let r=t[ue],i=t[ie],o=t[_n],s=!!(e===0&&i&16);if(s||=!!(i&64&&e===0),s||=!!(i&1024),s||=!!(o?.dirty&&xc(o)),s||=!1,o&&(o.dirty=!1),t[ie]&=-9217,s)jF(r,t,r.template,t[$t]);else if(i&8192){let a=de(null);try{kD(t),FD(t,1);let u=r.components;u!==null&&VD(t,u,1),MD(t)}finally{de(a)}}}function VD(t,e,n){for(let r=0;r<e.length;r++)$F(t,e[r],n)}function HF(t,e){let n=t.hostBindingOpCodes;if(n!==null)try{for(let r=0;r<n.length;r++){let i=n[r];if(i<0)qi(~i);else{let o=i,s=n[++r],a=n[++r];Y0(s,o);let u=e[o];Me(24,u),a(2,u),Me(25,u)}}}finally{qi(-1)}}function Nv(t,e){let n=Ty()?64:1088;for(t[yr].changeDetectionScheduler?.notify(e);t;){t[ie]|=n;let r=Li(t);if(aa(t)&&!r)return t;t=r}return null}function jD(t,e,n,r){return[t,!0,0,e,null,r,null,n,null,null]}function qF(t,e,n,r=!0){let i=e[ue];if(zF(i,e,t,n),r){let s=tv(n,t),a=e[et],u=a.parentNode(t[Bi]);u!==null&&X1(i,t[xn],a,e,u,s)}let o=e[Gc];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function rv(t,e){if(t.length<=sn)return;let n=sn+e,r=t[n];if(r){let i=r[ko];i!==null&&i!==t&&Tv(i,r),e>0&&(t[n-1][Pn]=r[Pn]);let o=Hc(t,sn+e);Z1(r[ue],r);let s=o[Fo];s!==null&&s.detachView(o[ue]),r[Mt]=null,r[Pn]=null,r[ie]&=-129}return r}function zF(t,e,n,r){let i=sn+r,o=n.length;r>0&&(n[i-1][Pn]=e),r<o-sn?(e[Pn]=n[i],oy(n,sn+r,e)):(n.push(e),e[Pn]=null),e[Mt]=n;let s=e[ko];s!==null&&n!==s&&UD(s,e);let a=e[Fo];a!==null&&a.insertView(t),Wd(e),e[ie]|=128}function UD(t,e){let n=t[Yc],r=e[Mt];if(vr(r))t[ie]|=2;else{let i=r[Mt][kn];e[kn]!==i&&(t[ie]|=2)}n===null?t[Yc]=[e]:n.push(e)}var zi=class{_lView;_cdRefInjectingView;_appRef=null;_attachedToViewContainer=!1;exhaustive;get rootNodes(){let e=this._lView,n=e[ue];return ou(n,e,n.firstChild,[])}constructor(e,n){this._lView=e,this._cdRefInjectingView=n}get context(){return this._lView[$t]}set context(e){this._lView[$t]=e}get destroyed(){return Vo(this._lView)}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[Mt];if(Zn(e)){let n=e[Qc],r=n?n.indexOf(this):-1;r>-1&&(rv(e,r),Hc(n,r))}this._attachedToViewContainer=!1}TD(this._lView[ue],this._lView)}onDestroy(e){Ey(this._lView,e)}markForCheck(){Nv(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[ie]&=-129}reattach(){Wd(this._lView),this._lView[ie]|=128}detectChanges(){this._lView[ie]|=1024,OD(this._lView)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new B(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=aa(this._lView),n=this._lView[ko];n!==null&&!e&&Tv(n,this._lView),bD(this._lView[ue],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new B(902,!1);this._appRef=e;let n=aa(this._lView),r=this._lView[ko];r!==null&&!n&&UD(r,this._lView),Wd(this._lView)}};var uu=(()=>{class t{_declarationLView;_declarationTContainer;elementRef;static __NG_ELEMENT_ID__=GF;constructor(n,r,i){this._declarationLView=n,this._declarationTContainer=r,this.elementRef=i}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(n,r){return this.createEmbeddedViewImpl(n,r)}createEmbeddedViewImpl(n,r,i){let o=NF(this._declarationLView,this._declarationTContainer,n,{embeddedViewInjector:r,dehydratedView:i});return new zi(o)}}return t})();function GF(){return WF(Ht(),Te())}function WF(t,e){return t.type&4?new uu(e,t,Sf(t,e)):null}function Mv(t,e,n,r,i){let o=t.data[e];if(o===null)o=KF(t,e,n,r,i),Q0()&&(o.flags|=32);else if(o.type&64){o.type=n,o.value=r,o.attrs=i;let s=z0();o.injectorIndex=s===null?-1:s.injectorIndex}return ua(o,!0),o}function KF(t,e,n,r,i){let o=Iy(),s=by(),a=s?o:o&&o.parent,u=t.data[e]=YF(t,a,n,e,r,i);return QF(t,u,o,s),u}function QF(t,e,n,r){t.firstChild===null&&(t.firstChild=e),n!==null&&(r?n.child==null&&e.parent!==null&&(n.child=e):n.next===null&&(n.next=e,e.prev=n))}function YF(t,e,n,r,i,o){let s=e?e.injectorIndex:-1,a=0;return $0()&&(a|=128),{type:n,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:null,inputs:null,hostDirectiveInputs:null,outputs:null,hostDirectiveOutputs:null,directiveToIndex:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}var wY=new RegExp(`^(\\d+)*(${C1}|${T1})*(.*)`);var JF=()=>null;function _C(t,e){return JF(t,e)}var BD=class{},Ff=class{},iv=class{resolveComponentFactory(e){throw new B(917,!1)}},lu=class{static NULL=new iv},Bo=class{},Jr=(()=>{class t{destroyNode=null;static __NG_ELEMENT_ID__=()=>ZF()}return t})();function ZF(){let t=Te(),e=Ht(),n=Fn(e.index,t);return(vr(n)?n:t)[et]}var $D=(()=>{class t{static \u0275prov=G({token:t,providedIn:"root",factory:()=>null})}return t})();var uf={},ov=class{injector;parentInjector;constructor(e,n){this.injector=e,this.parentInjector=n}get(e,n,r){let i=this.injector.get(e,uf,r);return i!==uf||n===uf?i:this.parentInjector.get(e,n,r)}};function EC(t,e,n){let r=n?t.styles:null,i=n?t.classes:null,o=0;if(e!==null)for(let s=0;s<e.length;s++){let a=e[s];if(typeof a=="number")o=a;else if(o==1)i=Qm(i,a);else if(o==2){let u=a,l=e[++s];r=Qm(r,u+": "+l+";")}}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=i:t.classesWithoutHost=i}function ne(t,e=0){let n=Te();if(n===null)return K(t,e);let r=Ht();return JC(r,n,Nt(t),e)}function HD(t,e,n,r,i){let o=r===null?null:{"":-1},s=i(t,n);if(s!==null){let a=s,u=null,l=null;for(let f of s)if(f.resolveHostDirectives!==null){[a,u,l]=f.resolveHostDirectives(s);break}tL(t,e,n,a,o,u,l)}o!==null&&r!==null&&XF(n,r,o)}function XF(t,e,n){let r=t.localNames=[];for(let i=0;i<e.length;i+=2){let o=n[e[i+1]];if(o==null)throw new B(-301,!1);r.push(e[i],o)}}function eL(t,e,n){e.componentOffset=n,(t.components??=[]).push(e.index)}function tL(t,e,n,r,i,o,s){let a=r.length,u=!1;for(let g=0;g<a;g++){let y=r[g];!u&&_r(y)&&(u=!0,eL(t,n,g)),Qy(pf(n,e),t,y.type)}aL(n,t.data.length,a);for(let g=0;g<a;g++){let y=r[g];y.providersResolver&&y.providersResolver(y)}let l=!1,f=!1,p=wD(t,e,a,null);a>0&&(n.directiveToIndex=new Map);for(let g=0;g<a;g++){let y=r[g];if(n.mergedAttrs=iu(n.mergedAttrs,y.hostAttrs),rL(t,n,e,p,y),sL(p,y,i),s!==null&&s.has(y)){let[x,R]=s.get(y);n.directiveToIndex.set(y.type,[p,x+n.directiveStart,R+n.directiveStart])}else(o===null||!o.has(y))&&n.directiveToIndex.set(y.type,p);y.contentQueries!==null&&(n.flags|=4),(y.hostBindings!==null||y.hostAttrs!==null||y.hostVars!==0)&&(n.flags|=64);let D=y.type.prototype;!l&&(D.ngOnChanges||D.ngOnInit||D.ngDoCheck)&&((t.preOrderHooks??=[]).push(n.index),l=!0),!f&&(D.ngOnChanges||D.ngDoCheck)&&((t.preOrderCheckHooks??=[]).push(n.index),f=!0),p++}nL(t,n,o)}function nL(t,e,n){for(let r=e.directiveStart;r<e.directiveEnd;r++){let i=t.data[r];if(n===null||!n.has(i))wC(0,e,i,r),wC(1,e,i,r),bC(e,r,!1);else{let o=n.get(i);IC(0,e,o,r),IC(1,e,o,r),bC(e,r,!0)}}}function wC(t,e,n,r){let i=t===0?n.inputs:n.outputs;for(let o in i)if(i.hasOwnProperty(o)){let s;t===0?s=e.inputs??={}:s=e.outputs??={},s[o]??=[],s[o].push(r),qD(e,o)}}function IC(t,e,n,r){let i=t===0?n.inputs:n.outputs;for(let o in i)if(i.hasOwnProperty(o)){let s=i[o],a;t===0?a=e.hostDirectiveInputs??={}:a=e.hostDirectiveOutputs??={},a[s]??=[],a[s].push(r,o),qD(e,s)}}function qD(t,e){e==="class"?t.flags|=8:e==="style"&&(t.flags|=16)}function bC(t,e,n){let{attrs:r,inputs:i,hostDirectiveInputs:o}=t;if(r===null||!n&&i===null||n&&o===null||_v(t)){t.initialInputs??=[],t.initialInputs.push(null);return}let s=null,a=0;for(;a<r.length;){let u=r[a];if(u===0){a+=4;continue}else if(u===5){a+=2;continue}else if(typeof u=="number")break;if(!n&&i.hasOwnProperty(u)){let l=i[u];for(let f of l)if(f===e){s??=[],s.push(u,r[a+1]);break}}else if(n&&o.hasOwnProperty(u)){let l=o[u];for(let f=0;f<l.length;f+=2)if(l[f]===e){s??=[],s.push(l[f+1],r[a+1]);break}}a+=2}t.initialInputs??=[],t.initialInputs.push(s)}function rL(t,e,n,r,i){t.data[r]=i;let o=i.factory||(i.factory=Fi(i.type,!0)),s=new Uo(o,_r(i),ne,null);t.blueprint[r]=s,n[r]=s,iL(t,e,r,wD(t,n,i.hostVars,Vn),i)}function iL(t,e,n,r,i){let o=i.hostBindings;if(o){let s=t.hostBindingOpCodes;s===null&&(s=t.hostBindingOpCodes=[]);let a=~e.index;oL(s)!=a&&s.push(a),s.push(n,r,o)}}function oL(t){let e=t.length;for(;e>0;){let n=t[--e];if(typeof n=="number"&&n<0)return n}return 0}function sL(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;_r(e)&&(n[""]=t)}}function aL(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function zD(t,e,n,r,i,o,s,a){let u=e[ue],l=u.consts,f=Zc(l,s),p=Mv(u,t,n,r,f);return o&&HD(u,e,p,Zc(l,a),i),p.mergedAttrs=iu(p.mergedAttrs,p.attrs),p.attrs!==null&&EC(p,p.attrs,!1),p.mergedAttrs!==null&&EC(p,p.mergedAttrs,!0),u.queries!==null&&u.queries.elementStart(u,p),p}function GD(t,e){$C(t,e),gy(e)&&t.queries.elementEnd(e)}function Pv(t){return KD(t)?Array.isArray(t)||!(t instanceof Map)&&Symbol.iterator in t:!1}function WD(t,e){if(Array.isArray(t))for(let n=0;n<t.length;n++)e(t[n]);else{let n=t[Symbol.iterator](),r;for(;!(r=n.next()).done;)e(r.value)}}function KD(t){return t!==null&&(typeof t=="function"||typeof t=="object")}function QD(t,e,n){return t[e]=n}function cL(t,e){return t[e]}function $o(t,e,n){if(n===Vn)return!1;let r=t[e];return Object.is(r,n)?!1:(t[e]=n,!0)}function YD(t,e,n,r){let i=$o(t,e,n);return $o(t,e+1,r)||i}function Uy(t,e,n){return function r(i){let o=$i(t)?Fn(t.index,e):e;Nv(o,5);let s=e[$t],a=TC(e,s,n,i),u=r.__ngNextListenerFn__;for(;u;)a=TC(e,s,u,i)&&a,u=u.__ngNextListenerFn__;return a}}function TC(t,e,n,r){let i=de(null);try{return Me(6,e,n),n(r)!==!1}catch(o){return DF(t,o),!1}finally{Me(7,e,n),de(i)}}function uL(t,e,n,r,i,o,s,a){let u=Jc(t),l=!1,f=null;if(!r&&u&&(f=dL(e,n,o,t.index)),f!==null){let p=f.__ngLastListenerFn__||f;p.__ngNextListenerFn__=s,f.__ngLastListenerFn__=s,l=!0}else{let p=Xn(t,n),g=r?r(p):p;S1(n,g,o,a);let y=i.listen(g,o,a);if(!lL(o)){let D=r?x=>r(On(x[t.index])):t.index;JD(D,e,n,o,a,y,!1)}}return l}function lL(t){return t.startsWith("animation")||t.startsWith("transition")}function dL(t,e,n,r){let i=t.cleanup;if(i!=null)for(let o=0;o<i.length-1;o+=2){let s=i[o];if(s===n&&i[o+1]===r){let a=e[ia],u=i[o+2];return a&&a.length>u?a[u]:null}typeof s=="string"&&(o+=2)}return null}function JD(t,e,n,r,i,o,s){let a=e.firstCreatePass?V0(e):null,u=L0(n),l=u.length;u.push(i,o),a&&a.push(r,t,l,(l+1)*(s?-1:1))}function CC(t,e,n,r,i,o){let s=e[n],a=e[ue],l=a.data[n].outputs[r],p=s[l].subscribe(o);JD(t.index,a,e,i,o,p,!0)}var sv=Symbol("BINDING");var vf=class extends lu{ngModule;constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let n=Ui(e);return new ha(n,this.ngModule)}};function fL(t){return Object.keys(t).map(e=>{let[n,r,i]=t[e],o={propName:n,templateName:e,isSignal:(r&xf.SignalBased)!==0};return i&&(o.transform=i),o})}function hL(t){return Object.keys(t).map(e=>({propName:t[e],templateName:e}))}function pL(t,e,n){let r=e instanceof Xe?e:e?.injector;return r&&t.getStandaloneInjector!==null&&(r=t.getStandaloneInjector(r)||r),r?new ov(n,r):n}function gL(t){let e=t.get(Bo,null);if(e===null)throw new B(407,!1);let n=t.get($D,null),r=t.get(Gr,null);return{rendererFactory:e,sanitizer:n,changeDetectionScheduler:r,ngReflect:!1}}function mL(t,e){let n=ZD(t);return yD(e,n,n==="svg"?M0:n==="math"?P0:null)}function ZD(t){return(t.selectors[0][0]||"div").toLowerCase()}var ha=class extends Ff{componentDef;ngModule;selector;componentType;ngContentSelectors;isBoundToModule;cachedInputs=null;cachedOutputs=null;get inputs(){return this.cachedInputs??=fL(this.componentDef.inputs),this.cachedInputs}get outputs(){return this.cachedOutputs??=hL(this.componentDef.outputs),this.cachedOutputs}constructor(e,n){super(),this.componentDef=e,this.ngModule=n,this.componentType=e.type,this.selector=B1(e.selectors),this.ngContentSelectors=e.ngContentSelectors??[],this.isBoundToModule=!!n}create(e,n,r,i,o,s){Me(22);let a=de(null);try{let u=this.componentDef,l=yL(r,u,s,o),f=pL(u,i||this.ngModule,e),p=gL(f),g=p.rendererFactory.createRenderer(null,u),y=r?fF(g,r,u.encapsulation,f):mL(u,g),D=s?.some(DC)||o?.some(O=>typeof O!="function"&&O.bindings.some(DC)),x=wv(null,l,null,512|ED(u),null,null,p,g,f,null,cD(y,f,!0));x[Xt]=y,Qd(x);let R=null;try{let O=zD(Xt,x,2,"#host",()=>l.directiveRegistry,!0,0);y&&(_D(g,y,O),fa(y,x)),Sv(l,x,O),lD(l,O,x),GD(l,O),n!==void 0&&_L(O,this.ngContentSelectors,n),R=Fn(O.index,x),x[$t]=R[$t],Rv(l,x,null)}catch(O){throw R!==null&&Jy(R),Jy(x),O}finally{Me(23),Yd()}return new _f(this.componentType,x,!!D)}finally{de(a)}}};function yL(t,e,n,r){let i=t?["ng-version","20.3.1"]:$1(e.selectors[0]),o=null,s=null,a=0;if(n)for(let f of n)a+=f[sv].requiredVars,f.create&&(f.targetIdx=0,(o??=[]).push(f)),f.update&&(f.targetIdx=0,(s??=[]).push(f));if(r)for(let f=0;f<r.length;f++){let p=r[f];if(typeof p!="function")for(let g of p.bindings){a+=g[sv].requiredVars;let y=f+1;g.create&&(g.targetIdx=y,(o??=[]).push(g)),g.update&&(g.targetIdx=y,(s??=[]).push(g))}}let u=[e];if(r)for(let f of r){let p=typeof f=="function"?f:f.type,g=uy(p);u.push(g)}return Ev(0,null,vL(o,s),1,a,u,null,null,null,[i],null)}function vL(t,e){return!t&&!e?null:n=>{if(n&1&&t)for(let r of t)r.create();if(n&2&&e)for(let r of e)r.update()}}function DC(t){let e=t[sv].kind;return e==="input"||e==="twoWay"}var _f=class extends BD{_rootLView;_hasInputBindings;instance;hostView;changeDetectorRef;componentType;location;previousInputValues=null;_tNode;constructor(e,n,r){super(),this._rootLView=n,this._hasInputBindings=r,this._tNode=zd(n[ue],Xt),this.location=Sf(this._tNode,n),this.instance=Fn(this._tNode.index,n)[$t],this.hostView=this.changeDetectorRef=new zi(n,void 0),this.componentType=e}setInput(e,n){this._hasInputBindings;let r=this._tNode;if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),n))return;let i=this._rootLView,o=Av(r,i[ue],i,e,n);this.previousInputValues.set(e,n);let s=Fn(r.index,i);Nv(s,1)}get injector(){return new jo(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function _L(t,e,n){let r=t.projection=[];for(let i=0;i<e.length;i++){let o=n[i];r.push(o!=null&&o.length?Array.from(o):null)}}var zo=(()=>{class t{static __NG_ELEMENT_ID__=EL}return t})();function EL(){let t=Ht();return IL(t,Te())}var wL=zo,XD=class extends wL{_lContainer;_hostTNode;_hostLView;constructor(e,n,r){super(),this._lContainer=e,this._hostTNode=n,this._hostLView=r}get element(){return Sf(this._hostTNode,this._hostLView)}get injector(){return new jo(this._hostTNode,this._hostLView)}get parentInjector(){let e=hv(this._hostTNode,this._hostLView);if(zC(e)){let n=ff(e,this._hostLView),r=df(e),i=n[ue].data[r+8];return new jo(i,n)}else return new jo(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let n=SC(this._lContainer);return n!==null&&n[e]||null}get length(){return this._lContainer.length-sn}createEmbeddedView(e,n,r){let i,o;typeof r=="number"?i=r:r!=null&&(i=r.index,o=r.injector);let s=_C(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(n||{},o,s);return this.insertImpl(a,i,vC(this._hostTNode,s)),a}createComponent(e,n,r,i,o,s,a){let u=e&&!XO(e),l;if(u)l=n;else{let R=n||{};l=R.index,r=R.injector,i=R.projectableNodes,o=R.environmentInjector||R.ngModuleRef,s=R.directives,a=R.bindings}let f=u?e:new ha(Ui(e)),p=r||this.parentInjector;if(!o&&f.ngModule==null){let O=(u?p:this.parentInjector).get(Xe,null);O&&(o=O)}let g=Ui(f.componentType??{}),y=_C(this._lContainer,g?.id??null),D=y?.firstChild??null,x=f.create(p,i,D,o,s,a);return this.insertImpl(x.hostView,l,vC(this._hostTNode,y)),x}insert(e,n){return this.insertImpl(e,n,!0)}insertImpl(e,n,r){let i=e._lView;if(k0(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let u=i[Mt],l=new XD(u,u[xn],u[Mt]);l.detach(l.indexOf(e))}}let o=this._adjustIndex(n),s=this._lContainer;return qF(s,i,o,r),e.attachToViewContainerRef(),oy(By(s),o,e),e}move(e,n){return this.insert(e,n)}indexOf(e){let n=SC(this._lContainer);return n!==null?n.indexOf(e):-1}remove(e){let n=this._adjustIndex(e,-1),r=rv(this._lContainer,n);r&&(Hc(By(this._lContainer),n),TD(r[ue],r))}detach(e){let n=this._adjustIndex(e,-1),r=rv(this._lContainer,n);return r&&Hc(By(this._lContainer),n)!=null?new zi(r):null}_adjustIndex(e,n=0){return e??this.length+n}};function SC(t){return t[Qc]}function By(t){return t[Qc]||(t[Qc]=[])}function IL(t,e){let n,r=e[t.index];return Zn(r)?n=r:(n=jD(r,e,null,t),e[t.index]=n,Iv(e,n)),TL(n,e,t,r),new XD(n,t,e)}function bL(t,e){let n=t[et],r=n.createComment(""),i=Xn(e,t),o=n.parentNode(i);return yf(n,o,r,n.nextSibling(i),!1),r}var TL=SL,CL=()=>!1;function DL(t,e,n){return CL(t,e,n)}function SL(t,e,n,r){if(t[Bi])return;let i;n.type&8?i=On(r):i=bL(e,n),t[Bi]=i}var AC=new Set;function Lf(t){AC.has(t)||(AC.add(t),performance?.mark?.("mark_feature_usage",{detail:{feature:t}}))}var Ho=class{},Vf=class{};var Ef=class extends Ho{ngModuleType;_parent;_bootstrapComponents=[];_r3Injector;instance;destroyCbs=[];componentFactoryResolver=new vf(this);constructor(e,n,r,i=!0){super(),this.ngModuleType=e,this._parent=n;let o=cy(e);this._bootstrapComponents=gD(o.bootstrap),this._r3Injector=My(e,n,[{provide:Ho,useValue:this},{provide:lu,useValue:this.componentFactoryResolver},...r],zr(e),new Set(["environment"])),i&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},wf=class extends Vf{moduleType;constructor(e){super(),this.moduleType=e}create(e){return new Ef(this.moduleType,e,[])}};var su=class extends Ho{injector;componentFactoryResolver=new vf(this);instance=null;constructor(e){super();let n=new No([...e.providers,{provide:Ho,useValue:this},{provide:lu,useValue:this.componentFactoryResolver}],e.parent||zc(),e.debugName,new Set(["environment"]));this.injector=n,e.runEnvironmentInitializers&&n.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function du(t,e,n=null){return new su({providers:t,parent:e,debugName:n,runEnvironmentInitializers:!0}).injector}var AL=(()=>{class t{_injector;cachedInjectors=new Map;constructor(n){this._injector=n}getOrCreateStandaloneInjector(n){if(!n.standalone)return null;if(!this.cachedInjectors.has(n)){let r=ly(!1,n.type),i=r.length>0?du([r],this._injector,`Standalone[${n.type.name}]`):null;this.cachedInjectors.set(n,i)}return this.cachedInjectors.get(n)}ngOnDestroy(){try{for(let n of this.cachedInjectors.values())n!==null&&n.destroy()}finally{this.cachedInjectors.clear()}}static \u0275prov=G({token:t,providedIn:"environment",factory:()=>new t(K(Xe))})}return t})();function rt(t){return ga(()=>{let e=eS(t),n=X(j({},e),{decls:t.decls,vars:t.vars,template:t.template,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,onPush:t.changeDetection===pv.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&t.dependencies||null,getStandaloneInjector:e.standalone?i=>i.get(AL).getOrCreateStandaloneInjector(n):null,getExternalStyles:null,signals:t.signals??!1,data:t.data||{},encapsulation:t.encapsulation||Qr.Emulated,styles:t.styles||vn,_:null,schemas:t.schemas||null,tView:null,id:""});e.standalone&&Lf("NgStandalone"),tS(n);let r=t.dependencies;return n.directiveDefs=RC(r,RL),n.pipeDefs=RC(r,T0),n.id=PL(n),n})}function RL(t){return Ui(t)||uy(t)}function rr(t){return ga(()=>({type:t.type,bootstrap:t.bootstrap||vn,declarations:t.declarations||vn,imports:t.imports||vn,exports:t.exports||vn,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null}))}function NL(t,e){if(t==null)return Vi;let n={};for(let r in t)if(t.hasOwnProperty(r)){let i=t[r],o,s,a,u;Array.isArray(i)?(a=i[0],o=i[1],s=i[2]??o,u=i[3]||null):(o=i,s=i,a=xf.None,u=null),n[o]=[r,a,u],e[o]=s}return n}function ML(t){if(t==null)return Vi;let e={};for(let n in t)t.hasOwnProperty(n)&&(e[t[n]]=n);return e}function ze(t){return ga(()=>{let e=eS(t);return tS(e),e})}function xv(t){return{type:t.type,name:t.name,factory:null,pure:t.pure!==!1,standalone:t.standalone??!0,onDestroy:t.type.prototype.ngOnDestroy||null}}function eS(t){let e={};return{type:t.type,providersResolver:null,factory:null,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputConfig:t.inputs||Vi,exportAs:t.exportAs||null,standalone:t.standalone??!0,signals:t.signals===!0,selectors:t.selectors||vn,viewQuery:t.viewQuery||null,features:t.features||null,setInput:null,resolveHostDirectives:null,hostDirectives:null,inputs:NL(t.inputs,e),outputs:ML(t.outputs),debugInfo:null}}function tS(t){t.features?.forEach(e=>e(t))}function RC(t,e){return t?()=>{let n=typeof t=="function"?t():t,r=[];for(let i of n){let o=e(i);o!==null&&r.push(o)}return r}:null}function PL(t){let e=0,n=typeof t.consts=="function"?"":t.consts,r=[t.selectors,t.ngContentSelectors,t.hostVars,t.hostAttrs,n,t.vars,t.decls,t.encapsulation,t.standalone,t.signals,t.exportAs,JSON.stringify(t.inputs),JSON.stringify(t.outputs),Object.getOwnPropertyNames(t.type.prototype),!!t.contentQueries,!!t.viewQuery];for(let o of r.join("|"))e=Math.imul(31,e)+o.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function xL(t){return Object.getPrototypeOf(t.prototype).constructor}function En(t){let e=xL(t.type),n=!0,r=[t];for(;e;){let i;if(_r(t))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new B(903,!1);i=e.\u0275dir}if(i){if(n){r.push(i);let s=t;s.inputs=$y(t.inputs),s.declaredInputs=$y(t.declaredInputs),s.outputs=$y(t.outputs);let a=i.hostBindings;a&&VL(t,a);let u=i.viewQuery,l=i.contentQueries;if(u&&FL(t,u),l&&LL(t,l),kL(t,i),m0(t.outputs,i.outputs),_r(i)&&i.data.animation){let f=t.data;f.animation=(f.animation||[]).concat(i.data.animation)}}let o=i.features;if(o)for(let s=0;s<o.length;s++){let a=o[s];a&&a.ngInherit&&a(t),a===En&&(n=!1)}}e=Object.getPrototypeOf(e)}OL(r)}function kL(t,e){for(let n in e.inputs){if(!e.inputs.hasOwnProperty(n)||t.inputs.hasOwnProperty(n))continue;let r=e.inputs[n];r!==void 0&&(t.inputs[n]=r,t.declaredInputs[n]=e.declaredInputs[n])}}function OL(t){let e=0,n=null;for(let r=t.length-1;r>=0;r--){let i=t[r];i.hostVars=e+=i.hostVars,i.hostAttrs=iu(i.hostAttrs,n=iu(n,i.hostAttrs))}}function $y(t){return t===Vi?{}:t===vn?[]:t}function FL(t,e){let n=t.viewQuery;n?t.viewQuery=(r,i)=>{e(r,i),n(r,i)}:t.viewQuery=e}function LL(t,e){let n=t.contentQueries;n?t.contentQueries=(r,i,o)=>{e(r,i,o),n(r,i,o)}:t.contentQueries=e}function VL(t,e){let n=t.hostBindings;n?t.hostBindings=(r,i)=>{e(r,i),n(r,i)}:t.hostBindings=e}function jL(t,e,n,r,i,o,s,a){if(n.firstCreatePass){t.mergedAttrs=iu(t.mergedAttrs,t.attrs);let f=t.tView=Ev(2,t,i,o,s,n.directiveRegistry,n.pipeRegistry,null,n.schemas,n.consts,null);n.queries!==null&&(n.queries.template(n,t),f.queries=n.queries.embeddedTView(t))}a&&(t.flags|=a),ua(t,!1);let u=BL(n,e,t,r);Zd()&&Cv(n,e,u,t),fa(u,e);let l=jD(u,e,u,t);e[r+Xt]=l,Iv(e,l),DL(l,t,e)}function UL(t,e,n,r,i,o,s,a,u,l,f){let p=n+Xt,g;return e.firstCreatePass?(g=Mv(e,p,4,s||null,a||null),wy()&&HD(e,t,g,Zc(e.consts,l),RD),$C(e,g)):g=e.data[p],jL(g,t,e,n,r,i,o,u),Jc(g)&&Sv(e,t,g),l!=null&&SD(t,g,f),g}function Ee(t,e,n,r,i,o,s,a){let u=Te(),l=an(),f=Zc(l.consts,o);return UL(u,l,t,e,n,r,i,f,void 0,s,a),Ee}var BL=$L;function $L(t,e,n,r){return Xd(!0),e[et].createComment("")}var jf=(function(t){return t[t.CHANGE_DETECTION=0]="CHANGE_DETECTION",t[t.AFTER_NEXT_RENDER=1]="AFTER_NEXT_RENDER",t})(jf||{}),Go=new q(""),nS=!1,av=class extends at{__isAsync;destroyRef=void 0;pendingTasks=void 0;constructor(e=!1){super(),this.__isAsync=e,R0()&&(this.destroyRef=A(er,{optional:!0})??void 0,this.pendingTasks=A(Er,{optional:!0})??void 0)}emit(e){let n=de(null);try{super.next(e)}finally{de(n)}}subscribe(e,n,r){let i=e,o=n||(()=>null),s=r;if(e&&typeof e=="object"){let u=e;i=u.next?.bind(u),o=u.error?.bind(u),s=u.complete?.bind(u)}this.__isAsync&&(o=this.wrapInTimeout(o),i&&(i=this.wrapInTimeout(i)),s&&(s=this.wrapInTimeout(s)));let a=super.subscribe({next:i,error:o,complete:s});return e instanceof Je&&e.add(a),a}wrapInTimeout(e){return n=>{let r=this.pendingTasks?.add();setTimeout(()=>{try{e(n)}finally{r!==void 0&&this.pendingTasks?.remove(r)}})}}},ut=av;function rS(t){let e,n;function r(){t=tu;try{n!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(n),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{t(),r()}),typeof requestAnimationFrame=="function"&&(n=requestAnimationFrame(()=>{t(),r()})),()=>r()}function NC(t){return queueMicrotask(()=>t()),()=>{t=tu}}var kv="isAngularZone",If=kv+"_ID",HL=0,Re=class t{hasPendingMacrotasks=!1;hasPendingMicrotasks=!1;isStable=!0;onUnstable=new ut(!1);onMicrotaskEmpty=new ut(!1);onStable=new ut(!1);onError=new ut(!1);constructor(e){let{enableLongStackTrace:n=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:o=nS}=e;if(typeof Zone>"u")throw new B(908,!1);Zone.assertZonePatched();let s=this;s._nesting=0,s._outer=s._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(s._inner=s._inner.fork(new Zone.TaskTrackingZoneSpec)),n&&Zone.longStackTraceZoneSpec&&(s._inner=s._inner.fork(Zone.longStackTraceZoneSpec)),s.shouldCoalesceEventChangeDetection=!i&&r,s.shouldCoalesceRunChangeDetection=i,s.callbackScheduled=!1,s.scheduleInRootZone=o,GL(s)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(kv)===!0}static assertInAngularZone(){if(!t.isInAngularZone())throw new B(909,!1)}static assertNotInAngularZone(){if(t.isInAngularZone())throw new B(909,!1)}run(e,n,r){return this._inner.run(e,n,r)}runTask(e,n,r,i){let o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,e,qL,tu,tu);try{return o.runTask(s,n,r)}finally{o.cancelTask(s)}}runGuarded(e,n,r){return this._inner.runGuarded(e,n,r)}runOutsideAngular(e){return this._outer.run(e)}},qL={};function Ov(t){if(t._nesting==0&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function zL(t){if(t.isCheckStableRunning||t.callbackScheduled)return;t.callbackScheduled=!0;function e(){rS(()=>{t.callbackScheduled=!1,cv(t),t.isCheckStableRunning=!0,Ov(t),t.isCheckStableRunning=!1})}t.scheduleInRootZone?Zone.root.run(()=>{e()}):t._outer.run(()=>{e()}),cv(t)}function GL(t){let e=()=>{zL(t)},n=HL++;t._inner=t._inner.fork({name:"angular",properties:{[kv]:!0,[If]:n,[If+n]:!0},onInvokeTask:(r,i,o,s,a,u)=>{if(WL(u))return r.invokeTask(o,s,a,u);try{return MC(t),r.invokeTask(o,s,a,u)}finally{(t.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||t.shouldCoalesceRunChangeDetection)&&e(),PC(t)}},onInvoke:(r,i,o,s,a,u,l)=>{try{return MC(t),r.invoke(o,s,a,u,l)}finally{t.shouldCoalesceRunChangeDetection&&!t.callbackScheduled&&!KL(u)&&e(),PC(t)}},onHasTask:(r,i,o,s)=>{r.hasTask(o,s),i===o&&(s.change=="microTask"?(t._hasPendingMicrotasks=s.microTask,cv(t),Ov(t)):s.change=="macroTask"&&(t.hasPendingMacrotasks=s.macroTask))},onHandleError:(r,i,o,s)=>(r.handleError(o,s),t.runOutsideAngular(()=>t.onError.emit(s)),!1)})}function cv(t){t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&t.callbackScheduled===!0?t.hasPendingMicrotasks=!0:t.hasPendingMicrotasks=!1}function MC(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function PC(t){t._nesting--,Ov(t)}var bf=class{hasPendingMicrotasks=!1;hasPendingMacrotasks=!1;isStable=!0;onUnstable=new ut;onMicrotaskEmpty=new ut;onStable=new ut;onError=new ut;run(e,n,r){return e.apply(n,r)}runGuarded(e,n,r){return e.apply(n,r)}runOutsideAngular(e){return e()}runTask(e,n,r,i){return e.apply(n,r)}};function WL(t){return iS(t,"__ignore_ng_zone__")}function KL(t){return iS(t,"__scheduler_tick__")}function iS(t,e){return!Array.isArray(t)||t.length!==1?!1:t[0]?.data?.[e]===!0}var Fv=(()=>{class t{impl=null;execute(){this.impl?.execute()}static \u0275prov=G({token:t,providedIn:"root",factory:()=>new t})}return t})(),oS=[0,1,2,3],sS=(()=>{class t{ngZone=A(Re);scheduler=A(Gr);errorHandler=A(Yn,{optional:!0});sequences=new Set;deferredRegistrations=new Set;executing=!1;constructor(){A(Go,{optional:!0})}execute(){let n=this.sequences.size>0;n&&Me(16),this.executing=!0;for(let r of oS)for(let i of this.sequences)if(!(i.erroredOrDestroyed||!i.hooks[r]))try{i.pipelinedValue=this.ngZone.runOutsideAngular(()=>this.maybeTrace(()=>{let o=i.hooks[r];return o(i.pipelinedValue)},i.snapshot))}catch(o){i.erroredOrDestroyed=!0,this.errorHandler?.handleError(o)}this.executing=!1;for(let r of this.sequences)r.afterRun(),r.once&&(this.sequences.delete(r),r.destroy());for(let r of this.deferredRegistrations)this.sequences.add(r);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear(),n&&Me(17)}register(n){let{view:r}=n;r!==void 0?((r[Lo]??=[]).push(n),ca(r),r[ie]|=8192):this.executing?this.deferredRegistrations.add(n):this.addSequence(n)}addSequence(n){this.sequences.add(n),this.scheduler.notify(7)}unregister(n){this.executing&&this.sequences.has(n)?(n.erroredOrDestroyed=!0,n.pipelinedValue=void 0,n.once=!0):(this.sequences.delete(n),this.deferredRegistrations.delete(n))}maybeTrace(n,r){return r?r.run(jf.AFTER_NEXT_RENDER,n):n()}static \u0275prov=G({token:t,providedIn:"root",factory:()=>new t})}return t})(),Tf=class{impl;hooks;view;once;snapshot;erroredOrDestroyed=!1;pipelinedValue=void 0;unregisterOnDestroy;constructor(e,n,r,i,o,s=null){this.impl=e,this.hooks=n,this.view=r,this.once=i,this.snapshot=s,this.unregisterOnDestroy=o?.onDestroy(()=>this.destroy())}afterRun(){this.erroredOrDestroyed=!1,this.pipelinedValue=void 0,this.snapshot?.dispose(),this.snapshot=null}destroy(){this.impl.unregister(this),this.unregisterOnDestroy?.();let e=this.view?.[Lo];e&&(this.view[Lo]=e.filter(n=>n!==this))}};function Uf(t,e){let n=e?.injector??A(Ae);return Lf("NgAfterNextRender"),YL(t,n,e,!0)}function QL(t){return t instanceof Function?[void 0,void 0,t,void 0]:[t.earlyRead,t.write,t.mixedReadWrite,t.read]}function YL(t,e,n,r){let i=e.get(Fv);i.impl??=e.get(sS);let o=e.get(Go,null,{optional:!0}),s=n?.manualCleanup!==!0?e.get(er):null,a=e.get(tf,null,{optional:!0}),u=new Tf(i.impl,QL(t),a?.view,r,s,o?.snapshot(null));return i.impl.register(u),u}var Lv=(()=>{class t{log(n){console.log(n)}warn(n){console.warn(n)}static \u0275fac=function(r){return new(r||t)};static \u0275prov=G({token:t,factory:t.\u0275fac,providedIn:"platform"})}return t})();var Vv=new q("");function Wi(t){return!!t&&typeof t.then=="function"}function jv(t){return!!t&&typeof t.subscribe=="function"}var aS=new q("");var Uv=(()=>{class t{resolve;reject;initialized=!1;done=!1;donePromise=new Promise((n,r)=>{this.resolve=n,this.reject=r});appInits=A(aS,{optional:!0})??[];injector=A(Ae);constructor(){}runInitializers(){if(this.initialized)return;let n=[];for(let i of this.appInits){let o=ve(this.injector,i);if(Wi(o))n.push(o);else if(jv(o)){let s=new Promise((a,u)=>{o.subscribe({complete:a,error:u})});n.push(s)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(n).then(()=>{r()}).catch(i=>{this.reject(i)}),n.length===0&&r(),this.initialized=!0}static \u0275fac=function(r){return new(r||t)};static \u0275prov=G({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),Bf=new q("");function cS(){pm(()=>{let t="";throw new B(600,t)})}function uS(t){return t.isBoundToModule}var JL=10;var Zr=(()=>{class t{_runningTick=!1;_destroyed=!1;_destroyListeners=[];_views=[];internalErrorHandler=A(cn);afterRenderManager=A(Fv);zonelessEnabled=A(ef);rootEffectScheduler=A(Fy);dirtyFlags=0;tracingSnapshot=null;allTestViews=new Set;autoDetectTestViews=new Set;includeAllTestViews=!1;afterTick=new at;get allViews(){return[...(this.includeAllTestViews?this.allTestViews:this.autoDetectTestViews).keys(),...this._views]}get destroyed(){return this._destroyed}componentTypes=[];components=[];internalPendingTask=A(Er);get isStable(){return this.internalPendingTask.hasPendingTasksObservable.pipe(fe(n=>!n))}constructor(){A(Go,{optional:!0})}whenStable(){let n;return new Promise(r=>{n=this.isStable.subscribe({next:i=>{i&&r()}})}).finally(()=>{n.unsubscribe()})}_injector=A(Xe);_rendererFactory=null;get injector(){return this._injector}bootstrap(n,r){return this.bootstrapImpl(n,r)}bootstrapImpl(n,r,i=Ae.NULL){return this._injector.get(Re).run(()=>{Me(10);let s=n instanceof Ff;if(!this._injector.get(Uv).done){let D="";throw new B(405,D)}let u;s?u=n:u=this._injector.get(lu).resolveComponentFactory(n),this.componentTypes.push(u.componentType);let l=uS(u)?void 0:this._injector.get(Ho),f=r||u.selector,p=u.create(i,[],f,l),g=p.location.nativeElement,y=p.injector.get(Vv,null);return y?.registerApplication(g),p.onDestroy(()=>{this.detachView(p.hostView),ru(this.components,p),y?.unregisterApplication(g)}),this._loadComponent(p),Me(11,p),p})}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){Me(12),this.tracingSnapshot!==null?this.tracingSnapshot.run(jf.CHANGE_DETECTION,this.tickImpl):this.tickImpl()}tickImpl=()=>{if(this._runningTick)throw new B(101,!1);let n=de(null);try{this._runningTick=!0,this.synchronize()}finally{this._runningTick=!1,this.tracingSnapshot?.dispose(),this.tracingSnapshot=null,de(n),this.afterTick.next(),Me(13)}};synchronize(){this._rendererFactory===null&&!this._injector.destroyed&&(this._rendererFactory=this._injector.get(Bo,null,{optional:!0}));let n=0;for(;this.dirtyFlags!==0&&n++<JL;)Me(14),this.synchronizeOnce(),Me(15)}synchronizeOnce(){this.dirtyFlags&16&&(this.dirtyFlags&=-17,this.rootEffectScheduler.flush());let n=!1;if(this.dirtyFlags&7){let r=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8;for(let{_lView:i}of this.allViews){if(!r&&!Xc(i))continue;let o=r&&!this.zonelessEnabled?0:1;OD(i,o),n=!0}if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&23)return}n||(this._rendererFactory?.begin?.(),this._rendererFactory?.end?.()),this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:n})=>Xc(n))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(n){let r=n;this._views.push(r),r.attachToAppRef(this)}detachView(n){let r=n;ru(this._views,r),r.detachFromAppRef()}_loadComponent(n){this.attachView(n.hostView);try{this.tick()}catch(i){this.internalErrorHandler(i)}this.components.push(n),this._injector.get(Bf,[]).forEach(i=>i(n))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(n=>n()),this._views.slice().forEach(n=>n.destroy())}finally{this._destroyed=!0,this._views=[],this._destroyListeners=[]}}onDestroy(n){return this._destroyListeners.push(n),()=>ru(this._destroyListeners,n)}destroy(){if(this._destroyed)throw new B(406,!1);let n=this._injector;n.destroy&&!n.destroyed&&n.destroy()}get viewCount(){return this._views.length}static \u0275fac=function(r){return new(r||t)};static \u0275prov=G({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function ru(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function Wo(t,e,n,r){let i=Te(),o=eu();if($o(i,o,e)){let s=an(),a=Jd();wF(a,i,t,e,n,r)}return Wo}var AY=typeof document<"u"&&typeof document?.documentElement?.getAnimations=="function";function J(t,e,n){let r=Te(),i=eu();if($o(r,i,e)){let o=an(),s=Jd();AD(s,r,t,e,r[et],n)}return J}function xC(t,e,n,r,i){Av(e,t,n,i?"class":"style",r)}function N(t,e,n,r){let i=Te(),o=i[ue],s=t+Xt,a=o.firstCreatePass?zD(s,i,2,e,RD,wy(),n,r):o.data[s];if(TF(a,i,t,e,ZL),Jc(a)){let u=i[ue];Sv(u,i,a),lD(u,a,i)}return r!=null&&SD(i,a),N}function P(){let t=an(),e=Ht(),n=CF(e);return t.firstCreatePass&&GD(t,n),H0(n)&&q0(),B0(),n.classesWithoutHost!=null&&o1(n)&&xC(t,n,Te(),n.classesWithoutHost,!0),n.stylesWithoutHost!=null&&s1(n)&&xC(t,n,Te(),n.stylesWithoutHost,!1),P}function ir(t,e,n,r){return N(t,e,n,r),P(),ir}var ZL=(t,e,n,r,i)=>(Xd(!0),yD(e[et],r,rC()));function bt(){return Te()}var of=void 0;function XL(t){let e=Math.floor(Math.abs(t)),n=t.toString().replace(/^[^.]*\.?/,"").length;return e===1&&n===0?1:5}var eV=["en",[["a","p"],["AM","PM"]],[["AM","PM"]],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],of,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],of,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",of,"{1} 'at' {0}",of],[".",",",";","%","+","-","E","\xD7","\u2030","\u221E","NaN",":"],["#,##0.###","#,##0%","\xA4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",XL],Hy={};function wn(t){let e=tV(t),n=kC(e);if(n)return n;let r=e.split("-")[0];if(n=kC(r),n)return n;if(r==="en")return eV;throw new B(701,!1)}function kC(t){return t in Hy||(Hy[t]=Wr.ng&&Wr.ng.common&&Wr.ng.common.locales&&Wr.ng.common.locales[t]),Hy[t]}var it=(function(t){return t[t.LocaleId=0]="LocaleId",t[t.DayPeriodsFormat=1]="DayPeriodsFormat",t[t.DayPeriodsStandalone=2]="DayPeriodsStandalone",t[t.DaysFormat=3]="DaysFormat",t[t.DaysStandalone=4]="DaysStandalone",t[t.MonthsFormat=5]="MonthsFormat",t[t.MonthsStandalone=6]="MonthsStandalone",t[t.Eras=7]="Eras",t[t.FirstDayOfWeek=8]="FirstDayOfWeek",t[t.WeekendRange=9]="WeekendRange",t[t.DateFormat=10]="DateFormat",t[t.TimeFormat=11]="TimeFormat",t[t.DateTimeFormat=12]="DateTimeFormat",t[t.NumberSymbols=13]="NumberSymbols",t[t.NumberFormats=14]="NumberFormats",t[t.CurrencyCode=15]="CurrencyCode",t[t.CurrencySymbol=16]="CurrencySymbol",t[t.CurrencyName=17]="CurrencyName",t[t.Currencies=18]="Currencies",t[t.Directionality=19]="Directionality",t[t.PluralCase=20]="PluralCase",t[t.ExtraData=21]="ExtraData",t})(it||{});function tV(t){return t.toLowerCase().replace(/_/g,"-")}var fu="en-US";var nV=fu;function lS(t){typeof t=="string"&&(nV=t.toLowerCase().replace(/_/g,"-"))}function W(t,e,n){let r=Te(),i=an(),o=Ht();return dS(i,r,r[et],o,t,e,n),W}function dS(t,e,n,r,i,o,s){let a=!0,u=null;if((r.type&3||s)&&(u??=Uy(r,e,o),uL(r,t,e,s,n,i,o,u)&&(a=!1)),a){let l=r.outputs?.[i],f=r.hostDirectiveOutputs?.[i];if(f&&f.length)for(let p=0;p<f.length;p+=2){let g=f[p],y=f[p+1];u??=Uy(r,e,o),CC(r,e,g,y,i,u)}if(l&&l.length)for(let p of l)u??=Uy(r,e,o),CC(r,e,p,i,i,u)}}function te(t=1){return nC(t)}function sf(t,e){return t<<17|e<<2}function qo(t){return t>>17&32767}function rV(t){return(t&2)==2}function iV(t,e){return t&131071|e<<17}function uv(t){return t|2}function pa(t){return(t&131068)>>2}function qy(t,e){return t&-131069|e<<2}function oV(t){return(t&1)===1}function lv(t){return t|1}function sV(t,e,n,r,i,o){let s=o?e.classBindings:e.styleBindings,a=qo(s),u=pa(s);t[r]=n;let l=!1,f;if(Array.isArray(n)){let p=n;f=p[1],(f===null||ra(p,f)>0)&&(l=!0)}else f=n;if(i)if(u!==0){let g=qo(t[a+1]);t[r+1]=sf(g,a),g!==0&&(t[g+1]=qy(t[g+1],r)),t[a+1]=iV(t[a+1],r)}else t[r+1]=sf(a,0),a!==0&&(t[a+1]=qy(t[a+1],r)),a=r;else t[r+1]=sf(u,0),a===0?a=r:t[u+1]=qy(t[u+1],r),u=r;l&&(t[r+1]=uv(t[r+1])),OC(t,f,r,!0),OC(t,f,r,!1),aV(e,f,t,r,o),s=sf(a,u),o?e.classBindings=s:e.styleBindings=s}function aV(t,e,n,r,i){let o=i?t.residualClasses:t.residualStyles;o!=null&&typeof e=="string"&&ra(o,e)>=0&&(n[r+1]=lv(n[r+1]))}function OC(t,e,n,r){let i=t[n+1],o=e===null,s=r?qo(i):pa(i),a=!1;for(;s!==0&&(a===!1||o);){let u=t[s],l=t[s+1];cV(u,e)&&(a=!0,t[s+1]=r?lv(l):uv(l)),s=r?qo(l):pa(l)}a&&(t[n+1]=r?uv(i):lv(i))}function cV(t,e){return t===null||e==null||(Array.isArray(t)?t[1]:t)===e?!0:Array.isArray(t)&&typeof e=="string"?ra(t,e)>=0:!1}function jn(t,e){return uV(t,e,null,!0),jn}function uV(t,e,n,r){let i=Te(),o=an(),s=Sy(2);if(o.firstUpdatePass&&dV(o,t,s,r),e!==Vn&&$o(i,s,e)){let a=o.data[Hi()];mV(o,a,i,i[et],t,i[s+1]=yV(e,n),r,s)}}function lV(t,e){return e>=t.expandoStartIndex}function dV(t,e,n,r){let i=t.data;if(i[n+1]===null){let o=i[Hi()],s=lV(t,n);vV(o,r)&&e===null&&!s&&(e=!1),e=fV(i,o,e,r),sV(i,o,e,n,s,r)}}function fV(t,e,n,r){let i=Z0(t),o=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(n=zy(null,t,e,n,r),n=au(n,e.attrs,r),o=null);else{let s=e.directiveStylingLast;if(s===-1||t[s]!==i)if(n=zy(i,t,e,n,r),o===null){let u=hV(t,e,r);u!==void 0&&Array.isArray(u)&&(u=zy(null,t,e,u[1],r),u=au(u,e.attrs,r),pV(t,e,r,u))}else o=gV(t,e,r)}return o!==void 0&&(r?e.residualClasses=o:e.residualStyles=o),n}function hV(t,e,n){let r=n?e.classBindings:e.styleBindings;if(pa(r)!==0)return t[qo(r)]}function pV(t,e,n,r){let i=n?e.classBindings:e.styleBindings;t[qo(i)]=r}function gV(t,e,n){let r,i=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<i;o++){let s=t[o].hostAttrs;r=au(r,s,n)}return au(r,e.attrs,n)}function zy(t,e,n,r,i){let o=null,s=n.directiveEnd,a=n.directiveStylingLast;for(a===-1?a=n.directiveStart:a++;a<s&&(o=e[a],r=au(r,o.hostAttrs,i),o!==t);)a++;return t!==null&&(n.directiveStylingLast=a),r}function au(t,e,n){let r=n?1:2,i=-1;if(e!==null)for(let o=0;o<e.length;o++){let s=e[o];typeof s=="number"?i=s:i===r&&(Array.isArray(t)||(t=t===void 0?[]:["",t]),b0(t,s,n?!0:e[++o]))}return t===void 0?null:t}function mV(t,e,n,r,i,o,s,a){if(!(e.type&3))return;let u=t.data,l=u[a+1],f=oV(l)?FC(u,e,n,i,pa(l),s):void 0;if(!Cf(f)){Cf(o)||rV(l)&&(o=FC(u,null,n,i,a,s));let p=my(Hi(),n);dF(r,s,p,i,o)}}function FC(t,e,n,r,i,o){let s=e===null,a;for(;i>0;){let u=t[i],l=Array.isArray(u),f=l?u[1]:u,p=f===null,g=n[i+1];g===Vn&&(g=p?vn:void 0);let y=p?Hd(g,r):f===r?g:void 0;if(l&&!Cf(y)&&(y=Hd(u,r)),Cf(y)&&(a=y,s))return a;let D=t[i+1];i=s?qo(D):pa(D)}if(e!==null){let u=o?e.residualClasses:e.residualStyles;u!=null&&(a=Hd(u,r))}return a}function Cf(t){return t!==void 0}function yV(t,e){return t==null||t===""||(typeof e=="string"?t=t+e:typeof t=="object"&&(t=zr(Mf(t)))),t}function vV(t,e){return(t.flags&(e?8:16))!==0}function F(t,e=""){let n=Te(),r=an(),i=t+Xt,o=r.firstCreatePass?Mv(r,i,1,e,null):r.data[i],s=_V(r,n,o,e,t);n[i]=s,Zd()&&Cv(r,n,s,o),ua(o,!1)}var _V=(t,e,n,r,i)=>(Xd(!0),H1(e[et],r));function EV(t,e,n,r=""){return $o(t,eu(),n)?e+Po(n)+r:Vn}function wV(t,e,n,r,i,o=""){let s=W0(),a=YD(t,s,n,i);return Sy(2),a?e+Po(n)+r+Po(i)+o:Vn}function Ue(t){return Pt("",t),Ue}function Pt(t,e,n){let r=Te(),i=EV(r,t,e,n);return i!==Vn&&fS(r,Hi(),i),Pt}function $f(t,e,n,r,i){let o=Te(),s=wV(o,t,e,n,r,i);return s!==Vn&&fS(o,Hi(),s),$f}function fS(t,e,n){let r=my(e,t);q1(t[et],r,n)}function Pe(t,e,n){xy(e)&&(e=e());let r=Te(),i=eu();if($o(r,i,e)){let o=an(),s=Jd();AD(s,r,t,e,r[et],n)}return Pe}function Oe(t,e){let n=xy(t);return n&&t.set(e),n}function xe(t,e){let n=Te(),r=an(),i=Ht();return dS(r,n,n[et],i,t,e),xe}function IV(t,e,n){let r=an();if(r.firstCreatePass){let i=_r(t);dv(n,r.data,r.blueprint,i,!0),dv(e,r.data,r.blueprint,i,!1)}}function dv(t,e,n,r,i){if(t=Nt(t),Array.isArray(t))for(let o=0;o<t.length;o++)dv(t[o],e,n,r,i);else{let o=an(),s=Te(),a=Ht(),u=Ro(t)?t:Nt(t.provide),l=fy(t),f=a.providerIndexes&1048575,p=a.directiveStart,g=a.providerIndexes>>20;if(Ro(t)||!t.multi){let y=new Uo(l,i,ne,null),D=Wy(u,e,i?f:f+g,p);D===-1?(Qy(pf(a,s),o,u),Gy(o,t,e.length),e.push(u),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(y),s.push(y)):(n[D]=y,s[D]=y)}else{let y=Wy(u,e,f+g,p),D=Wy(u,e,f,f+g),x=y>=0&&n[y],R=D>=0&&n[D];if(i&&!R||!i&&!x){Qy(pf(a,s),o,u);let O=CV(i?TV:bV,n.length,i,r,l,t);!i&&R&&(n[D].providerFactory=O),Gy(o,t,e.length,0),e.push(u),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(O),s.push(O)}else{let O=hS(n[i?D:y],l,!i&&r);Gy(o,t,y>-1?y:D,O)}!i&&r&&R&&n[D].componentProviders++}}}function Gy(t,e,n,r){let i=Ro(e),o=A0(e);if(i||o){let u=(o?Nt(e.useClass):e).prototype.ngOnDestroy;if(u){let l=t.destroyHooks||(t.destroyHooks=[]);if(!i&&e.multi){let f=l.indexOf(n);f===-1?l.push(n,[r,u]):l[f+1].push(r,u)}else l.push(n,u)}}}function hS(t,e,n){return n&&t.componentProviders++,t.multi.push(e)-1}function Wy(t,e,n,r){for(let i=n;i<r;i++)if(e[i]===t)return i;return-1}function bV(t,e,n,r,i){return fv(this.multi,[])}function TV(t,e,n,r,i){let o=this.multi,s;if(this.providerFactory){let a=this.providerFactory.componentProviders,u=gf(r,r[ue],this.providerFactory.index,i);s=u.slice(0,a),fv(o,s);for(let l=a;l<u.length;l++)s.push(u[l])}else s=[],fv(o,s);return s}function fv(t,e){for(let n=0;n<t.length;n++){let r=t[n];e.push(r())}return e}function CV(t,e,n,r,i,o){let s=new Uo(t,n,ne,null);return s.multi=[],s.index=e,s.componentProviders=0,hS(s,i,r&&!n),s}function Xr(t,e=[]){return n=>{n.providersResolver=(r,i)=>IV(r,i?i(t):t,e)}}function hu(t,e,n){let r=Dy()+t,i=Te();return i[r]===Vn?QD(i,r,n?e.call(n):e()):cL(i,r)}function DV(t,e){let n=t[e];return n===Vn?void 0:n}function SV(t,e,n,r,i,o,s){let a=e+n;return YD(t,a,i,o)?QD(t,a+2,s?r.call(s,i,o):r(i,o)):DV(t,a+2)}function Bv(t,e){let n=an(),r,i=t+Xt;n.firstCreatePass?(r=AV(e,n.pipeRegistry),n.data[i]=r,r.onDestroy&&(n.destroyHooks??=[]).push(i,r.onDestroy)):r=n.data[i];let o=r.factory||(r.factory=Fi(r.type,!0)),s,a=Jt(ne);try{let u=hf(!1),l=o();return hf(u),yy(n,Te(),i,l),l}finally{Jt(a)}}function AV(t,e){if(e)for(let n=e.length-1;n>=0;n--){let r=e[n];if(t===r.name)return r}}function $v(t,e,n,r){let i=t+Xt,o=Te(),s=x0(o,i);return RV(o,i)?SV(o,Dy(),e,s.transform,n,r,s):s.transform(n,r)}function RV(t,e){return t[ue].data[e].pure}var Df=class{ngModuleFactory;componentFactories;constructor(e,n){this.ngModuleFactory=e,this.componentFactories=n}},Hv=(()=>{class t{compileModuleSync(n){return new wf(n)}compileModuleAsync(n){return Promise.resolve(this.compileModuleSync(n))}compileModuleAndAllComponentsSync(n){let r=this.compileModuleSync(n),i=cy(n),o=gD(i.declarations).reduce((s,a)=>{let u=Ui(a);return u&&s.push(new ha(u)),s},[]);return new Df(r,o)}compileModuleAndAllComponentsAsync(n){return Promise.resolve(this.compileModuleAndAllComponentsSync(n))}clearCache(){}clearCacheFor(n){}getModuleId(n){}static \u0275fac=function(r){return new(r||t)};static \u0275prov=G({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var NV=(()=>{class t{zone=A(Re);changeDetectionScheduler=A(Gr);applicationRef=A(Zr);applicationErrorHandler=A(cn);_onMicrotaskEmptySubscription;initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{try{this.applicationRef.dirtyFlags|=1,this.applicationRef._tick()}catch(n){this.applicationErrorHandler(n)}})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static \u0275fac=function(r){return new(r||t)};static \u0275prov=G({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function pS({ngZoneFactory:t,ignoreChangesOutsideZone:e,scheduleInRootZone:n}){return t??=()=>new Re(X(j({},gS()),{scheduleInRootZone:n})),[{provide:Re,useFactory:t},{provide:ji,multi:!0,useFactory:()=>{let r=A(NV,{optional:!0});return()=>r.initialize()}},{provide:ji,multi:!0,useFactory:()=>{let r=A(MV);return()=>{r.initialize()}}},e===!0?{provide:ky,useValue:!0}:[],{provide:Oy,useValue:n??nS},{provide:cn,useFactory:()=>{let r=A(Re),i=A(Xe),o;return s=>{r.runOutsideAngular(()=>{i.destroyed&&!o?setTimeout(()=>{throw s}):(o??=i.get(Yn),o.handleError(s))})}}}]}function gS(t){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:t?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:t?.runCoalescing??!1}}var MV=(()=>{class t{subscription=new Je;initialized=!1;zone=A(Re);pendingTasks=A(Er);initialize(){if(this.initialized)return;this.initialized=!0;let n=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(n=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{Re.assertNotInAngularZone(),queueMicrotask(()=>{n!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(n),n=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{Re.assertInAngularZone(),n??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static \u0275fac=function(r){return new(r||t)};static \u0275prov=G({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var mS=(()=>{class t{applicationErrorHandler=A(cn);appRef=A(Zr);taskService=A(Er);ngZone=A(Re);zonelessEnabled=A(ef);tracing=A(Go,{optional:!0});disableScheduling=A(ky,{optional:!0})??!1;zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run;schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}];subscriptions=new Je;angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(If):null;scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(A(Oy,{optional:!0})??!1);cancelScheduledCallback=null;useMicrotaskScheduler=!1;runningTick=!1;pendingRenderTaskId=null;constructor(){this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof bf||!this.zoneIsDefined)}notify(n){if(!this.zonelessEnabled&&n===5)return;let r=!1;switch(n){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 6:{this.appRef.dirtyFlags|=2,r=!0;break}case 12:{this.appRef.dirtyFlags|=16,r=!0;break}case 13:{this.appRef.dirtyFlags|=2,r=!0;break}case 11:{r=!0;break}case 9:case 8:case 7:case 10:default:this.appRef.dirtyFlags|=8}if(this.appRef.tracingSnapshot=this.tracing?.snapshot(this.appRef.tracingSnapshot)??null,!this.shouldScheduleTick(r))return;let i=this.useMicrotaskScheduler?NC:rS;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>i(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>i(()=>this.tick()))}shouldScheduleTick(n){return!(this.disableScheduling&&!n||this.appRef.destroyed||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(If+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;if(this.appRef.dirtyFlags===0){this.cleanup();return}!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let n=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){this.taskService.remove(n),this.applicationErrorHandler(r)}finally{this.cleanup()}this.useMicrotaskScheduler=!0,NC(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(n)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let n=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(n)}}static \u0275fac=function(r){return new(r||t)};static \u0275prov=G({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function PV(){return typeof $localize<"u"&&$localize.locale||fu}var pu=new q("",{providedIn:"root",factory:()=>A(pu,{optional:!0,skipSelf:!0})||PV()});function Tt(t){return h0(t)}function ma(t,e){return ud(t,e?.equal)}var yS=class{[Ut];constructor(e){this[Ut]=e}destroy(){this[Ut].destroy()}};var wS=Symbol("InputSignalNode#UNSET"),QV=X(j({},ld),{transformFn:void 0,applyValueToInputSignal(t,e){Hs(t,e)}});function IS(t,e){let n=Object.create(QV);n.value=t,n.transformFn=e?.transform;function r(){if(Us(n),n.value===wS){let i=null;throw new B(-950,i)}return n.value}return r[Ut]=n,r}var qf=class{attributeName;constructor(e){this.attributeName=e}__NG_ELEMENT_ID__=()=>cu(this.attributeName);toString(){return`HostAttributeToken ${this.attributeName}`}},YV=new q("");YV.__NG_ELEMENT_ID__=t=>{let e=Ht();if(e===null)throw new B(204,!1);if(e.type&2)return e.value;if(t&8)return null;throw new B(204,!1)};function vS(t,e){return IS(t,e)}function JV(t){return IS(wS,t)}var bS=(vS.required=JV,vS);var qv=new q(""),ZV=new q("");function gu(t){return!t.moduleRef}function XV(t){let e=gu(t)?t.r3Injector:t.moduleRef.injector,n=e.get(Re);return n.run(()=>{gu(t)?t.r3Injector.resolveInjectorInitializers():t.moduleRef.resolveInjectorInitializers();let r=e.get(cn),i;if(n.runOutsideAngular(()=>{i=n.onError.subscribe({next:r})}),gu(t)){let o=()=>e.destroy(),s=t.platformInjector.get(qv);s.add(o),e.onDestroy(()=>{i.unsubscribe(),s.delete(o)})}else{let o=()=>t.moduleRef.destroy(),s=t.platformInjector.get(qv);s.add(o),t.moduleRef.onDestroy(()=>{ru(t.allPlatformModules,t.moduleRef),i.unsubscribe(),s.delete(o)})}return t2(r,n,()=>{let o=e.get(Er),s=o.add(),a=e.get(Uv);return a.runInitializers(),a.donePromise.then(()=>{let u=e.get(pu,fu);if(lS(u||fu),!e.get(ZV,!0))return gu(t)?e.get(Zr):(t.allPlatformModules.push(t.moduleRef),t.moduleRef);if(gu(t)){let f=e.get(Zr);return t.rootComponent!==void 0&&f.bootstrap(t.rootComponent),f}else return e2?.(t.moduleRef,t.allPlatformModules),t.moduleRef}).finally(()=>void o.remove(s))})})}var e2;function t2(t,e,n){try{let r=n();return Wi(r)?r.catch(i=>{throw e.runOutsideAngular(()=>t(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>t(r)),r}}var Hf=null;function n2(t=[],e){return Ae.create({name:e,providers:[{provide:qc,useValue:"platform"},{provide:qv,useValue:new Set([()=>Hf=null])},...t]})}function r2(t=[]){if(Hf)return Hf;let e=n2(t);return Hf=e,cS(),i2(e),e}function i2(t){let e=t.get(Rf,null);ve(t,()=>{e?.forEach(n=>n())})}function Qv(){return!1}var Ko=(()=>{class t{static __NG_ELEMENT_ID__=o2}return t})();function o2(t){return s2(Ht(),Te(),(t&16)===16)}function s2(t,e,n){if($i(t)&&!n){let r=Fn(t.index,e);return new zi(r,r)}else if(t.type&175){let r=e[kn];return new zi(r,e)}return null}var zv=class{constructor(){}supports(e){return Pv(e)}create(e){return new Gv(e)}},a2=(t,e)=>e,Gv=class{length=0;collection;_linkedRecords=null;_unlinkedRecords=null;_previousItHead=null;_itHead=null;_itTail=null;_additionsHead=null;_additionsTail=null;_movesHead=null;_movesTail=null;_removalsHead=null;_removalsTail=null;_identityChangesHead=null;_identityChangesTail=null;_trackByFn;constructor(e){this._trackByFn=e||a2}forEachItem(e){let n;for(n=this._itHead;n!==null;n=n._next)e(n)}forEachOperation(e){let n=this._itHead,r=this._removalsHead,i=0,o=null;for(;n||r;){let s=!r||n&&n.currentIndex<_S(r,i,o)?n:r,a=_S(s,i,o),u=s.currentIndex;if(s===r)i--,r=r._nextRemoved;else if(n=n._next,s.previousIndex==null)i++;else{o||(o=[]);let l=a-i,f=u-i;if(l!=f){for(let g=0;g<l;g++){let y=g<o.length?o[g]:o[g]=0,D=y+g;f<=D&&D<l&&(o[g]=y+1)}let p=s.previousIndex;o[p]=f-l}}a!==u&&e(s,a,u)}}forEachPreviousItem(e){let n;for(n=this._previousItHead;n!==null;n=n._nextPrevious)e(n)}forEachAddedItem(e){let n;for(n=this._additionsHead;n!==null;n=n._nextAdded)e(n)}forEachMovedItem(e){let n;for(n=this._movesHead;n!==null;n=n._nextMoved)e(n)}forEachRemovedItem(e){let n;for(n=this._removalsHead;n!==null;n=n._nextRemoved)e(n)}forEachIdentityChange(e){let n;for(n=this._identityChangesHead;n!==null;n=n._nextIdentityChange)e(n)}diff(e){if(e==null&&(e=[]),!Pv(e))throw new B(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let n=this._itHead,r=!1,i,o,s;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)o=e[a],s=this._trackByFn(a,o),n===null||!Object.is(n.trackById,s)?(n=this._mismatch(n,o,s,a),r=!0):(r&&(n=this._verifyReinsertion(n,o,s,a)),Object.is(n.item,o)||this._addIdentityChange(n,o)),n=n._next}else i=0,WD(e,a=>{s=this._trackByFn(i,a),n===null||!Object.is(n.trackById,s)?(n=this._mismatch(n,a,s,i),r=!0):(r&&(n=this._verifyReinsertion(n,a,s,i)),Object.is(n.item,a)||this._addIdentityChange(n,a)),n=n._next,i++}),this.length=i;return this._truncate(n),this.collection=e,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;e!==null;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;e!==null;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,n,r,i){let o;return e===null?o=this._itTail:(o=e._prev,this._remove(e)),e=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null),e!==null?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._reinsertAfter(e,o,i)):(e=this._linkedRecords===null?null:this._linkedRecords.get(r,i),e!==null?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._moveAfter(e,o,i)):e=this._addAfter(new Wv(n,r),o,i)),e}_verifyReinsertion(e,n,r,i){let o=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null);return o!==null?e=this._reinsertAfter(o,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;e!==null;){let n=e._next;this._addToRemovals(this._unlink(e)),e=n}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,n,r){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(e);let i=e._prevRemoved,o=e._nextRemoved;return i===null?this._removalsHead=o:i._nextRemoved=o,o===null?this._removalsTail=i:o._prevRemoved=i,this._insertAfter(e,n,r),this._addToMoves(e,r),e}_moveAfter(e,n,r){return this._unlink(e),this._insertAfter(e,n,r),this._addToMoves(e,r),e}_addAfter(e,n,r){return this._insertAfter(e,n,r),this._additionsTail===null?this._additionsTail=this._additionsHead=e:this._additionsTail=this._additionsTail._nextAdded=e,e}_insertAfter(e,n,r){let i=n===null?this._itHead:n._next;return e._next=i,e._prev=n,i===null?this._itTail=e:i._prev=e,n===null?this._itHead=e:n._next=e,this._linkedRecords===null&&(this._linkedRecords=new zf),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){this._linkedRecords!==null&&this._linkedRecords.remove(e);let n=e._prev,r=e._next;return n===null?this._itHead=r:n._next=r,r===null?this._itTail=n:r._prev=n,e}_addToMoves(e,n){return e.previousIndex===n||(this._movesTail===null?this._movesTail=this._movesHead=e:this._movesTail=this._movesTail._nextMoved=e),e}_addToRemovals(e){return this._unlinkedRecords===null&&(this._unlinkedRecords=new zf),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,n){return e.item=n,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=e:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=e,e}},Wv=class{item;trackById;currentIndex=null;previousIndex=null;_nextPrevious=null;_prev=null;_next=null;_prevDup=null;_nextDup=null;_prevRemoved=null;_nextRemoved=null;_nextAdded=null;_nextMoved=null;_nextIdentityChange=null;constructor(e,n){this.item=e,this.trackById=n}},Kv=class{_head=null;_tail=null;add(e){this._head===null?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,n){let r;for(r=this._head;r!==null;r=r._nextDup)if((n===null||n<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){let n=e._prevDup,r=e._nextDup;return n===null?this._head=r:n._nextDup=r,r===null?this._tail=n:r._prevDup=n,this._head===null}},zf=class{map=new Map;put(e){let n=e.trackById,r=this.map.get(n);r||(r=new Kv,this.map.set(n,r)),r.add(e)}get(e,n){let r=e,i=this.map.get(r);return i?i.get(e,n):null}remove(e){let n=e.trackById;return this.map.get(n).remove(e)&&this.map.delete(n),e}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function _S(t,e,n){let r=t.previousIndex;if(r===null)return r;let i=0;return n&&r<n.length&&(i=n[r]),r+e+i}function ES(){return new Yv([new zv])}var Yv=(()=>{class t{factories;static \u0275prov=G({token:t,providedIn:"root",factory:ES});constructor(n){this.factories=n}static create(n,r){if(r!=null){let i=r.factories.slice();n=n.concat(i)}return new t(n)}static extend(n){return{provide:t,useFactory:()=>{let r=A(t,{optional:!0,skipSelf:!0});return t.create(n,r||ES())}}}find(n){let r=this.factories.find(i=>i.supports(n));if(r!=null)return r;throw new B(901,!1)}}return t})();function TS(t){let{rootComponent:e,appProviders:n,platformProviders:r,platformRef:i}=t;Me(8);try{let o=i?.injector??r2(r),s=[pS({}),{provide:Gr,useExisting:mS},oC,...n||[]],a=new su({providers:s,parent:o,debugName:"",runEnvironmentInitializers:!1});return XV({r3Injector:a.injector,platformInjector:o,rootComponent:e})}catch(o){return Promise.reject(o)}finally{Me(9)}}function Qo(t){return typeof t=="boolean"?t:t!=null&&t!=="false"}var SS=null;function Un(){return SS}function Jv(t){SS??=t}var mu=class{},yu=(()=>{class t{historyGo(n){throw new Error("")}static \u0275fac=function(r){return new(r||t)};static \u0275prov=G({token:t,factory:()=>A(AS),providedIn:"platform"})}return t})();var AS=(()=>{class t extends yu{_location;_history;_doc=A(yt);constructor(){super(),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Un().getBaseHref(this._doc)}onPopState(n){let r=Un().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",n,!1),()=>r.removeEventListener("popstate",n)}onHashChange(n){let r=Un().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",n,!1),()=>r.removeEventListener("hashchange",n)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(n){this._location.pathname=n}pushState(n,r,i){this._history.pushState(n,r,i)}replaceState(n,r,i){this._history.replaceState(n,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(n=0){this._history.go(n)}getState(){return this._history.state}static \u0275fac=function(r){return new(r||t)};static \u0275prov=G({token:t,factory:()=>new t,providedIn:"platform"})}return t})();function Gf(t,e){return t?e?t.endsWith("/")?e.startsWith("/")?t+e.slice(1):t+e:e.startsWith("/")?t+e:`${t}/${e}`:t:e}function CS(t){let e=t.search(/#|\?|$/);return t[e-1]==="/"?t.slice(0,e-1)+t.slice(e):t}function or(t){return t&&t[0]!=="?"?`?${t}`:t}var Cr=(()=>{class t{historyGo(n){throw new Error("")}static \u0275fac=function(r){return new(r||t)};static \u0275prov=G({token:t,factory:()=>A(Zv),providedIn:"root"})}return t})(),Wf=new q(""),Zv=(()=>{class t extends Cr{_platformLocation;_baseHref;_removeListenerFns=[];constructor(n,r){super(),this._platformLocation=n,this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??A(yt).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(n){this._removeListenerFns.push(this._platformLocation.onPopState(n),this._platformLocation.onHashChange(n))}getBaseHref(){return this._baseHref}prepareExternalUrl(n){return Gf(this._baseHref,n)}path(n=!1){let r=this._platformLocation.pathname+or(this._platformLocation.search),i=this._platformLocation.hash;return i&&n?`${r}${i}`:r}pushState(n,r,i,o){let s=this.prepareExternalUrl(i+or(o));this._platformLocation.pushState(n,r,s)}replaceState(n,r,i,o){let s=this.prepareExternalUrl(i+or(o));this._platformLocation.replaceState(n,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(n=0){this._platformLocation.historyGo?.(n)}static \u0275fac=function(r){return new(r||t)(K(yu),K(Wf,8))};static \u0275prov=G({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),Yo=(()=>{class t{_subject=new at;_basePath;_locationStrategy;_urlChangeListeners=[];_urlChangeSubscription=null;constructor(n){this._locationStrategy=n;let r=this._locationStrategy.getBaseHref();this._basePath=l2(CS(DS(r))),this._locationStrategy.onPopState(i=>{this._subject.next({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(n=!1){return this.normalize(this._locationStrategy.path(n))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(n,r=""){return this.path()==this.normalize(n+or(r))}normalize(n){return t.stripTrailingSlash(u2(this._basePath,DS(n)))}prepareExternalUrl(n){return n&&n[0]!=="/"&&(n="/"+n),this._locationStrategy.prepareExternalUrl(n)}go(n,r="",i=null){this._locationStrategy.pushState(i,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+or(r)),i)}replaceState(n,r="",i=null){this._locationStrategy.replaceState(i,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+or(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(n=0){this._locationStrategy.historyGo?.(n)}onUrlChange(n){return this._urlChangeListeners.push(n),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(n);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(n="",r){this._urlChangeListeners.forEach(i=>i(n,r))}subscribe(n,r,i){return this._subject.subscribe({next:n,error:r??void 0,complete:i??void 0})}static normalizeQueryParams=or;static joinWithSlash=Gf;static stripTrailingSlash=CS;static \u0275fac=function(r){return new(r||t)(K(Cr))};static \u0275prov=G({token:t,factory:()=>c2(),providedIn:"root"})}return t})();function c2(){return new Yo(K(Cr))}function u2(t,e){if(!t||!e.startsWith(t))return e;let n=e.substring(t.length);return n===""||["/",";","?","#"].includes(n[0])?n:e}function DS(t){return t.replace(/\/index.html$/,"")}function l2(t){if(new RegExp("^(https?:)?//").test(t)){let[,n]=t.split(/\/\/[^\/]+/);return n}return t}var n_=(()=>{class t extends Cr{_platformLocation;_baseHref="";_removeListenerFns=[];constructor(n,r){super(),this._platformLocation=n,r!=null&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(n){this._removeListenerFns.push(this._platformLocation.onPopState(n),this._platformLocation.onHashChange(n))}getBaseHref(){return this._baseHref}path(n=!1){let r=this._platformLocation.hash??"#";return r.length>0?r.substring(1):r}prepareExternalUrl(n){let r=Gf(this._baseHref,n);return r.length>0?"#"+r:r}pushState(n,r,i,o){let s=this.prepareExternalUrl(i+or(o))||this._platformLocation.pathname;this._platformLocation.pushState(n,r,s)}replaceState(n,r,i,o){let s=this.prepareExternalUrl(i+or(o))||this._platformLocation.pathname;this._platformLocation.replaceState(n,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(n=0){this._platformLocation.historyGo?.(n)}static \u0275fac=function(r){return new(r||t)(K(yu),K(Wf,8))};static \u0275prov=G({token:t,factory:t.\u0275fac})}return t})();var qt=(function(t){return t[t.Format=0]="Format",t[t.Standalone=1]="Standalone",t})(qt||{}),Fe=(function(t){return t[t.Narrow=0]="Narrow",t[t.Abbreviated=1]="Abbreviated",t[t.Wide=2]="Wide",t[t.Short=3]="Short",t})(Fe||{}),un=(function(t){return t[t.Short=0]="Short",t[t.Medium=1]="Medium",t[t.Long=2]="Long",t[t.Full=3]="Full",t})(un||{}),ni={Decimal:0,Group:1,List:2,PercentSign:3,PlusSign:4,MinusSign:5,Exponential:6,SuperscriptingExponent:7,PerMille:8,Infinity:9,NaN:10,TimeSeparator:11,CurrencyDecimal:12,CurrencyGroup:13};function PS(t){return wn(t)[it.LocaleId]}function xS(t,e,n){let r=wn(t),i=[r[it.DayPeriodsFormat],r[it.DayPeriodsStandalone]],o=Bn(i,e);return Bn(o,n)}function kS(t,e,n){let r=wn(t),i=[r[it.DaysFormat],r[it.DaysStandalone]],o=Bn(i,e);return Bn(o,n)}function OS(t,e,n){let r=wn(t),i=[r[it.MonthsFormat],r[it.MonthsStandalone]],o=Bn(i,e);return Bn(o,n)}function FS(t,e){let r=wn(t)[it.Eras];return Bn(r,e)}function vu(t,e){let n=wn(t);return Bn(n[it.DateFormat],e)}function _u(t,e){let n=wn(t);return Bn(n[it.TimeFormat],e)}function Eu(t,e){let r=wn(t)[it.DateTimeFormat];return Bn(r,e)}function wu(t,e){let n=wn(t),r=n[it.NumberSymbols][e];if(typeof r>"u"){if(e===ni.CurrencyDecimal)return n[it.NumberSymbols][ni.Decimal];if(e===ni.CurrencyGroup)return n[it.NumberSymbols][ni.Group]}return r}function LS(t){if(!t[it.ExtraData])throw new B(2303,!1)}function VS(t){let e=wn(t);return LS(e),(e[it.ExtraData][2]||[]).map(r=>typeof r=="string"?Xv(r):[Xv(r[0]),Xv(r[1])])}function jS(t,e,n){let r=wn(t);LS(r);let i=[r[it.ExtraData][0],r[it.ExtraData][1]],o=Bn(i,e)||[];return Bn(o,n)||[]}function Bn(t,e){for(let n=e;n>-1;n--)if(typeof t[n]<"u")return t[n];throw new B(2304,!1)}function Xv(t){let[e,n]=t.split(":");return{hours:+e,minutes:+n}}var d2=/^(\d{4,})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,Kf={},f2=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;function US(t,e,n,r){let i=w2(t);e=ti(n,e)||e;let s=[],a;for(;e;)if(a=f2.exec(e),a){s=s.concat(a.slice(1));let f=s.pop();if(!f)break;e=f}else{s.push(e);break}let u=i.getTimezoneOffset();r&&(u=$S(r,u),i=E2(i,r));let l="";return s.forEach(f=>{let p=v2(f);l+=p?p(i,n,u):f==="''"?"'":f.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),l}function Xf(t,e,n){let r=new Date(0);return r.setFullYear(t,e,n),r.setHours(0,0,0),r}function ti(t,e){let n=PS(t);if(Kf[n]??={},Kf[n][e])return Kf[n][e];let r="";switch(e){case"shortDate":r=vu(t,un.Short);break;case"mediumDate":r=vu(t,un.Medium);break;case"longDate":r=vu(t,un.Long);break;case"fullDate":r=vu(t,un.Full);break;case"shortTime":r=_u(t,un.Short);break;case"mediumTime":r=_u(t,un.Medium);break;case"longTime":r=_u(t,un.Long);break;case"fullTime":r=_u(t,un.Full);break;case"short":let i=ti(t,"shortTime"),o=ti(t,"shortDate");r=Qf(Eu(t,un.Short),[i,o]);break;case"medium":let s=ti(t,"mediumTime"),a=ti(t,"mediumDate");r=Qf(Eu(t,un.Medium),[s,a]);break;case"long":let u=ti(t,"longTime"),l=ti(t,"longDate");r=Qf(Eu(t,un.Long),[u,l]);break;case"full":let f=ti(t,"fullTime"),p=ti(t,"fullDate");r=Qf(Eu(t,un.Full),[f,p]);break}return r&&(Kf[n][e]=r),r}function Qf(t,e){return e&&(t=t.replace(/\{([^}]+)}/g,function(n,r){return e!=null&&r in e?e[r]:n})),t}function sr(t,e,n="-",r,i){let o="";(t<0||i&&t<=0)&&(i?t=-t+1:(t=-t,o=n));let s=String(t);for(;s.length<e;)s="0"+s;return r&&(s=s.slice(s.length-e)),o+s}function h2(t,e){return sr(t,3).substring(0,e)}function lt(t,e,n=0,r=!1,i=!1){return function(o,s){let a=p2(t,o);if((n>0||a>-n)&&(a+=n),t===3)a===0&&n===-12&&(a=12);else if(t===6)return h2(a,e);let u=wu(s,ni.MinusSign);return sr(a,e,u,r,i)}}function p2(t,e){switch(t){case 0:return e.getFullYear();case 1:return e.getMonth();case 2:return e.getDate();case 3:return e.getHours();case 4:return e.getMinutes();case 5:return e.getSeconds();case 6:return e.getMilliseconds();case 7:return e.getDay();default:throw new B(2301,!1)}}function Be(t,e,n=qt.Format,r=!1){return function(i,o){return g2(i,o,t,e,n,r)}}function g2(t,e,n,r,i,o){switch(n){case 2:return OS(e,i,r)[t.getMonth()];case 1:return kS(e,i,r)[t.getDay()];case 0:let s=t.getHours(),a=t.getMinutes();if(o){let l=VS(e),f=jS(e,i,r),p=l.findIndex(g=>{if(Array.isArray(g)){let[y,D]=g,x=s>=y.hours&&a>=y.minutes,R=s<D.hours||s===D.hours&&a<D.minutes;if(y.hours<D.hours){if(x&&R)return!0}else if(x||R)return!0}else if(g.hours===s&&g.minutes===a)return!0;return!1});if(p!==-1)return f[p]}return xS(e,i,r)[s<12?0:1];case 3:return FS(e,r)[t.getFullYear()<=0?0:1];default:let u=n;throw new B(2302,!1)}}function Yf(t){return function(e,n,r){let i=-1*r,o=wu(n,ni.MinusSign),s=i>0?Math.floor(i/60):Math.ceil(i/60);switch(t){case 0:return(i>=0?"+":"")+sr(s,2,o)+sr(Math.abs(i%60),2,o);case 1:return"GMT"+(i>=0?"+":"")+sr(s,1,o);case 2:return"GMT"+(i>=0?"+":"")+sr(s,2,o)+":"+sr(Math.abs(i%60),2,o);case 3:return r===0?"Z":(i>=0?"+":"")+sr(s,2,o)+":"+sr(Math.abs(i%60),2,o);default:throw new B(2310,!1)}}}var m2=0,Zf=4;function y2(t){let e=Xf(t,m2,1).getDay();return Xf(t,0,1+(e<=Zf?Zf:Zf+7)-e)}function BS(t){let e=t.getDay(),n=e===0?-3:Zf-e;return Xf(t.getFullYear(),t.getMonth(),t.getDate()+n)}function e_(t,e=!1){return function(n,r){let i;if(e){let o=new Date(n.getFullYear(),n.getMonth(),1).getDay()-1,s=n.getDate();i=1+Math.floor((s+o)/7)}else{let o=BS(n),s=y2(o.getFullYear()),a=o.getTime()-s.getTime();i=1+Math.round(a/6048e5)}return sr(i,t,wu(r,ni.MinusSign))}}function Jf(t,e=!1){return function(n,r){let o=BS(n).getFullYear();return sr(o,t,wu(r,ni.MinusSign),e)}}var t_={};function v2(t){if(t_[t])return t_[t];let e;switch(t){case"G":case"GG":case"GGG":e=Be(3,Fe.Abbreviated);break;case"GGGG":e=Be(3,Fe.Wide);break;case"GGGGG":e=Be(3,Fe.Narrow);break;case"y":e=lt(0,1,0,!1,!0);break;case"yy":e=lt(0,2,0,!0,!0);break;case"yyy":e=lt(0,3,0,!1,!0);break;case"yyyy":e=lt(0,4,0,!1,!0);break;case"Y":e=Jf(1);break;case"YY":e=Jf(2,!0);break;case"YYY":e=Jf(3);break;case"YYYY":e=Jf(4);break;case"M":case"L":e=lt(1,1,1);break;case"MM":case"LL":e=lt(1,2,1);break;case"MMM":e=Be(2,Fe.Abbreviated);break;case"MMMM":e=Be(2,Fe.Wide);break;case"MMMMM":e=Be(2,Fe.Narrow);break;case"LLL":e=Be(2,Fe.Abbreviated,qt.Standalone);break;case"LLLL":e=Be(2,Fe.Wide,qt.Standalone);break;case"LLLLL":e=Be(2,Fe.Narrow,qt.Standalone);break;case"w":e=e_(1);break;case"ww":e=e_(2);break;case"W":e=e_(1,!0);break;case"d":e=lt(2,1);break;case"dd":e=lt(2,2);break;case"c":case"cc":e=lt(7,1);break;case"ccc":e=Be(1,Fe.Abbreviated,qt.Standalone);break;case"cccc":e=Be(1,Fe.Wide,qt.Standalone);break;case"ccccc":e=Be(1,Fe.Narrow,qt.Standalone);break;case"cccccc":e=Be(1,Fe.Short,qt.Standalone);break;case"E":case"EE":case"EEE":e=Be(1,Fe.Abbreviated);break;case"EEEE":e=Be(1,Fe.Wide);break;case"EEEEE":e=Be(1,Fe.Narrow);break;case"EEEEEE":e=Be(1,Fe.Short);break;case"a":case"aa":case"aaa":e=Be(0,Fe.Abbreviated);break;case"aaaa":e=Be(0,Fe.Wide);break;case"aaaaa":e=Be(0,Fe.Narrow);break;case"b":case"bb":case"bbb":e=Be(0,Fe.Abbreviated,qt.Standalone,!0);break;case"bbbb":e=Be(0,Fe.Wide,qt.Standalone,!0);break;case"bbbbb":e=Be(0,Fe.Narrow,qt.Standalone,!0);break;case"B":case"BB":case"BBB":e=Be(0,Fe.Abbreviated,qt.Format,!0);break;case"BBBB":e=Be(0,Fe.Wide,qt.Format,!0);break;case"BBBBB":e=Be(0,Fe.Narrow,qt.Format,!0);break;case"h":e=lt(3,1,-12);break;case"hh":e=lt(3,2,-12);break;case"H":e=lt(3,1);break;case"HH":e=lt(3,2);break;case"m":e=lt(4,1);break;case"mm":e=lt(4,2);break;case"s":e=lt(5,1);break;case"ss":e=lt(5,2);break;case"S":e=lt(6,1);break;case"SS":e=lt(6,2);break;case"SSS":e=lt(6,3);break;case"Z":case"ZZ":case"ZZZ":e=Yf(0);break;case"ZZZZZ":e=Yf(3);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":e=Yf(1);break;case"OOOO":case"ZZZZ":case"zzzz":e=Yf(2);break;default:return null}return t_[t]=e,e}function $S(t,e){t=t.replace(/:/g,"");let n=Date.parse("Jan 01, 1970 00:00:00 "+t)/6e4;return isNaN(n)?e:n}function _2(t,e){return t=new Date(t.getTime()),t.setMinutes(t.getMinutes()+e),t}function E2(t,e,n){let i=t.getTimezoneOffset(),o=$S(e,i);return _2(t,-1*(o-i))}function w2(t){if(RS(t))return t;if(typeof t=="number"&&!isNaN(t))return new Date(t);if(typeof t=="string"){if(t=t.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(t)){let[i,o=1,s=1]=t.split("-").map(a=>+a);return Xf(i,o-1,s)}let n=parseFloat(t);if(!isNaN(t-n))return new Date(n);let r;if(r=t.match(d2))return I2(r)}let e=new Date(t);if(!RS(e))throw new B(2311,!1);return e}function I2(t){let e=new Date(0),n=0,r=0,i=t[8]?e.setUTCFullYear:e.setFullYear,o=t[8]?e.setUTCHours:e.setHours;t[9]&&(n=Number(t[9]+t[10]),r=Number(t[9]+t[11])),i.call(e,Number(t[1]),Number(t[2])-1,Number(t[3]));let s=Number(t[4]||0)-n,a=Number(t[5]||0)-r,u=Number(t[6]||0),l=Math.floor(parseFloat("0."+(t[7]||0))*1e3);return o.call(e,s,a,u,l),e}function RS(t){return t instanceof Date&&!isNaN(t.valueOf())}var eh=class{$implicit;ngForOf;index;count;constructor(e,n,r,i){this.$implicit=e,this.ngForOf=n,this.index=r,this.count=i}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},ln=(()=>{class t{_viewContainer;_template;_differs;set ngForOf(n){this._ngForOf=n,this._ngForOfDirty=!0}set ngForTrackBy(n){this._trackByFn=n}get ngForTrackBy(){return this._trackByFn}_ngForOf=null;_ngForOfDirty=!0;_differ=null;_trackByFn;constructor(n,r,i){this._viewContainer=n,this._template=r,this._differs=i}set ngForTemplate(n){n&&(this._template=n)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let n=this._ngForOf;!this._differ&&n&&(this._differ=this._differs.find(n).create(this.ngForTrackBy))}if(this._differ){let n=this._differ.diff(this._ngForOf);n&&this._applyChanges(n)}}_applyChanges(n){let r=this._viewContainer;n.forEachOperation((i,o,s)=>{if(i.previousIndex==null)r.createEmbeddedView(this._template,new eh(i.item,this._ngForOf,-1,-1),s===null?void 0:s);else if(s==null)r.remove(o===null?void 0:o);else if(o!==null){let a=r.get(o);r.move(a,s),NS(a,i)}});for(let i=0,o=r.length;i<o;i++){let a=r.get(i).context;a.index=i,a.count=o,a.ngForOf=this._ngForOf}n.forEachIdentityChange(i=>{let o=r.get(i.currentIndex);NS(o,i)})}static ngTemplateContextGuard(n,r){return!0}static \u0275fac=function(r){return new(r||t)(ne(zo),ne(uu),ne(Yv))};static \u0275dir=ze({type:t,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}})}return t})();function NS(t,e){t.context.$implicit=e.item}var ar=(()=>{class t{_viewContainer;_context=new th;_thenTemplateRef=null;_elseTemplateRef=null;_thenViewRef=null;_elseViewRef=null;constructor(n,r){this._viewContainer=n,this._thenTemplateRef=r}set ngIf(n){this._context.$implicit=this._context.ngIf=n,this._updateView()}set ngIfThen(n){MS(n,!1),this._thenTemplateRef=n,this._thenViewRef=null,this._updateView()}set ngIfElse(n){MS(n,!1),this._elseTemplateRef=n,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngIfUseIfTypeGuard;static ngTemplateGuard_ngIf;static ngTemplateContextGuard(n,r){return!0}static \u0275fac=function(r){return new(r||t)(ne(zo),ne(uu))};static \u0275dir=ze({type:t,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}})}return t})(),th=class{$implicit=null;ngIf=null};function MS(t,e){if(t&&!t.createEmbeddedView)throw new B(2020,!1)}function b2(t,e){return new B(2100,!1)}var T2="mediumDate",HS=new q(""),qS=new q(""),r_=(()=>{class t{locale;defaultTimezone;defaultOptions;constructor(n,r,i){this.locale=n,this.defaultTimezone=r,this.defaultOptions=i}transform(n,r,i,o){if(n==null||n===""||n!==n)return null;try{let s=r??this.defaultOptions?.dateFormat??T2,a=i??this.defaultOptions?.timezone??this.defaultTimezone??void 0;return US(n,s,o||this.locale,a)}catch(s){throw b2(t,s.message)}}static \u0275fac=function(r){return new(r||t)(ne(pu,16),ne(HS,24),ne(qS,24))};static \u0275pipe=xv({name:"date",type:t,pure:!0})}return t})();var dn=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275mod=rr({type:t});static \u0275inj=Nn({})}return t})();function Iu(t,e){e=encodeURIComponent(e);for(let n of t.split(";")){let r=n.indexOf("="),[i,o]=r==-1?[n,""]:[n.slice(0,r),n.slice(r+1)];if(i.trim()===e)return decodeURIComponent(o)}return null}var Jo=class{};var zS="browser",D2="server";function i_(t){return t===D2}var rh=new q(""),u_=(()=>{class t{_zone;_plugins;_eventNameToPlugin=new Map;constructor(n,r){this._zone=r,n.forEach(i=>{i.manager=this}),this._plugins=n.slice().reverse()}addEventListener(n,r,i,o){return this._findPluginFor(r).addEventListener(n,r,i,o)}getZone(){return this._zone}_findPluginFor(n){let r=this._eventNameToPlugin.get(n);if(r)return r;if(r=this._plugins.find(o=>o.supports(n)),!r)throw new B(5101,!1);return this._eventNameToPlugin.set(n,r),r}static \u0275fac=function(r){return new(r||t)(K(rh),K(Re))};static \u0275prov=G({token:t,factory:t.\u0275fac})}return t})(),bu=class{_doc;constructor(e){this._doc=e}manager},o_="ng-app-id";function GS(t){for(let e of t)e.remove()}function WS(t,e){let n=e.createElement("style");return n.textContent=t,n}function S2(t,e,n,r){let i=t.head?.querySelectorAll(`style[${o_}="${e}"],link[${o_}="${e}"]`);if(i)for(let o of i)o.removeAttribute(o_),o instanceof HTMLLinkElement?r.set(o.href.slice(o.href.lastIndexOf("/")+1),{usage:0,elements:[o]}):o.textContent&&n.set(o.textContent,{usage:0,elements:[o]})}function a_(t,e){let n=e.createElement("link");return n.setAttribute("rel","stylesheet"),n.setAttribute("href",t),n}var l_=(()=>{class t{doc;appId;nonce;inline=new Map;external=new Map;hosts=new Set;constructor(n,r,i,o={}){this.doc=n,this.appId=r,this.nonce=i,S2(n,r,this.inline,this.external),this.hosts.add(n.head)}addStyles(n,r){for(let i of n)this.addUsage(i,this.inline,WS);r?.forEach(i=>this.addUsage(i,this.external,a_))}removeStyles(n,r){for(let i of n)this.removeUsage(i,this.inline);r?.forEach(i=>this.removeUsage(i,this.external))}addUsage(n,r,i){let o=r.get(n);o?o.usage++:r.set(n,{usage:1,elements:[...this.hosts].map(s=>this.addElement(s,i(n,this.doc)))})}removeUsage(n,r){let i=r.get(n);i&&(i.usage--,i.usage<=0&&(GS(i.elements),r.delete(n)))}ngOnDestroy(){for(let[,{elements:n}]of[...this.inline,...this.external])GS(n);this.hosts.clear()}addHost(n){this.hosts.add(n);for(let[r,{elements:i}]of this.inline)i.push(this.addElement(n,WS(r,this.doc)));for(let[r,{elements:i}]of this.external)i.push(this.addElement(n,a_(r,this.doc)))}removeHost(n){this.hosts.delete(n)}addElement(n,r){return this.nonce&&r.setAttribute("nonce",this.nonce),n.appendChild(r)}static \u0275fac=function(r){return new(r||t)(K(yt),K(Af),K(Nf,8),K(nr))};static \u0275prov=G({token:t,factory:t.\u0275fac})}return t})(),s_={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},d_=/%COMP%/g;var QS="%COMP%",A2=`_nghost-${QS}`,R2=`_ngcontent-${QS}`,N2=!0,M2=new q("",{providedIn:"root",factory:()=>N2});function P2(t){return R2.replace(d_,t)}function x2(t){return A2.replace(d_,t)}function YS(t,e){return e.map(n=>n.replace(d_,t))}var f_=(()=>{class t{eventManager;sharedStylesHost;appId;removeStylesOnCompDestroy;doc;platformId;ngZone;nonce;tracingService;rendererByCompId=new Map;defaultRenderer;platformIsServer;constructor(n,r,i,o,s,a,u,l=null,f=null){this.eventManager=n,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=o,this.doc=s,this.platformId=a,this.ngZone=u,this.nonce=l,this.tracingService=f,this.platformIsServer=!1,this.defaultRenderer=new Tu(n,s,u,this.platformIsServer,this.tracingService)}createRenderer(n,r){if(!n||!r)return this.defaultRenderer;let i=this.getOrCreateRenderer(n,r);return i instanceof nh?i.applyToHost(n):i instanceof Cu&&i.applyStyles(),i}getOrCreateRenderer(n,r){let i=this.rendererByCompId,o=i.get(r.id);if(!o){let s=this.doc,a=this.ngZone,u=this.eventManager,l=this.sharedStylesHost,f=this.removeStylesOnCompDestroy,p=this.platformIsServer,g=this.tracingService;switch(r.encapsulation){case Qr.Emulated:o=new nh(u,l,r,this.appId,f,s,a,p,g);break;case Qr.ShadowDom:return new c_(u,l,n,r,s,a,this.nonce,p,g);default:o=new Cu(u,l,r,f,s,a,p,g);break}i.set(r.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}componentReplaced(n){this.rendererByCompId.delete(n)}static \u0275fac=function(r){return new(r||t)(K(u_),K(l_),K(Af),K(M2),K(yt),K(nr),K(Re),K(Nf),K(Go,8))};static \u0275prov=G({token:t,factory:t.\u0275fac})}return t})(),Tu=class{eventManager;doc;ngZone;platformIsServer;tracingService;data=Object.create(null);throwOnSyntheticProps=!0;constructor(e,n,r,i,o){this.eventManager=e,this.doc=n,this.ngZone=r,this.platformIsServer=i,this.tracingService=o}destroy(){}destroyNode=null;createElement(e,n){return n?this.doc.createElementNS(s_[n]||n,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,n){(KS(e)?e.content:e).appendChild(n)}insertBefore(e,n,r){e&&(KS(e)?e.content:e).insertBefore(n,r)}removeChild(e,n){n.remove()}selectRootElement(e,n){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new B(-5104,!1);return n||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,n,r,i){if(i){n=i+":"+n;let o=s_[i];o?e.setAttributeNS(o,n,r):e.setAttribute(n,r)}else e.setAttribute(n,r)}removeAttribute(e,n,r){if(r){let i=s_[r];i?e.removeAttributeNS(i,n):e.removeAttribute(`${r}:${n}`)}else e.removeAttribute(n)}addClass(e,n){e.classList.add(n)}removeClass(e,n){e.classList.remove(n)}setStyle(e,n,r,i){i&(Ir.DashCase|Ir.Important)?e.style.setProperty(n,r,i&Ir.Important?"important":""):e.style[n]=r}removeStyle(e,n,r){r&Ir.DashCase?e.style.removeProperty(n):e.style[n]=""}setProperty(e,n,r){e!=null&&(e[n]=r)}setValue(e,n){e.nodeValue=n}listen(e,n,r,i){if(typeof e=="string"&&(e=Un().getGlobalEventTarget(this.doc,e),!e))throw new B(5102,!1);let o=this.decoratePreventDefault(r);return this.tracingService?.wrapEventListener&&(o=this.tracingService.wrapEventListener(e,n,o)),this.eventManager.addEventListener(e,n,o,i)}decoratePreventDefault(e){return n=>{if(n==="__ngUnwrap__")return e;e(n)===!1&&n.preventDefault()}}};function KS(t){return t.tagName==="TEMPLATE"&&t.content!==void 0}var c_=class extends Tu{sharedStylesHost;hostEl;shadowRoot;constructor(e,n,r,i,o,s,a,u,l){super(e,o,s,u,l),this.sharedStylesHost=n,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let f=i.styles;f=YS(i.id,f);for(let g of f){let y=document.createElement("style");a&&y.setAttribute("nonce",a),y.textContent=g,this.shadowRoot.appendChild(y)}let p=i.getExternalStyles?.();if(p)for(let g of p){let y=a_(g,o);a&&y.setAttribute("nonce",a),this.shadowRoot.appendChild(y)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,n){return super.appendChild(this.nodeOrShadowRoot(e),n)}insertBefore(e,n,r){return super.insertBefore(this.nodeOrShadowRoot(e),n,r)}removeChild(e,n){return super.removeChild(null,n)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},Cu=class extends Tu{sharedStylesHost;removeStylesOnCompDestroy;styles;styleUrls;constructor(e,n,r,i,o,s,a,u,l){super(e,o,s,a,u),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=i;let f=r.styles;this.styles=l?YS(l,f):f,this.styleUrls=r.getExternalStyles?.(l)}applyStyles(){this.sharedStylesHost.addStyles(this.styles,this.styleUrls)}destroy(){this.removeStylesOnCompDestroy&&kf.size===0&&this.sharedStylesHost.removeStyles(this.styles,this.styleUrls)}},nh=class extends Cu{contentAttr;hostAttr;constructor(e,n,r,i,o,s,a,u,l){let f=i+"-"+r.id;super(e,n,r,o,s,a,u,l,f),this.contentAttr=P2(f),this.hostAttr=x2(f)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,n){let r=super.createElement(e,n);return super.setAttribute(r,this.contentAttr,""),r}};var ih=class t extends mu{supportsDOMEvents=!0;static makeCurrent(){Jv(new t)}onAndCancel(e,n,r,i){return e.addEventListener(n,r,i),()=>{e.removeEventListener(n,r,i)}}dispatchEvent(e,n){e.dispatchEvent(n)}remove(e){e.remove()}createElement(e,n){return n=n||this.getDefaultDocument(),n.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,n){return n==="window"?window:n==="document"?e:n==="body"?e.body:null}getBaseHref(e){let n=k2();return n==null?null:O2(n)}resetBaseElement(){Du=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return Iu(document.cookie,e)}},Du=null;function k2(){return Du=Du||document.head.querySelector("base"),Du?Du.getAttribute("href"):null}function O2(t){return new URL(t,document.baseURI).pathname}var F2=(()=>{class t{build(){return new XMLHttpRequest}static \u0275fac=function(r){return new(r||t)};static \u0275prov=G({token:t,factory:t.\u0275fac})}return t})(),ZS=(()=>{class t extends bu{constructor(n){super(n)}supports(n){return!0}addEventListener(n,r,i,o){return n.addEventListener(r,i,o),()=>this.removeEventListener(n,r,i,o)}removeEventListener(n,r,i,o){return n.removeEventListener(r,i,o)}static \u0275fac=function(r){return new(r||t)(K(yt))};static \u0275prov=G({token:t,factory:t.\u0275fac})}return t})(),JS=["alt","control","meta","shift"],L2={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},V2={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey},XS=(()=>{class t extends bu{constructor(n){super(n)}supports(n){return t.parseEventName(n)!=null}addEventListener(n,r,i,o){let s=t.parseEventName(r),a=t.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Un().onAndCancel(n,s.domEventName,a,o))}static parseEventName(n){let r=n.toLowerCase().split("."),i=r.shift();if(r.length===0||!(i==="keydown"||i==="keyup"))return null;let o=t._normalizeKey(r.pop()),s="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),s="code."),JS.forEach(l=>{let f=r.indexOf(l);f>-1&&(r.splice(f,1),s+=l+".")}),s+=o,r.length!=0||o.length===0)return null;let u={};return u.domEventName=i,u.fullKey=s,u}static matchEventFullKeyCode(n,r){let i=L2[n.key]||n.key,o="";return r.indexOf("code.")>-1&&(i=n.code,o="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),JS.forEach(s=>{if(s!==i){let a=V2[s];a(n)&&(o+=s+".")}}),o+=i,o===r)}static eventCallback(n,r,i){return o=>{t.matchEventFullKeyCode(o,n)&&i.runGuarded(()=>r(o))}}static _normalizeKey(n){return n==="esc"?"escape":n}static \u0275fac=function(r){return new(r||t)(K(yt))};static \u0275prov=G({token:t,factory:t.\u0275fac})}return t})();function h_(t,e,n){let r=j({rootComponent:t,platformRef:n?.platformRef},j2(e));return TS(r)}function j2(t){return{appProviders:[...q2,...t?.providers??[]],platformProviders:H2}}function U2(){ih.makeCurrent()}function B2(){return new Yn}function $2(){return gv(document),document}var H2=[{provide:nr,useValue:zS},{provide:Rf,useValue:U2,multi:!0},{provide:yt,useFactory:$2}];var q2=[{provide:qc,useValue:"root"},{provide:Yn,useFactory:B2},{provide:rh,useClass:ZS,multi:!0,deps:[yt]},{provide:rh,useClass:XS,multi:!0,deps:[yt]},f_,l_,u_,{provide:Bo,useExisting:f_},{provide:Jo,useClass:F2},[]];var _a=class{},Su=class{},Dr=class t{headers;normalizedNames=new Map;lazyInit;lazyUpdate=null;constructor(e){e?typeof e=="string"?this.lazyInit=()=>{this.headers=new Map,e.split(`
`).forEach(n=>{let r=n.indexOf(":");if(r>0){let i=n.slice(0,r),o=n.slice(r+1).trim();this.addHeaderEntry(i,o)}})}:typeof Headers<"u"&&e instanceof Headers?(this.headers=new Map,e.forEach((n,r)=>{this.addHeaderEntry(r,n)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(e).forEach(([n,r])=>{this.setHeaderEntries(n,r)})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();let n=this.headers.get(e.toLowerCase());return n&&n.length>0?n[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,n){return this.clone({name:e,value:n,op:"a"})}set(e,n){return this.clone({name:e,value:n,op:"s"})}delete(e,n){return this.clone({name:e,value:n,op:"d"})}maybeSetNormalizedName(e,n){this.normalizedNames.has(n)||this.normalizedNames.set(n,e)}init(){this.lazyInit&&(this.lazyInit instanceof t?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(n=>{this.headers.set(n,e.headers.get(n)),this.normalizedNames.set(n,e.normalizedNames.get(n))})}clone(e){let n=new t;return n.lazyInit=this.lazyInit&&this.lazyInit instanceof t?this.lazyInit:this,n.lazyUpdate=(this.lazyUpdate||[]).concat([e]),n}applyUpdate(e){let n=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if(typeof r=="string"&&(r=[r]),r.length===0)return;this.maybeSetNormalizedName(e.name,n);let i=(e.op==="a"?this.headers.get(n):void 0)||[];i.push(...r),this.headers.set(n,i);break;case"d":let o=e.value;if(!o)this.headers.delete(n),this.normalizedNames.delete(n);else{let s=this.headers.get(n);if(!s)return;s=s.filter(a=>o.indexOf(a)===-1),s.length===0?(this.headers.delete(n),this.normalizedNames.delete(n)):this.headers.set(n,s)}break}}addHeaderEntry(e,n){let r=e.toLowerCase();this.maybeSetNormalizedName(e,r),this.headers.has(r)?this.headers.get(r).push(n):this.headers.set(r,[n])}setHeaderEntries(e,n){let r=(Array.isArray(n)?n:[n]).map(o=>o.toString()),i=e.toLowerCase();this.headers.set(i,r),this.maybeSetNormalizedName(e,i)}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(n=>e(this.normalizedNames.get(n),this.headers.get(n)))}};var sh=class{encodeKey(e){return eA(e)}encodeValue(e){return eA(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}};function z2(t,e){let n=new Map;return t.length>0&&t.replace(/^\?/,"").split("&").forEach(i=>{let o=i.indexOf("="),[s,a]=o==-1?[e.decodeKey(i),""]:[e.decodeKey(i.slice(0,o)),e.decodeValue(i.slice(o+1))],u=n.get(s)||[];u.push(a),n.set(s,u)}),n}var G2=/%(\d[a-f0-9])/gi,W2={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function eA(t){return encodeURIComponent(t).replace(G2,(e,n)=>W2[n]??e)}function oh(t){return`${t}`}var ri=class t{map;encoder;updates=null;cloneFrom=null;constructor(e={}){if(this.encoder=e.encoder||new sh,e.fromString){if(e.fromObject)throw new B(2805,!1);this.map=z2(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(n=>{let r=e.fromObject[n],i=Array.isArray(r)?r.map(oh):[oh(r)];this.map.set(n,i)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();let n=this.map.get(e);return n?n[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,n){return this.clone({param:e,value:n,op:"a"})}appendAll(e){let n=[];return Object.keys(e).forEach(r=>{let i=e[r];Array.isArray(i)?i.forEach(o=>{n.push({param:r,value:o,op:"a"})}):n.push({param:r,value:i,op:"a"})}),this.clone(n)}set(e,n){return this.clone({param:e,value:n,op:"s"})}delete(e,n){return this.clone({param:e,value:n,op:"d"})}toString(){return this.init(),this.keys().map(e=>{let n=this.encoder.encodeKey(e);return this.map.get(e).map(r=>n+"="+this.encoder.encodeValue(r)).join("&")}).filter(e=>e!=="").join("&")}clone(e){let n=new t({encoder:this.encoder});return n.cloneFrom=this.cloneFrom||this,n.updates=(this.updates||[]).concat(e),n}init(){this.map===null&&(this.map=new Map),this.cloneFrom!==null&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":let n=(e.op==="a"?this.map.get(e.param):void 0)||[];n.push(oh(e.value)),this.map.set(e.param,n);break;case"d":if(e.value!==void 0){let r=this.map.get(e.param)||[],i=r.indexOf(oh(e.value));i!==-1&&r.splice(i,1),r.length>0?this.map.set(e.param,r):this.map.delete(e.param)}else{this.map.delete(e.param);break}}}),this.cloneFrom=this.updates=null)}};var ah=class{map=new Map;set(e,n){return this.map.set(e,n),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}};function K2(t){switch(t){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}function tA(t){return typeof ArrayBuffer<"u"&&t instanceof ArrayBuffer}function nA(t){return typeof Blob<"u"&&t instanceof Blob}function rA(t){return typeof FormData<"u"&&t instanceof FormData}function Q2(t){return typeof URLSearchParams<"u"&&t instanceof URLSearchParams}var iA="Content-Type",oA="Accept",aA="X-Request-URL",cA="text/plain",uA="application/json",Y2=`${uA}, ${cA}, */*`,ya=class t{url;body=null;headers;context;reportProgress=!1;withCredentials=!1;credentials;keepalive=!1;cache;priority;mode;redirect;referrer;integrity;responseType="json";method;params;urlWithParams;transferCache;timeout;constructor(e,n,r,i){this.url=n,this.method=e.toUpperCase();let o;if(K2(this.method)||i?(this.body=r!==void 0?r:null,o=i):o=r,o){if(this.reportProgress=!!o.reportProgress,this.withCredentials=!!o.withCredentials,this.keepalive=!!o.keepalive,o.responseType&&(this.responseType=o.responseType),o.headers&&(this.headers=o.headers),o.context&&(this.context=o.context),o.params&&(this.params=o.params),o.priority&&(this.priority=o.priority),o.cache&&(this.cache=o.cache),o.credentials&&(this.credentials=o.credentials),typeof o.timeout=="number"){if(o.timeout<1||!Number.isInteger(o.timeout))throw new B(2822,"");this.timeout=o.timeout}o.mode&&(this.mode=o.mode),o.redirect&&(this.redirect=o.redirect),o.integrity&&(this.integrity=o.integrity),o.referrer&&(this.referrer=o.referrer),this.transferCache=o.transferCache}if(this.headers??=new Dr,this.context??=new ah,!this.params)this.params=new ri,this.urlWithParams=n;else{let s=this.params.toString();if(s.length===0)this.urlWithParams=n;else{let a=n.indexOf("?"),u=a===-1?"?":a<n.length-1?"&":"";this.urlWithParams=n+u+s}}}serializeBody(){return this.body===null?null:typeof this.body=="string"||tA(this.body)||nA(this.body)||rA(this.body)||Q2(this.body)?this.body:this.body instanceof ri?this.body.toString():typeof this.body=="object"||typeof this.body=="boolean"||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return this.body===null||rA(this.body)?null:nA(this.body)?this.body.type||null:tA(this.body)?null:typeof this.body=="string"?cA:this.body instanceof ri?"application/x-www-form-urlencoded;charset=UTF-8":typeof this.body=="object"||typeof this.body=="number"||typeof this.body=="boolean"?uA:null}clone(e={}){let n=e.method||this.method,r=e.url||this.url,i=e.responseType||this.responseType,o=e.keepalive??this.keepalive,s=e.priority||this.priority,a=e.cache||this.cache,u=e.mode||this.mode,l=e.redirect||this.redirect,f=e.credentials||this.credentials,p=e.referrer||this.referrer,g=e.integrity||this.integrity,y=e.transferCache??this.transferCache,D=e.timeout??this.timeout,x=e.body!==void 0?e.body:this.body,R=e.withCredentials??this.withCredentials,O=e.reportProgress??this.reportProgress,H=e.headers||this.headers,Y=e.params||this.params,re=e.context??this.context;return e.setHeaders!==void 0&&(H=Object.keys(e.setHeaders).reduce((Ke,ge)=>Ke.set(ge,e.setHeaders[ge]),H)),e.setParams&&(Y=Object.keys(e.setParams).reduce((Ke,ge)=>Ke.set(ge,e.setParams[ge]),Y)),new t(n,r,x,{params:Y,headers:H,context:re,reportProgress:O,responseType:i,withCredentials:R,transferCache:y,keepalive:o,cache:a,priority:s,timeout:D,mode:u,redirect:l,credentials:f,referrer:p,integrity:g})}},Xo=(function(t){return t[t.Sent=0]="Sent",t[t.UploadProgress=1]="UploadProgress",t[t.ResponseHeader=2]="ResponseHeader",t[t.DownloadProgress=3]="DownloadProgress",t[t.Response=4]="Response",t[t.User=5]="User",t})(Xo||{}),Ea=class{headers;status;statusText;url;ok;type;redirected;constructor(e,n=200,r="OK"){this.headers=e.headers||new Dr,this.status=e.status!==void 0?e.status:n,this.statusText=e.statusText||r,this.url=e.url||null,this.redirected=e.redirected,this.ok=this.status>=200&&this.status<300}},ch=class t extends Ea{constructor(e={}){super(e)}type=Xo.ResponseHeader;clone(e={}){return new t({headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}},Au=class t extends Ea{body;constructor(e={}){super(e),this.body=e.body!==void 0?e.body:null}type=Xo.Response;clone(e={}){return new t({body:e.body!==void 0?e.body:this.body,headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0,redirected:e.redirected??this.redirected})}},va=class extends Ea{name="HttpErrorResponse";message;error;ok=!1;constructor(e){super(e,0,"Unknown Error"),this.status>=200&&this.status<300?this.message=`Http failure during parsing for ${e.url||"(unknown url)"}`:this.message=`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}},J2=200,Z2=204;function p_(t,e){return{body:e,headers:t.headers,context:t.context,observe:t.observe,params:t.params,reportProgress:t.reportProgress,responseType:t.responseType,withCredentials:t.withCredentials,credentials:t.credentials,transferCache:t.transferCache,timeout:t.timeout,keepalive:t.keepalive,priority:t.priority,cache:t.cache,mode:t.mode,redirect:t.redirect,integrity:t.integrity,referrer:t.referrer}}var lh=(()=>{class t{handler;constructor(n){this.handler=n}request(n,r,i={}){let o;if(n instanceof ya)o=n;else{let u;i.headers instanceof Dr?u=i.headers:u=new Dr(i.headers);let l;i.params&&(i.params instanceof ri?l=i.params:l=new ri({fromObject:i.params})),o=new ya(n,r,i.body!==void 0?i.body:null,{headers:u,context:i.context,params:l,reportProgress:i.reportProgress,responseType:i.responseType||"json",withCredentials:i.withCredentials,transferCache:i.transferCache,keepalive:i.keepalive,priority:i.priority,cache:i.cache,mode:i.mode,redirect:i.redirect,credentials:i.credentials,referrer:i.referrer,integrity:i.integrity,timeout:i.timeout})}let s=ee(o).pipe(xi(u=>this.handler.handle(u)));if(n instanceof ya||i.observe==="events")return s;let a=s.pipe(on(u=>u instanceof Au));switch(i.observe||"body"){case"body":switch(o.responseType){case"arraybuffer":return a.pipe(fe(u=>{if(u.body!==null&&!(u.body instanceof ArrayBuffer))throw new B(2806,!1);return u.body}));case"blob":return a.pipe(fe(u=>{if(u.body!==null&&!(u.body instanceof Blob))throw new B(2807,!1);return u.body}));case"text":return a.pipe(fe(u=>{if(u.body!==null&&typeof u.body!="string")throw new B(2808,!1);return u.body}));case"json":default:return a.pipe(fe(u=>u.body))}case"response":return a;default:throw new B(2809,!1)}}delete(n,r={}){return this.request("DELETE",n,r)}get(n,r={}){return this.request("GET",n,r)}head(n,r={}){return this.request("HEAD",n,r)}jsonp(n,r){return this.request("JSONP",n,{params:new ri().append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(n,r={}){return this.request("OPTIONS",n,r)}patch(n,r,i={}){return this.request("PATCH",n,p_(i,r))}post(n,r,i={}){return this.request("POST",n,p_(i,r))}put(n,r,i={}){return this.request("PUT",n,p_(i,r))}static \u0275fac=function(r){return new(r||t)(K(_a))};static \u0275prov=G({token:t,factory:t.\u0275fac})}return t})();var X2=new q("");function lA(t,e){return e(t)}function ej(t,e){return(n,r)=>e.intercept(n,{handle:i=>t(i,r)})}function tj(t,e,n){return(r,i)=>ve(n,()=>e(r,o=>t(o,i)))}var dA=new q(""),m_=new q(""),fA=new q(""),y_=new q("",{providedIn:"root",factory:()=>!0});function nj(){let t=null;return(e,n)=>{t===null&&(t=(A(dA,{optional:!0})??[]).reduceRight(ej,lA));let r=A(Kr);if(A(y_)){let o=r.add();return t(e,n).pipe(Oi(o))}else return t(e,n)}}var uh=(()=>{class t extends _a{backend;injector;chain=null;pendingTasks=A(Kr);contributeToStability=A(y_);constructor(n,r){super(),this.backend=n,this.injector=r}handle(n){if(this.chain===null){let r=Array.from(new Set([...this.injector.get(m_),...this.injector.get(fA,[])]));this.chain=r.reduceRight((i,o)=>tj(i,o,this.injector),lA)}if(this.contributeToStability){let r=this.pendingTasks.add();return this.chain(n,i=>this.backend.handle(i)).pipe(Oi(r))}else return this.chain(n,r=>this.backend.handle(r))}static \u0275fac=function(r){return new(r||t)(K(Su),K(Xe))};static \u0275prov=G({token:t,factory:t.\u0275fac})}return t})();var rj=/^\)\]\}',?\n/,ij=RegExp(`^${aA}:`,"m");function oj(t){return"responseURL"in t&&t.responseURL?t.responseURL:ij.test(t.getAllResponseHeaders())?t.getResponseHeader(aA):null}var g_=(()=>{class t{xhrFactory;constructor(n){this.xhrFactory=n}handle(n){if(n.method==="JSONP")throw new B(-2800,!1);let r=this.xhrFactory;return ee(null).pipe(Bt(()=>new ce(o=>{let s=r.build();if(s.open(n.method,n.urlWithParams),n.withCredentials&&(s.withCredentials=!0),n.headers.forEach((R,O)=>s.setRequestHeader(R,O.join(","))),n.headers.has(oA)||s.setRequestHeader(oA,Y2),!n.headers.has(iA)){let R=n.detectContentTypeHeader();R!==null&&s.setRequestHeader(iA,R)}if(n.timeout&&(s.timeout=n.timeout),n.responseType){let R=n.responseType.toLowerCase();s.responseType=R!=="json"?R:"text"}let a=n.serializeBody(),u=null,l=()=>{if(u!==null)return u;let R=s.statusText||"OK",O=new Dr(s.getAllResponseHeaders()),H=oj(s)||n.url;return u=new ch({headers:O,status:s.status,statusText:R,url:H}),u},f=()=>{let{headers:R,status:O,statusText:H,url:Y}=l(),re=null;O!==Z2&&(re=typeof s.response>"u"?s.responseText:s.response),O===0&&(O=re?J2:0);let Ke=O>=200&&O<300;if(n.responseType==="json"&&typeof re=="string"){let ge=re;re=re.replace(rj,"");try{re=re!==""?JSON.parse(re):null}catch(b){re=ge,Ke&&(Ke=!1,re={error:b,text:re})}}Ke?(o.next(new Au({body:re,headers:R,status:O,statusText:H,url:Y||void 0})),o.complete()):o.error(new va({error:re,headers:R,status:O,statusText:H,url:Y||void 0}))},p=R=>{let{url:O}=l(),H=new va({error:R,status:s.status||0,statusText:s.statusText||"Unknown Error",url:O||void 0});o.error(H)},g=p;n.timeout&&(g=R=>{let{url:O}=l(),H=new va({error:new DOMException("Request timed out","TimeoutError"),status:s.status||0,statusText:s.statusText||"Request timeout",url:O||void 0});o.error(H)});let y=!1,D=R=>{y||(o.next(l()),y=!0);let O={type:Xo.DownloadProgress,loaded:R.loaded};R.lengthComputable&&(O.total=R.total),n.responseType==="text"&&s.responseText&&(O.partialText=s.responseText),o.next(O)},x=R=>{let O={type:Xo.UploadProgress,loaded:R.loaded};R.lengthComputable&&(O.total=R.total),o.next(O)};return s.addEventListener("load",f),s.addEventListener("error",p),s.addEventListener("timeout",g),s.addEventListener("abort",p),n.reportProgress&&(s.addEventListener("progress",D),a!==null&&s.upload&&s.upload.addEventListener("progress",x)),s.send(a),o.next({type:Xo.Sent}),()=>{s.removeEventListener("error",p),s.removeEventListener("abort",p),s.removeEventListener("load",f),s.removeEventListener("timeout",g),n.reportProgress&&(s.removeEventListener("progress",D),a!==null&&s.upload&&s.upload.removeEventListener("progress",x)),s.readyState!==s.DONE&&s.abort()}})))}static \u0275fac=function(r){return new(r||t)(K(Jo))};static \u0275prov=G({token:t,factory:t.\u0275fac})}return t})(),hA=new q(""),sj="XSRF-TOKEN",aj=new q("",{providedIn:"root",factory:()=>sj}),cj="X-XSRF-TOKEN",uj=new q("",{providedIn:"root",factory:()=>cj}),Ru=class{},lj=(()=>{class t{doc;cookieName;lastCookieString="";lastToken=null;parseCount=0;constructor(n,r){this.doc=n,this.cookieName=r}getToken(){let n=this.doc.cookie||"";return n!==this.lastCookieString&&(this.parseCount++,this.lastToken=Iu(n,this.cookieName),this.lastCookieString=n),this.lastToken}static \u0275fac=function(r){return new(r||t)(K(yt),K(aj))};static \u0275prov=G({token:t,factory:t.\u0275fac})}return t})();function dj(t,e){let n=t.url.toLowerCase();if(!A(hA)||t.method==="GET"||t.method==="HEAD"||n.startsWith("http://")||n.startsWith("https://"))return e(t);let r=A(Ru).getToken(),i=A(uj);return r!=null&&!t.headers.has(i)&&(t=t.clone({headers:t.headers.set(i,r)})),e(t)}var v_=(function(t){return t[t.Interceptors=0]="Interceptors",t[t.LegacyInterceptors=1]="LegacyInterceptors",t[t.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",t[t.NoXsrfProtection=3]="NoXsrfProtection",t[t.JsonpSupport=4]="JsonpSupport",t[t.RequestsMadeViaParent=5]="RequestsMadeViaParent",t[t.Fetch=6]="Fetch",t})(v_||{});function fj(t,e){return{\u0275kind:t,\u0275providers:e}}function pA(...t){let e=[lh,g_,uh,{provide:_a,useExisting:uh},{provide:Su,useFactory:()=>A(X2,{optional:!0})??A(g_)},{provide:m_,useValue:dj,multi:!0},{provide:hA,useValue:!0},{provide:Ru,useClass:lj}];for(let n of t)e.push(...n.\u0275providers);return Mn(e)}var sA=new q("");function gA(){return fj(v_.LegacyInterceptors,[{provide:sA,useFactory:nj},{provide:m_,useExisting:sA,multi:!0}])}var __=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275mod=rr({type:t});static \u0275inj=Nn({providers:[pA(gA())]})}return t})();var mA=(()=>{class t{_doc;constructor(n){this._doc=n}getTitle(){return this._doc.title}setTitle(n){this._doc.title=n||""}static \u0275fac=function(r){return new(r||t)(K(yt))};static \u0275prov=G({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var le="primary",qu=Symbol("RouteTitle"),T_=class{params;constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n[0]:n}return null}getAll(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}};function ns(t){return new T_(t)}function TA(t,e,n){let r=n.path.split("/");if(r.length>t.length||n.pathMatch==="full"&&(e.hasChildren()||r.length<t.length))return null;let i={};for(let o=0;o<r.length;o++){let s=r[o],a=t[o];if(s[0]===":")i[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:t.slice(0,r.length),posParams:i}}function pj(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!Sr(t[n],e[n]))return!1;return!0}function Sr(t,e){let n=t?C_(t):void 0,r=e?C_(e):void 0;if(!n||!r||n.length!=r.length)return!1;let i;for(let o=0;o<n.length;o++)if(i=n[o],!CA(t[i],e[i]))return!1;return!0}function C_(t){return[...Object.keys(t),...Object.getOwnPropertySymbols(t)]}function CA(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;let n=[...t].sort(),r=[...e].sort();return n.every((i,o)=>r[o]===i)}else return t===e}function DA(t){return t.length>0?t[t.length-1]:null}function oi(t){return Nm(t)?t:Wi(t)?Ze(Promise.resolve(t)):ee(t)}var gj={exact:AA,subset:RA},SA={exact:mj,subset:yj,ignored:()=>!0};function yA(t,e,n){return gj[n.paths](t.root,e.root,n.matrixParams)&&SA[n.queryParams](t.queryParams,e.queryParams)&&!(n.fragment==="exact"&&t.fragment!==e.fragment)}function mj(t,e){return Sr(t,e)}function AA(t,e,n){if(!es(t.segments,e.segments)||!hh(t.segments,e.segments,n)||t.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!t.children[r]||!AA(t.children[r],e.children[r],n))return!1;return!0}function yj(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>CA(t[n],e[n]))}function RA(t,e,n){return NA(t,e,e.segments,n)}function NA(t,e,n,r){if(t.segments.length>n.length){let i=t.segments.slice(0,n.length);return!(!es(i,n)||e.hasChildren()||!hh(i,n,r))}else if(t.segments.length===n.length){if(!es(t.segments,n)||!hh(t.segments,n,r))return!1;for(let i in e.children)if(!t.children[i]||!RA(t.children[i],e.children[i],r))return!1;return!0}else{let i=n.slice(0,t.segments.length),o=n.slice(t.segments.length);return!es(t.segments,i)||!hh(t.segments,i,r)||!t.children[le]?!1:NA(t.children[le],e,o,r)}}function hh(t,e,n){return e.every((r,i)=>SA[n](t[i].parameters,r.parameters))}var Rr=class{root;queryParams;fragment;_queryParamMap;constructor(e=new Ce([],{}),n={},r=null){this.root=e,this.queryParams=n,this.fragment=r}get queryParamMap(){return this._queryParamMap??=ns(this.queryParams),this._queryParamMap}toString(){return Ej.serialize(this)}},Ce=class{segments;children;parent=null;constructor(e,n){this.segments=e,this.children=n,Object.values(n).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return ph(this)}},Ki=class{path;parameters;_parameterMap;constructor(e,n){this.path=e,this.parameters=n}get parameterMap(){return this._parameterMap??=ns(this.parameters),this._parameterMap}toString(){return PA(this)}};function vj(t,e){return es(t,e)&&t.every((n,r)=>Sr(n.parameters,e[r].parameters))}function es(t,e){return t.length!==e.length?!1:t.every((n,r)=>n.path===e[r].path)}function _j(t,e){let n=[];return Object.entries(t.children).forEach(([r,i])=>{r===le&&(n=n.concat(e(i,r)))}),Object.entries(t.children).forEach(([r,i])=>{r!==le&&(n=n.concat(e(i,r)))}),n}var zu=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275prov=G({token:t,factory:()=>new rs,providedIn:"root"})}return t})(),rs=class{parse(e){let n=new S_(e);return new Rr(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(e){let n=`/${Nu(e.root,!0)}`,r=bj(e.queryParams),i=typeof e.fragment=="string"?`#${wj(e.fragment)}`:"";return`${n}${r}${i}`}},Ej=new rs;function ph(t){return t.segments.map(e=>PA(e)).join("/")}function Nu(t,e){if(!t.hasChildren())return ph(t);if(e){let n=t.children[le]?Nu(t.children[le],!1):"",r=[];return Object.entries(t.children).forEach(([i,o])=>{i!==le&&r.push(`${i}:${Nu(o,!1)}`)}),r.length>0?`${n}(${r.join("//")})`:n}else{let n=_j(t,(r,i)=>i===le?[Nu(t.children[le],!1)]:[`${i}:${Nu(r,!1)}`]);return Object.keys(t.children).length===1&&t.children[le]!=null?`${ph(t)}/${n[0]}`:`${ph(t)}/(${n.join("//")})`}}function MA(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function dh(t){return MA(t).replace(/%3B/gi,";")}function wj(t){return encodeURI(t)}function D_(t){return MA(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function gh(t){return decodeURIComponent(t)}function vA(t){return gh(t.replace(/\+/g,"%20"))}function PA(t){return`${D_(t.path)}${Ij(t.parameters)}`}function Ij(t){return Object.entries(t).map(([e,n])=>`;${D_(e)}=${D_(n)}`).join("")}function bj(t){let e=Object.entries(t).map(([n,r])=>Array.isArray(r)?r.map(i=>`${dh(n)}=${dh(i)}`).join("&"):`${dh(n)}=${dh(r)}`).filter(n=>n);return e.length?`?${e.join("&")}`:""}var Tj=/^[^\/()?;#]+/;function E_(t){let e=t.match(Tj);return e?e[0]:""}var Cj=/^[^\/()?;=#]+/;function Dj(t){let e=t.match(Cj);return e?e[0]:""}var Sj=/^[^=?&#]+/;function Aj(t){let e=t.match(Sj);return e?e[0]:""}var Rj=/^[^&#]+/;function Nj(t){let e=t.match(Rj);return e?e[0]:""}var S_=class{url;remaining;constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new Ce([],{}):new Ce([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(n).length>0)&&(r[le]=new Ce(e,n)),r}parseSegment(){let e=E_(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new B(4009,!1);return this.capture(e),new Ki(gh(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let n=Dj(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let i=E_(this.remaining);i&&(r=i,this.capture(r))}e[gh(n)]=gh(r)}parseQueryParam(e){let n=Aj(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let s=Nj(this.remaining);s&&(r=s,this.capture(r))}let i=vA(n),o=vA(r);if(e.hasOwnProperty(i)){let s=e[i];Array.isArray(s)||(s=[s],e[i]=s),s.push(o)}else e[i]=o}parseParens(e){let n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=E_(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new B(4010,!1);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=le);let s=this.parseChildren();n[o]=Object.keys(s).length===1?s[le]:new Ce([],s),this.consumeOptional("//")}return n}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new B(4011,!1)}};function xA(t){return t.segments.length>0?new Ce([],{[le]:t}):t}function kA(t){let e={};for(let[r,i]of Object.entries(t.children)){let o=kA(i);if(r===le&&o.segments.length===0&&o.hasChildren())for(let[s,a]of Object.entries(o.children))e[s]=a;else(o.segments.length>0||o.hasChildren())&&(e[r]=o)}let n=new Ce(t.segments,e);return Mj(n)}function Mj(t){if(t.numberOfChildren===1&&t.children[le]){let e=t.children[le];return new Ce(t.segments.concat(e.segments),e.children)}return t}function Qi(t){return t instanceof Rr}function OA(t,e,n=null,r=null){let i=FA(t);return LA(i,e,n,r)}function FA(t){let e;function n(o){let s={};for(let u of o.children){let l=n(u);s[u.outlet]=l}let a=new Ce(o.url,s);return o===t&&(e=a),a}let r=n(t.root),i=xA(r);return e??i}function LA(t,e,n,r){let i=t;for(;i.parent;)i=i.parent;if(e.length===0)return w_(i,i,i,n,r);let o=Pj(e);if(o.toRoot())return w_(i,i,new Ce([],{}),n,r);let s=xj(o,i,t),a=s.processChildren?Pu(s.segmentGroup,s.index,o.commands):jA(s.segmentGroup,s.index,o.commands);return w_(i,s.segmentGroup,a,n,r)}function mh(t){return typeof t=="object"&&t!=null&&!t.outlets&&!t.segmentPath}function Ou(t){return typeof t=="object"&&t!=null&&t.outlets}function w_(t,e,n,r,i){let o={};r&&Object.entries(r).forEach(([u,l])=>{o[u]=Array.isArray(l)?l.map(f=>`${f}`):`${l}`});let s;t===e?s=n:s=VA(t,e,n);let a=xA(kA(s));return new Rr(a,o,i)}function VA(t,e,n){let r={};return Object.entries(t.children).forEach(([i,o])=>{o===e?r[i]=n:r[i]=VA(o,e,n)}),new Ce(t.segments,r)}var yh=class{isAbsolute;numberOfDoubleDots;commands;constructor(e,n,r){if(this.isAbsolute=e,this.numberOfDoubleDots=n,this.commands=r,e&&r.length>0&&mh(r[0]))throw new B(4003,!1);let i=r.find(Ou);if(i&&i!==DA(r))throw new B(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function Pj(t){if(typeof t[0]=="string"&&t.length===1&&t[0]==="/")return new yh(!0,0,t);let e=0,n=!1,r=t.reduce((i,o,s)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let a={};return Object.entries(o.outlets).forEach(([u,l])=>{a[u]=typeof l=="string"?l.split("/"):l}),[...i,{outlets:a}]}if(o.segmentPath)return[...i,o.segmentPath]}return typeof o!="string"?[...i,o]:s===0?(o.split("/").forEach((a,u)=>{u==0&&a==="."||(u==0&&a===""?n=!0:a===".."?e++:a!=""&&i.push(a))}),i):[...i,o]},[]);return new yh(n,e,r)}var ba=class{segmentGroup;processChildren;index;constructor(e,n,r){this.segmentGroup=e,this.processChildren=n,this.index=r}};function xj(t,e,n){if(t.isAbsolute)return new ba(e,!0,0);if(!n)return new ba(e,!1,NaN);if(n.parent===null)return new ba(n,!0,0);let r=mh(t.commands[0])?0:1,i=n.segments.length-1+r;return kj(n,i,t.numberOfDoubleDots)}function kj(t,e,n){let r=t,i=e,o=n;for(;o>i;){if(o-=i,r=r.parent,!r)throw new B(4005,!1);i=r.segments.length}return new ba(r,!1,i-o)}function Oj(t){return Ou(t[0])?t[0].outlets:{[le]:t}}function jA(t,e,n){if(t??=new Ce([],{}),t.segments.length===0&&t.hasChildren())return Pu(t,e,n);let r=Fj(t,e,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){let o=new Ce(t.segments.slice(0,r.pathIndex),{});return o.children[le]=new Ce(t.segments.slice(r.pathIndex),t.children),Pu(o,0,i)}else return r.match&&i.length===0?new Ce(t.segments,{}):r.match&&!t.hasChildren()?A_(t,e,n):r.match?Pu(t,0,i):A_(t,e,n)}function Pu(t,e,n){if(n.length===0)return new Ce(t.segments,{});{let r=Oj(n),i={};if(Object.keys(r).some(o=>o!==le)&&t.children[le]&&t.numberOfChildren===1&&t.children[le].segments.length===0){let o=Pu(t.children[le],e,n);return new Ce(t.segments,o.children)}return Object.entries(r).forEach(([o,s])=>{typeof s=="string"&&(s=[s]),s!==null&&(i[o]=jA(t.children[o],e,s))}),Object.entries(t.children).forEach(([o,s])=>{r[o]===void 0&&(i[o]=s)}),new Ce(t.segments,i)}}function Fj(t,e,n){let r=0,i=e,o={match:!1,pathIndex:0,commandIndex:0};for(;i<t.segments.length;){if(r>=n.length)return o;let s=t.segments[i],a=n[r];if(Ou(a))break;let u=`${a}`,l=r<n.length-1?n[r+1]:null;if(i>0&&u===void 0)break;if(u&&l&&typeof l=="object"&&l.outlets===void 0){if(!EA(u,l,s))return o;r+=2}else{if(!EA(u,{},s))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function A_(t,e,n){let r=t.segments.slice(0,e),i=0;for(;i<n.length;){let o=n[i];if(Ou(o)){let u=Lj(o.outlets);return new Ce(r,u)}if(i===0&&mh(n[0])){let u=t.segments[e];r.push(new Ki(u.path,_A(n[0]))),i++;continue}let s=Ou(o)?o.outlets[le]:`${o}`,a=i<n.length-1?n[i+1]:null;s&&a&&mh(a)?(r.push(new Ki(s,_A(a))),i+=2):(r.push(new Ki(s,{})),i++)}return new Ce(r,{})}function Lj(t){let e={};return Object.entries(t).forEach(([n,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[n]=A_(new Ce([],{}),0,r))}),e}function _A(t){let e={};return Object.entries(t).forEach(([n,r])=>e[n]=`${r}`),e}function EA(t,e,n){return t==n.path&&Sr(e,n.parameters)}var xu="imperative",Ct=(function(t){return t[t.NavigationStart=0]="NavigationStart",t[t.NavigationEnd=1]="NavigationEnd",t[t.NavigationCancel=2]="NavigationCancel",t[t.NavigationError=3]="NavigationError",t[t.RoutesRecognized=4]="RoutesRecognized",t[t.ResolveStart=5]="ResolveStart",t[t.ResolveEnd=6]="ResolveEnd",t[t.GuardsCheckStart=7]="GuardsCheckStart",t[t.GuardsCheckEnd=8]="GuardsCheckEnd",t[t.RouteConfigLoadStart=9]="RouteConfigLoadStart",t[t.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",t[t.ChildActivationStart=11]="ChildActivationStart",t[t.ChildActivationEnd=12]="ChildActivationEnd",t[t.ActivationStart=13]="ActivationStart",t[t.ActivationEnd=14]="ActivationEnd",t[t.Scroll=15]="Scroll",t[t.NavigationSkipped=16]="NavigationSkipped",t})(Ct||{}),bn=class{id;url;constructor(e,n){this.id=e,this.url=n}},is=class extends bn{type=Ct.NavigationStart;navigationTrigger;restoredState;constructor(e,n,r="imperative",i=null){super(e,n),this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},Nr=class extends bn{urlAfterRedirects;type=Ct.NavigationEnd;constructor(e,n,r){super(e,n),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},en=(function(t){return t[t.Redirect=0]="Redirect",t[t.SupersededByNewNavigation=1]="SupersededByNewNavigation",t[t.NoDataFromResolver=2]="NoDataFromResolver",t[t.GuardRejected=3]="GuardRejected",t[t.Aborted=4]="Aborted",t})(en||{}),Fu=(function(t){return t[t.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",t[t.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",t})(Fu||{}),Ar=class extends bn{reason;code;type=Ct.NavigationCancel;constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},ii=class extends bn{reason;code;type=Ct.NavigationSkipped;constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i}},Ca=class extends bn{error;target;type=Ct.NavigationError;constructor(e,n,r,i){super(e,n),this.error=r,this.target=i}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},Lu=class extends bn{urlAfterRedirects;state;type=Ct.RoutesRecognized;constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},vh=class extends bn{urlAfterRedirects;state;type=Ct.GuardsCheckStart;constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},_h=class extends bn{urlAfterRedirects;state;shouldActivate;type=Ct.GuardsCheckEnd;constructor(e,n,r,i,o){super(e,n),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},Eh=class extends bn{urlAfterRedirects;state;type=Ct.ResolveStart;constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},wh=class extends bn{urlAfterRedirects;state;type=Ct.ResolveEnd;constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Ih=class{route;type=Ct.RouteConfigLoadStart;constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},bh=class{route;type=Ct.RouteConfigLoadEnd;constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},Th=class{snapshot;type=Ct.ChildActivationStart;constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Ch=class{snapshot;type=Ct.ChildActivationEnd;constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Dh=class{snapshot;type=Ct.ActivationStart;constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Sh=class{snapshot;type=Ct.ActivationEnd;constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}};var Vu=class{},Da=class{url;navigationBehaviorOptions;constructor(e,n){this.url=e,this.navigationBehaviorOptions=n}};function Vj(t){return!(t instanceof Vu)&&!(t instanceof Da)}function jj(t,e){return t.providers&&!t._injector&&(t._injector=du(t.providers,e,`Route: ${t.path}`)),t._injector??e}function cr(t){return t.outlet||le}function Uj(t,e){let n=t.filter(r=>cr(r)===e);return n.push(...t.filter(r=>cr(r)!==e)),n}function Ra(t){if(!t)return null;if(t.routeConfig?._injector)return t.routeConfig._injector;for(let e=t.parent;e;e=e.parent){let n=e.routeConfig;if(n?._loadedInjector)return n._loadedInjector;if(n?._injector)return n._injector}return null}var Ah=class{rootInjector;outlet=null;route=null;children;attachRef=null;get injector(){return Ra(this.route?.snapshot)??this.rootInjector}constructor(e){this.rootInjector=e,this.children=new Na(this.rootInjector)}},Na=(()=>{class t{rootInjector;contexts=new Map;constructor(n){this.rootInjector=n}onChildOutletCreated(n,r){let i=this.getOrCreateContext(n);i.outlet=r,this.contexts.set(n,i)}onChildOutletDestroyed(n){let r=this.getContext(n);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let n=this.contexts;return this.contexts=new Map,n}onOutletReAttached(n){this.contexts=n}getOrCreateContext(n){let r=this.getContext(n);return r||(r=new Ah(this.rootInjector),this.contexts.set(n,r)),r}getContext(n){return this.contexts.get(n)||null}static \u0275fac=function(r){return new(r||t)(K(Xe))};static \u0275prov=G({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),Rh=class{_root;constructor(e){this._root=e}get root(){return this._root.value}parent(e){let n=this.pathFromRoot(e);return n.length>1?n[n.length-2]:null}children(e){let n=R_(e,this._root);return n?n.children.map(r=>r.value):[]}firstChild(e){let n=R_(e,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(e){let n=N_(e,this._root);return n.length<2?[]:n[n.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return N_(e,this._root).map(n=>n.value)}};function R_(t,e){if(t===e.value)return e;for(let n of e.children){let r=R_(t,n);if(r)return r}return null}function N_(t,e){if(t===e.value)return[e];for(let n of e.children){let r=N_(t,n);if(r.length)return r.unshift(e),r}return[]}var In=class{value;children;constructor(e,n){this.value=e,this.children=n}toString(){return`TreeNode(${this.value})`}};function Ia(t){let e={};return t&&t.children.forEach(n=>e[n.value.outlet]=n),e}var ju=class extends Rh{snapshot;constructor(e,n){super(e),this.snapshot=n,V_(this,e)}toString(){return this.snapshot.toString()}};function UA(t){let e=Bj(t),n=new Rt([new Ki("",{})]),r=new Rt({}),i=new Rt({}),o=new Rt({}),s=new Rt(""),a=new ur(n,r,o,s,i,le,t,e.root);return a.snapshot=e.root,new ju(new In(a,[]),e)}function Bj(t){let e={},n={},r={},o=new ts([],e,r,"",n,le,t,null,{});return new Uu("",new In(o,[]))}var ur=class{urlSubject;paramsSubject;queryParamsSubject;fragmentSubject;dataSubject;outlet;component;snapshot;_futureSnapshot;_routerState;_paramMap;_queryParamMap;title;url;params;queryParams;fragment;data;constructor(e,n,r,i,o,s,a,u){this.urlSubject=e,this.paramsSubject=n,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=o,this.outlet=s,this.component=a,this._futureSnapshot=u,this.title=this.dataSubject?.pipe(fe(l=>l[qu]))??ee(void 0),this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(fe(e=>ns(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(fe(e=>ns(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function Nh(t,e,n="emptyOnly"){let r,{routeConfig:i}=t;return e!==null&&(n==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:j(j({},e.params),t.params),data:j(j({},e.data),t.data),resolve:j(j(j(j({},t.data),e.data),i?.data),t._resolvedData)}:r={params:j({},t.params),data:j({},t.data),resolve:j(j({},t.data),t._resolvedData??{})},i&&$A(i)&&(r.resolve[qu]=i.title),r}var ts=class{url;params;queryParams;fragment;data;outlet;component;routeConfig;_resolve;_resolvedData;_routerState;_paramMap;_queryParamMap;get title(){return this.data?.[qu]}constructor(e,n,r,i,o,s,a,u,l){this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=s,this.component=a,this.routeConfig=u,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=ns(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=ns(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),n=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${n}')`}},Uu=class extends Rh{url;constructor(e,n){super(n),this.url=e,V_(this,n)}toString(){return BA(this._root)}};function V_(t,e){e.value._routerState=t,e.children.forEach(n=>V_(t,n))}function BA(t){let e=t.children.length>0?` { ${t.children.map(BA).join(", ")} } `:"";return`${t.value}${e}`}function I_(t){if(t.snapshot){let e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,Sr(e.queryParams,n.queryParams)||t.queryParamsSubject.next(n.queryParams),e.fragment!==n.fragment&&t.fragmentSubject.next(n.fragment),Sr(e.params,n.params)||t.paramsSubject.next(n.params),pj(e.url,n.url)||t.urlSubject.next(n.url),Sr(e.data,n.data)||t.dataSubject.next(n.data)}else t.snapshot=t._futureSnapshot,t.dataSubject.next(t._futureSnapshot.data)}function M_(t,e){let n=Sr(t.params,e.params)&&vj(t.url,e.url),r=!t.parent!=!e.parent;return n&&!r&&(!t.parent||M_(t.parent,e.parent))}function $A(t){return typeof t.title=="string"||t.title===null}var HA=new q(""),os=(()=>{class t{activated=null;get activatedComponentRef(){return this.activated}_activatedRoute=null;name=le;activateEvents=new ut;deactivateEvents=new ut;attachEvents=new ut;detachEvents=new ut;routerOutletData=bS(void 0);parentContexts=A(Na);location=A(zo);changeDetector=A(Ko);inputBinder=A(kh,{optional:!0});supportsBindingToComponentInputs=!0;ngOnChanges(n){if(n.name){let{firstChange:r,previousValue:i}=n.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(n){return this.parentContexts.getContext(n)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let n=this.parentContexts.getContext(this.name);n?.route&&(n.attachRef?this.attach(n.attachRef,n.route):this.activateWith(n.route,n.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new B(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new B(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new B(4012,!1);this.location.detach();let n=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(n.instance),n}attach(n,r){this.activated=n,this._activatedRoute=r,this.location.insert(n.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(n.instance)}deactivate(){if(this.activated){let n=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(n)}}activateWith(n,r){if(this.isActivated)throw new B(4013,!1);this._activatedRoute=n;let i=this.location,s=n.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,u=new P_(n,a,i.injector,this.routerOutletData);this.activated=i.createComponent(s,{index:i.length,injector:u,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static \u0275fac=function(r){return new(r||t)};static \u0275dir=ze({type:t,selectors:[["router-outlet"]],inputs:{name:"name",routerOutletData:[1,"routerOutletData"]},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],features:[Yr]})}return t})(),P_=class{route;childContexts;parent;outletData;constructor(e,n,r,i){this.route=e,this.childContexts=n,this.parent=r,this.outletData=i}get(e,n){return e===ur?this.route:e===Na?this.childContexts:e===HA?this.outletData:this.parent.get(e,n)}},kh=new q("");var j_=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275cmp=rt({type:t,selectors:[["ng-component"]],exportAs:["emptyRouterOutlet"],decls:1,vars:0,template:function(r,i){r&1&&ir(0,"router-outlet")},dependencies:[os],encapsulation:2})}return t})();function U_(t){let e=t.children&&t.children.map(U_),n=e?X(j({},t),{children:e}):j({},t);return!n.component&&!n.loadComponent&&(e||n.loadChildren)&&n.outlet&&n.outlet!==le&&(n.component=j_),n}function $j(t,e,n){let r=Bu(t,e._root,n?n._root:void 0);return new ju(r,e)}function Bu(t,e,n){if(n&&t.shouldReuseRoute(e.value,n.value.snapshot)){let r=n.value;r._futureSnapshot=e.value;let i=Hj(t,e,n);return new In(r,i)}else{if(t.shouldAttach(e.value)){let o=t.retrieve(e.value);if(o!==null){let s=o.route;return s.value._futureSnapshot=e.value,s.children=e.children.map(a=>Bu(t,a)),s}}let r=qj(e.value),i=e.children.map(o=>Bu(t,o));return new In(r,i)}}function Hj(t,e,n){return e.children.map(r=>{for(let i of n.children)if(t.shouldReuseRoute(r.value,i.value.snapshot))return Bu(t,r,i);return Bu(t,r)})}function qj(t){return new ur(new Rt(t.url),new Rt(t.params),new Rt(t.queryParams),new Rt(t.fragment),new Rt(t.data),t.outlet,t.component,t)}var Sa=class{redirectTo;navigationBehaviorOptions;constructor(e,n){this.redirectTo=e,this.navigationBehaviorOptions=n}},qA="ngNavigationCancelingError";function Mh(t,e){let{redirectTo:n,navigationBehaviorOptions:r}=Qi(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=zA(!1,en.Redirect);return i.url=n,i.navigationBehaviorOptions=r,i}function zA(t,e){let n=new Error(`NavigationCancelingError: ${t||""}`);return n[qA]=!0,n.cancellationCode=e,n}function zj(t){return GA(t)&&Qi(t.url)}function GA(t){return!!t&&t[qA]}var Gj=(t,e,n,r)=>fe(i=>(new x_(e,i.targetRouterState,i.currentRouterState,n,r).activate(t),i)),x_=class{routeReuseStrategy;futureState;currState;forwardEvent;inputBindingEnabled;constructor(e,n,r,i,o){this.routeReuseStrategy=e,this.futureState=n,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=o}activate(e){let n=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,r,e),I_(this.futureState.root),this.activateChildRoutes(n,r,e)}deactivateChildRoutes(e,n,r){let i=Ia(n);e.children.forEach(o=>{let s=o.value.outlet;this.deactivateRoutes(o,i[s],r),delete i[s]}),Object.values(i).forEach(o=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(e,n,r){let i=e.value,o=n?n.value:null;if(i===o)if(i.component){let s=r.getContext(i.outlet);s&&this.deactivateChildRoutes(e,n,s.children)}else this.deactivateChildRoutes(e,n,r);else o&&this.deactivateRouteAndItsChildren(n,r)}deactivateRouteAndItsChildren(e,n){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,n):this.deactivateRouteAndOutlet(e,n)}detachAndStoreRouteSubtree(e,n){let r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,o=Ia(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);if(r&&r.outlet){let s=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:s,route:e,contexts:a})}}deactivateRouteAndOutlet(e,n){let r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,o=Ia(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,n,r){let i=Ia(n);e.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new Sh(o.value.snapshot))}),e.children.length&&this.forwardEvent(new Ch(e.value.snapshot))}activateRoutes(e,n,r){let i=e.value,o=n?n.value:null;if(I_(i),i===o)if(i.component){let s=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,n,s.children)}else this.activateChildRoutes(e,n,r);else if(i.component){let s=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),I_(a.route.value),this.activateChildRoutes(e,null,s.children)}else s.attachRef=null,s.route=i,s.outlet&&s.outlet.activateWith(i,s.injector),this.activateChildRoutes(e,null,s.children)}else this.activateChildRoutes(e,null,r)}},Ph=class{path;route;constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},Ta=class{component;route;constructor(e,n){this.component=e,this.route=n}};function Wj(t,e,n){let r=t._root,i=e?e._root:null;return Mu(r,i,n,[r.value])}function Kj(t){let e=t.routeConfig?t.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:t,guards:e}}function Ma(t,e){let n=Symbol(),r=e.get(t,n);return r===n?typeof t=="function"&&!Jm(t)?t:e.get(t):r}function Mu(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=Ia(e);return t.children.forEach(s=>{Qj(s,o[s.value.outlet],n,r.concat([s.value]),i),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,a])=>ku(a,n.getContext(s),i)),i}function Qj(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=t.value,s=e?e.value:null,a=n?n.getContext(t.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){let u=Yj(s,o,o.routeConfig.runGuardsAndResolvers);u?i.canActivateChecks.push(new Ph(r)):(o.data=s.data,o._resolvedData=s._resolvedData),o.component?Mu(t,e,a?a.children:null,r,i):Mu(t,e,n,r,i),u&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new Ta(a.outlet.component,s))}else s&&ku(e,a,i),i.canActivateChecks.push(new Ph(r)),o.component?Mu(t,null,a?a.children:null,r,i):Mu(t,null,n,r,i);return i}function Yj(t,e,n){if(typeof n=="function")return n(t,e);switch(n){case"pathParamsChange":return!es(t.url,e.url);case"pathParamsOrQueryParamsChange":return!es(t.url,e.url)||!Sr(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!M_(t,e)||!Sr(t.queryParams,e.queryParams);case"paramsChange":default:return!M_(t,e)}}function ku(t,e,n){let r=Ia(t),i=t.value;Object.entries(r).forEach(([o,s])=>{i.component?e?ku(s,e.children.getContext(o),n):ku(s,null,n):ku(s,e,n)}),i.component?e&&e.outlet&&e.outlet.isActivated?n.canDeactivateChecks.push(new Ta(e.outlet.component,i)):n.canDeactivateChecks.push(new Ta(null,i)):n.canDeactivateChecks.push(new Ta(null,i))}function Gu(t){return typeof t=="function"}function Jj(t){return typeof t=="boolean"}function Zj(t){return t&&Gu(t.canLoad)}function Xj(t){return t&&Gu(t.canActivate)}function eU(t){return t&&Gu(t.canActivateChild)}function tU(t){return t&&Gu(t.canDeactivate)}function nU(t){return t&&Gu(t.canMatch)}function WA(t){return t instanceof Qn||t?.name==="EmptyError"}var fh=Symbol("INITIAL_VALUE");function Aa(){return Bt(t=>xd(t.map(e=>e.pipe($r(1),Om(fh)))).pipe(fe(e=>{for(let n of e)if(n!==!0){if(n===fh)return fh;if(n===!1||rU(n))return n}return!0}),on(e=>e!==fh),$r(1)))}function rU(t){return Qi(t)||t instanceof Sa}function iU(t,e){return mt(n=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=n;return s.length===0&&o.length===0?ee(X(j({},n),{guardsResult:!0})):oU(s,r,i,t).pipe(mt(a=>a&&Jj(a)?sU(r,o,t,e):ee(a)),fe(a=>X(j({},n),{guardsResult:a})))})}function oU(t,e,n,r){return Ze(t).pipe(mt(i=>dU(i.component,i.route,n,e,r)),Hr(i=>i!==!0,!0))}function sU(t,e,n,r){return Ze(e).pipe(xi(i=>ea(cU(i.route.parent,r),aU(i.route,r),lU(t,i.path,n),uU(t,i.route,n))),Hr(i=>i!==!0,!0))}function aU(t,e){return t!==null&&e&&e(new Dh(t)),ee(!0)}function cU(t,e){return t!==null&&e&&e(new Th(t)),ee(!0)}function uU(t,e,n){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return ee(!0);let i=r.map(o=>Lc(()=>{let s=Ra(e)??n,a=Ma(o,s),u=Xj(a)?a.canActivate(e,t):ve(s,()=>a(e,t));return oi(u).pipe(Hr())}));return ee(i).pipe(Aa())}function lU(t,e,n){let r=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(s=>Kj(s)).filter(s=>s!==null).map(s=>Lc(()=>{let a=s.guards.map(u=>{let l=Ra(s.node)??n,f=Ma(u,l),p=eU(f)?f.canActivateChild(r,t):ve(l,()=>f(r,t));return oi(p).pipe(Hr())});return ee(a).pipe(Aa())}));return ee(o).pipe(Aa())}function dU(t,e,n,r,i){let o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||o.length===0)return ee(!0);let s=o.map(a=>{let u=Ra(e)??i,l=Ma(a,u),f=tU(l)?l.canDeactivate(t,e,n,r):ve(u,()=>l(t,e,n,r));return oi(f).pipe(Hr())});return ee(s).pipe(Aa())}function fU(t,e,n,r){let i=e.canLoad;if(i===void 0||i.length===0)return ee(!0);let o=i.map(s=>{let a=Ma(s,t),u=Zj(a)?a.canLoad(e,n):ve(t,()=>a(e,n));return oi(u)});return ee(o).pipe(Aa(),KA(r))}function KA(t){return Im(wt(e=>{if(typeof e!="boolean")throw Mh(t,e)}),fe(e=>e===!0))}function hU(t,e,n,r){let i=e.canMatch;if(!i||i.length===0)return ee(!0);let o=i.map(s=>{let a=Ma(s,t),u=nU(a)?a.canMatch(e,n):ve(t,()=>a(e,n));return oi(u)});return ee(o).pipe(Aa(),KA(r))}var $u=class{segmentGroup;constructor(e){this.segmentGroup=e||null}},Hu=class extends Error{urlTree;constructor(e){super(),this.urlTree=e}};function wa(t){return Xs(new $u(t))}function pU(t){return Xs(new B(4e3,!1))}function gU(t){return Xs(zA(!1,en.GuardRejected))}var k_=class{urlSerializer;urlTree;constructor(e,n){this.urlSerializer=e,this.urlTree=n}lineralizeSegments(e,n){let r=[],i=n.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return ee(r);if(i.numberOfChildren>1||!i.children[le])return pU(`${e.redirectTo}`);i=i.children[le]}}applyRedirectCommands(e,n,r,i,o){return mU(n,i,o).pipe(fe(s=>{if(s instanceof Rr)throw new Hu(s);let a=this.applyRedirectCreateUrlTree(s,this.urlSerializer.parse(s),e,r);if(s[0]==="/")throw new Hu(a);return a}))}applyRedirectCreateUrlTree(e,n,r,i){let o=this.createSegmentGroup(e,n.root,r,i);return new Rr(o,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(e,n){let r={};return Object.entries(e).forEach(([i,o])=>{if(typeof o=="string"&&o[0]===":"){let a=o.substring(1);r[i]=n[a]}else r[i]=o}),r}createSegmentGroup(e,n,r,i){let o=this.createSegments(e,n.segments,r,i),s={};return Object.entries(n.children).forEach(([a,u])=>{s[a]=this.createSegmentGroup(e,u,r,i)}),new Ce(o,s)}createSegments(e,n,r,i){return n.map(o=>o.path[0]===":"?this.findPosParam(e,o,i):this.findOrReturn(o,r))}findPosParam(e,n,r){let i=r[n.path.substring(1)];if(!i)throw new B(4001,!1);return i}findOrReturn(e,n){let r=0;for(let i of n){if(i.path===e.path)return n.splice(r),i;r++}return e}};function mU(t,e,n){if(typeof t=="string")return ee(t);let r=t,{queryParams:i,fragment:o,routeConfig:s,url:a,outlet:u,params:l,data:f,title:p}=e;return oi(ve(n,()=>r({params:l,data:f,queryParams:i,fragment:o,routeConfig:s,url:a,outlet:u,title:p})))}var O_={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function yU(t,e,n,r,i){let o=QA(t,e,n);return o.matched?(r=jj(e,r),hU(r,e,n,i).pipe(fe(s=>s===!0?o:j({},O_)))):ee(o)}function QA(t,e,n){if(e.path==="**")return vU(n);if(e.path==="")return e.pathMatch==="full"&&(t.hasChildren()||n.length>0)?j({},O_):{matched:!0,consumedSegments:[],remainingSegments:n,parameters:{},positionalParamSegments:{}};let i=(e.matcher||TA)(n,t,e);if(!i)return j({},O_);let o={};Object.entries(i.posParams??{}).forEach(([a,u])=>{o[a]=u.path});let s=i.consumed.length>0?j(j({},o),i.consumed[i.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:n.slice(i.consumed.length),parameters:s,positionalParamSegments:i.posParams??{}}}function vU(t){return{matched:!0,parameters:t.length>0?DA(t).parameters:{},consumedSegments:t,remainingSegments:[],positionalParamSegments:{}}}function wA(t,e,n,r){return n.length>0&&wU(t,n,r)?{segmentGroup:new Ce(e,EU(r,new Ce(n,t.children))),slicedSegments:[]}:n.length===0&&IU(t,n,r)?{segmentGroup:new Ce(t.segments,_U(t,n,r,t.children)),slicedSegments:n}:{segmentGroup:new Ce(t.segments,t.children),slicedSegments:n}}function _U(t,e,n,r){let i={};for(let o of n)if(Oh(t,e,o)&&!r[cr(o)]){let s=new Ce([],{});i[cr(o)]=s}return j(j({},r),i)}function EU(t,e){let n={};n[le]=e;for(let r of t)if(r.path===""&&cr(r)!==le){let i=new Ce([],{});n[cr(r)]=i}return n}function wU(t,e,n){return n.some(r=>Oh(t,e,r)&&cr(r)!==le)}function IU(t,e,n){return n.some(r=>Oh(t,e,r))}function Oh(t,e,n){return(t.hasChildren()||e.length>0)&&n.pathMatch==="full"?!1:n.path===""}function bU(t,e,n){return e.length===0&&!t.children[n]}var F_=class{};function TU(t,e,n,r,i,o,s="emptyOnly"){return new L_(t,e,n,r,i,s,o).recognize()}var CU=31,L_=class{injector;configLoader;rootComponentType;config;urlTree;paramsInheritanceStrategy;urlSerializer;applyRedirects;absoluteRedirectCount=0;allowRedirects=!0;constructor(e,n,r,i,o,s,a){this.injector=e,this.configLoader=n,this.rootComponentType=r,this.config=i,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.applyRedirects=new k_(this.urlSerializer,this.urlTree)}noMatchError(e){return new B(4002,`'${e.segmentGroup}'`)}recognize(){let e=wA(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(fe(({children:n,rootSnapshot:r})=>{let i=new In(r,n),o=new Uu("",i),s=OA(r,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),{state:o,tree:s}}))}match(e){let n=new ts([],Object.freeze({}),Object.freeze(j({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),le,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,le,n).pipe(fe(r=>({children:r,rootSnapshot:n})),Pi(r=>{if(r instanceof Hu)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof $u?this.noMatchError(r):r}))}processSegmentGroup(e,n,r,i,o){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,n,r,o):this.processSegment(e,n,r,r.segments,i,!0,o).pipe(fe(s=>s instanceof In?[s]:[]))}processChildren(e,n,r,i){let o=[];for(let s of Object.keys(r.children))s==="primary"?o.unshift(s):o.push(s);return Ze(o).pipe(xi(s=>{let a=r.children[s],u=Uj(n,s);return this.processSegmentGroup(e,u,a,s,i)}),km((s,a)=>(s.push(...a),s)),ki(null),xm(),mt(s=>{if(s===null)return wa(r);let a=YA(s);return DU(a),ee(a)}))}processSegment(e,n,r,i,o,s,a){return Ze(n).pipe(xi(u=>this.processSegmentAgainstRoute(u._injector??e,n,u,r,i,o,s,a).pipe(Pi(l=>{if(l instanceof $u)return ee(null);throw l}))),Hr(u=>!!u),Pi(u=>{if(WA(u))return bU(r,i,o)?ee(new F_):wa(r);throw u}))}processSegmentAgainstRoute(e,n,r,i,o,s,a,u){return cr(r)!==s&&(s===le||!Oh(i,o,r))?wa(i):r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,i,r,o,s,u):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,i,n,r,o,s,u):wa(i)}expandSegmentAgainstRouteUsingRedirect(e,n,r,i,o,s,a){let{matched:u,parameters:l,consumedSegments:f,positionalParamSegments:p,remainingSegments:g}=QA(n,i,o);if(!u)return wa(n);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>CU&&(this.allowRedirects=!1));let y=new ts(o,l,Object.freeze(j({},this.urlTree.queryParams)),this.urlTree.fragment,IA(i),cr(i),i.component??i._loadedComponent??null,i,bA(i)),D=Nh(y,a,this.paramsInheritanceStrategy);return y.params=Object.freeze(D.params),y.data=Object.freeze(D.data),this.applyRedirects.applyRedirectCommands(f,i.redirectTo,p,y,e).pipe(Bt(R=>this.applyRedirects.lineralizeSegments(i,R)),mt(R=>this.processSegment(e,r,n,R.concat(g),s,!1,a)))}matchSegmentAgainstRoute(e,n,r,i,o,s){let a=yU(n,r,i,e,this.urlSerializer);return r.path==="**"&&(n.children={}),a.pipe(Bt(u=>u.matched?(e=r._injector??e,this.getChildConfig(e,r,i).pipe(Bt(({routes:l})=>{let f=r._loadedInjector??e,{parameters:p,consumedSegments:g,remainingSegments:y}=u,D=new ts(g,p,Object.freeze(j({},this.urlTree.queryParams)),this.urlTree.fragment,IA(r),cr(r),r.component??r._loadedComponent??null,r,bA(r)),x=Nh(D,s,this.paramsInheritanceStrategy);D.params=Object.freeze(x.params),D.data=Object.freeze(x.data);let{segmentGroup:R,slicedSegments:O}=wA(n,g,y,l);if(O.length===0&&R.hasChildren())return this.processChildren(f,l,R,D).pipe(fe(Y=>new In(D,Y)));if(l.length===0&&O.length===0)return ee(new In(D,[]));let H=cr(r)===o;return this.processSegment(f,l,R,O,H?le:o,!0,D).pipe(fe(Y=>new In(D,Y instanceof In?[Y]:[])))}))):wa(n)))}getChildConfig(e,n,r){return n.children?ee({routes:n.children,injector:e}):n.loadChildren?n._loadedRoutes!==void 0?ee({routes:n._loadedRoutes,injector:n._loadedInjector}):fU(e,n,r,this.urlSerializer).pipe(mt(i=>i?this.configLoader.loadChildren(e,n).pipe(wt(o=>{n._loadedRoutes=o.routes,n._loadedInjector=o.injector})):gU(n))):ee({routes:[],injector:e})}};function DU(t){t.sort((e,n)=>e.value.outlet===le?-1:n.value.outlet===le?1:e.value.outlet.localeCompare(n.value.outlet))}function SU(t){let e=t.value.routeConfig;return e&&e.path===""}function YA(t){let e=[],n=new Set;for(let r of t){if(!SU(r)){e.push(r);continue}let i=e.find(o=>r.value.routeConfig===o.value.routeConfig);i!==void 0?(i.children.push(...r.children),n.add(i)):e.push(r)}for(let r of n){let i=YA(r.children);e.push(new In(r.value,i))}return e.filter(r=>!n.has(r))}function IA(t){return t.data||{}}function bA(t){return t.resolve||{}}function AU(t,e,n,r,i,o){return mt(s=>TU(t,e,n,r,s.extractedUrl,i,o).pipe(fe(({state:a,tree:u})=>X(j({},s),{targetSnapshot:a,urlAfterRedirects:u}))))}function RU(t,e){return mt(n=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=n;if(!i.length)return ee(n);let o=new Set(i.map(u=>u.route)),s=new Set;for(let u of o)if(!s.has(u))for(let l of JA(u))s.add(l);let a=0;return Ze(s).pipe(xi(u=>o.has(u)?NU(u,r,t,e):(u.data=Nh(u,u.parent,t).resolve,ee(void 0))),wt(()=>a++),ta(1),mt(u=>a===s.size?ee(n):nn))})}function JA(t){let e=t.children.map(n=>JA(n)).flat();return[t,...e]}function NU(t,e,n,r){let i=t.routeConfig,o=t._resolve;return i?.title!==void 0&&!$A(i)&&(o[qu]=i.title),Lc(()=>(t.data=Nh(t,t.parent,n).resolve,MU(o,t,e,r).pipe(fe(s=>(t._resolvedData=s,t.data=j(j({},t.data),s),null)))))}function MU(t,e,n,r){let i=C_(t);if(i.length===0)return ee({});let o={};return Ze(i).pipe(mt(s=>PU(t[s],e,n,r).pipe(Hr(),wt(a=>{if(a instanceof Sa)throw Mh(new rs,a);o[s]=a}))),ta(1),fe(()=>o),Pi(s=>WA(s)?nn:Xs(s)))}function PU(t,e,n,r){let i=Ra(e)??r,o=Ma(t,i),s=o.resolve?o.resolve(e,n):ve(i,()=>o(e,n));return oi(s)}function b_(t){return Bt(e=>{let n=t(e);return n?Ze(n).pipe(fe(()=>e)):ee(e)})}var B_=(()=>{class t{buildTitle(n){let r,i=n.root;for(;i!==void 0;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(o=>o.outlet===le);return r}getResolvedTitleForRoute(n){return n.data[qu]}static \u0275fac=function(r){return new(r||t)};static \u0275prov=G({token:t,factory:()=>A(ZA),providedIn:"root"})}return t})(),ZA=(()=>{class t extends B_{title;constructor(n){super(),this.title=n}updateTitle(n){let r=this.buildTitle(n);r!==void 0&&this.title.setTitle(r)}static \u0275fac=function(r){return new(r||t)(K(mA))};static \u0275prov=G({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),Pa=new q("",{providedIn:"root",factory:()=>({})}),Wu=new q(""),XA=(()=>{class t{componentLoaders=new WeakMap;childrenLoaders=new WeakMap;onLoadStartListener;onLoadEndListener;compiler=A(Hv);loadComponent(n,r){if(this.componentLoaders.get(r))return this.componentLoaders.get(r);if(r._loadedComponent)return ee(r._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(r);let i=oi(ve(n,()=>r.loadComponent())).pipe(fe(tR),Bt(nR),wt(s=>{this.onLoadEndListener&&this.onLoadEndListener(r),r._loadedComponent=s}),Oi(()=>{this.componentLoaders.delete(r)})),o=new Qs(i,()=>new at).pipe(Ks());return this.componentLoaders.set(r,o),o}loadChildren(n,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return ee({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let o=eR(r,this.compiler,n,this.onLoadEndListener).pipe(Oi(()=>{this.childrenLoaders.delete(r)})),s=new Qs(o,()=>new at).pipe(Ks());return this.childrenLoaders.set(r,s),s}static \u0275fac=function(r){return new(r||t)};static \u0275prov=G({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function eR(t,e,n,r){return oi(ve(n,()=>t.loadChildren())).pipe(fe(tR),Bt(nR),mt(i=>i instanceof Vf||Array.isArray(i)?ee(i):Ze(e.compileModuleAsync(i))),fe(i=>{r&&r(t);let o,s,a=!1;return Array.isArray(i)?(s=i,a=!0):(o=i.create(n).injector,s=o.get(Wu,[],{optional:!0,self:!0}).flat()),{routes:s.map(U_),injector:o}}))}function xU(t){return t&&typeof t=="object"&&"default"in t}function tR(t){return xU(t)?t.default:t}function nR(t){return ee(t)}var Fh=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275prov=G({token:t,factory:()=>A(kU),providedIn:"root"})}return t})(),kU=(()=>{class t{shouldProcessUrl(n){return!0}extract(n){return n}merge(n,r){return n}static \u0275fac=function(r){return new(r||t)};static \u0275prov=G({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),rR=new q("");var iR=new q(""),oR=(()=>{class t{currentNavigation=It(null,{equal:()=>!1});currentTransition=null;lastSuccessfulNavigation=null;events=new at;transitionAbortWithErrorSubject=new at;configLoader=A(XA);environmentInjector=A(Xe);destroyRef=A(er);urlSerializer=A(zu);rootContexts=A(Na);location=A(Yo);inputBindingEnabled=A(kh,{optional:!0})!==null;titleStrategy=A(B_);options=A(Pa,{optional:!0})||{};paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly";urlHandlingStrategy=A(Fh);createViewTransition=A(rR,{optional:!0});navigationErrorHandler=A(iR,{optional:!0});navigationId=0;get hasRequestedNavigation(){return this.navigationId!==0}transitions;afterPreactivation=()=>ee(void 0);rootComponentType=null;destroyed=!1;constructor(){let n=i=>this.events.next(new Ih(i)),r=i=>this.events.next(new bh(i));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=n,this.destroyRef.onDestroy(()=>{this.destroyed=!0})}complete(){this.transitions?.complete()}handleNavigationRequest(n){let r=++this.navigationId;Tt(()=>{this.transitions?.next(X(j({},n),{extractedUrl:this.urlHandlingStrategy.extract(n.rawUrl),targetSnapshot:null,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null,abortController:new AbortController,id:r}))})}setupNavigations(n){return this.transitions=new Rt(null),this.transitions.pipe(on(r=>r!==null),Bt(r=>{let i=!1;return ee(r).pipe(Bt(o=>{if(this.navigationId>r.id)return this.cancelNavigationTransition(r,"",en.SupersededByNewNavigation),nn;this.currentTransition=r,this.currentNavigation.set({id:o.id,initialUrl:o.rawUrl,extractedUrl:o.extractedUrl,targetBrowserUrl:typeof o.extras.browserUrl=="string"?this.urlSerializer.parse(o.extras.browserUrl):o.extras.browserUrl,trigger:o.source,extras:o.extras,previousNavigation:this.lastSuccessfulNavigation?X(j({},this.lastSuccessfulNavigation),{previousNavigation:null}):null,abort:()=>o.abortController.abort()});let s=!n.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),a=o.extras.onSameUrlNavigation??n.onSameUrlNavigation;if(!s&&a!=="reload")return this.events.next(new ii(o.id,this.urlSerializer.serialize(o.rawUrl),"",Fu.IgnoredSameUrlNavigation)),o.resolve(!1),nn;if(this.urlHandlingStrategy.shouldProcessUrl(o.rawUrl))return ee(o).pipe(Bt(u=>(this.events.next(new is(u.id,this.urlSerializer.serialize(u.extractedUrl),u.source,u.restoredState)),u.id!==this.navigationId?nn:Promise.resolve(u))),AU(this.environmentInjector,this.configLoader,this.rootComponentType,n.config,this.urlSerializer,this.paramsInheritanceStrategy),wt(u=>{r.targetSnapshot=u.targetSnapshot,r.urlAfterRedirects=u.urlAfterRedirects,this.currentNavigation.update(f=>(f.finalUrl=u.urlAfterRedirects,f));let l=new Lu(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(l)}));if(s&&this.urlHandlingStrategy.shouldProcessUrl(o.currentRawUrl)){let{id:u,extractedUrl:l,source:f,restoredState:p,extras:g}=o,y=new is(u,this.urlSerializer.serialize(l),f,p);this.events.next(y);let D=UA(this.rootComponentType).snapshot;return this.currentTransition=r=X(j({},o),{targetSnapshot:D,urlAfterRedirects:l,extras:X(j({},g),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.update(x=>(x.finalUrl=l,x)),ee(r)}else return this.events.next(new ii(o.id,this.urlSerializer.serialize(o.extractedUrl),"",Fu.IgnoredByUrlHandlingStrategy)),o.resolve(!1),nn}),wt(o=>{let s=new vh(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot);this.events.next(s)}),fe(o=>(this.currentTransition=r=X(j({},o),{guards:Wj(o.targetSnapshot,o.currentSnapshot,this.rootContexts)}),r)),iU(this.environmentInjector,o=>this.events.next(o)),wt(o=>{if(r.guardsResult=o.guardsResult,o.guardsResult&&typeof o.guardsResult!="boolean")throw Mh(this.urlSerializer,o.guardsResult);let s=new _h(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot,!!o.guardsResult);this.events.next(s)}),on(o=>o.guardsResult?!0:(this.cancelNavigationTransition(o,"",en.GuardRejected),!1)),b_(o=>{if(o.guards.canActivateChecks.length!==0)return ee(o).pipe(wt(s=>{let a=new Eh(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot);this.events.next(a)}),Bt(s=>{let a=!1;return ee(s).pipe(RU(this.paramsInheritanceStrategy,this.environmentInjector),wt({next:()=>a=!0,complete:()=>{a||this.cancelNavigationTransition(s,"",en.NoDataFromResolver)}}))}),wt(s=>{let a=new wh(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot);this.events.next(a)}))}),b_(o=>{let s=a=>{let u=[];if(a.routeConfig?.loadComponent){let l=Ra(a)??this.environmentInjector;u.push(this.configLoader.loadComponent(l,a.routeConfig).pipe(wt(f=>{a.component=f}),fe(()=>{})))}for(let l of a.children)u.push(...s(l));return u};return xd(s(o.targetSnapshot.root)).pipe(ki(null),$r(1))}),b_(()=>this.afterPreactivation()),Bt(()=>{let{currentSnapshot:o,targetSnapshot:s}=r,a=this.createViewTransition?.(this.environmentInjector,o.root,s.root);return a?Ze(a).pipe(fe(()=>r)):ee(r)}),fe(o=>{let s=$j(n.routeReuseStrategy,o.targetSnapshot,o.currentRouterState);return this.currentTransition=r=X(j({},o),{targetRouterState:s}),this.currentNavigation.update(a=>(a.targetRouterState=s,a)),r}),wt(()=>{this.events.next(new Vu)}),Gj(this.rootContexts,n.routeReuseStrategy,o=>this.events.next(o),this.inputBindingEnabled),$r(1),Od(new ce(o=>{let s=r.abortController.signal,a=()=>o.next();return s.addEventListener("abort",a),()=>s.removeEventListener("abort",a)}).pipe(on(()=>!i&&!r.targetRouterState),wt(()=>{this.cancelNavigationTransition(r,r.abortController.signal.reason+"",en.Aborted)}))),wt({next:o=>{i=!0,this.lastSuccessfulNavigation=Tt(this.currentNavigation),this.events.next(new Nr(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects))),this.titleStrategy?.updateTitle(o.targetRouterState.snapshot),o.resolve(!0)},complete:()=>{i=!0}}),Od(this.transitionAbortWithErrorSubject.pipe(wt(o=>{throw o}))),Oi(()=>{i||this.cancelNavigationTransition(r,"",en.SupersededByNewNavigation),this.currentTransition?.id===r.id&&(this.currentNavigation.set(null),this.currentTransition=null)}),Pi(o=>{if(this.destroyed)return r.resolve(!1),nn;if(i=!0,GA(o))this.events.next(new Ar(r.id,this.urlSerializer.serialize(r.extractedUrl),o.message,o.cancellationCode)),zj(o)?this.events.next(new Da(o.url,o.navigationBehaviorOptions)):r.resolve(!1);else{let s=new Ca(r.id,this.urlSerializer.serialize(r.extractedUrl),o,r.targetSnapshot??void 0);try{let a=ve(this.environmentInjector,()=>this.navigationErrorHandler?.(s));if(a instanceof Sa){let{message:u,cancellationCode:l}=Mh(this.urlSerializer,a);this.events.next(new Ar(r.id,this.urlSerializer.serialize(r.extractedUrl),u,l)),this.events.next(new Da(a.redirectTo,a.navigationBehaviorOptions))}else throw this.events.next(s),o}catch(a){this.options.resolveNavigationPromiseOnError?r.resolve(!1):r.reject(a)}}return nn}))}))}cancelNavigationTransition(n,r,i){let o=new Ar(n.id,this.urlSerializer.serialize(n.extractedUrl),r,i);this.events.next(o),n.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let n=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=Tt(this.currentNavigation),i=r?.targetBrowserUrl??r?.extractedUrl;return n.toString()!==i?.toString()&&!r?.extras.skipLocationChange}static \u0275fac=function(r){return new(r||t)};static \u0275prov=G({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function OU(t){return t!==xu}var sR=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275prov=G({token:t,factory:()=>A(FU),providedIn:"root"})}return t})(),xh=class{shouldDetach(e){return!1}store(e,n){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,n){return e.routeConfig===n.routeConfig}},FU=(()=>{class t extends xh{static \u0275fac=(()=>{let n;return function(i){return(n||(n=br(t)))(i||t)}})();static \u0275prov=G({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),aR=(()=>{class t{urlSerializer=A(zu);options=A(Pa,{optional:!0})||{};canceledNavigationResolution=this.options.canceledNavigationResolution||"replace";location=A(Yo);urlHandlingStrategy=A(Fh);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";currentUrlTree=new Rr;getCurrentUrlTree(){return this.currentUrlTree}rawUrlTree=this.currentUrlTree;getRawUrlTree(){return this.rawUrlTree}createBrowserPath({finalUrl:n,initialUrl:r,targetBrowserUrl:i}){let o=n!==void 0?this.urlHandlingStrategy.merge(n,r):r,s=i??o;return s instanceof Rr?this.urlSerializer.serialize(s):s}commitTransition({targetRouterState:n,finalUrl:r,initialUrl:i}){r&&n?(this.currentUrlTree=r,this.rawUrlTree=this.urlHandlingStrategy.merge(r,i),this.routerState=n):this.rawUrlTree=i}routerState=UA(null);getRouterState(){return this.routerState}stateMemento=this.createStateMemento();updateStateMemento(){this.stateMemento=this.createStateMemento()}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}resetInternalState({finalUrl:n}){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n??this.rawUrlTree)}static \u0275fac=function(r){return new(r||t)};static \u0275prov=G({token:t,factory:()=>A(LU),providedIn:"root"})}return t})(),LU=(()=>{class t extends aR{currentPageId=0;lastSuccessfulId=-1;restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}registerNonRouterCurrentEntryChangeListener(n){return this.location.subscribe(r=>{r.type==="popstate"&&setTimeout(()=>{n(r.url,r.state,"popstate")})})}handleRouterEvent(n,r){n instanceof is?this.updateStateMemento():n instanceof ii?this.commitTransition(r):n instanceof Lu?this.urlUpdateStrategy==="eager"&&(r.extras.skipLocationChange||this.setBrowserUrl(this.createBrowserPath(r),r)):n instanceof Vu?(this.commitTransition(r),this.urlUpdateStrategy==="deferred"&&!r.extras.skipLocationChange&&this.setBrowserUrl(this.createBrowserPath(r),r)):n instanceof Ar&&n.code!==en.SupersededByNewNavigation&&n.code!==en.Redirect?this.restoreHistory(r):n instanceof Ca?this.restoreHistory(r,!0):n instanceof Nr&&(this.lastSuccessfulId=n.id,this.currentPageId=this.browserPageId)}setBrowserUrl(n,{extras:r,id:i}){let{replaceUrl:o,state:s}=r;if(this.location.isCurrentPathEqualTo(n)||o){let a=this.browserPageId,u=j(j({},s),this.generateNgRouterState(i,a));this.location.replaceState(n,"",u)}else{let a=j(j({},s),this.generateNgRouterState(i,this.browserPageId+1));this.location.go(n,"",a)}}restoreHistory(n,r=!1){if(this.canceledNavigationResolution==="computed"){let i=this.browserPageId,o=this.currentPageId-i;o!==0?this.location.historyGo(o):this.getCurrentUrlTree()===n.finalUrl&&o===0&&(this.resetInternalState(n),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetInternalState(n),this.resetUrlToCurrentUrlTree())}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.getRawUrlTree()),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(n,r){return this.canceledNavigationResolution==="computed"?{navigationId:n,\u0275routerPageId:r}:{navigationId:n}}static \u0275fac=(()=>{let n;return function(i){return(n||(n=br(t)))(i||t)}})();static \u0275prov=G({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function $_(t,e){t.events.pipe(on(n=>n instanceof Nr||n instanceof Ar||n instanceof Ca||n instanceof ii),fe(n=>n instanceof Nr||n instanceof ii?0:(n instanceof Ar?n.code===en.Redirect||n.code===en.SupersededByNewNavigation:!1)?2:1),on(n=>n!==2),$r(1)).subscribe(()=>{e()})}var VU={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},jU={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},lr=(()=>{class t{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}disposed=!1;nonRouterCurrentEntryChangeSubscription;console=A(Lv);stateManager=A(aR);options=A(Pa,{optional:!0})||{};pendingTasks=A(Er);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";navigationTransitions=A(oR);urlSerializer=A(zu);location=A(Yo);urlHandlingStrategy=A(Fh);injector=A(Xe);_events=new at;get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}navigated=!1;routeReuseStrategy=A(sR);onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore";config=A(Wu,{optional:!0})?.flat()??[];componentInputBindingEnabled=!!A(kh,{optional:!0});currentNavigation=this.navigationTransitions.currentNavigation.asReadonly();constructor(){this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this).subscribe({error:n=>{this.console.warn(n)}}),this.subscribeToNavigationEvents()}eventsSubscription=new Je;subscribeToNavigationEvents(){let n=this.navigationTransitions.events.subscribe(r=>{try{let i=this.navigationTransitions.currentTransition,o=Tt(this.navigationTransitions.currentNavigation);if(i!==null&&o!==null){if(this.stateManager.handleRouterEvent(r,o),r instanceof Ar&&r.code!==en.Redirect&&r.code!==en.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof Nr)this.navigated=!0;else if(r instanceof Da){let s=r.navigationBehaviorOptions,a=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),u=j({browserUrl:i.extras.browserUrl,info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:i.extras.replaceUrl||this.urlUpdateStrategy==="eager"||OU(i.source)},s);this.scheduleNavigation(a,xu,null,u,{resolve:i.resolve,reject:i.reject,promise:i.promise})}}Vj(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortWithErrorSubject.next(i)}});this.eventsSubscription.add(n)}resetRootComponentType(n){this.routerState.root.component=n,this.navigationTransitions.rootComponentType=n}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),xu,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((n,r,i)=>{this.navigateToSyncWithBrowser(n,i,r)})}navigateToSyncWithBrowser(n,r,i){let o={replaceUrl:!0},s=i?.navigationId?i:null;if(i){let u=j({},i);delete u.navigationId,delete u.\u0275routerPageId,Object.keys(u).length!==0&&(o.state=u)}let a=this.parseUrl(n);this.scheduleNavigation(a,r,s,o).catch(u=>{this.disposed||this.injector.get(cn)(u)})}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return Tt(this.navigationTransitions.currentNavigation)}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(n){this.config=n.map(U_),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this._events.unsubscribe(),this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(n,r={}){let{relativeTo:i,queryParams:o,fragment:s,queryParamsHandling:a,preserveFragment:u}=r,l=u?this.currentUrlTree.fragment:s,f=null;switch(a??this.options.defaultQueryParamsHandling){case"merge":f=j(j({},this.currentUrlTree.queryParams),o);break;case"preserve":f=this.currentUrlTree.queryParams;break;default:f=o||null}f!==null&&(f=this.removeEmptyProps(f));let p;try{let g=i?i.snapshot:this.routerState.snapshot.root;p=FA(g)}catch{(typeof n[0]!="string"||n[0][0]!=="/")&&(n=[]),p=this.currentUrlTree.root}return LA(p,n,f,l??null)}navigateByUrl(n,r={skipLocationChange:!1}){let i=Qi(n)?n:this.parseUrl(n),o=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(o,xu,null,r)}navigate(n,r={skipLocationChange:!1}){return UU(n),this.navigateByUrl(this.createUrlTree(n,r),r)}serializeUrl(n){return this.urlSerializer.serialize(n)}parseUrl(n){try{return this.urlSerializer.parse(n)}catch{return this.urlSerializer.parse("/")}}isActive(n,r){let i;if(r===!0?i=j({},VU):r===!1?i=j({},jU):i=r,Qi(n))return yA(this.currentUrlTree,n,i);let o=this.parseUrl(n);return yA(this.currentUrlTree,o,i)}removeEmptyProps(n){return Object.entries(n).reduce((r,[i,o])=>(o!=null&&(r[i]=o),r),{})}scheduleNavigation(n,r,i,o,s){if(this.disposed)return Promise.resolve(!1);let a,u,l;s?(a=s.resolve,u=s.reject,l=s.promise):l=new Promise((p,g)=>{a=p,u=g});let f=this.pendingTasks.add();return $_(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(f))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:n,extras:o,resolve:a,reject:u,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(p=>Promise.reject(p))}static \u0275fac=function(r){return new(r||t)};static \u0275prov=G({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function UU(t){for(let e=0;e<t.length;e++)if(t[e]==null)throw new B(4008,!1)}var Lh=(()=>{class t{router;route;tabIndexAttribute;renderer;el;locationStrategy;reactiveHref=It(null);get href(){return Tt(this.reactiveHref)}set href(n){this.reactiveHref.set(n)}target;queryParams;fragment;queryParamsHandling;state;info;relativeTo;isAnchorElement;subscription;onChanges=new at;applicationErrorHandler=A(cn);options=A(Pa,{optional:!0});constructor(n,r,i,o,s,a){this.router=n,this.route=r,this.tabIndexAttribute=i,this.renderer=o,this.el=s,this.locationStrategy=a,this.reactiveHref.set(A(new qf("href"),{optional:!0}));let u=s.nativeElement.tagName?.toLowerCase();this.isAnchorElement=u==="a"||u==="area"||!!(typeof customElements=="object"&&customElements.get(u)?.observedAttributes?.includes?.("href")),this.isAnchorElement?this.setTabIndexIfNotOnNativeEl("0"):this.subscribeToNavigationEventsIfNecessary()}subscribeToNavigationEventsIfNecessary(){if(this.subscription!==void 0||!this.isAnchorElement)return;let n=this.preserveFragment,r=i=>i==="merge"||i==="preserve";n||=r(this.queryParamsHandling),n||=!this.queryParamsHandling&&!r(this.options?.defaultQueryParamsHandling),n&&(this.subscription=this.router.events.subscribe(i=>{i instanceof Nr&&this.updateHref()}))}preserveFragment=!1;skipLocationChange=!1;replaceUrl=!1;setTabIndexIfNotOnNativeEl(n){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",n)}ngOnChanges(n){this.isAnchorElement&&(this.updateHref(),this.subscribeToNavigationEventsIfNecessary()),this.onChanges.next(this)}routerLinkInput=null;set routerLink(n){n==null?(this.routerLinkInput=null,this.setTabIndexIfNotOnNativeEl(null)):(Qi(n)?this.routerLinkInput=n:this.routerLinkInput=Array.isArray(n)?n:[n],this.setTabIndexIfNotOnNativeEl("0"))}onClick(n,r,i,o,s){let a=this.urlTree;if(a===null||this.isAnchorElement&&(n!==0||r||i||o||s||typeof this.target=="string"&&this.target!="_self"))return!0;let u={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(a,u)?.catch(l=>{this.applicationErrorHandler(l)}),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){let n=this.urlTree;this.reactiveHref.set(n!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(n))??"":null)}applyAttributeValue(n,r){let i=this.renderer,o=this.el.nativeElement;r!==null?i.setAttribute(o,n,r):i.removeAttribute(o,n)}get urlTree(){return this.routerLinkInput===null?null:Qi(this.routerLinkInput)?this.routerLinkInput:this.router.createUrlTree(this.routerLinkInput,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static \u0275fac=function(r){return new(r||t)(ne(lr),ne(ur),cu("tabindex"),ne(Jr),ne(Tr),ne(Cr))};static \u0275dir=ze({type:t,selectors:[["","routerLink",""]],hostVars:2,hostBindings:function(r,i){r&1&&W("click",function(s){return i.onClick(s.button,s.ctrlKey,s.shiftKey,s.altKey,s.metaKey)}),r&2&&Wo("href",i.reactiveHref(),vv)("target",i.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[2,"preserveFragment","preserveFragment",Qo],skipLocationChange:[2,"skipLocationChange","skipLocationChange",Qo],replaceUrl:[2,"replaceUrl","replaceUrl",Qo],routerLink:"routerLink"},features:[Yr]})}return t})();var $U=new q("");function H_(t,...e){return Mn([{provide:Wu,multi:!0,useValue:t},[],{provide:ur,useFactory:HU,deps:[lr]},{provide:Bf,multi:!0,useFactory:zU},e.map(n=>n.\u0275providers)])}function HU(t){return t.routerState.root}function qU(t,e){return{\u0275kind:t,\u0275providers:e}}function zU(){let t=A(Ae);return e=>{let n=t.get(Zr);if(e!==n.components[0])return;let r=t.get(lr),i=t.get(GU);t.get(WU)===1&&r.initialNavigation(),t.get(KU,null,{optional:!0})?.setUpPreloading(),t.get($U,null,{optional:!0})?.init(),r.resetRootComponentType(n.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var GU=new q("",{factory:()=>new at}),WU=new q("",{providedIn:"root",factory:()=>1});var KU=new q("");function q_(){return qU(6,[{provide:Cr,useClass:n_}])}var cR=()=>{};var dR=function(t){let e=[],n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},YU=function(t){let e=[],n=0,r=0;for(;n<t.length;){let i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let o=t[n++];e[r++]=String.fromCharCode((i&31)<<6|o&63)}else if(i>239&&i<365){let o=t[n++],s=t[n++],a=t[n++],u=((i&7)<<18|(o&63)<<12|(s&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{let o=t[n++],s=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(o&63)<<6|s&63)}}return e.join("")},Vh={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();let n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){let o=t[i],s=i+1<t.length,a=s?t[i+1]:0,u=i+2<t.length,l=u?t[i+2]:0,f=o>>2,p=(o&3)<<4|a>>4,g=(a&15)<<2|l>>6,y=l&63;u||(y=64,s||(g=64)),r.push(n[f],n[p],n[g],n[y])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(dR(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):YU(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();let n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){let o=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;let l=i<t.length?n[t.charAt(i)]:64;++i;let p=i<t.length?n[t.charAt(i)]:64;if(++i,o==null||a==null||l==null||p==null)throw new G_;let g=o<<2|a>>4;if(r.push(g),l!==64){let y=a<<4&240|l>>2;if(r.push(y),p!==64){let D=l<<6&192|p;r.push(D)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},G_=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},JU=function(t){let e=dR(t);return Vh.encodeByteArray(e,!0)},Qu=function(t){return JU(t).replace(/\./g,"")},jh=function(t){try{return Vh.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function K_(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var ZU=()=>K_().__FIREBASE_DEFAULTS__,XU=()=>{if(typeof process>"u"||typeof process.env>"u")return;let t=process.env.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},eB=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=t&&jh(t[1]);return e&&JSON.parse(e)},Uh=()=>{try{return cR()||ZU()||XU()||eB()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},fR=t=>{var e,n;return(n=(e=Uh())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},hR=t=>{let e=fR(t);if(!e)return;let n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},Q_=()=>{var t;return(t=Uh())===null||t===void 0?void 0:t.config},pR=t=>{var e;return(e=Uh())===null||e===void 0?void 0:e[`_${t}`]};var ss=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}};function as(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}function Y_(t){return v(this,null,function*(){return(yield fetch(t,{credentials:"include"})).ok})}function gR(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,o=t.sub||t.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let s=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Qu(JSON.stringify(n)),Qu(JSON.stringify(s)),""].join(".")}var Ku={};function tB(){let t={prod:[],emulator:[]};for(let e of Object.keys(Ku))Ku[e]?t.emulator.push(e):t.prod.push(e);return t}function nB(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}var uR=!1;function J_(t,e){if(typeof window>"u"||typeof document>"u"||!as(window.location.host)||Ku[t]===e||Ku[t]||uR)return;Ku[t]=e;function n(g){return`__firebase__banner__${g}`}let r="__firebase__banner",o=tB().prod.length>0;function s(){let g=document.getElementById(r);g&&g.remove()}function a(g){g.style.display="flex",g.style.background="#7faaf0",g.style.position="fixed",g.style.bottom="5px",g.style.left="5px",g.style.padding=".5em",g.style.borderRadius="5px",g.style.alignItems="center"}function u(g,y){g.setAttribute("width","24"),g.setAttribute("id",y),g.setAttribute("height","24"),g.setAttribute("viewBox","0 0 24 24"),g.setAttribute("fill","none"),g.style.marginLeft="-6px"}function l(){let g=document.createElement("span");return g.style.cursor="pointer",g.style.marginLeft="16px",g.style.fontSize="24px",g.innerHTML=" &times;",g.onclick=()=>{uR=!0,s()},g}function f(g,y){g.setAttribute("id",y),g.innerText="Learn more",g.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",g.setAttribute("target","__blank"),g.style.paddingLeft="5px",g.style.textDecoration="underline"}function p(){let g=nB(r),y=n("text"),D=document.getElementById(y)||document.createElement("span"),x=n("learnmore"),R=document.getElementById(x)||document.createElement("a"),O=n("preprendIcon"),H=document.getElementById(O)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(g.created){let Y=g.element;a(Y),f(R,x);let re=l();u(H,O),Y.append(H,D,R,re),document.body.appendChild(Y)}o?(D.innerText="Preview backend disconnected.",H.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(H.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,D.innerText="Preview backend running in this workspace."),D.setAttribute("id",y)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",p):p()}function Tn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function mR(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Tn())}function rB(){var t;let e=(t=Uh())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function yR(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function vR(){let t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function _R(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function ER(){return!rB()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function cs(){try{return typeof indexedDB=="object"}catch{return!1}}function Bh(){return new Promise((t,e)=>{try{let n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var o;e(((o=i.error)===null||o===void 0?void 0:o.message)||"")}}catch(n){e(n)}})}function wR(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}var iB="FirebaseError",fn=class t extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=iB,Object.setPrototypeOf(this,t.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,tn.prototype.create)}},tn=class{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){let r=n[0]||{},i=`${this.service}/${e}`,o=this.errors[e],s=o?oB(o,r):"Error",a=`${this.serviceName}: ${s} (${i}).`;return new fn(i,a,r)}};function oB(t,e){return t.replace(sB,(n,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var sB=/\{\$([^}]+)}/g;function Yi(t,e){if(t===e)return!0;let n=Object.keys(t),r=Object.keys(e);for(let i of n){if(!r.includes(i))return!1;let o=t[i],s=e[i];if(lR(o)&&lR(s)){if(!Yi(o,s))return!1}else if(o!==s)return!1}for(let i of r)if(!n.includes(i))return!1;return!0}function lR(t){return t!==null&&typeof t=="object"}function Z_(t){let e=[];for(let[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function IR(t,e){let n=new W_(t,e);return n.subscribe.bind(n)}var W_=class{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");aB(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=z_),i.error===void 0&&(i.error=z_),i.complete===void 0&&(i.complete=z_);let o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function aB(t,e){if(typeof t!="object"||t===null)return!1;for(let n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function z_(){}var bse=14400*1e3;function ot(t){return t&&t._delegate?t._delegate:t}var st=class{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var us="[DEFAULT]";var X_=class{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){let r=new ss;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;let r=this.normalizeInstanceIdentifier(e?.identifier),i=(n=e?.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(o){if(i)return null;throw o}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(uB(e))try{this.getOrInitializeService({instanceIdentifier:us})}catch{}for(let[n,r]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(n);try{let o=this.getOrInitializeService({instanceIdentifier:i});r.resolve(o)}catch{}}}}clearInstance(e=us){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){return v(this,null,function*(){let e=Array.from(this.instances.values());yield Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])})}isComponentSet(){return this.component!=null}isInitialized(e=us){return this.instances.has(e)}getOptions(e=us){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(let[o,s]of this.instancesDeferred.entries()){let a=this.normalizeInstanceIdentifier(o);r===a&&s.resolve(i)}return i}onInit(e,n){var r;let i=this.normalizeInstanceIdentifier(n),o=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;o.add(e),this.onInitCallbacks.set(i,o);let s=this.instances.get(i);return s&&e(s,i),()=>{o.delete(e)}}invokeOnInitCallbacks(e,n){let r=this.onInitCallbacks.get(n);if(r)for(let i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:cB(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=us){return this.component?this.component.multipleInstances?e:us:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function cB(t){return t===us?void 0:t}function uB(t){return t.instantiationMode==="EAGER"}var $h=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let n=new X_(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}};var lB=[],me=(function(t){return t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT",t})(me||{}),dB={debug:me.DEBUG,verbose:me.VERBOSE,info:me.INFO,warn:me.WARN,error:me.ERROR,silent:me.SILENT},fB=me.INFO,hB={[me.DEBUG]:"log",[me.VERBOSE]:"log",[me.INFO]:"info",[me.WARN]:"warn",[me.ERROR]:"error"},pB=(t,e,...n)=>{if(e<t.logLevel)return;let r=new Date().toISOString(),i=hB[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},Mr=class{constructor(e){this.name=e,this._logLevel=fB,this._logHandler=pB,this._userLogHandler=null,lB.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in me))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?dB[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,me.DEBUG,...e),this._logHandler(this,me.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,me.VERBOSE,...e),this._logHandler(this,me.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,me.INFO,...e),this._logHandler(this,me.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,me.WARN,...e),this._logHandler(this,me.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,me.ERROR,...e),this._logHandler(this,me.ERROR,...e)}};var gB=(t,e)=>e.some(n=>t instanceof n),bR,TR;function mB(){return bR||(bR=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function yB(){return TR||(TR=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var CR=new WeakMap,tE=new WeakMap,DR=new WeakMap,eE=new WeakMap,rE=new WeakMap;function vB(t){let e=new Promise((n,r)=>{let i=()=>{t.removeEventListener("success",o),t.removeEventListener("error",s)},o=()=>{n(dr(t.result)),i()},s=()=>{r(t.error),i()};t.addEventListener("success",o),t.addEventListener("error",s)});return e.then(n=>{n instanceof IDBCursor&&CR.set(n,t)}).catch(()=>{}),rE.set(e,t),e}function _B(t){if(tE.has(t))return;let e=new Promise((n,r)=>{let i=()=>{t.removeEventListener("complete",o),t.removeEventListener("error",s),t.removeEventListener("abort",s)},o=()=>{n(),i()},s=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",o),t.addEventListener("error",s),t.addEventListener("abort",s)});tE.set(t,e)}var nE={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return tE.get(t);if(e==="objectStoreNames")return t.objectStoreNames||DR.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return dr(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function SR(t){nE=t(nE)}function EB(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){let r=t.call(Hh(this),e,...n);return DR.set(r,e.sort?e.sort():[e]),dr(r)}:yB().includes(t)?function(...e){return t.apply(Hh(this),e),dr(CR.get(this))}:function(...e){return dr(t.apply(Hh(this),e))}}function wB(t){return typeof t=="function"?EB(t):(t instanceof IDBTransaction&&_B(t),gB(t,mB())?new Proxy(t,nE):t)}function dr(t){if(t instanceof IDBRequest)return vB(t);if(eE.has(t))return eE.get(t);let e=wB(t);return e!==t&&(eE.set(t,e),rE.set(e,t)),e}var Hh=t=>rE.get(t);function ls(t,e,{blocked:n,upgrade:r,blocking:i,terminated:o}={}){let s=indexedDB.open(t,e),a=dr(s);return r&&s.addEventListener("upgradeneeded",u=>{r(dr(s.result),u.oldVersion,u.newVersion,dr(s.transaction),u)}),n&&s.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),a.then(u=>{o&&u.addEventListener("close",()=>o()),i&&u.addEventListener("versionchange",l=>i(l.oldVersion,l.newVersion,l))}).catch(()=>{}),a}function qh(t,{blocked:e}={}){let n=indexedDB.deleteDatabase(t);return e&&n.addEventListener("blocked",r=>e(r.oldVersion,r)),dr(n).then(()=>{})}var IB=["get","getKey","getAll","getAllKeys","count"],bB=["put","add","delete","clear"],iE=new Map;function AR(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(iE.get(e))return iE.get(e);let n=e.replace(/FromIndex$/,""),r=e!==n,i=bB.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||IB.includes(n)))return;let o=function(s,...a){return v(this,null,function*(){let u=this.transaction(s,i?"readwrite":"readonly"),l=u.store;return r&&(l=l.index(a.shift())),(yield Promise.all([l[n](...a),i&&u.done]))[0]})};return iE.set(e,o),o}SR(t=>X(j({},t),{get:(e,n,r)=>AR(e,n)||t.get(e,n,r),has:(e,n)=>!!AR(e,n)||t.has(e,n)}));var sE=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(TB(n)){let r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}};function TB(t){let e=t.getComponent();return e?.type==="VERSION"}var aE="@firebase/app",RR="0.13.2";var si=new Mr("@firebase/app"),CB="@firebase/app-compat",DB="@firebase/analytics-compat",SB="@firebase/analytics",AB="@firebase/app-check-compat",RB="@firebase/app-check",NB="@firebase/auth",MB="@firebase/auth-compat",PB="@firebase/database",xB="@firebase/data-connect",kB="@firebase/database-compat",OB="@firebase/functions",FB="@firebase/functions-compat",LB="@firebase/installations",VB="@firebase/installations-compat",jB="@firebase/messaging",UB="@firebase/messaging-compat",BB="@firebase/performance",$B="@firebase/performance-compat",HB="@firebase/remote-config",qB="@firebase/remote-config-compat",zB="@firebase/storage",GB="@firebase/storage-compat",WB="@firebase/firestore",KB="@firebase/ai",QB="@firebase/firestore-compat",YB="firebase",JB="11.10.0";var cE="[DEFAULT]",ZB={[aE]:"fire-core",[CB]:"fire-core-compat",[SB]:"fire-analytics",[DB]:"fire-analytics-compat",[RB]:"fire-app-check",[AB]:"fire-app-check-compat",[NB]:"fire-auth",[MB]:"fire-auth-compat",[PB]:"fire-rtdb",[xB]:"fire-data-connect",[kB]:"fire-rtdb-compat",[OB]:"fire-fn",[FB]:"fire-fn-compat",[LB]:"fire-iid",[VB]:"fire-iid-compat",[jB]:"fire-fcm",[UB]:"fire-fcm-compat",[BB]:"fire-perf",[$B]:"fire-perf-compat",[HB]:"fire-rc",[qB]:"fire-rc-compat",[zB]:"fire-gcs",[GB]:"fire-gcs-compat",[WB]:"fire-fst",[QB]:"fire-fst-compat",[KB]:"fire-vertex","fire-js":"fire-js",[YB]:"fire-js-all"};var Yu=new Map,XB=new Map,uE=new Map;function NR(t,e){try{t.container.addComponent(e)}catch(n){si.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function xt(t){let e=t.name;if(uE.has(e))return si.debug(`There were multiple attempts to register component ${e}.`),!1;uE.set(e,t);for(let n of Yu.values())NR(n,t);for(let n of XB.values())NR(n,t);return!0}function ai(t,e){let n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function ci(t){return t==null?!1:t.settings!==void 0}var e$={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ji=new tn("app","Firebase",e$);var lE=class{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new st("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ji.create("app-deleted",{appName:this._name})}};var xa=JB;function hE(t,e={}){let n=t;typeof e!="object"&&(e={name:e});let r=Object.assign({name:cE,automaticDataCollectionEnabled:!0},e),i=r.name;if(typeof i!="string"||!i)throw Ji.create("bad-app-name",{appName:String(i)});if(n||(n=Q_()),!n)throw Ji.create("no-options");let o=Yu.get(i);if(o){if(Yi(n,o.options)&&Yi(r,o.config))return o;throw Ji.create("duplicate-app",{appName:i})}let s=new $h(i);for(let u of uE.values())s.addComponent(u);let a=new lE(n,r,s);return Yu.set(i,a),a}function ui(t=cE){let e=Yu.get(t);if(!e&&t===cE&&Q_())return hE();if(!e)throw Ji.create("no-app",{appName:t});return e}function zh(){return Array.from(Yu.values())}function ke(t,e,n){var r;let i=(r=ZB[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);let o=i.match(/\s|\//),s=e.match(/\s|\//);if(o||s){let a=[`Unable to register library "${i}" with version "${e}":`];o&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),o&&s&&a.push("and"),s&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),si.warn(a.join(" "));return}xt(new st(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}var t$="firebase-heartbeat-database",n$=1,Ju="firebase-heartbeat-store",oE=null;function kR(){return oE||(oE=ls(t$,n$,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Ju)}catch(n){console.warn(n)}}}}).catch(t=>{throw Ji.create("idb-open",{originalErrorMessage:t.message})})),oE}function r$(t){return v(this,null,function*(){try{let n=(yield kR()).transaction(Ju),r=yield n.objectStore(Ju).get(OR(t));return yield n.done,r}catch(e){if(e instanceof fn)si.warn(e.message);else{let n=Ji.create("idb-get",{originalErrorMessage:e?.message});si.warn(n.message)}}})}function MR(t,e){return v(this,null,function*(){try{let r=(yield kR()).transaction(Ju,"readwrite");yield r.objectStore(Ju).put(e,OR(t)),yield r.done}catch(n){if(n instanceof fn)si.warn(n.message);else{let r=Ji.create("idb-set",{originalErrorMessage:n?.message});si.warn(r.message)}}})}function OR(t){return`${t.name}!${t.options.appId}`}var i$=1024,o$=30,dE=class{constructor(e){this.container=e,this._heartbeatsCache=null;let n=this.container.getProvider("app").getImmediate();this._storage=new fE(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){return v(this,null,function*(){var e,n;try{let i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=PR();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(s=>s.date===o))return;if(this._heartbeatsCache.heartbeats.push({date:o,agent:i}),this._heartbeatsCache.heartbeats.length>o$){let s=a$(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(s,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){si.warn(r)}})}getHeartbeatsHeader(){return v(this,null,function*(){var e;try{if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let n=PR(),{heartbeatsToSend:r,unsentEntries:i}=s$(this._heartbeatsCache.heartbeats),o=Qu(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(n){return si.warn(n),""}})}};function PR(){return new Date().toISOString().substring(0,10)}function s$(t,e=i$){let n=[],r=t.slice();for(let i of t){let o=n.find(s=>s.agent===i.agent);if(o){if(o.dates.push(i.date),xR(n)>e){o.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),xR(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}var fE=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return v(this,null,function*(){return cs()?Bh().then(()=>!0).catch(()=>!1):!1})}read(){return v(this,null,function*(){if(yield this._canUseIndexedDBPromise){let n=yield r$(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(e){return v(this,null,function*(){var n;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return MR(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return})}add(e){return v(this,null,function*(){var n;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return MR(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return})}};function xR(t){return Qu(JSON.stringify({version:2,heartbeats:t})).length}function a$(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}function c$(t){xt(new st("platform-logger",e=>new sE(e),"PRIVATE")),xt(new st("heartbeat",e=>new dE(e),"PRIVATE")),ke(aE,RR,t),ke(aE,RR,"esm2017"),ke("fire-js","")}c$("");var u$="firebase",l$="11.10.0";ke(u$,l$,"app");function FR(t){t===void 0&&(t=A(Ae));let e=t.get(Kr);return n=>new ce(r=>{let i=e.add(),o=!1;function s(){o||(i(),o=!0)}let a=n.subscribe({next:u=>{r.next(u),s()},complete:()=>{r.complete(),s()},error:u=>{r.error(u),s()}});return a.add(()=>{r.unsubscribe(),s()}),a})}var li=new So("ANGULARFIRE2_VERSION");function Oa(t,e,n){if(e){if(e.length===1)return e[0];let o=e.filter(s=>s.app===n);if(o.length===1)return o[0]}return n.container.getProvider(t).getImmediate({optional:!0})}var Zi=(t,e)=>{let n=e?[e]:zh(),r=[];return n.forEach(i=>{i.container.getProvider(t).instances.forEach(s=>{r.includes(s)||r.push(s)})}),r},ka=(function(t){return t[t.SILENT=0]="SILENT",t[t.WARN=1]="WARN",t[t.VERBOSE=2]="VERBOSE",t})(ka||{}),LR=Qv()&&typeof Zone<"u"?ka.WARN:ka.SILENT;var Gh=class{zone;delegate;constructor(e,n=Am){this.zone=e,this.delegate=n}now(){return this.delegate.now()}schedule(e,n,r){let i=this.zone,o=function(s){i?i.runGuarded(()=>{e.apply(this,[s])}):e.apply(this,[s])};return this.delegate.schedule(o,n,r)}},di=(()=>{class t{outsideAngular;insideAngular;constructor(){let n=A(Re);this.outsideAngular=n.runOutsideAngular(()=>new Gh(typeof Zone>"u"?void 0:Zone.current)),this.insideAngular=n.run(()=>new Gh(typeof Zone>"u"?void 0:Zone.current,Sm))}static \u0275fac=function(r){return new(r||t)};static \u0275prov=G({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),VR=!1;function d$(t,e){!VR&&(LR>ka.SILENT||Qv())&&(VR=!0,console.warn("Calling Firebase APIs outside of an Injection context may destabilize your application leading to subtle change-detection and hydration bugs. Find more at https://github.com/angular/angularfire/blob/main/docs/zones.md")),LR>=e&&console.warn(`Firebase API called outside injection context: ${t.name}`)}function f$(t){let e=A(Re,{optional:!0});return e?e.runOutsideAngular(()=>t()):t()}function ds(t){let e=A(Re,{optional:!0});return e?e.run(()=>t()):t()}var h$=(t,e,n)=>(...r)=>(e&&setTimeout(e,0),ve(n,()=>ds(()=>t.apply(void 0,r)))),vt=(t,e,n)=>(n||=e?ka.WARN:ka.VERBOSE,function(){let r,i=arguments,o,s,a;try{o=A(di),s=A(Kr),a=A(Xe)}catch{return d$(t,n),t.apply(this,i)}for(let l=0;l<arguments.length;l++)typeof i[l]=="function"&&(e&&(r||=ds(()=>s.add())),i[l]=h$(i[l],r,a));let u=f$(()=>t.apply(this,i));return e?u instanceof ce?u.pipe(Mi(o.outsideAngular),Ni(o.insideAngular),FR(a)):u instanceof Promise?ds(()=>{let l=s.add();return new Promise((f,p)=>{u.then(g=>ve(a,()=>ds(()=>f(g))),g=>ve(a,()=>ds(()=>p(g)))).finally(l)})}):typeof u=="function"&&r?function(){return setTimeout(r,0),u.apply(this,arguments)}:ds(()=>u):u instanceof ce?u.pipe(Mi(o.outsideAngular),Ni(o.insideAngular)):ds(()=>u)});var fi=class{constructor(e){return e}},fs=class{constructor(){return zh()}};function p$(t){return t&&t.length===1?t[0]:new fi(ui())}var pE=new q("angularfire2._apps"),g$={provide:fi,useFactory:p$,deps:[[new Ln,pE]]},m$={provide:fs,deps:[[new Ln,pE]]};function y$(t){return(e,n)=>{let r=n.get(nr);ke("angularfire",li.full,"core"),ke("angularfire",li.full,"app"),ke("angular",Km.full,r.toString());let i=e.runOutsideAngular(()=>t(n));return new fi(i)}}function jR(t,...e){return Mn([g$,m$,{provide:pE,useFactory:y$(t),multi:!0,deps:[Re,Ae,di,...e]}])}var UR=vt(hE,!0);var v$=new Map,_$={activated:!1,tokenObservers:[]},E$={initialized:!1,enabled:!1};function fr(t){return v$.get(t)||Object.assign({},_$)}function qR(){return E$}var w$="https://content-firebaseappcheck.googleapis.com/v1";var I$="exchangeDebugToken",BR={OFFSET_DURATION:300*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:960*1e3},Dae=1440*60*1e3;var yE=class{constructor(e,n,r,i,o){if(this.operation=e,this.retryPolicy=n,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=o,this.pending=null,this.nextErrorWaitInterval=i,i>o)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){return v(this,null,function*(){this.stop();try{this.pending=new ss,this.pending.promise.catch(n=>{}),yield b$(this.getNextRun(e)),this.pending.resolve(),yield this.pending.promise,this.pending=new ss,this.pending.promise.catch(n=>{}),yield this.operation(),this.pending.resolve(),yield this.pending.promise,this.process(!0).catch(()=>{})}catch(n){this.retryPolicy(n)?this.process(!1).catch(()=>{}):this.stop()}})}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{let n=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),n}}};function b$(t){return new Promise(e=>{setTimeout(e,t)})}var T$={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.","initial-throttle":"{$httpStatus} error. Attempts allowed again after {$time}",throttled:"Requests throttled due to previous {$httpStatus} error. Attempts allowed again after {$time}"},Xi=new tn("appCheck","AppCheck",T$);function zR(t){if(!fr(t).activated)throw Xi.create("use-before-activation",{appName:t.name})}function GR(r,i){return v(this,arguments,function*({url:t,body:e},n){let o={"Content-Type":"application/json"},s=n.getImmediate({optional:!0});if(s){let y=yield s.getHeartbeatsHeader();y&&(o["X-Firebase-Client"]=y)}let a={method:"POST",body:JSON.stringify(e),headers:o},u;try{u=yield fetch(t,a)}catch(y){throw Xi.create("fetch-network-error",{originalErrorMessage:y?.message})}if(u.status!==200)throw Xi.create("fetch-status-error",{httpStatus:u.status});let l;try{l=yield u.json()}catch(y){throw Xi.create("fetch-parse-error",{originalErrorMessage:y?.message})}let f=l.ttl.match(/^([\d.]+)(s)$/);if(!f||!f[2]||isNaN(Number(f[1])))throw Xi.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${l.ttl}`});let p=Number(f[1])*1e3,g=Date.now();return{token:l.token,expireTimeMillis:g+p,issuedAtTimeMillis:g}})}function WR(t,e){let{projectId:n,appId:r,apiKey:i}=t.options;return{url:`${w$}/projects/${n}/apps/${r}:${I$}?key=${i}`,body:{debug_token:e}}}var C$="firebase-app-check-database",D$=1,vE="firebase-app-check-store";var Wh=null;function S$(){return Wh||(Wh=new Promise((t,e)=>{try{let n=indexedDB.open(C$,D$);n.onsuccess=r=>{t(r.target.result)},n.onerror=r=>{var i;e(Xi.create("storage-open",{originalErrorMessage:(i=r.target.error)===null||i===void 0?void 0:i.message}))},n.onupgradeneeded=r=>{let i=r.target.result;switch(r.oldVersion){case 0:i.createObjectStore(vE,{keyPath:"compositeKey"})}}}catch(n){e(Xi.create("storage-open",{originalErrorMessage:n?.message}))}}),Wh)}function A$(t,e){return R$(N$(t),e)}function R$(t,e){return v(this,null,function*(){let r=(yield S$()).transaction(vE,"readwrite"),o=r.objectStore(vE).put({compositeKey:t,value:e});return new Promise((s,a)=>{o.onsuccess=u=>{s()},r.onerror=u=>{var l;a(Xi.create("storage-set",{originalErrorMessage:(l=u.target.error)===null||l===void 0?void 0:l.message}))}})})}function N$(t){return`${t.options.appId}-${t.name}`}var Zu=new Mr("@firebase/app-check");function gE(t,e){return cs()?A$(t,e).catch(n=>{Zu.warn(`Failed to write token to IndexedDB. Error: ${n}`)}):Promise.resolve()}function KR(){return qR().enabled}function QR(){return v(this,null,function*(){let t=qR();if(t.enabled&&t.token)return t.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)})}var M$={error:"UNKNOWN_ERROR"};function P$(t){return Vh.encodeString(JSON.stringify(t),!1)}function _E(t,e=!1,n=!1){return v(this,null,function*(){let r=t.app;zR(r);let i=fr(r),o=i.token,s;if(o&&!Xu(o)&&(i.token=void 0,o=void 0),!o){let l=yield i.cachedTokenPromise;l&&(Xu(l)?o=l:yield gE(r,void 0))}if(!e&&o&&Xu(o))return{token:o.token};let a=!1;if(KR())try{i.exchangeTokenPromise||(i.exchangeTokenPromise=GR(WR(r,yield QR()),t.heartbeatServiceProvider).finally(()=>{i.exchangeTokenPromise=void 0}),a=!0);let l=yield i.exchangeTokenPromise;return yield gE(r,l),i.token=l,{token:l.token}}catch(l){return l.code==="appCheck/throttled"||l.code==="appCheck/initial-throttle"?Zu.warn(l.message):n&&Zu.error(l),mE(l)}try{i.exchangeTokenPromise||(i.exchangeTokenPromise=i.provider.getToken().finally(()=>{i.exchangeTokenPromise=void 0}),a=!0),o=yield fr(r).exchangeTokenPromise}catch(l){l.code==="appCheck/throttled"||l.code==="appCheck/initial-throttle"?Zu.warn(l.message):n&&Zu.error(l),s=l}let u;return o?s?Xu(o)?u={token:o.token,internalError:s}:u=mE(s):(u={token:o.token},i.token=o,yield gE(r,o)):u=mE(s),a&&F$(r,u),u})}function x$(t){return v(this,null,function*(){let e=t.app;zR(e);let{provider:n}=fr(e);if(KR()){let r=yield QR(),{token:i}=yield GR(WR(e,r),t.heartbeatServiceProvider);return{token:i}}else{let{token:r}=yield n.getToken();return{token:r}}})}function k$(t,e,n,r){let{app:i}=t,o=fr(i),s={next:n,error:r,type:e};if(o.tokenObservers=[...o.tokenObservers,s],o.token&&Xu(o.token)){let a=o.token;Promise.resolve().then(()=>{n({token:a.token}),$R(t)}).catch(()=>{})}o.cachedTokenPromise.then(()=>$R(t))}function YR(t,e){let n=fr(t),r=n.tokenObservers.filter(i=>i.next!==e);r.length===0&&n.tokenRefresher&&n.tokenRefresher.isRunning()&&n.tokenRefresher.stop(),n.tokenObservers=r}function $R(t){let{app:e}=t,n=fr(e),r=n.tokenRefresher;r||(r=O$(t),n.tokenRefresher=r),!r.isRunning()&&n.isTokenAutoRefreshEnabled&&r.start()}function O$(t){let{app:e}=t;return new yE(()=>v(null,null,function*(){let n=fr(e),r;if(n.token?r=yield _E(t,!0):r=yield _E(t),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{let n=fr(e);if(n.token){let r=n.token.issuedAtTimeMillis+(n.token.expireTimeMillis-n.token.issuedAtTimeMillis)*.5+3e5,i=n.token.expireTimeMillis-300*1e3;return r=Math.min(r,i),Math.max(0,r-Date.now())}else return 0},BR.RETRIAL_MIN_WAIT,BR.RETRIAL_MAX_WAIT)}function F$(t,e){let n=fr(t).tokenObservers;for(let r of n)try{r.type==="EXTERNAL"&&e.error!=null?r.error(e.error):r.next(e)}catch{}}function Xu(t){return t.expireTimeMillis-Date.now()>0}function mE(t){return{token:P$(M$),error:t}}var EE=class{constructor(e,n){this.app=e,this.heartbeatServiceProvider=n}_delete(){let{tokenObservers:e}=fr(this.app);for(let n of e)YR(this.app,n.next);return Promise.resolve()}};function L$(t,e){return new EE(t,e)}function V$(t){return{getToken:e=>_E(t,e),getLimitedUseToken:()=>x$(t),addTokenListener:e=>k$(t,"INTERNAL",e),removeTokenListener:e=>YR(t.app,e)}}var j$="@firebase/app-check",U$="0.10.1";var B$="app-check",HR="app-check-internal";function $$(){xt(new st(B$,t=>{let e=t.getProvider("app").getImmediate(),n=t.getProvider("heartbeat");return L$(e,n)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,e,n)=>{t.getProvider(HR).initialize()})),xt(new st(HR,t=>{let e=t.getProvider("app-check").getImmediate();return V$(e)},"PUBLIC").setInstantiationMode("EXPLICIT")),ke(j$,U$)}$$();var H$="app-check";var Kh=class{constructor(){return Zi(H$)}};var q$=["localhost","0.0.0.0","127.0.0.1"],jae=typeof window<"u"&&q$.includes(window.location.hostname);function iN(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var oN=iN,sN=new tn("auth","Firebase",iN());var Zh=new Mr("@firebase/auth");function G$(t,...e){Zh.logLevel<=me.WARN&&Zh.warn(`Auth (${xa}): ${t}`,...e)}function Yh(t,...e){Zh.logLevel<=me.ERROR&&Zh.error(`Auth (${xa}): ${t}`,...e)}function JR(t,...e){throw PE(t,...e)}function ME(t,...e){return PE(t,...e)}function aN(t,e,n){let r=Object.assign(Object.assign({},oN()),{[e]:n});return new tn("auth","Firebase",r).create(e,{appName:t.name})}function Jh(t){return aN(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function PE(t,...e){if(typeof t!="string"){let n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return sN.create(t,...e)}function De(t,e,...n){if(!t)throw PE(e,...n)}function el(t){let e="INTERNAL ASSERTION FAILED: "+t;throw Yh(e),new Error(e)}function Xh(t,e){t||el(e)}function W$(){return ZR()==="http:"||ZR()==="https:"}function ZR(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}function K$(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(W$()||vR()||"connection"in navigator)?navigator.onLine:!0}function Q$(){if(typeof navigator>"u")return null;let t=navigator;return t.languages&&t.languages[0]||t.language||null}var gs=class{constructor(e,n){this.shortDelay=e,this.longDelay=n,Xh(n>e,"Short delay should be less than long delay!"),this.isMobile=mR()||_R()}get(){return K$()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function Y$(t,e){Xh(t.emulator,"Emulator should always be set here");let{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}var ep=class{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;el("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;el("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;el("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var J$={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var Z$=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],X$=new gs(3e4,6e4);function cN(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}function op(o,s,a,u){return v(this,arguments,function*(t,e,n,r,i={}){return uN(t,i,()=>v(null,null,function*(){let l={},f={};r&&(e==="GET"?f=r:l={body:JSON.stringify(r)});let p=Z_(Object.assign({key:t.config.apiKey},f)).slice(1),g=yield t._getAdditionalHeaders();g["Content-Type"]="application/json",t.languageCode&&(g["X-Firebase-Locale"]=t.languageCode);let y=Object.assign({method:e,headers:g},l);return yR()||(y.referrerPolicy="no-referrer"),t.emulatorConfig&&as(t.emulatorConfig.host)&&(y.credentials="include"),ep.fetch()(yield lN(t,t.config.apiHost,n,p),y)}))})}function uN(t,e,n){return v(this,null,function*(){t._canInitEmulator=!1;let r=Object.assign(Object.assign({},J$),e);try{let i=new bE(t),o=yield Promise.race([n(),i.promise]);i.clearNetworkTimeout();let s=yield o.json();if("needConfirmation"in s)throw Qh(t,"account-exists-with-different-credential",s);if(o.ok&&!("errorMessage"in s))return s;{let a=o.ok?s.errorMessage:s.error.message,[u,l]=a.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw Qh(t,"credential-already-in-use",s);if(u==="EMAIL_EXISTS")throw Qh(t,"email-already-in-use",s);if(u==="USER_DISABLED")throw Qh(t,"user-disabled",s);let f=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(l)throw aN(t,f,l);JR(t,f)}}catch(i){if(i instanceof fn)throw i;JR(t,"network-request-failed",{message:String(i)})}})}function lN(t,e,n,r){return v(this,null,function*(){let i=`${e}${n}?${r}`,o=t,s=o.config.emulator?Y$(t.config,i):`${t.config.apiScheme}://${i}`;return Z$.includes(n)&&(yield o._persistenceManagerAvailable,o._getPersistenceType()==="COOKIE")?o._getPersistence()._getFinalTarget(s).toString():s})}var bE=class{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(ME(this.auth,"network-request-failed")),X$.get())})}};function Qh(t,e,n){let r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);let i=ME(t,e,r);return i.customData._tokenResponse=n,i}function eH(t,e){return v(this,null,function*(){return op(t,"POST","/v1/accounts:delete",e)})}function tp(t,e){return v(this,null,function*(){return op(t,"POST","/v1/accounts:lookup",e)})}function tl(t){if(t)try{let e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function xE(t,e=!1){return v(this,null,function*(){let n=ot(t),r=yield n.getIdToken(e),i=dN(r);De(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");let o=typeof i.firebase=="object"?i.firebase:void 0,s=o?.sign_in_provider;return{claims:i,token:r,authTime:tl(wE(i.auth_time)),issuedAtTime:tl(wE(i.iat)),expirationTime:tl(wE(i.exp)),signInProvider:s||null,signInSecondFactor:o?.sign_in_second_factor||null}})}function wE(t){return Number(t)*1e3}function dN(t){let[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Yh("JWT malformed, contained fewer than 3 sections"),null;try{let i=jh(n);return i?JSON.parse(i):(Yh("Failed to decode base64 JWT payload"),null)}catch(i){return Yh("Caught error parsing JWT payload as JSON",i?.toString()),null}}function XR(t){let e=dN(t);return De(e,"internal-error"),De(typeof e.exp<"u","internal-error"),De(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}function TE(t,e,n=!1){return v(this,null,function*(){if(n)return e;try{return yield e}catch(r){throw r instanceof fn&&tH(r)&&t.auth.currentUser===t&&(yield t.auth.signOut()),r}})}function tH({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}var CE=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){let r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;let i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;let n=this.getInterval(e);this.timerId=setTimeout(()=>v(this,null,function*(){yield this.iteration()}),n)}iteration(){return v(this,null,function*(){try{yield this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()})}};var rl=class{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=tl(this.lastLoginAt),this.creationTime=tl(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};function np(t){return v(this,null,function*(){var e;let n=t.auth,r=yield t.getIdToken(),i=yield TE(t,tp(n,{idToken:r}));De(i?.users.length,n,"internal-error");let o=i.users[0];t._notifyReloadListener(o);let s=!((e=o.providerUserInfo)===null||e===void 0)&&e.length?fN(o.providerUserInfo):[],a=nH(t.providerData,s),u=t.isAnonymous,l=!(t.email&&o.passwordHash)&&!a?.length,f=u?l:!1,p={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:a,metadata:new rl(o.createdAt,o.lastLoginAt),isAnonymous:f};Object.assign(t,p)})}function kE(t){return v(this,null,function*(){let e=ot(t);yield np(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})}function nH(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function fN(t){return t.map(e=>{var{providerId:n}=e,r=Rm(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}function rH(t,e){return v(this,null,function*(){let n=yield uN(t,{},()=>v(null,null,function*(){let r=Z_({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:o}=t.config,s=yield lN(t,i,"/v1/token",`key=${o}`),a=yield t._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";let u={method:"POST",headers:a,body:r};return t.emulatorConfig&&as(t.emulatorConfig.host)&&(u.credentials="include"),ep.fetch()(s,u)}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}})}function iH(t,e){return v(this,null,function*(){return op(t,"POST","/v2/accounts:revokeToken",cN(t,e))})}var nl=class t{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){De(e.idToken,"internal-error"),De(typeof e.idToken<"u","internal-error"),De(typeof e.refreshToken<"u","internal-error");let n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):XR(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){De(e.length!==0,"internal-error");let n=XR(e);this.updateTokensAndExpiration(e,null,n)}getToken(e,n=!1){return v(this,null,function*(){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(De(this.refreshToken,e,"user-token-expired"),this.refreshToken?(yield this.refresh(e,this.refreshToken),this.accessToken):null)})}clearRefreshToken(){this.refreshToken=null}refresh(e,n){return v(this,null,function*(){let{accessToken:r,refreshToken:i,expiresIn:o}=yield rH(e,n);this.updateTokensAndExpiration(r,i,Number(o))})}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){let{refreshToken:r,accessToken:i,expirationTime:o}=n,s=new t;return r&&(De(typeof r=="string","internal-error",{appName:e}),s.refreshToken=r),i&&(De(typeof i=="string","internal-error",{appName:e}),s.accessToken=i),o&&(De(typeof o=="number","internal-error",{appName:e}),s.expirationTime=o),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new t,this.toJSON())}_performRefresh(){return el("not implemented")}};function eo(t,e){De(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}var hs=class t{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,o=Rm(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new CE(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new rl(o.createdAt||void 0,o.lastLoginAt||void 0)}getIdToken(e){return v(this,null,function*(){let n=yield TE(this,this.stsTokenManager.getToken(this.auth,e));return De(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,yield this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n})}getIdTokenResult(e){return xE(this,e)}reload(){return kE(this)}_assign(e){this!==e&&(De(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let n=new t(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){De(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,n=!1){return v(this,null,function*(){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&(yield np(this)),yield this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)})}delete(){return v(this,null,function*(){if(ci(this.auth.app))return Promise.reject(Jh(this.auth));let e=yield this.getIdToken();return yield TE(this,eH(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()})}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,o,s,a,u,l,f;let p=(r=n.displayName)!==null&&r!==void 0?r:void 0,g=(i=n.email)!==null&&i!==void 0?i:void 0,y=(o=n.phoneNumber)!==null&&o!==void 0?o:void 0,D=(s=n.photoURL)!==null&&s!==void 0?s:void 0,x=(a=n.tenantId)!==null&&a!==void 0?a:void 0,R=(u=n._redirectEventId)!==null&&u!==void 0?u:void 0,O=(l=n.createdAt)!==null&&l!==void 0?l:void 0,H=(f=n.lastLoginAt)!==null&&f!==void 0?f:void 0,{uid:Y,emailVerified:re,isAnonymous:Ke,providerData:ge,stsTokenManager:b}=n;De(Y&&b,e,"internal-error");let _=nl.fromJSON(this.name,b);De(typeof Y=="string",e,"internal-error"),eo(p,e.name),eo(g,e.name),De(typeof re=="boolean",e,"internal-error"),De(typeof Ke=="boolean",e,"internal-error"),eo(y,e.name),eo(D,e.name),eo(x,e.name),eo(R,e.name),eo(O,e.name),eo(H,e.name);let w=new t({uid:Y,auth:e,email:g,emailVerified:re,displayName:p,isAnonymous:Ke,photoURL:D,phoneNumber:y,tenantId:x,stsTokenManager:_,createdAt:O,lastLoginAt:H});return ge&&Array.isArray(ge)&&(w.providerData=ge.map(I=>Object.assign({},I))),R&&(w._redirectEventId=R),w}static _fromIdTokenResponse(e,n,r=!1){return v(this,null,function*(){let i=new nl;i.updateFromServerResponse(n);let o=new t({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return yield np(o),o})}static _fromGetAccountInfoResponse(e,n,r){return v(this,null,function*(){let i=n.users[0];De(i.localId!==void 0,"internal-error");let o=i.providerUserInfo!==void 0?fN(i.providerUserInfo):[],s=!(i.email&&i.passwordHash)&&!o?.length,a=new nl;a.updateFromIdToken(r);let u=new t({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:s}),l={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new rl(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!o?.length};return Object.assign(u,l),u})}};var eN=new Map;function ps(t){Xh(t instanceof Function,"Expected a class definition");let e=eN.get(t);return e?(Xh(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,eN.set(t,e),e)}var oH=(()=>{class t{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return v(this,null,function*(){return!0})}_set(n,r){return v(this,null,function*(){this.storage[n]=r})}_get(n){return v(this,null,function*(){let r=this.storage[n];return r===void 0?null:r})}_remove(n){return v(this,null,function*(){delete this.storage[n]})}_addListener(n,r){}_removeListener(n,r){}}return t.type="NONE",t})(),DE=oH;function IE(t,e,n){return`firebase:${t}:${e}:${n}`}var rp=class t{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;let{config:i,name:o}=this.auth;this.fullUserKey=IE(this.userKey,i.apiKey,o),this.fullPersistenceKey=IE("persistence",i.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){return v(this,null,function*(){let e=yield this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){let n=yield tp(this.auth,{idToken:e}).catch(()=>{});return n?hs._fromGetAccountInfoResponse(this.auth,n,e):null}return hs._fromJSON(this.auth,e)})}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){return v(this,null,function*(){if(this.persistence===e)return;let n=yield this.getCurrentUser();if(yield this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)})}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,n,r="authUser"){return v(this,null,function*(){if(!n.length)return new t(ps(DE),e,r);let i=(yield Promise.all(n.map(l=>v(null,null,function*(){if(yield l._isAvailable())return l})))).filter(l=>l),o=i[0]||ps(DE),s=IE(r,e.config.apiKey,e.name),a=null;for(let l of n)try{let f=yield l._get(s);if(f){let p;if(typeof f=="string"){let g=yield tp(e,{idToken:f}).catch(()=>{});if(!g)break;p=yield hs._fromGetAccountInfoResponse(e,g,f)}else p=hs._fromJSON(e,f);l!==o&&(a=p),o=l;break}}catch{}let u=i.filter(l=>l._shouldAllowMigration);return!o._shouldAllowMigration||!u.length?new t(o,e,r):(o=u[0],a&&(yield o._set(s,a.toJSON())),yield Promise.all(n.map(l=>v(null,null,function*(){if(l!==o)try{yield l._remove(s)}catch{}}))),new t(o,e,r))})}};function tN(t){let e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(uH(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(sH(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(dH(e))return"Blackberry";if(fH(e))return"Webos";if(aH(e))return"Safari";if((e.includes("chrome/")||cH(e))&&!e.includes("edge/"))return"Chrome";if(lH(e))return"Android";{let n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if(r?.length===2)return r[1]}return"Other"}function sH(t=Tn()){return/firefox\//i.test(t)}function aH(t=Tn()){let e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function cH(t=Tn()){return/crios\//i.test(t)}function uH(t=Tn()){return/iemobile/i.test(t)}function lH(t=Tn()){return/android/i.test(t)}function dH(t=Tn()){return/blackberry/i.test(t)}function fH(t=Tn()){return/webos/i.test(t)}function hN(t,e=[]){let n;switch(t){case"Browser":n=tN(Tn());break;case"Worker":n=`${tN(Tn())}-${t}`;break;default:n=t}let r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${xa}/${r}`}var SE=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){let r=o=>new Promise((s,a)=>{try{let u=e(o);s(u)}catch(u){a(u)}});r.onAbort=n,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}runMiddleware(e){return v(this,null,function*(){if(this.auth.currentUser===e)return;let n=[];try{for(let r of this.queue)yield r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(let i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}})}};function hH(n){return v(this,arguments,function*(t,e={}){return op(t,"GET","/v2/passwordPolicy",cN(t,e))})}var pH=6,AE=class{constructor(e){var n,r,i,o;let s=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=s.minPasswordLength)!==null&&n!==void 0?n:pH,s.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=s.maxPasswordLength),s.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=s.containsLowercaseCharacter),s.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=s.containsUppercaseCharacter),s.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=s.containsNumericCharacter),s.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=s.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(o=e.forceUpgradeOnSignin)!==null&&o!==void 0?o:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,o,s,a;let u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,u),this.validatePasswordCharacterOptions(e,u),u.isValid&&(u.isValid=(n=u.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),u.isValid&&(u.isValid=(r=u.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),u.isValid&&(u.isValid=(i=u.containsLowercaseLetter)!==null&&i!==void 0?i:!0),u.isValid&&(u.isValid=(o=u.containsUppercaseLetter)!==null&&o!==void 0?o:!0),u.isValid&&(u.isValid=(s=u.containsNumericCharacter)!==null&&s!==void 0?s:!0),u.isValid&&(u.isValid=(a=u.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),u}validatePasswordLengthOptions(e,n){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}};var RE=class{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new ip(this),this.idTokenSubscription=new ip(this),this.beforeStateQueue=new SE(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=sN,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=ps(n)),this._initializationPromise=this.queue(()=>v(this,null,function*(){var r,i,o;if(!this._deleted&&(this.persistenceManager=yield rp.create(this,e),(r=this._resolvePersistenceManagerAvailable)===null||r===void 0||r.call(this),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{yield this._popupRedirectResolver._initialize(this)}catch{}yield this.initializeCurrentUser(n),this.lastNotifiedUid=((o=this.currentUser)===null||o===void 0?void 0:o.uid)||null,!this._deleted&&(this._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){return v(this,null,function*(){if(this._deleted)return;let e=yield this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),yield this.currentUser.getIdToken();return}yield this._updateCurrentUser(e,!0)}})}initializeCurrentUserFromIdToken(e){return v(this,null,function*(){try{let n=yield tp(this,{idToken:e}),r=yield hs._fromGetAccountInfoResponse(this,n,e);yield this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),yield this.directlySetCurrentUser(null)}})}initializeCurrentUser(e){return v(this,null,function*(){var n;if(ci(this.app)){let s=this.app.settings.authIdToken;return s?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(s).then(a,a))}):this.directlySetCurrentUser(null)}let r=yield this.assertedPersistence.getCurrentUser(),i=r,o=!1;if(e&&this.config.authDomain){yield this.getOrInitRedirectPersistenceManager();let s=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=i?._redirectEventId,u=yield this.tryRedirectSignIn(e);(!s||s===a)&&u?.user&&(i=u.user,o=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(o)try{yield this.beforeStateQueue.runMiddleware(i)}catch(s){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(s))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return De(this._popupRedirectResolver,this,"argument-error"),yield this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)})}tryRedirectSignIn(e){return v(this,null,function*(){let n=null;try{n=yield this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{yield this._setRedirectUser(null)}return n})}reloadAndSetCurrentUserOrClear(e){return v(this,null,function*(){try{yield np(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)})}useDeviceLanguage(){this.languageCode=Q$()}_delete(){return v(this,null,function*(){this._deleted=!0})}updateCurrentUser(e){return v(this,null,function*(){if(ci(this.app))return Promise.reject(Jh(this));let n=e?ot(e):null;return n&&De(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))})}_updateCurrentUser(e,n=!1){return v(this,null,function*(){if(!this._deleted)return e&&De(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||(yield this.beforeStateQueue.runMiddleware(e)),this.queue(()=>v(this,null,function*(){yield this.directlySetCurrentUser(e),this.notifyAuthListeners()}))})}signOut(){return v(this,null,function*(){return ci(this.app)?Promise.reject(Jh(this)):(yield this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&(yield this._setRedirectUser(null)),this._updateCurrentUser(null,!0))})}setPersistence(e){return ci(this.app)?Promise.reject(Jh(this)):this.queue(()=>v(this,null,function*(){yield this.assertedPersistence.setPersistence(ps(e))}))}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(e){return v(this,null,function*(){this._getPasswordPolicyInternal()||(yield this._updatePasswordPolicy());let n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)})}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){return v(this,null,function*(){let e=yield hH(this),n=new AE(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n})}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new tn("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{let r=this.onAuthStateChanged(()=>{r(),e()},n)}})}revokeAccessToken(e){return v(this,null,function*(){if(this.currentUser){let n=yield this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),yield iH(this,r)}})}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}_setRedirectUser(e,n){return v(this,null,function*(){let r=yield this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)})}getOrInitRedirectPersistenceManager(e){return v(this,null,function*(){if(!this.redirectPersistenceManager){let n=e&&ps(e)||this._popupRedirectResolver;De(n,this,"argument-error"),this.redirectPersistenceManager=yield rp.create(this,[ps(n._redirectPersistence)],"redirectUser"),this.redirectUser=yield this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager})}_redirectUserForId(e){return v(this,null,function*(){var n,r;return this._isInitialized&&(yield this.queue(()=>v(this,null,function*(){}))),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null})}_persistUserIfCurrent(e){return v(this,null,function*(){if(e===this.currentUser)return this.queue(()=>v(this,null,function*(){return this.directlySetCurrentUser(e)}))})}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};let o=typeof n=="function"?n:n.next.bind(n),s=!1,a=this._isInitialized?Promise.resolve():this._initializationPromise;if(De(a,this,"internal-error"),a.then(()=>{s||o(this.currentUser)}),typeof n=="function"){let u=e.addObserver(n,r,i);return()=>{s=!0,u()}}else{let u=e.addObserver(n);return()=>{s=!0,u()}}}directlySetCurrentUser(e){return v(this,null,function*(){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?yield this.assertedPersistence.setCurrentUser(e):yield this.assertedPersistence.removeCurrentUser()})}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return De(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=hN(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){return v(this,null,function*(){var e;let n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);let r=yield(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader();r&&(n["X-Firebase-Client"]=r);let i=yield this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n})}_getAppCheckToken(){return v(this,null,function*(){var e;if(ci(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;let n=yield(e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken();return n?.error&&G$(`Error while retrieving App Check token: ${n.error}`),n?.token})}};function gH(t){return ot(t)}var ip=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=IR(n=>this.observer=n)}get next(){return De(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var mH={loadJS(){return v(this,null,function*(){throw new Error("Unable to load external scripts")})},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function yH(t){mH=t}function vH(t){return`__${t}${Math.floor(Math.random()*1e6)}`}function _H(t,e){let n=e?.persistence||[],r=(Array.isArray(n)?n:[n]).map(ps);e?.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e?.popupRedirectResolver)}var Jae=vH("rcb"),Zae=new gs(3e4,6e4);var Xae=new gs(2e3,1e4);var ece=600*1e3;var tce=new gs(3e4,6e4);var nce=new gs(5e3,15e3);var rce=encodeURIComponent("fac");var nN="@firebase/auth",rN="1.10.8";var NE=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}getToken(e){return v(this,null,function*(){return this.assertAuthConfigured(),yield this.auth._initializationPromise,this.auth.currentUser?{accessToken:yield this.auth.currentUser.getIdToken(e)}:null})}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let n=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){De(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function EH(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function wH(t){xt(new st("auth",(e,{options:n})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:s,authDomain:a}=r.options;De(s&&!s.includes(":"),"invalid-api-key",{appName:r.name});let u={apiKey:s,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:hN(t)},l=new RE(r,i,o,u);return _H(l,n),l},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),xt(new st("auth-internal",e=>{let n=gH(e.getProvider("auth").getImmediate());return(r=>new NE(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),ke(nN,rN,EH(t)),ke(nN,rN,"esm2017")}var IH=300,ice=pR("authIdTokenMaxAge")||IH;function bH(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}yH({loadJS(t){return new Promise((e,n)=>{let r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{let o=ME("internal-error");o.customData=i,n(o)},r.type="text/javascript",r.charset="UTF-8",bH().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});wH("Browser");var w4="auth";var sp=class{constructor(){return Zi(w4)}};var pN=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},gN={};var hi,OE;(function(){var t;function e(b,_){function w(){}w.prototype=_.prototype,b.D=_.prototype,b.prototype=new w,b.prototype.constructor=b,b.C=function(I,T,S){for(var E=Array(arguments.length-2),jr=2;jr<arguments.length;jr++)E[jr-2]=arguments[jr];return _.prototype[T].apply(I,E)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(b,_,w){w||(w=0);var I=Array(16);if(typeof _=="string")for(var T=0;16>T;++T)I[T]=_.charCodeAt(w++)|_.charCodeAt(w++)<<8|_.charCodeAt(w++)<<16|_.charCodeAt(w++)<<24;else for(T=0;16>T;++T)I[T]=_[w++]|_[w++]<<8|_[w++]<<16|_[w++]<<24;_=b.g[0],w=b.g[1],T=b.g[2];var S=b.g[3],E=_+(S^w&(T^S))+I[0]+3614090360&4294967295;_=w+(E<<7&4294967295|E>>>25),E=S+(T^_&(w^T))+I[1]+3905402710&4294967295,S=_+(E<<12&4294967295|E>>>20),E=T+(w^S&(_^w))+I[2]+606105819&4294967295,T=S+(E<<17&4294967295|E>>>15),E=w+(_^T&(S^_))+I[3]+3250441966&4294967295,w=T+(E<<22&4294967295|E>>>10),E=_+(S^w&(T^S))+I[4]+4118548399&4294967295,_=w+(E<<7&4294967295|E>>>25),E=S+(T^_&(w^T))+I[5]+1200080426&4294967295,S=_+(E<<12&4294967295|E>>>20),E=T+(w^S&(_^w))+I[6]+2821735955&4294967295,T=S+(E<<17&4294967295|E>>>15),E=w+(_^T&(S^_))+I[7]+4249261313&4294967295,w=T+(E<<22&4294967295|E>>>10),E=_+(S^w&(T^S))+I[8]+1770035416&4294967295,_=w+(E<<7&4294967295|E>>>25),E=S+(T^_&(w^T))+I[9]+2336552879&4294967295,S=_+(E<<12&4294967295|E>>>20),E=T+(w^S&(_^w))+I[10]+4294925233&4294967295,T=S+(E<<17&4294967295|E>>>15),E=w+(_^T&(S^_))+I[11]+2304563134&4294967295,w=T+(E<<22&4294967295|E>>>10),E=_+(S^w&(T^S))+I[12]+1804603682&4294967295,_=w+(E<<7&4294967295|E>>>25),E=S+(T^_&(w^T))+I[13]+4254626195&4294967295,S=_+(E<<12&4294967295|E>>>20),E=T+(w^S&(_^w))+I[14]+2792965006&4294967295,T=S+(E<<17&4294967295|E>>>15),E=w+(_^T&(S^_))+I[15]+1236535329&4294967295,w=T+(E<<22&4294967295|E>>>10),E=_+(T^S&(w^T))+I[1]+4129170786&4294967295,_=w+(E<<5&4294967295|E>>>27),E=S+(w^T&(_^w))+I[6]+3225465664&4294967295,S=_+(E<<9&4294967295|E>>>23),E=T+(_^w&(S^_))+I[11]+643717713&4294967295,T=S+(E<<14&4294967295|E>>>18),E=w+(S^_&(T^S))+I[0]+3921069994&4294967295,w=T+(E<<20&4294967295|E>>>12),E=_+(T^S&(w^T))+I[5]+3593408605&4294967295,_=w+(E<<5&4294967295|E>>>27),E=S+(w^T&(_^w))+I[10]+38016083&4294967295,S=_+(E<<9&4294967295|E>>>23),E=T+(_^w&(S^_))+I[15]+3634488961&4294967295,T=S+(E<<14&4294967295|E>>>18),E=w+(S^_&(T^S))+I[4]+3889429448&4294967295,w=T+(E<<20&4294967295|E>>>12),E=_+(T^S&(w^T))+I[9]+568446438&4294967295,_=w+(E<<5&4294967295|E>>>27),E=S+(w^T&(_^w))+I[14]+3275163606&4294967295,S=_+(E<<9&4294967295|E>>>23),E=T+(_^w&(S^_))+I[3]+4107603335&4294967295,T=S+(E<<14&4294967295|E>>>18),E=w+(S^_&(T^S))+I[8]+1163531501&4294967295,w=T+(E<<20&4294967295|E>>>12),E=_+(T^S&(w^T))+I[13]+2850285829&4294967295,_=w+(E<<5&4294967295|E>>>27),E=S+(w^T&(_^w))+I[2]+4243563512&4294967295,S=_+(E<<9&4294967295|E>>>23),E=T+(_^w&(S^_))+I[7]+1735328473&4294967295,T=S+(E<<14&4294967295|E>>>18),E=w+(S^_&(T^S))+I[12]+2368359562&4294967295,w=T+(E<<20&4294967295|E>>>12),E=_+(w^T^S)+I[5]+4294588738&4294967295,_=w+(E<<4&4294967295|E>>>28),E=S+(_^w^T)+I[8]+2272392833&4294967295,S=_+(E<<11&4294967295|E>>>21),E=T+(S^_^w)+I[11]+1839030562&4294967295,T=S+(E<<16&4294967295|E>>>16),E=w+(T^S^_)+I[14]+4259657740&4294967295,w=T+(E<<23&4294967295|E>>>9),E=_+(w^T^S)+I[1]+2763975236&4294967295,_=w+(E<<4&4294967295|E>>>28),E=S+(_^w^T)+I[4]+1272893353&4294967295,S=_+(E<<11&4294967295|E>>>21),E=T+(S^_^w)+I[7]+4139469664&4294967295,T=S+(E<<16&4294967295|E>>>16),E=w+(T^S^_)+I[10]+3200236656&4294967295,w=T+(E<<23&4294967295|E>>>9),E=_+(w^T^S)+I[13]+681279174&4294967295,_=w+(E<<4&4294967295|E>>>28),E=S+(_^w^T)+I[0]+3936430074&4294967295,S=_+(E<<11&4294967295|E>>>21),E=T+(S^_^w)+I[3]+3572445317&4294967295,T=S+(E<<16&4294967295|E>>>16),E=w+(T^S^_)+I[6]+76029189&4294967295,w=T+(E<<23&4294967295|E>>>9),E=_+(w^T^S)+I[9]+3654602809&4294967295,_=w+(E<<4&4294967295|E>>>28),E=S+(_^w^T)+I[12]+3873151461&4294967295,S=_+(E<<11&4294967295|E>>>21),E=T+(S^_^w)+I[15]+530742520&4294967295,T=S+(E<<16&4294967295|E>>>16),E=w+(T^S^_)+I[2]+3299628645&4294967295,w=T+(E<<23&4294967295|E>>>9),E=_+(T^(w|~S))+I[0]+4096336452&4294967295,_=w+(E<<6&4294967295|E>>>26),E=S+(w^(_|~T))+I[7]+1126891415&4294967295,S=_+(E<<10&4294967295|E>>>22),E=T+(_^(S|~w))+I[14]+2878612391&4294967295,T=S+(E<<15&4294967295|E>>>17),E=w+(S^(T|~_))+I[5]+4237533241&4294967295,w=T+(E<<21&4294967295|E>>>11),E=_+(T^(w|~S))+I[12]+1700485571&4294967295,_=w+(E<<6&4294967295|E>>>26),E=S+(w^(_|~T))+I[3]+2399980690&4294967295,S=_+(E<<10&4294967295|E>>>22),E=T+(_^(S|~w))+I[10]+4293915773&4294967295,T=S+(E<<15&4294967295|E>>>17),E=w+(S^(T|~_))+I[1]+2240044497&4294967295,w=T+(E<<21&4294967295|E>>>11),E=_+(T^(w|~S))+I[8]+1873313359&4294967295,_=w+(E<<6&4294967295|E>>>26),E=S+(w^(_|~T))+I[15]+4264355552&4294967295,S=_+(E<<10&4294967295|E>>>22),E=T+(_^(S|~w))+I[6]+2734768916&4294967295,T=S+(E<<15&4294967295|E>>>17),E=w+(S^(T|~_))+I[13]+1309151649&4294967295,w=T+(E<<21&4294967295|E>>>11),E=_+(T^(w|~S))+I[4]+4149444226&4294967295,_=w+(E<<6&4294967295|E>>>26),E=S+(w^(_|~T))+I[11]+3174756917&4294967295,S=_+(E<<10&4294967295|E>>>22),E=T+(_^(S|~w))+I[2]+718787259&4294967295,T=S+(E<<15&4294967295|E>>>17),E=w+(S^(T|~_))+I[9]+3951481745&4294967295,b.g[0]=b.g[0]+_&4294967295,b.g[1]=b.g[1]+(T+(E<<21&4294967295|E>>>11))&4294967295,b.g[2]=b.g[2]+T&4294967295,b.g[3]=b.g[3]+S&4294967295}r.prototype.u=function(b,_){_===void 0&&(_=b.length);for(var w=_-this.blockSize,I=this.B,T=this.h,S=0;S<_;){if(T==0)for(;S<=w;)i(this,b,S),S+=this.blockSize;if(typeof b=="string"){for(;S<_;)if(I[T++]=b.charCodeAt(S++),T==this.blockSize){i(this,I),T=0;break}}else for(;S<_;)if(I[T++]=b[S++],T==this.blockSize){i(this,I),T=0;break}}this.h=T,this.o+=_},r.prototype.v=function(){var b=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);b[0]=128;for(var _=1;_<b.length-8;++_)b[_]=0;var w=8*this.o;for(_=b.length-8;_<b.length;++_)b[_]=w&255,w/=256;for(this.u(b),b=Array(16),_=w=0;4>_;++_)for(var I=0;32>I;I+=8)b[w++]=this.g[_]>>>I&255;return b};function o(b,_){var w=a;return Object.prototype.hasOwnProperty.call(w,b)?w[b]:w[b]=_(b)}function s(b,_){this.h=_;for(var w=[],I=!0,T=b.length-1;0<=T;T--){var S=b[T]|0;I&&S==_||(w[T]=S,I=!1)}this.g=w}var a={};function u(b){return-128<=b&&128>b?o(b,function(_){return new s([_|0],0>_?-1:0)}):new s([b|0],0>b?-1:0)}function l(b){if(isNaN(b)||!isFinite(b))return p;if(0>b)return R(l(-b));for(var _=[],w=1,I=0;b>=w;I++)_[I]=b/w|0,w*=4294967296;return new s(_,0)}function f(b,_){if(b.length==0)throw Error("number format error: empty string");if(_=_||10,2>_||36<_)throw Error("radix out of range: "+_);if(b.charAt(0)=="-")return R(f(b.substring(1),_));if(0<=b.indexOf("-"))throw Error('number format error: interior "-" character');for(var w=l(Math.pow(_,8)),I=p,T=0;T<b.length;T+=8){var S=Math.min(8,b.length-T),E=parseInt(b.substring(T,T+S),_);8>S?(S=l(Math.pow(_,S)),I=I.j(S).add(l(E))):(I=I.j(w),I=I.add(l(E)))}return I}var p=u(0),g=u(1),y=u(16777216);t=s.prototype,t.m=function(){if(x(this))return-R(this).m();for(var b=0,_=1,w=0;w<this.g.length;w++){var I=this.i(w);b+=(0<=I?I:4294967296+I)*_,_*=4294967296}return b},t.toString=function(b){if(b=b||10,2>b||36<b)throw Error("radix out of range: "+b);if(D(this))return"0";if(x(this))return"-"+R(this).toString(b);for(var _=l(Math.pow(b,6)),w=this,I="";;){var T=re(w,_).g;w=O(w,T.j(_));var S=((0<w.g.length?w.g[0]:w.h)>>>0).toString(b);if(w=T,D(w))return S+I;for(;6>S.length;)S="0"+S;I=S+I}},t.i=function(b){return 0>b?0:b<this.g.length?this.g[b]:this.h};function D(b){if(b.h!=0)return!1;for(var _=0;_<b.g.length;_++)if(b.g[_]!=0)return!1;return!0}function x(b){return b.h==-1}t.l=function(b){return b=O(this,b),x(b)?-1:D(b)?0:1};function R(b){for(var _=b.g.length,w=[],I=0;I<_;I++)w[I]=~b.g[I];return new s(w,~b.h).add(g)}t.abs=function(){return x(this)?R(this):this},t.add=function(b){for(var _=Math.max(this.g.length,b.g.length),w=[],I=0,T=0;T<=_;T++){var S=I+(this.i(T)&65535)+(b.i(T)&65535),E=(S>>>16)+(this.i(T)>>>16)+(b.i(T)>>>16);I=E>>>16,S&=65535,E&=65535,w[T]=E<<16|S}return new s(w,w[w.length-1]&-2147483648?-1:0)};function O(b,_){return b.add(R(_))}t.j=function(b){if(D(this)||D(b))return p;if(x(this))return x(b)?R(this).j(R(b)):R(R(this).j(b));if(x(b))return R(this.j(R(b)));if(0>this.l(y)&&0>b.l(y))return l(this.m()*b.m());for(var _=this.g.length+b.g.length,w=[],I=0;I<2*_;I++)w[I]=0;for(I=0;I<this.g.length;I++)for(var T=0;T<b.g.length;T++){var S=this.i(I)>>>16,E=this.i(I)&65535,jr=b.i(T)>>>16,fc=b.i(T)&65535;w[2*I+2*T]+=E*fc,H(w,2*I+2*T),w[2*I+2*T+1]+=S*fc,H(w,2*I+2*T+1),w[2*I+2*T+1]+=E*jr,H(w,2*I+2*T+1),w[2*I+2*T+2]+=S*jr,H(w,2*I+2*T+2)}for(I=0;I<_;I++)w[I]=w[2*I+1]<<16|w[2*I];for(I=_;I<2*_;I++)w[I]=0;return new s(w,0)};function H(b,_){for(;(b[_]&65535)!=b[_];)b[_+1]+=b[_]>>>16,b[_]&=65535,_++}function Y(b,_){this.g=b,this.h=_}function re(b,_){if(D(_))throw Error("division by zero");if(D(b))return new Y(p,p);if(x(b))return _=re(R(b),_),new Y(R(_.g),R(_.h));if(x(_))return _=re(b,R(_)),new Y(R(_.g),_.h);if(30<b.g.length){if(x(b)||x(_))throw Error("slowDivide_ only works with positive integers.");for(var w=g,I=_;0>=I.l(b);)w=Ke(w),I=Ke(I);var T=ge(w,1),S=ge(I,1);for(I=ge(I,2),w=ge(w,2);!D(I);){var E=S.add(I);0>=E.l(b)&&(T=T.add(w),S=E),I=ge(I,1),w=ge(w,1)}return _=O(b,T.j(_)),new Y(T,_)}for(T=p;0<=b.l(_);){for(w=Math.max(1,Math.floor(b.m()/_.m())),I=Math.ceil(Math.log(w)/Math.LN2),I=48>=I?1:Math.pow(2,I-48),S=l(w),E=S.j(_);x(E)||0<E.l(b);)w-=I,S=l(w),E=S.j(_);D(S)&&(S=g),T=T.add(S),b=O(b,E)}return new Y(T,b)}t.A=function(b){return re(this,b).h},t.and=function(b){for(var _=Math.max(this.g.length,b.g.length),w=[],I=0;I<_;I++)w[I]=this.i(I)&b.i(I);return new s(w,this.h&b.h)},t.or=function(b){for(var _=Math.max(this.g.length,b.g.length),w=[],I=0;I<_;I++)w[I]=this.i(I)|b.i(I);return new s(w,this.h|b.h)},t.xor=function(b){for(var _=Math.max(this.g.length,b.g.length),w=[],I=0;I<_;I++)w[I]=this.i(I)^b.i(I);return new s(w,this.h^b.h)};function Ke(b){for(var _=b.g.length+1,w=[],I=0;I<_;I++)w[I]=b.i(I)<<1|b.i(I-1)>>>31;return new s(w,b.h)}function ge(b,_){var w=_>>5;_%=32;for(var I=b.g.length-w,T=[],S=0;S<I;S++)T[S]=0<_?b.i(S+w)>>>_|b.i(S+w+1)<<32-_:b.i(S+w);return new s(T,b.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,OE=gN.Md5=r,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.A,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=l,s.fromString=f,hi=gN.Integer=s}).apply(typeof pN<"u"?pN:typeof self<"u"?self:typeof window<"u"?window:{});var ap=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},pi={};var FE,I4,Fa,LE,il,cp,VE,jE,UE;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(c,d,h){return c==Array.prototype||c==Object.prototype||(c[d]=h.value),c};function n(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof ap=="object"&&ap];for(var d=0;d<c.length;++d){var h=c[d];if(h&&h.Math==Math)return h}throw Error("Cannot find global object")}var r=n(this);function i(c,d){if(d)e:{var h=r;c=c.split(".");for(var m=0;m<c.length-1;m++){var C=c[m];if(!(C in h))break e;h=h[C]}c=c[c.length-1],m=h[c],d=d(m),d!=m&&d!=null&&e(h,c,{configurable:!0,writable:!0,value:d})}}function o(c,d){c instanceof String&&(c+="");var h=0,m=!1,C={next:function(){if(!m&&h<c.length){var M=h++;return{value:d(M,c[M]),done:!1}}return m=!0,{done:!0,value:void 0}}};return C[Symbol.iterator]=function(){return C},C}i("Array.prototype.values",function(c){return c||function(){return o(this,function(d,h){return h})}});var s=s||{},a=this||self;function u(c){var d=typeof c;return d=d!="object"?d:c?Array.isArray(c)?"array":d:"null",d=="array"||d=="object"&&typeof c.length=="number"}function l(c){var d=typeof c;return d=="object"&&c!=null||d=="function"}function f(c,d,h){return c.call.apply(c.bind,arguments)}function p(c,d,h){if(!c)throw Error();if(2<arguments.length){var m=Array.prototype.slice.call(arguments,2);return function(){var C=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(C,m),c.apply(d,C)}}return function(){return c.apply(d,arguments)}}function g(c,d,h){return g=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?f:p,g.apply(null,arguments)}function y(c,d){var h=Array.prototype.slice.call(arguments,1);return function(){var m=h.slice();return m.push.apply(m,arguments),c.apply(this,m)}}function D(c,d){function h(){}h.prototype=d.prototype,c.aa=d.prototype,c.prototype=new h,c.prototype.constructor=c,c.Qb=function(m,C,M){for(var U=Array(arguments.length-2),Le=2;Le<arguments.length;Le++)U[Le-2]=arguments[Le];return d.prototype[C].apply(m,U)}}function x(c){let d=c.length;if(0<d){let h=Array(d);for(let m=0;m<d;m++)h[m]=c[m];return h}return[]}function R(c,d){for(let h=1;h<arguments.length;h++){let m=arguments[h];if(u(m)){let C=c.length||0,M=m.length||0;c.length=C+M;for(let U=0;U<M;U++)c[C+U]=m[U]}else c.push(m)}}class O{constructor(d,h){this.i=d,this.j=h,this.h=0,this.g=null}get(){let d;return 0<this.h?(this.h--,d=this.g,this.g=d.next,d.next=null):d=this.i(),d}}function H(c){return/^[\s\xa0]*$/.test(c)}function Y(){var c=a.navigator;return c&&(c=c.userAgent)?c:""}function re(c){return re[" "](c),c}re[" "]=function(){};var Ke=Y().indexOf("Gecko")!=-1&&!(Y().toLowerCase().indexOf("webkit")!=-1&&Y().indexOf("Edge")==-1)&&!(Y().indexOf("Trident")!=-1||Y().indexOf("MSIE")!=-1)&&Y().indexOf("Edge")==-1;function ge(c,d,h){for(let m in c)d.call(h,c[m],m,c)}function b(c,d){for(let h in c)d.call(void 0,c[h],h,c)}function _(c){let d={};for(let h in c)d[h]=c[h];return d}let w="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function I(c,d){let h,m;for(let C=1;C<arguments.length;C++){m=arguments[C];for(h in m)c[h]=m[h];for(let M=0;M<w.length;M++)h=w[M],Object.prototype.hasOwnProperty.call(m,h)&&(c[h]=m[h])}}function T(c){var d=1;c=c.split(":");let h=[];for(;0<d&&c.length;)h.push(c.shift()),d--;return c.length&&h.push(c.join(":")),h}function S(c){a.setTimeout(()=>{throw c},0)}function E(){var c=Vg;let d=null;return c.g&&(d=c.g,c.g=c.g.next,c.g||(c.h=null),d.next=null),d}class jr{constructor(){this.h=this.g=null}add(d,h){let m=fc.get();m.set(d,h),this.h?this.h.next=m:this.g=m,this.h=m}}var fc=new O(()=>new ck,c=>c.reset());class ck{constructor(){this.next=this.g=this.h=null}set(d,h){this.h=d,this.g=h,this.next=null}reset(){this.next=this.g=this.h=null}}let hc,pc=!1,Vg=new jr,Mb=()=>{let c=a.Promise.resolve(void 0);hc=()=>{c.then(uk)}};var uk=()=>{for(var c;c=E();){try{c.h.call(c.g)}catch(h){S(h)}var d=fc;d.j(c),100>d.h&&(d.h++,c.next=d.g,d.g=c)}pc=!1};function Ti(){this.s=this.s,this.C=this.C}Ti.prototype.s=!1,Ti.prototype.ma=function(){this.s||(this.s=!0,this.N())},Ti.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Ot(c,d){this.type=c,this.g=this.target=d,this.defaultPrevented=!1}Ot.prototype.h=function(){this.defaultPrevented=!0};var lk=(function(){if(!a.addEventListener||!Object.defineProperty)return!1;var c=!1,d=Object.defineProperty({},"passive",{get:function(){c=!0}});try{let h=()=>{};a.addEventListener("test",h,d),a.removeEventListener("test",h,d)}catch{}return c})();function gc(c,d){if(Ot.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c){var h=this.type=c.type,m=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;if(this.target=c.target||c.srcElement,this.g=d,d=c.relatedTarget){if(Ke){e:{try{re(d.nodeName);var C=!0;break e}catch{}C=!1}C||(d=null)}}else h=="mouseover"?d=c.fromElement:h=="mouseout"&&(d=c.toElement);this.relatedTarget=d,m?(this.clientX=m.clientX!==void 0?m.clientX:m.pageX,this.clientY=m.clientY!==void 0?m.clientY:m.pageY,this.screenX=m.screenX||0,this.screenY=m.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=typeof c.pointerType=="string"?c.pointerType:dk[c.pointerType]||"",this.state=c.state,this.i=c,c.defaultPrevented&&gc.aa.h.call(this)}}D(gc,Ot);var dk={2:"touch",3:"pen",4:"mouse"};gc.prototype.h=function(){gc.aa.h.call(this);var c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var mc="closure_listenable_"+(1e6*Math.random()|0),fk=0;function hk(c,d,h,m,C){this.listener=c,this.proxy=null,this.src=d,this.type=h,this.capture=!!m,this.ha=C,this.key=++fk,this.da=this.fa=!1}function Ll(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function Vl(c){this.src=c,this.g={},this.h=0}Vl.prototype.add=function(c,d,h,m,C){var M=c.toString();c=this.g[M],c||(c=this.g[M]=[],this.h++);var U=Ug(c,d,m,C);return-1<U?(d=c[U],h||(d.fa=!1)):(d=new hk(d,this.src,M,!!m,C),d.fa=h,c.push(d)),d};function jg(c,d){var h=d.type;if(h in c.g){var m=c.g[h],C=Array.prototype.indexOf.call(m,d,void 0),M;(M=0<=C)&&Array.prototype.splice.call(m,C,1),M&&(Ll(d),c.g[h].length==0&&(delete c.g[h],c.h--))}}function Ug(c,d,h,m){for(var C=0;C<c.length;++C){var M=c[C];if(!M.da&&M.listener==d&&M.capture==!!h&&M.ha==m)return C}return-1}var Bg="closure_lm_"+(1e6*Math.random()|0),$g={};function Pb(c,d,h,m,C){if(m&&m.once)return kb(c,d,h,m,C);if(Array.isArray(d)){for(var M=0;M<d.length;M++)Pb(c,d[M],h,m,C);return null}return h=Gg(h),c&&c[mc]?c.K(d,h,l(m)?!!m.capture:!!m,C):xb(c,d,h,!1,m,C)}function xb(c,d,h,m,C,M){if(!d)throw Error("Invalid event type");var U=l(C)?!!C.capture:!!C,Le=qg(c);if(Le||(c[Bg]=Le=new Vl(c)),h=Le.add(d,h,m,U,M),h.proxy)return h;if(m=pk(),h.proxy=m,m.src=c,m.listener=h,c.addEventListener)lk||(C=U),C===void 0&&(C=!1),c.addEventListener(d.toString(),m,C);else if(c.attachEvent)c.attachEvent(Fb(d.toString()),m);else if(c.addListener&&c.removeListener)c.addListener(m);else throw Error("addEventListener and attachEvent are unavailable.");return h}function pk(){function c(h){return d.call(c.src,c.listener,h)}let d=gk;return c}function kb(c,d,h,m,C){if(Array.isArray(d)){for(var M=0;M<d.length;M++)kb(c,d[M],h,m,C);return null}return h=Gg(h),c&&c[mc]?c.L(d,h,l(m)?!!m.capture:!!m,C):xb(c,d,h,!0,m,C)}function Ob(c,d,h,m,C){if(Array.isArray(d))for(var M=0;M<d.length;M++)Ob(c,d[M],h,m,C);else m=l(m)?!!m.capture:!!m,h=Gg(h),c&&c[mc]?(c=c.i,d=String(d).toString(),d in c.g&&(M=c.g[d],h=Ug(M,h,m,C),-1<h&&(Ll(M[h]),Array.prototype.splice.call(M,h,1),M.length==0&&(delete c.g[d],c.h--)))):c&&(c=qg(c))&&(d=c.g[d.toString()],c=-1,d&&(c=Ug(d,h,m,C)),(h=-1<c?d[c]:null)&&Hg(h))}function Hg(c){if(typeof c!="number"&&c&&!c.da){var d=c.src;if(d&&d[mc])jg(d.i,c);else{var h=c.type,m=c.proxy;d.removeEventListener?d.removeEventListener(h,m,c.capture):d.detachEvent?d.detachEvent(Fb(h),m):d.addListener&&d.removeListener&&d.removeListener(m),(h=qg(d))?(jg(h,c),h.h==0&&(h.src=null,d[Bg]=null)):Ll(c)}}}function Fb(c){return c in $g?$g[c]:$g[c]="on"+c}function gk(c,d){if(c.da)c=!0;else{d=new gc(d,this);var h=c.listener,m=c.ha||c.src;c.fa&&Hg(c),c=h.call(m,d)}return c}function qg(c){return c=c[Bg],c instanceof Vl?c:null}var zg="__closure_events_fn_"+(1e9*Math.random()>>>0);function Gg(c){return typeof c=="function"?c:(c[zg]||(c[zg]=function(d){return c.handleEvent(d)}),c[zg])}function Ft(){Ti.call(this),this.i=new Vl(this),this.M=this,this.F=null}D(Ft,Ti),Ft.prototype[mc]=!0,Ft.prototype.removeEventListener=function(c,d,h,m){Ob(this,c,d,h,m)};function Qt(c,d){var h,m=c.F;if(m)for(h=[];m;m=m.F)h.push(m);if(c=c.M,m=d.type||d,typeof d=="string")d=new Ot(d,c);else if(d instanceof Ot)d.target=d.target||c;else{var C=d;d=new Ot(m,c),I(d,C)}if(C=!0,h)for(var M=h.length-1;0<=M;M--){var U=d.g=h[M];C=jl(U,m,!0,d)&&C}if(U=d.g=c,C=jl(U,m,!0,d)&&C,C=jl(U,m,!1,d)&&C,h)for(M=0;M<h.length;M++)U=d.g=h[M],C=jl(U,m,!1,d)&&C}Ft.prototype.N=function(){if(Ft.aa.N.call(this),this.i){var c=this.i,d;for(d in c.g){for(var h=c.g[d],m=0;m<h.length;m++)Ll(h[m]);delete c.g[d],c.h--}}this.F=null},Ft.prototype.K=function(c,d,h,m){return this.i.add(String(c),d,!1,h,m)},Ft.prototype.L=function(c,d,h,m){return this.i.add(String(c),d,!0,h,m)};function jl(c,d,h,m){if(d=c.i.g[String(d)],!d)return!0;d=d.concat();for(var C=!0,M=0;M<d.length;++M){var U=d[M];if(U&&!U.da&&U.capture==h){var Le=U.listener,At=U.ha||U.src;U.fa&&jg(c.i,U),C=Le.call(At,m)!==!1&&C}}return C&&!m.defaultPrevented}function Lb(c,d,h){if(typeof c=="function")h&&(c=g(c,h));else if(c&&typeof c.handleEvent=="function")c=g(c.handleEvent,c);else throw Error("Invalid listener argument");return 2147483647<Number(d)?-1:a.setTimeout(c,d||0)}function Vb(c){c.g=Lb(()=>{c.g=null,c.i&&(c.i=!1,Vb(c))},c.l);let d=c.h;c.h=null,c.m.apply(null,d)}class mk extends Ti{constructor(d,h){super(),this.m=d,this.l=h,this.h=null,this.i=!1,this.g=null}j(d){this.h=arguments,this.g?this.i=!0:Vb(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function yc(c){Ti.call(this),this.h=c,this.g={}}D(yc,Ti);var jb=[];function Ub(c){ge(c.g,function(d,h){this.g.hasOwnProperty(h)&&Hg(d)},c),c.g={}}yc.prototype.N=function(){yc.aa.N.call(this),Ub(this)},yc.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Wg=a.JSON.stringify,yk=a.JSON.parse,vk=class{stringify(c){return a.JSON.stringify(c,void 0)}parse(c){return a.JSON.parse(c,void 0)}};function Kg(){}Kg.prototype.h=null;function Bb(c){return c.h||(c.h=c.i())}function $b(){}var vc={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Qg(){Ot.call(this,"d")}D(Qg,Ot);function Yg(){Ot.call(this,"c")}D(Yg,Ot);var vo={},Hb=null;function Ul(){return Hb=Hb||new Ft}vo.La="serverreachability";function qb(c){Ot.call(this,vo.La,c)}D(qb,Ot);function _c(c){let d=Ul();Qt(d,new qb(d))}vo.STAT_EVENT="statevent";function zb(c,d){Ot.call(this,vo.STAT_EVENT,c),this.stat=d}D(zb,Ot);function Yt(c){let d=Ul();Qt(d,new zb(d,c))}vo.Ma="timingevent";function Gb(c,d){Ot.call(this,vo.Ma,c),this.size=d}D(Gb,Ot);function Ec(c,d){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){c()},d)}function wc(){this.g=!0}wc.prototype.xa=function(){this.g=!1};function _k(c,d,h,m,C,M){c.info(function(){if(c.g)if(M)for(var U="",Le=M.split("&"),At=0;At<Le.length;At++){var be=Le[At].split("=");if(1<be.length){var Lt=be[0];be=be[1];var Vt=Lt.split("_");U=2<=Vt.length&&Vt[1]=="type"?U+(Lt+"="+be+"&"):U+(Lt+"=redacted&")}}else U=null;else U=M;return"XMLHTTP REQ ("+m+") [attempt "+C+"]: "+d+`
`+h+`
`+U})}function Ek(c,d,h,m,C,M,U){c.info(function(){return"XMLHTTP RESP ("+m+") [ attempt "+C+"]: "+d+`
`+h+`
`+M+" "+U})}function ks(c,d,h,m){c.info(function(){return"XMLHTTP TEXT ("+d+"): "+Ik(c,h)+(m?" "+m:"")})}function wk(c,d){c.info(function(){return"TIMEOUT: "+d})}wc.prototype.info=function(){};function Ik(c,d){if(!c.g)return d;if(!d)return null;try{var h=JSON.parse(d);if(h){for(c=0;c<h.length;c++)if(Array.isArray(h[c])){var m=h[c];if(!(2>m.length)){var C=m[1];if(Array.isArray(C)&&!(1>C.length)){var M=C[0];if(M!="noop"&&M!="stop"&&M!="close")for(var U=1;U<C.length;U++)C[U]=""}}}}return Wg(h)}catch{return d}}var Bl={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Wb={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Jg;function $l(){}D($l,Kg),$l.prototype.g=function(){return new XMLHttpRequest},$l.prototype.i=function(){return{}},Jg=new $l;function Ci(c,d,h,m){this.j=c,this.i=d,this.l=h,this.R=m||1,this.U=new yc(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Kb}function Kb(){this.i=null,this.g="",this.h=!1}var Qb={},Zg={};function Xg(c,d,h){c.L=1,c.v=Gl(Ur(d)),c.m=h,c.P=!0,Yb(c,null)}function Yb(c,d){c.F=Date.now(),Hl(c),c.A=Ur(c.v);var h=c.A,m=c.R;Array.isArray(m)||(m=[String(m)]),lT(h.i,"t",m),c.C=0,h=c.j.J,c.h=new Kb,c.g=AT(c.j,h?d:null,!c.m),0<c.O&&(c.M=new mk(g(c.Y,c,c.g),c.O)),d=c.U,h=c.g,m=c.ca;var C="readystatechange";Array.isArray(C)||(C&&(jb[0]=C.toString()),C=jb);for(var M=0;M<C.length;M++){var U=Pb(h,C[M],m||d.handleEvent,!1,d.h||d);if(!U)break;d.g[U.key]=U}d=c.H?_(c.H):{},c.m?(c.u||(c.u="POST"),d["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.A,c.u,c.m,d)):(c.u="GET",c.g.ea(c.A,c.u,null,d)),_c(),_k(c.i,c.u,c.A,c.l,c.R,c.m)}Ci.prototype.ca=function(c){c=c.target;let d=this.M;d&&Br(c)==3?d.j():this.Y(c)},Ci.prototype.Y=function(c){try{if(c==this.g)e:{let Vt=Br(this.g);var d=this.g.Ba();let Ls=this.g.Z();if(!(3>Vt)&&(Vt!=3||this.g&&(this.h.h||this.g.oa()||yT(this.g)))){this.J||Vt!=4||d==7||(d==8||0>=Ls?_c(3):_c(2)),em(this);var h=this.g.Z();this.X=h;t:if(Jb(this)){var m=yT(this.g);c="";var C=m.length,M=Br(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){_o(this),Ic(this);var U="";break t}this.h.i=new a.TextDecoder}for(d=0;d<C;d++)this.h.h=!0,c+=this.h.i.decode(m[d],{stream:!(M&&d==C-1)});m.length=0,this.h.g+=c,this.C=0,U=this.h.g}else U=this.g.oa();if(this.o=h==200,Ek(this.i,this.u,this.A,this.l,this.R,Vt,h),this.o){if(this.T&&!this.K){t:{if(this.g){var Le,At=this.g;if((Le=At.g?At.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!H(Le)){var be=Le;break t}}be=null}if(h=be)ks(this.i,this.l,h,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,tm(this,h);else{this.o=!1,this.s=3,Yt(12),_o(this),Ic(this);break e}}if(this.P){h=!0;let Wn;for(;!this.J&&this.C<U.length;)if(Wn=bk(this,U),Wn==Zg){Vt==4&&(this.s=4,Yt(14),h=!1),ks(this.i,this.l,null,"[Incomplete Response]");break}else if(Wn==Qb){this.s=4,Yt(15),ks(this.i,this.l,U,"[Invalid Chunk]"),h=!1;break}else ks(this.i,this.l,Wn,null),tm(this,Wn);if(Jb(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Vt!=4||U.length!=0||this.h.h||(this.s=1,Yt(16),h=!1),this.o=this.o&&h,!h)ks(this.i,this.l,U,"[Invalid Chunked Response]"),_o(this),Ic(this);else if(0<U.length&&!this.W){this.W=!0;var Lt=this.j;Lt.g==this&&Lt.ba&&!Lt.M&&(Lt.j.info("Great, no buffering proxy detected. Bytes received: "+U.length),am(Lt),Lt.M=!0,Yt(11))}}else ks(this.i,this.l,U,null),tm(this,U);Vt==4&&_o(this),this.o&&!this.J&&(Vt==4?TT(this.j,this):(this.o=!1,Hl(this)))}else Uk(this.g),h==400&&0<U.indexOf("Unknown SID")?(this.s=3,Yt(12)):(this.s=0,Yt(13)),_o(this),Ic(this)}}}catch{}finally{}};function Jb(c){return c.g?c.u=="GET"&&c.L!=2&&c.j.Ca:!1}function bk(c,d){var h=c.C,m=d.indexOf(`
`,h);return m==-1?Zg:(h=Number(d.substring(h,m)),isNaN(h)?Qb:(m+=1,m+h>d.length?Zg:(d=d.slice(m,m+h),c.C=m+h,d)))}Ci.prototype.cancel=function(){this.J=!0,_o(this)};function Hl(c){c.S=Date.now()+c.I,Zb(c,c.I)}function Zb(c,d){if(c.B!=null)throw Error("WatchDog timer not null");c.B=Ec(g(c.ba,c),d)}function em(c){c.B&&(a.clearTimeout(c.B),c.B=null)}Ci.prototype.ba=function(){this.B=null;let c=Date.now();0<=c-this.S?(wk(this.i,this.A),this.L!=2&&(_c(),Yt(17)),_o(this),this.s=2,Ic(this)):Zb(this,this.S-c)};function Ic(c){c.j.G==0||c.J||TT(c.j,c)}function _o(c){em(c);var d=c.M;d&&typeof d.ma=="function"&&d.ma(),c.M=null,Ub(c.U),c.g&&(d=c.g,c.g=null,d.abort(),d.ma())}function tm(c,d){try{var h=c.j;if(h.G!=0&&(h.g==c||nm(h.h,c))){if(!c.K&&nm(h.h,c)&&h.G==3){try{var m=h.Da.g.parse(d)}catch{m=null}if(Array.isArray(m)&&m.length==3){var C=m;if(C[0]==0){e:if(!h.u){if(h.g)if(h.g.F+3e3<c.F)Jl(h),Ql(h);else break e;sm(h),Yt(18)}}else h.za=C[1],0<h.za-h.T&&37500>C[2]&&h.F&&h.v==0&&!h.C&&(h.C=Ec(g(h.Za,h),6e3));if(1>=tT(h.h)&&h.ca){try{h.ca()}catch{}h.ca=void 0}}else wo(h,11)}else if((c.K||h.g==c)&&Jl(h),!H(d))for(C=h.Da.g.parse(d),d=0;d<C.length;d++){let be=C[d];if(h.T=be[0],be=be[1],h.G==2)if(be[0]=="c"){h.K=be[1],h.ia=be[2];let Lt=be[3];Lt!=null&&(h.la=Lt,h.j.info("VER="+h.la));let Vt=be[4];Vt!=null&&(h.Aa=Vt,h.j.info("SVER="+h.Aa));let Ls=be[5];Ls!=null&&typeof Ls=="number"&&0<Ls&&(m=1.5*Ls,h.L=m,h.j.info("backChannelRequestTimeoutMs_="+m)),m=h;let Wn=c.g;if(Wn){let Xl=Wn.g?Wn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Xl){var M=m.h;M.g||Xl.indexOf("spdy")==-1&&Xl.indexOf("quic")==-1&&Xl.indexOf("h2")==-1||(M.j=M.l,M.g=new Set,M.h&&(rm(M,M.h),M.h=null))}if(m.D){let cm=Wn.g?Wn.g.getResponseHeader("X-HTTP-Session-Id"):null;cm&&(m.ya=cm,$e(m.I,m.D,cm))}}h.G=3,h.l&&h.l.ua(),h.ba&&(h.R=Date.now()-c.F,h.j.info("Handshake RTT: "+h.R+"ms")),m=h;var U=c;if(m.qa=ST(m,m.J?m.ia:null,m.W),U.K){nT(m.h,U);var Le=U,At=m.L;At&&(Le.I=At),Le.B&&(em(Le),Hl(Le)),m.g=U}else IT(m);0<h.i.length&&Yl(h)}else be[0]!="stop"&&be[0]!="close"||wo(h,7);else h.G==3&&(be[0]=="stop"||be[0]=="close"?be[0]=="stop"?wo(h,7):om(h):be[0]!="noop"&&h.l&&h.l.ta(be),h.v=0)}}_c(4)}catch{}}var Tk=class{constructor(c,d){this.g=c,this.map=d}};function Xb(c){this.l=c||10,a.PerformanceNavigationTiming?(c=a.performance.getEntriesByType("navigation"),c=0<c.length&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function eT(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function tT(c){return c.h?1:c.g?c.g.size:0}function nm(c,d){return c.h?c.h==d:c.g?c.g.has(d):!1}function rm(c,d){c.g?c.g.add(d):c.h=d}function nT(c,d){c.h&&c.h==d?c.h=null:c.g&&c.g.has(d)&&c.g.delete(d)}Xb.prototype.cancel=function(){if(this.i=rT(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let c of this.g.values())c.cancel();this.g.clear()}};function rT(c){if(c.h!=null)return c.i.concat(c.h.D);if(c.g!=null&&c.g.size!==0){let d=c.i;for(let h of c.g.values())d=d.concat(h.D);return d}return x(c.i)}function Ck(c){if(c.V&&typeof c.V=="function")return c.V();if(typeof Map<"u"&&c instanceof Map||typeof Set<"u"&&c instanceof Set)return Array.from(c.values());if(typeof c=="string")return c.split("");if(u(c)){for(var d=[],h=c.length,m=0;m<h;m++)d.push(c[m]);return d}d=[],h=0;for(m in c)d[h++]=c[m];return d}function Dk(c){if(c.na&&typeof c.na=="function")return c.na();if(!c.V||typeof c.V!="function"){if(typeof Map<"u"&&c instanceof Map)return Array.from(c.keys());if(!(typeof Set<"u"&&c instanceof Set)){if(u(c)||typeof c=="string"){var d=[];c=c.length;for(var h=0;h<c;h++)d.push(h);return d}d=[],h=0;for(let m in c)d[h++]=m;return d}}}function iT(c,d){if(c.forEach&&typeof c.forEach=="function")c.forEach(d,void 0);else if(u(c)||typeof c=="string")Array.prototype.forEach.call(c,d,void 0);else for(var h=Dk(c),m=Ck(c),C=m.length,M=0;M<C;M++)d.call(void 0,m[M],h&&h[M],c)}var oT=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Sk(c,d){if(c){c=c.split("&");for(var h=0;h<c.length;h++){var m=c[h].indexOf("="),C=null;if(0<=m){var M=c[h].substring(0,m);C=c[h].substring(m+1)}else M=c[h];d(M,C?decodeURIComponent(C.replace(/\+/g," ")):"")}}}function Eo(c){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,c instanceof Eo){this.h=c.h,ql(this,c.j),this.o=c.o,this.g=c.g,zl(this,c.s),this.l=c.l;var d=c.i,h=new Cc;h.i=d.i,d.g&&(h.g=new Map(d.g),h.h=d.h),sT(this,h),this.m=c.m}else c&&(d=String(c).match(oT))?(this.h=!1,ql(this,d[1]||"",!0),this.o=bc(d[2]||""),this.g=bc(d[3]||"",!0),zl(this,d[4]),this.l=bc(d[5]||"",!0),sT(this,d[6]||"",!0),this.m=bc(d[7]||"")):(this.h=!1,this.i=new Cc(null,this.h))}Eo.prototype.toString=function(){var c=[],d=this.j;d&&c.push(Tc(d,aT,!0),":");var h=this.g;return(h||d=="file")&&(c.push("//"),(d=this.o)&&c.push(Tc(d,aT,!0),"@"),c.push(encodeURIComponent(String(h)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h=this.s,h!=null&&c.push(":",String(h))),(h=this.l)&&(this.g&&h.charAt(0)!="/"&&c.push("/"),c.push(Tc(h,h.charAt(0)=="/"?Nk:Rk,!0))),(h=this.i.toString())&&c.push("?",h),(h=this.m)&&c.push("#",Tc(h,Pk)),c.join("")};function Ur(c){return new Eo(c)}function ql(c,d,h){c.j=h?bc(d,!0):d,c.j&&(c.j=c.j.replace(/:$/,""))}function zl(c,d){if(d){if(d=Number(d),isNaN(d)||0>d)throw Error("Bad port number "+d);c.s=d}else c.s=null}function sT(c,d,h){d instanceof Cc?(c.i=d,xk(c.i,c.h)):(h||(d=Tc(d,Mk)),c.i=new Cc(d,c.h))}function $e(c,d,h){c.i.set(d,h)}function Gl(c){return $e(c,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),c}function bc(c,d){return c?d?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function Tc(c,d,h){return typeof c=="string"?(c=encodeURI(c).replace(d,Ak),h&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function Ak(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var aT=/[#\/\?@]/g,Rk=/[#\?:]/g,Nk=/[#\?]/g,Mk=/[#\?@]/g,Pk=/#/g;function Cc(c,d){this.h=this.g=null,this.i=c||null,this.j=!!d}function Di(c){c.g||(c.g=new Map,c.h=0,c.i&&Sk(c.i,function(d,h){c.add(decodeURIComponent(d.replace(/\+/g," ")),h)}))}t=Cc.prototype,t.add=function(c,d){Di(this),this.i=null,c=Os(this,c);var h=this.g.get(c);return h||this.g.set(c,h=[]),h.push(d),this.h+=1,this};function cT(c,d){Di(c),d=Os(c,d),c.g.has(d)&&(c.i=null,c.h-=c.g.get(d).length,c.g.delete(d))}function uT(c,d){return Di(c),d=Os(c,d),c.g.has(d)}t.forEach=function(c,d){Di(this),this.g.forEach(function(h,m){h.forEach(function(C){c.call(d,C,m,this)},this)},this)},t.na=function(){Di(this);let c=Array.from(this.g.values()),d=Array.from(this.g.keys()),h=[];for(let m=0;m<d.length;m++){let C=c[m];for(let M=0;M<C.length;M++)h.push(d[m])}return h},t.V=function(c){Di(this);let d=[];if(typeof c=="string")uT(this,c)&&(d=d.concat(this.g.get(Os(this,c))));else{c=Array.from(this.g.values());for(let h=0;h<c.length;h++)d=d.concat(c[h])}return d},t.set=function(c,d){return Di(this),this.i=null,c=Os(this,c),uT(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[d]),this.h+=1,this},t.get=function(c,d){return c?(c=this.V(c),0<c.length?String(c[0]):d):d};function lT(c,d,h){cT(c,d),0<h.length&&(c.i=null,c.g.set(Os(c,d),x(h)),c.h+=h.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";let c=[],d=Array.from(this.g.keys());for(var h=0;h<d.length;h++){var m=d[h];let M=encodeURIComponent(String(m)),U=this.V(m);for(m=0;m<U.length;m++){var C=M;U[m]!==""&&(C+="="+encodeURIComponent(String(U[m]))),c.push(C)}}return this.i=c.join("&")};function Os(c,d){return d=String(d),c.j&&(d=d.toLowerCase()),d}function xk(c,d){d&&!c.j&&(Di(c),c.i=null,c.g.forEach(function(h,m){var C=m.toLowerCase();m!=C&&(cT(this,m),lT(this,C,h))},c)),c.j=d}function kk(c,d){let h=new wc;if(a.Image){let m=new Image;m.onload=y(Si,h,"TestLoadImage: loaded",!0,d,m),m.onerror=y(Si,h,"TestLoadImage: error",!1,d,m),m.onabort=y(Si,h,"TestLoadImage: abort",!1,d,m),m.ontimeout=y(Si,h,"TestLoadImage: timeout",!1,d,m),a.setTimeout(function(){m.ontimeout&&m.ontimeout()},1e4),m.src=c}else d(!1)}function Ok(c,d){let h=new wc,m=new AbortController,C=setTimeout(()=>{m.abort(),Si(h,"TestPingServer: timeout",!1,d)},1e4);fetch(c,{signal:m.signal}).then(M=>{clearTimeout(C),M.ok?Si(h,"TestPingServer: ok",!0,d):Si(h,"TestPingServer: server error",!1,d)}).catch(()=>{clearTimeout(C),Si(h,"TestPingServer: error",!1,d)})}function Si(c,d,h,m,C){try{C&&(C.onload=null,C.onerror=null,C.onabort=null,C.ontimeout=null),m(h)}catch{}}function Fk(){this.g=new vk}function Lk(c,d,h){let m=h||"";try{iT(c,function(C,M){let U=C;l(C)&&(U=Wg(C)),d.push(m+M+"="+encodeURIComponent(U))})}catch(C){throw d.push(m+"type="+encodeURIComponent("_badmap")),C}}function Dc(c){this.l=c.Ub||null,this.j=c.eb||!1}D(Dc,Kg),Dc.prototype.g=function(){return new Wl(this.l,this.j)},Dc.prototype.i=(function(c){return function(){return c}})({});function Wl(c,d){Ft.call(this),this.D=c,this.o=d,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}D(Wl,Ft),t=Wl.prototype,t.open=function(c,d){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=c,this.A=d,this.readyState=1,Ac(this)},t.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let d={headers:this.u,method:this.B,credentials:this.m,cache:void 0};c&&(d.body=c),(this.D||a).fetch(new Request(this.A,d)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Sc(this)),this.readyState=0},t.Sa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,Ac(this)),this.g&&(this.readyState=3,Ac(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;dT(this)}else c.text().then(this.Ra.bind(this),this.ga.bind(this))};function dT(c){c.j.read().then(c.Pa.bind(c)).catch(c.ga.bind(c))}t.Pa=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var d=c.value?c.value:new Uint8Array(0);(d=this.v.decode(d,{stream:!c.done}))&&(this.response=this.responseText+=d)}c.done?Sc(this):Ac(this),this.readyState==3&&dT(this)}},t.Ra=function(c){this.g&&(this.response=this.responseText=c,Sc(this))},t.Qa=function(c){this.g&&(this.response=c,Sc(this))},t.ga=function(){this.g&&Sc(this)};function Sc(c){c.readyState=4,c.l=null,c.j=null,c.v=null,Ac(c)}t.setRequestHeader=function(c,d){this.u.append(c,d)},t.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";let c=[],d=this.h.entries();for(var h=d.next();!h.done;)h=h.value,c.push(h[0]+": "+h[1]),h=d.next();return c.join(`\r
`)};function Ac(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(Wl.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function fT(c){let d="";return ge(c,function(h,m){d+=m,d+=":",d+=h,d+=`\r
`}),d}function im(c,d,h){e:{for(m in h){var m=!1;break e}m=!0}m||(h=fT(h),typeof c=="string"?h!=null&&encodeURIComponent(String(h)):$e(c,d,h))}function Ye(c){Ft.call(this),this.headers=new Map,this.o=c||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}D(Ye,Ft);var Vk=/^https?$/i,jk=["POST","PUT"];t=Ye.prototype,t.Ha=function(c){this.J=c},t.ea=function(c,d,h,m){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);d=d?d.toUpperCase():"GET",this.D=c,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Jg.g(),this.v=this.o?Bb(this.o):Bb(Jg),this.g.onreadystatechange=g(this.Ea,this);try{this.B=!0,this.g.open(d,String(c),!0),this.B=!1}catch(M){hT(this,M);return}if(c=h||"",h=new Map(this.headers),m)if(Object.getPrototypeOf(m)===Object.prototype)for(var C in m)h.set(C,m[C]);else if(typeof m.keys=="function"&&typeof m.get=="function")for(let M of m.keys())h.set(M,m.get(M));else throw Error("Unknown input type for opt_headers: "+String(m));m=Array.from(h.keys()).find(M=>M.toLowerCase()=="content-type"),C=a.FormData&&c instanceof a.FormData,!(0<=Array.prototype.indexOf.call(jk,d,void 0))||m||C||h.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[M,U]of h)this.g.setRequestHeader(M,U);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{mT(this),this.u=!0,this.g.send(c),this.u=!1}catch(M){hT(this,M)}};function hT(c,d){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=d,c.m=5,pT(c),Kl(c)}function pT(c){c.A||(c.A=!0,Qt(c,"complete"),Qt(c,"error"))}t.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=c||7,Qt(this,"complete"),Qt(this,"abort"),Kl(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Kl(this,!0)),Ye.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?gT(this):this.bb())},t.bb=function(){gT(this)};function gT(c){if(c.h&&typeof s<"u"&&(!c.v[1]||Br(c)!=4||c.Z()!=2)){if(c.u&&Br(c)==4)Lb(c.Ea,0,c);else if(Qt(c,"readystatechange"),Br(c)==4){c.h=!1;try{let U=c.Z();e:switch(U){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var d=!0;break e;default:d=!1}var h;if(!(h=d)){var m;if(m=U===0){var C=String(c.D).match(oT)[1]||null;!C&&a.self&&a.self.location&&(C=a.self.location.protocol.slice(0,-1)),m=!Vk.test(C?C.toLowerCase():"")}h=m}if(h)Qt(c,"complete"),Qt(c,"success");else{c.m=6;try{var M=2<Br(c)?c.g.statusText:""}catch{M=""}c.l=M+" ["+c.Z()+"]",pT(c)}}finally{Kl(c)}}}}function Kl(c,d){if(c.g){mT(c);let h=c.g,m=c.v[0]?()=>{}:null;c.g=null,c.v=null,d||Qt(c,"ready");try{h.onreadystatechange=m}catch{}}}function mT(c){c.I&&(a.clearTimeout(c.I),c.I=null)}t.isActive=function(){return!!this.g};function Br(c){return c.g?c.g.readyState:0}t.Z=function(){try{return 2<Br(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(c){if(this.g){var d=this.g.responseText;return c&&d.indexOf(c)==0&&(d=d.substring(c.length)),yk(d)}};function yT(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.H){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function Uk(c){let d={};c=(c.g&&2<=Br(c)&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let m=0;m<c.length;m++){if(H(c[m]))continue;var h=T(c[m]);let C=h[0];if(h=h[1],typeof h!="string")continue;h=h.trim();let M=d[C]||[];d[C]=M,M.push(h)}b(d,function(m){return m.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Rc(c,d,h){return h&&h.internalChannelParams&&h.internalChannelParams[c]||d}function vT(c){this.Aa=0,this.i=[],this.j=new wc,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Rc("failFast",!1,c),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Rc("baseRetryDelayMs",5e3,c),this.cb=Rc("retryDelaySeedMs",1e4,c),this.Wa=Rc("forwardChannelMaxRetries",2,c),this.wa=Rc("forwardChannelRequestTimeoutMs",2e4,c),this.pa=c&&c.xmlHttpFactory||void 0,this.Xa=c&&c.Tb||void 0,this.Ca=c&&c.useFetchStreams||!1,this.L=void 0,this.J=c&&c.supportsCrossDomainXhr||!1,this.K="",this.h=new Xb(c&&c.concurrentRequestLimit),this.Da=new Fk,this.P=c&&c.fastHandshake||!1,this.O=c&&c.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=c&&c.Rb||!1,c&&c.xa&&this.j.xa(),c&&c.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&c&&c.detectBufferingProxy||!1,this.ja=void 0,c&&c.longPollingTimeout&&0<c.longPollingTimeout&&(this.ja=c.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=vT.prototype,t.la=8,t.G=1,t.connect=function(c,d,h,m){Yt(0),this.W=c,this.H=d||{},h&&m!==void 0&&(this.H.OSID=h,this.H.OAID=m),this.F=this.X,this.I=ST(this,null,this.W),Yl(this)};function om(c){if(_T(c),c.G==3){var d=c.U++,h=Ur(c.I);if($e(h,"SID",c.K),$e(h,"RID",d),$e(h,"TYPE","terminate"),Nc(c,h),d=new Ci(c,c.j,d),d.L=2,d.v=Gl(Ur(h)),h=!1,a.navigator&&a.navigator.sendBeacon)try{h=a.navigator.sendBeacon(d.v.toString(),"")}catch{}!h&&a.Image&&(new Image().src=d.v,h=!0),h||(d.g=AT(d.j,null),d.g.ea(d.v)),d.F=Date.now(),Hl(d)}DT(c)}function Ql(c){c.g&&(am(c),c.g.cancel(),c.g=null)}function _T(c){Ql(c),c.u&&(a.clearTimeout(c.u),c.u=null),Jl(c),c.h.cancel(),c.s&&(typeof c.s=="number"&&a.clearTimeout(c.s),c.s=null)}function Yl(c){if(!eT(c.h)&&!c.s){c.s=!0;var d=c.Ga;hc||Mb(),pc||(hc(),pc=!0),Vg.add(d,c),c.B=0}}function Bk(c,d){return tT(c.h)>=c.h.j-(c.s?1:0)?!1:c.s?(c.i=d.D.concat(c.i),!0):c.G==1||c.G==2||c.B>=(c.Va?0:c.Wa)?!1:(c.s=Ec(g(c.Ga,c,d),CT(c,c.B)),c.B++,!0)}t.Ga=function(c){if(this.s)if(this.s=null,this.G==1){if(!c){this.U=Math.floor(1e5*Math.random()),c=this.U++;let C=new Ci(this,this.j,c),M=this.o;if(this.S&&(M?(M=_(M),I(M,this.S)):M=this.S),this.m!==null||this.O||(C.H=M,M=null),this.P)e:{for(var d=0,h=0;h<this.i.length;h++){t:{var m=this.i[h];if("__data__"in m.map&&(m=m.map.__data__,typeof m=="string")){m=m.length;break t}m=void 0}if(m===void 0)break;if(d+=m,4096<d){d=h;break e}if(d===4096||h===this.i.length-1){d=h+1;break e}}d=1e3}else d=1e3;d=wT(this,C,d),h=Ur(this.I),$e(h,"RID",c),$e(h,"CVER",22),this.D&&$e(h,"X-HTTP-Session-Id",this.D),Nc(this,h),M&&(this.O?d="headers="+encodeURIComponent(String(fT(M)))+"&"+d:this.m&&im(h,this.m,M)),rm(this.h,C),this.Ua&&$e(h,"TYPE","init"),this.P?($e(h,"$req",d),$e(h,"SID","null"),C.T=!0,Xg(C,h,null)):Xg(C,h,d),this.G=2}}else this.G==3&&(c?ET(this,c):this.i.length==0||eT(this.h)||ET(this))};function ET(c,d){var h;d?h=d.l:h=c.U++;let m=Ur(c.I);$e(m,"SID",c.K),$e(m,"RID",h),$e(m,"AID",c.T),Nc(c,m),c.m&&c.o&&im(m,c.m,c.o),h=new Ci(c,c.j,h,c.B+1),c.m===null&&(h.H=c.o),d&&(c.i=d.D.concat(c.i)),d=wT(c,h,1e3),h.I=Math.round(.5*c.wa)+Math.round(.5*c.wa*Math.random()),rm(c.h,h),Xg(h,m,d)}function Nc(c,d){c.H&&ge(c.H,function(h,m){$e(d,m,h)}),c.l&&iT({},function(h,m){$e(d,m,h)})}function wT(c,d,h){h=Math.min(c.i.length,h);var m=c.l?g(c.l.Na,c.l,c):null;e:{var C=c.i;let M=-1;for(;;){let U=["count="+h];M==-1?0<h?(M=C[0].g,U.push("ofs="+M)):M=0:U.push("ofs="+M);let Le=!0;for(let At=0;At<h;At++){let be=C[At].g,Lt=C[At].map;if(be-=M,0>be)M=Math.max(0,C[At].g-100),Le=!1;else try{Lk(Lt,U,"req"+be+"_")}catch{m&&m(Lt)}}if(Le){m=U.join("&");break e}}}return c=c.i.splice(0,h),d.D=c,m}function IT(c){if(!c.g&&!c.u){c.Y=1;var d=c.Fa;hc||Mb(),pc||(hc(),pc=!0),Vg.add(d,c),c.v=0}}function sm(c){return c.g||c.u||3<=c.v?!1:(c.Y++,c.u=Ec(g(c.Fa,c),CT(c,c.v)),c.v++,!0)}t.Fa=function(){if(this.u=null,bT(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var c=2*this.R;this.j.info("BP detection timer enabled: "+c),this.A=Ec(g(this.ab,this),c)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Yt(10),Ql(this),bT(this))};function am(c){c.A!=null&&(a.clearTimeout(c.A),c.A=null)}function bT(c){c.g=new Ci(c,c.j,"rpc",c.Y),c.m===null&&(c.g.H=c.o),c.g.O=0;var d=Ur(c.qa);$e(d,"RID","rpc"),$e(d,"SID",c.K),$e(d,"AID",c.T),$e(d,"CI",c.F?"0":"1"),!c.F&&c.ja&&$e(d,"TO",c.ja),$e(d,"TYPE","xmlhttp"),Nc(c,d),c.m&&c.o&&im(d,c.m,c.o),c.L&&(c.g.I=c.L);var h=c.g;c=c.ia,h.L=1,h.v=Gl(Ur(d)),h.m=null,h.P=!0,Yb(h,c)}t.Za=function(){this.C!=null&&(this.C=null,Ql(this),sm(this),Yt(19))};function Jl(c){c.C!=null&&(a.clearTimeout(c.C),c.C=null)}function TT(c,d){var h=null;if(c.g==d){Jl(c),am(c),c.g=null;var m=2}else if(nm(c.h,d))h=d.D,nT(c.h,d),m=1;else return;if(c.G!=0){if(d.o)if(m==1){h=d.m?d.m.length:0,d=Date.now()-d.F;var C=c.B;m=Ul(),Qt(m,new Gb(m,h)),Yl(c)}else IT(c);else if(C=d.s,C==3||C==0&&0<d.X||!(m==1&&Bk(c,d)||m==2&&sm(c)))switch(h&&0<h.length&&(d=c.h,d.i=d.i.concat(h)),C){case 1:wo(c,5);break;case 4:wo(c,10);break;case 3:wo(c,6);break;default:wo(c,2)}}}function CT(c,d){let h=c.Ta+Math.floor(Math.random()*c.cb);return c.isActive()||(h*=2),h*d}function wo(c,d){if(c.j.info("Error code "+d),d==2){var h=g(c.fb,c),m=c.Xa;let C=!m;m=new Eo(m||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||ql(m,"https"),Gl(m),C?kk(m.toString(),h):Ok(m.toString(),h)}else Yt(2);c.G=0,c.l&&c.l.sa(d),DT(c),_T(c)}t.fb=function(c){c?(this.j.info("Successfully pinged google.com"),Yt(2)):(this.j.info("Failed to ping google.com"),Yt(1))};function DT(c){if(c.G=0,c.ka=[],c.l){let d=rT(c.h);(d.length!=0||c.i.length!=0)&&(R(c.ka,d),R(c.ka,c.i),c.h.i.length=0,x(c.i),c.i.length=0),c.l.ra()}}function ST(c,d,h){var m=h instanceof Eo?Ur(h):new Eo(h);if(m.g!="")d&&(m.g=d+"."+m.g),zl(m,m.s);else{var C=a.location;m=C.protocol,d=d?d+"."+C.hostname:C.hostname,C=+C.port;var M=new Eo(null);m&&ql(M,m),d&&(M.g=d),C&&zl(M,C),h&&(M.l=h),m=M}return h=c.D,d=c.ya,h&&d&&$e(m,h,d),$e(m,"VER",c.la),Nc(c,m),m}function AT(c,d,h){if(d&&!c.J)throw Error("Can't create secondary domain capable XhrIo object.");return d=c.Ca&&!c.pa?new Ye(new Dc({eb:h})):new Ye(c.pa),d.Ha(c.J),d}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function RT(){}t=RT.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Zl(){}Zl.prototype.g=function(c,d){return new mn(c,d)};function mn(c,d){Ft.call(this),this.g=new vT(d),this.l=c,this.h=d&&d.messageUrlParams||null,c=d&&d.messageHeaders||null,d&&d.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=d&&d.initMessageHeaders||null,d&&d.messageContentType&&(c?c["X-WebChannel-Content-Type"]=d.messageContentType:c={"X-WebChannel-Content-Type":d.messageContentType}),d&&d.va&&(c?c["X-WebChannel-Client-Profile"]=d.va:c={"X-WebChannel-Client-Profile":d.va}),this.g.S=c,(c=d&&d.Sb)&&!H(c)&&(this.g.m=c),this.v=d&&d.supportsCrossDomainXhr||!1,this.u=d&&d.sendRawJson||!1,(d=d&&d.httpSessionIdParam)&&!H(d)&&(this.g.D=d,c=this.h,c!==null&&d in c&&(c=this.h,d in c&&delete c[d])),this.j=new Fs(this)}D(mn,Ft),mn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},mn.prototype.close=function(){om(this.g)},mn.prototype.o=function(c){var d=this.g;if(typeof c=="string"){var h={};h.__data__=c,c=h}else this.u&&(h={},h.__data__=Wg(c),c=h);d.i.push(new Tk(d.Ya++,c)),d.G==3&&Yl(d)},mn.prototype.N=function(){this.g.l=null,delete this.j,om(this.g),delete this.g,mn.aa.N.call(this)};function NT(c){Qg.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var d=c.__sm__;if(d){e:{for(let h in d){c=h;break e}c=void 0}(this.i=c)&&(c=this.i,d=d!==null&&c in d?d[c]:void 0),this.data=d}else this.data=c}D(NT,Qg);function MT(){Yg.call(this),this.status=1}D(MT,Yg);function Fs(c){this.g=c}D(Fs,RT),Fs.prototype.ua=function(){Qt(this.g,"a")},Fs.prototype.ta=function(c){Qt(this.g,new NT(c))},Fs.prototype.sa=function(c){Qt(this.g,new MT)},Fs.prototype.ra=function(){Qt(this.g,"b")},Zl.prototype.createWebChannel=Zl.prototype.g,mn.prototype.send=mn.prototype.o,mn.prototype.open=mn.prototype.m,mn.prototype.close=mn.prototype.close,UE=pi.createWebChannelTransport=function(){return new Zl},jE=pi.getStatEventTarget=function(){return Ul()},VE=pi.Event=vo,cp=pi.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Bl.NO_ERROR=0,Bl.TIMEOUT=8,Bl.HTTP_ERROR=6,il=pi.ErrorCode=Bl,Wb.COMPLETE="complete",LE=pi.EventType=Wb,$b.EventType=vc,vc.OPEN="a",vc.CLOSE="b",vc.ERROR="c",vc.MESSAGE="d",Ft.prototype.listen=Ft.prototype.K,Fa=pi.WebChannel=$b,I4=pi.FetchXmlHttpFactory=Dc,Ye.prototype.listenOnce=Ye.prototype.L,Ye.prototype.getLastError=Ye.prototype.Ka,Ye.prototype.getLastErrorCode=Ye.prototype.Ba,Ye.prototype.getStatus=Ye.prototype.Z,Ye.prototype.getResponseJson=Ye.prototype.Oa,Ye.prototype.getResponseText=Ye.prototype.oa,Ye.prototype.send=Ye.prototype.ea,Ye.prototype.setWithCredentials=Ye.prototype.Ha,FE=pi.XhrIo=Ye}).apply(typeof ap<"u"?ap:typeof self<"u"?self:typeof window<"u"?window:{});var mN="@firebase/firestore",yN="4.8.0";var Dt=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Dt.UNAUTHENTICATED=new Dt(null),Dt.GOOGLE_CREDENTIALS=new Dt("google-credentials-uid"),Dt.FIRST_PARTY=new Dt("first-party-uid"),Dt.MOCK_USER=new Dt("mock-user");var tc="11.10.0";var ws=new Mr("@firebase/firestore");function La(){return ws.logLevel}function z(t,...e){if(ws.logLevel<=me.DEBUG){let n=e.map(RI);ws.debug(`Firestore (${tc}): ${t}`,...n)}}function mi(t,...e){if(ws.logLevel<=me.ERROR){let n=e.map(RI);ws.error(`Firestore (${tc}): ${t}`,...n)}}function oo(t,...e){if(ws.logLevel<=me.WARN){let n=e.map(RI);ws.warn(`Firestore (${tc}): ${t}`,...n)}}function RI(t){if(typeof t=="string")return t;try{return(function(n){return JSON.stringify(n)})(t)}catch{return t}}function Z(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,uM(t,r,n)}function uM(t,e,n){let r=`FIRESTORE (${tc}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw mi(r),new Error(r)}function Ne(t,e,n,r){let i="Unexpected state";typeof n=="string"?i=n:r=n,t||uM(e,i,r)}function oe(t,e){return t}var k={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},$=class extends fn{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var hr=class{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}};var gp=class{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},zE=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Dt.UNAUTHENTICATED))}shutdown(){}},GE=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}},WE=class{constructor(e){this.t=e,this.currentUser=Dt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Ne(this.o===void 0,42304);let r=this.i,i=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve(),o=new hr;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new hr,e.enqueueRetryable(()=>i(this.currentUser))};let s=()=>{let u=o;e.enqueueRetryable(()=>v(this,null,function*(){yield u.promise,yield i(this.currentUser)}))},a=u=>{z("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit(u=>a(u)),setTimeout(()=>{if(!this.auth){let u=this.t.getImmediate({optional:!0});u?a(u):(z("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new hr)}},0),s()}getToken(){let e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(z("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Ne(typeof r.accessToken=="string",31837,{l:r}),new gp(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return Ne(e===null||typeof e=="string",2055,{h:e}),new Dt(e)}},KE=class{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=Dt.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);let e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}},QE=class{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new KE(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(Dt.FIRST_PARTY))}shutdown(){}invalidateToken(){}},mp=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},YE=class{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,ci(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){Ne(this.o===void 0,3512);let r=o=>{o.error!=null&&z("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);let s=o.token!==this.m;return this.m=o.token,z("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?n(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};let i=o=>{z("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){let o=this.V.getImmediate({optional:!0});o?i(o):z("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new mp(this.p));let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Ne(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new mp(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function b4(t){let e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}function lM(){return new TextEncoder}var ll=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516),r="";for(;r.length<20;){let i=b4(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<n&&(r+=e.charAt(i[o]%62))}return r}};function he(t,e){return t<e?-1:t>e?1:0}function JE(t,e){let n=0;for(;n<t.length&&n<e.length;){let r=t.codePointAt(n),i=e.codePointAt(n);if(r!==i){if(r<128&&i<128)return he(r,i);{let o=lM(),s=T4(o.encode(vN(t,n)),o.encode(vN(e,n)));return s!==0?s:he(r,i)}}n+=r>65535?2:1}return he(t.length,e.length)}function vN(t,e){return t.codePointAt(e)>65535?t.substring(e,e+2):t.substring(e,e+1)}function T4(t,e){for(let n=0;n<t.length&&n<e.length;++n)if(t[n]!==e[n])return he(t[n],e[n]);return he(t.length,e.length)}function qa(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}var _N="__name__",yp=class t{constructor(e,n,r){n===void 0?n=0:n>e.length&&Z(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&Z(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return t.comparator(this,e)===0}child(e){let n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){let r=Math.min(e.length,n.length);for(let i=0;i<r;i++){let o=t.compareSegments(e.get(i),n.get(i));if(o!==0)return o}return he(e.length,n.length)}static compareSegments(e,n){let r=t.isNumericId(e),i=t.isNumericId(n);return r&&!i?-1:!r&&i?1:r&&i?t.extractNumericId(e).compare(t.extractNumericId(n)):JE(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return hi.fromString(e.substring(4,e.length-2))}},We=class t extends yp{construct(e,n,r){return new t(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let n=[];for(let r of e){if(r.indexOf("//")>=0)throw new $(k.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new t(n)}static emptyPath(){return new t([])}},C4=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Dn=class t extends yp{construct(e,n,r){return new t(e,n,r)}static isValidIdentifier(e){return C4.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),t.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===_N}static keyField(){return new t([_N])}static fromServerFormat(e){let n=[],r="",i=0,o=()=>{if(r.length===0)throw new $(k.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""},s=!1;for(;i<e.length;){let a=e[i];if(a==="\\"){if(i+1===e.length)throw new $(k.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let u=e[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new $(k.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else a==="`"?(s=!s,i++):a!=="."||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new $(k.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new t(n)}static emptyPath(){return new t([])}};var Q=class t{constructor(e){this.path=e}static fromPath(e){return new t(We.fromString(e))}static fromName(e){return new t(We.fromString(e).popFirst(5))}static empty(){return new t(We.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&We.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return We.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new t(new We(e.slice()))}};function dM(t,e,n){if(!n)throw new $(k.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function D4(t,e,n,r){if(e===!0&&r===!0)throw new $(k.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function EN(t){if(!Q.isDocumentKey(t))throw new $(k.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function wN(t){if(Q.isDocumentKey(t))throw new $(k.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function fM(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function Zp(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{let e=(function(r){return r.constructor?r.constructor.name:null})(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Z(12329,{type:typeof t})}function Sn(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new $(k.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let n=Zp(t);throw new $(k.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function pt(t,e){let n={typeString:t};return e&&(n.value=e),n}function bl(t,e){if(!fM(t))throw new $(k.INVALID_ARGUMENT,"JSON must be an object");let n;for(let r in e)if(e[r]){let i=e[r].typeString,o="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}let s=t[r];if(i&&typeof s!==i){n=`JSON field '${r}' must be a ${i}.`;break}if(o!==void 0&&s!==o.value){n=`Expected '${r}' field to equal '${o.value}'`;break}}if(n)throw new $(k.INVALID_ARGUMENT,n);return!0}var IN=-62135596800,bN=1e6,gt=class t{static now(){return t.fromMillis(Date.now())}static fromDate(e){return t.fromMillis(e.getTime())}static fromMillis(e){let n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*bN);return new t(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new $(k.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new $(k.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<IN)throw new $(k.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new $(k.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/bN}_compareTo(e){return this.seconds===e.seconds?he(this.nanoseconds,e.nanoseconds):he(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:t._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(bl(e,t._jsonSchema))return new t(e.seconds,e.nanoseconds)}valueOf(){let e=this.seconds-IN;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};gt._jsonSchemaVersion="firestore/timestamp/1.0",gt._jsonSchema={type:pt("string",gt._jsonSchemaVersion),seconds:pt("number"),nanoseconds:pt("number")};var ae=class t{static fromTimestamp(e){return new t(e)}static min(){return new t(new gt(0,0))}static max(){return new t(new gt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var dl=-1,ZE=class{constructor(e,n,r,i){this.indexId=e,this.collectionGroup=n,this.fields=r,this.indexState=i}};ZE.UNKNOWN_ID=-1;function S4(t,e){let n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=ae.fromTimestamp(r===1e9?new gt(n+1,0):new gt(n,r));return new Is(i,Q.empty(),e)}function A4(t){return new Is(t.readTime,t.key,dl)}var Is=class t{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new t(ae.min(),Q.empty(),dl)}static max(){return new t(ae.max(),Q.empty(),dl)}};function R4(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=Q.comparator(t.documentKey,e.documentKey),n!==0?n:he(t.largestBatchId,e.largestBatchId))}var N4="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",XE=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function nc(t){return v(this,null,function*(){if(t.code!==k.FAILED_PRECONDITION||t.message!==N4)throw t;z("LocalStore","Unexpectedly lost primary lease")})}var V=class t{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Z(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new t((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(n,o).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{let n=e();return n instanceof t?n:t.resolve(n)}catch(n){return t.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):t.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):t.reject(n)}static resolve(e){return new t((n,r)=>{n(e)})}static reject(e){return new t((n,r)=>{r(e)})}static waitFor(e){return new t((n,r)=>{let i=0,o=0,s=!1;e.forEach(a=>{++i,a.next(()=>{++o,s&&o===i&&n()},u=>r(u))}),s=!0,o===i&&n()})}static or(e){let n=t.resolve(!1);for(let r of e)n=n.next(i=>i?t.resolve(i):r());return n}static forEach(e,n){let r=[];return e.forEach((i,o)=>{r.push(n.call(this,i,o))}),this.waitFor(r)}static mapArray(e,n){return new t((r,i)=>{let o=e.length,s=new Array(o),a=0;for(let u=0;u<o;u++){let l=u;n(e[l]).next(f=>{s[l]=f,++a,a===o&&r(s)},f=>i(f))}})}static doWhile(e,n){return new t((r,i)=>{let o=()=>{e()===!0?n().next(()=>{o()},i):r()};o()})}};function M4(t){let e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function rc(t){return t.name==="IndexedDbTransactionError"}var NI=(()=>{class t{constructor(n,r){this.previousValue=n,r&&(r.sequenceNumberHandler=i=>this._e(i),this.ae=i=>r.writeSequenceNumber(i))}_e(n){return this.previousValue=Math.max(n,this.previousValue),this.previousValue}next(){let n=++this.previousValue;return this.ae&&this.ae(n),n}}t.ue=-1;return t})(),MI=-1;function Xp(t){return t==null}function fl(t){return t===0&&1/t==-1/0}function P4(t){return typeof t=="number"&&Number.isInteger(t)&&!fl(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}var hM="";function x4(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=TN(e)),e=k4(t.get(n),e);return TN(e)}function k4(t,e){let n=e,r=t.length;for(let i=0;i<r;i++){let o=t.charAt(i);switch(o){case"\0":n+="";break;case hM:n+="";break;default:n+=o}}return n}function TN(t){return t+hM+""}var O4="remoteDocuments",pM="owner";var gM="mutationQueues";var mM="mutations";var yM="documentMutations",F4="remoteDocumentsV14";var vM="remoteDocumentGlobal";var _M="targets";var EM="targetDocuments";var wM="targetGlobal",IM="collectionParents";var bM="clientMetadata";var TM="bundles";var CM="namedQueries";var L4="indexConfiguration";var V4="indexState";var j4="indexEntries";var DM="documentOverlays";var U4="globals";var B4=[gM,mM,yM,O4,_M,pM,wM,EM,bM,vM,IM,TM,CM],cue=[...B4,DM],$4=[gM,mM,yM,F4,_M,pM,wM,EM,bM,vM,IM,TM,CM,DM],H4=$4,q4=[...H4,L4,V4,j4];var uue=[...q4,U4];function CN(t){let e=0;for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function ho(t,e){for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function SM(t){for(let e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}var nt=class t{constructor(e,n){this.comparator=e,this.root=n||Pr.EMPTY}insert(e,n){return new t(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Pr.BLACK,null,null))}remove(e){return new t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Pr.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){let r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){let e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Ba(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Ba(this.root,e,this.comparator,!1)}getReverseIterator(){return new Ba(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Ba(this.root,e,this.comparator,!0)}},Ba=class{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=n?r(e.key,n):1,n&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},Pr=class t{constructor(e,n,r,i,o){this.key=e,this.value=n,this.color=r??t.RED,this.left=i??t.EMPTY,this.right=o??t.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,o){return new t(e??this.key,n??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this,o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,n,r),null):o===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return t.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Z(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Z(14113,{key:this.key,value:this.value});let e=this.left.check();if(e!==this.right.check())throw Z(27949);return e+(this.isRed()?0:1)}};Pr.EMPTY=null,Pr.RED=!0,Pr.BLACK=!1;Pr.EMPTY=new class{constructor(){this.size=0}get key(){throw Z(57766)}get value(){throw Z(16141)}get color(){throw Z(16727)}get left(){throw Z(29726)}get right(){throw Z(36894)}copy(e,n,r,i,o){return this}insert(e,n,r){return new Pr(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var St=class t{constructor(e){this.comparator=e,this.data=new nt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new vp(this.data.getIterator())}getIteratorFrom(e){return new vp(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){let i=n.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(n=>{e.push(n)}),e}toString(){let e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){let n=new t(this.comparator);return n.data=e,n}},vp=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var Hn=class t{constructor(e){this.fields=e,e.sort(Dn.comparator)}static empty(){return new t([])}unionWith(e){let n=new St(Dn.comparator);for(let r of this.fields)n=n.add(r);for(let r of e)n=n.add(r);return new t(n.toArray())}covers(e){for(let n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return qa(this.fields,e.fields,(n,r)=>n.isEqual(r))}};var _p=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var Gt=class t{constructor(e){this.binaryString=e}static fromBase64String(e){let n=(function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new _p("Invalid base64 string: "+o):o}})(e);return new t(n)}static fromUint8Array(e){let n=(function(i){let o="";for(let s=0;s<i.length;++s)o+=String.fromCharCode(i[s]);return o})(e);return new t(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){let r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return he(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};Gt.EMPTY_BYTE_STRING=new Gt("");var z4=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function yi(t){if(Ne(!!t,39018),typeof t=="string"){let e=0,n=z4.exec(t);if(Ne(!!n,46558,{timestamp:t}),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Ge(t.seconds),nanos:Ge(t.nanos)}}function Ge(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function vi(t){return typeof t=="string"?Gt.fromBase64String(t):Gt.fromUint8Array(t)}var AM="server_timestamp",RM="__type__",NM="__previous_value__",MM="__local_write_time__";function PI(t){var e,n;return((n=(((e=t?.mapValue)===null||e===void 0?void 0:e.fields)||{})[RM])===null||n===void 0?void 0:n.stringValue)===AM}function eg(t){let e=t.mapValue.fields[NM];return PI(e)?eg(e):e}function hl(t){let e=yi(t.mapValue.fields[MM].timestampValue);return new gt(e.seconds,e.nanos)}var ew=class{constructor(e,n,r,i,o,s,a,u,l,f){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=s,this.autoDetectLongPolling=a,this.longPollingOptions=u,this.useFetchStreams=l,this.isUsingEmulator=f}},Ep="(default)",wp=class t{constructor(e,n){this.projectId=e,this.database=n||Ep}static empty(){return new t("","")}get isDefaultDatabase(){return this.database===Ep}isEqual(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database}};var xI="__type__",PM="__max__",up={mapValue:{fields:{__type__:{stringValue:PM}}}},kI="__vector__",za="value";function so(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?PI(t)?4:kM(t)?9007199254740991:xM(t)?10:11:Z(28295,{value:t})}function Or(t,e){if(t===e)return!0;let n=so(t);if(n!==so(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return hl(t).isEqual(hl(e));case 3:return(function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;let s=yi(i.timestampValue),a=yi(o.timestampValue);return s.seconds===a.seconds&&s.nanos===a.nanos})(t,e);case 5:return t.stringValue===e.stringValue;case 6:return(function(i,o){return vi(i.bytesValue).isEqual(vi(o.bytesValue))})(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return(function(i,o){return Ge(i.geoPointValue.latitude)===Ge(o.geoPointValue.latitude)&&Ge(i.geoPointValue.longitude)===Ge(o.geoPointValue.longitude)})(t,e);case 2:return(function(i,o){if("integerValue"in i&&"integerValue"in o)return Ge(i.integerValue)===Ge(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){let s=Ge(i.doubleValue),a=Ge(o.doubleValue);return s===a?fl(s)===fl(a):isNaN(s)&&isNaN(a)}return!1})(t,e);case 9:return qa(t.arrayValue.values||[],e.arrayValue.values||[],Or);case 10:case 11:return(function(i,o){let s=i.mapValue.fields||{},a=o.mapValue.fields||{};if(CN(s)!==CN(a))return!1;for(let u in s)if(s.hasOwnProperty(u)&&(a[u]===void 0||!Or(s[u],a[u])))return!1;return!0})(t,e);default:return Z(52216,{left:t})}}function pl(t,e){return(t.values||[]).find(n=>Or(n,e))!==void 0}function Ga(t,e){if(t===e)return 0;let n=so(t),r=so(e);if(n!==r)return he(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return he(t.booleanValue,e.booleanValue);case 2:return(function(o,s){let a=Ge(o.integerValue||o.doubleValue),u=Ge(s.integerValue||s.doubleValue);return a<u?-1:a>u?1:a===u?0:isNaN(a)?isNaN(u)?0:-1:1})(t,e);case 3:return DN(t.timestampValue,e.timestampValue);case 4:return DN(hl(t),hl(e));case 5:return JE(t.stringValue,e.stringValue);case 6:return(function(o,s){let a=vi(o),u=vi(s);return a.compareTo(u)})(t.bytesValue,e.bytesValue);case 7:return(function(o,s){let a=o.split("/"),u=s.split("/");for(let l=0;l<a.length&&l<u.length;l++){let f=he(a[l],u[l]);if(f!==0)return f}return he(a.length,u.length)})(t.referenceValue,e.referenceValue);case 8:return(function(o,s){let a=he(Ge(o.latitude),Ge(s.latitude));return a!==0?a:he(Ge(o.longitude),Ge(s.longitude))})(t.geoPointValue,e.geoPointValue);case 9:return SN(t.arrayValue,e.arrayValue);case 10:return(function(o,s){var a,u,l,f;let p=o.fields||{},g=s.fields||{},y=(a=p[za])===null||a===void 0?void 0:a.arrayValue,D=(u=g[za])===null||u===void 0?void 0:u.arrayValue,x=he(((l=y?.values)===null||l===void 0?void 0:l.length)||0,((f=D?.values)===null||f===void 0?void 0:f.length)||0);return x!==0?x:SN(y,D)})(t.mapValue,e.mapValue);case 11:return(function(o,s){if(o===up.mapValue&&s===up.mapValue)return 0;if(o===up.mapValue)return 1;if(s===up.mapValue)return-1;let a=o.fields||{},u=Object.keys(a),l=s.fields||{},f=Object.keys(l);u.sort(),f.sort();for(let p=0;p<u.length&&p<f.length;++p){let g=JE(u[p],f[p]);if(g!==0)return g;let y=Ga(a[u[p]],l[f[p]]);if(y!==0)return y}return he(u.length,f.length)})(t.mapValue,e.mapValue);default:throw Z(23264,{le:n})}}function DN(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return he(t,e);let n=yi(t),r=yi(e),i=he(n.seconds,r.seconds);return i!==0?i:he(n.nanos,r.nanos)}function SN(t,e){let n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){let o=Ga(n[i],r[i]);if(o)return o}return he(n.length,r.length)}function Wa(t){return tw(t)}function tw(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?(function(n){let r=yi(n);return`time(${r.seconds},${r.nanos})`})(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?(function(n){return vi(n).toBase64()})(t.bytesValue):"referenceValue"in t?(function(n){return Q.fromName(n).toString()})(t.referenceValue):"geoPointValue"in t?(function(n){return`geo(${n.latitude},${n.longitude})`})(t.geoPointValue):"arrayValue"in t?(function(n){let r="[",i=!0;for(let o of n.values||[])i?i=!1:r+=",",r+=tw(o);return r+"]"})(t.arrayValue):"mapValue"in t?(function(n){let r=Object.keys(n.fields||{}).sort(),i="{",o=!0;for(let s of r)o?o=!1:i+=",",i+=`${s}:${tw(n.fields[s])}`;return i+"}"})(t.mapValue):Z(61005,{value:t})}function fp(t){switch(so(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:let e=eg(t);return e?16+fp(e):16;case 5:return 2*t.stringValue.length;case 6:return vi(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce((i,o)=>i+fp(o),0)})(t.arrayValue);case 10:case 11:return(function(r){let i=0;return ho(r.fields,(o,s)=>{i+=o.length+fp(s)}),i})(t.mapValue);default:throw Z(13486,{value:t})}}function AN(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function nw(t){return!!t&&"integerValue"in t}function OI(t){return!!t&&"arrayValue"in t}function RN(t){return!!t&&"nullValue"in t}function NN(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function hp(t){return!!t&&"mapValue"in t}function xM(t){var e,n;return((n=(((e=t?.mapValue)===null||e===void 0?void 0:e.fields)||{})[xI])===null||n===void 0?void 0:n.stringValue)===kI}function sl(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){let e={mapValue:{fields:{}}};return ho(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=sl(r)),e}if(t.arrayValue){let e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=sl(t.arrayValue.values[n]);return e}return Object.assign({},t)}function kM(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===PM}var due={mapValue:{fields:{[xI]:{stringValue:kI},[za]:{arrayValue:{}}}}};var Cn=class t{constructor(e){this.value=e}static empty(){return new t({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!hp(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=sl(n)}setAll(e){let n=Dn.emptyPath(),r={},i=[];e.forEach((s,a)=>{if(!n.isImmediateParentOf(a)){let u=this.getFieldsMap(n);this.applyChanges(u,r,i),r={},i=[],n=a.popLast()}s?r[a.lastSegment()]=sl(s):i.push(a.lastSegment())});let o=this.getFieldsMap(n);this.applyChanges(o,r,i)}delete(e){let n=this.field(e.popLast());hp(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Or(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];hp(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){ho(n,(i,o)=>e[i]=o);for(let i of r)delete e[i]}clone(){return new t(sl(this.value))}};function OM(t){let e=[];return ho(t.fields,(n,r)=>{let i=new Dn([n]);if(hp(r)){let o=OM(r.mapValue).fields;if(o.length===0)e.push(i);else for(let s of o)e.push(i.child(s))}else e.push(i)}),new Hn(e)}var pr=class t{constructor(e,n,r,i,o,s,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=o,this.data=s,this.documentState=a}static newInvalidDocument(e){return new t(e,0,ae.min(),ae.min(),ae.min(),Cn.empty(),0)}static newFoundDocument(e,n,r,i){return new t(e,1,n,ae.min(),r,i,0)}static newNoDocument(e,n){return new t(e,2,n,ae.min(),ae.min(),Cn.empty(),0)}static newUnknownDocument(e,n){return new t(e,3,n,ae.min(),ae.min(),Cn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(ae.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Cn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Cn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ae.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new t(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var Ka=class{constructor(e,n){this.position=e,this.inclusive=n}};function MN(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){let o=e[i],s=t.position[i];if(o.field.isKeyField()?r=Q.comparator(Q.fromName(s.referenceValue),n.key):r=Ga(s,n.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function PN(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Or(t.position[n],e.position[n]))return!1;return!0}var bs=class{constructor(e,n="asc"){this.field=e,this.dir=n}};function G4(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}var Ip=class{},ht=class t extends Ip{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new iw(e,n,r):n==="array-contains"?new aw(e,r):n==="in"?new cw(e,r):n==="not-in"?new uw(e,r):n==="array-contains-any"?new lw(e,r):new t(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new ow(e,r):new sw(e,r)}matches(e){let n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Ga(n,this.value)):n!==null&&so(this.value)===so(n)&&this.matchesComparison(Ga(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Z(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},gr=class t extends Ip{constructor(e,n){super(),this.filters=e,this.op=n,this.he=null}static create(e,n){return new t(e,n)}matches(e){return FM(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.he!==null||(this.he=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.he}getFilters(){return Object.assign([],this.filters)}};function FM(t){return t.op==="and"}function LM(t){return W4(t)&&FM(t)}function W4(t){for(let e of t.filters)if(e instanceof gr)return!1;return!0}function rw(t){if(t instanceof ht)return t.field.canonicalString()+t.op.toString()+Wa(t.value);if(LM(t))return t.filters.map(e=>rw(e)).join(",");{let e=t.filters.map(n=>rw(n)).join(",");return`${t.op}(${e})`}}function VM(t,e){return t instanceof ht?(function(r,i){return i instanceof ht&&r.op===i.op&&r.field.isEqual(i.field)&&Or(r.value,i.value)})(t,e):t instanceof gr?(function(r,i){return i instanceof gr&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((o,s,a)=>o&&VM(s,i.filters[a]),!0):!1})(t,e):void Z(19439)}function jM(t){return t instanceof ht?(function(n){return`${n.field.canonicalString()} ${n.op} ${Wa(n.value)}`})(t):t instanceof gr?(function(n){return n.op.toString()+" {"+n.getFilters().map(jM).join(" ,")+"}"})(t):"Filter"}var iw=class extends ht{constructor(e,n,r){super(e,n,r),this.key=Q.fromName(r.referenceValue)}matches(e){let n=Q.comparator(e.key,this.key);return this.matchesComparison(n)}},ow=class extends ht{constructor(e,n){super(e,"in",n),this.keys=UM("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}},sw=class extends ht{constructor(e,n){super(e,"not-in",n),this.keys=UM("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}};function UM(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>Q.fromName(r.referenceValue))}var aw=class extends ht{constructor(e,n){super(e,"array-contains",n)}matches(e){let n=e.data.field(this.field);return OI(n)&&pl(n.arrayValue,this.value)}},cw=class extends ht{constructor(e,n){super(e,"in",n)}matches(e){let n=e.data.field(this.field);return n!==null&&pl(this.value.arrayValue,n)}},uw=class extends ht{constructor(e,n){super(e,"not-in",n)}matches(e){if(pl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!pl(this.value.arrayValue,n)}},lw=class extends ht{constructor(e,n){super(e,"array-contains-any",n)}matches(e){let n=e.data.field(this.field);return!(!OI(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>pl(this.value.arrayValue,r))}};var dw=class{constructor(e,n=null,r=[],i=[],o=null,s=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=s,this.endAt=a,this.Pe=null}};function xN(t,e=null,n=[],r=[],i=null,o=null,s=null){return new dw(t,e,n,r,i,o,s)}function FI(t){let e=oe(t);if(e.Pe===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>rw(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>(function(o){return o.field.canonicalString()+o.dir})(r)).join(","),Xp(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Wa(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Wa(r)).join(",")),e.Pe=n}return e.Pe}function LI(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!G4(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!VM(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!PN(t.startAt,e.startAt)&&PN(t.endAt,e.endAt)}function fw(t){return Q.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}var ao=class{constructor(e,n=null,r=[],i=[],o=null,s="F",a=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=s,this.startAt=a,this.endAt=u,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}};function K4(t,e,n,r,i,o,s,a){return new ao(t,e,n,r,i,o,s,a)}function tg(t){return new ao(t)}function kN(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function BM(t){return t.collectionGroup!==null}function al(t){let e=oe(t);if(e.Te===null){e.Te=[];let n=new Set;for(let o of e.explicitOrderBy)e.Te.push(o),n.add(o.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let a=new St(Dn.comparator);return s.filters.forEach(u=>{u.getFlattenedFilters().forEach(l=>{l.isInequality()&&(a=a.add(l.field))})}),a})(e).forEach(o=>{n.has(o.canonicalString())||o.isKeyField()||e.Te.push(new bs(o,r))}),n.has(Dn.keyField().canonicalString())||e.Te.push(new bs(Dn.keyField(),r))}return e.Te}function xr(t){let e=oe(t);return e.Ie||(e.Ie=Q4(e,al(t))),e.Ie}function Q4(t,e){if(t.limitType==="F")return xN(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{let o=i.dir==="desc"?"asc":"desc";return new bs(i.field,o)});let n=t.endAt?new Ka(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Ka(t.startAt.position,t.startAt.inclusive):null;return xN(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function hw(t,e){let n=t.filters.concat([e]);return new ao(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function pw(t,e,n){return new ao(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function ng(t,e){return LI(xr(t),xr(e))&&t.limitType===e.limitType}function $M(t){return`${FI(xr(t))}|lt:${t.limitType}`}function Va(t){return`Query(target=${(function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>jM(i)).join(", ")}]`),Xp(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>(function(s){return`${s.field.canonicalString()} (${s.dir})`})(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>Wa(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>Wa(i)).join(",")),`Target(${r})`})(xr(t))}; limitType=${t.limitType})`}function rg(t,e){return e.isFoundDocument()&&(function(r,i){let o=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):Q.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)})(t,e)&&(function(r,i){for(let o of al(r))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0})(t,e)&&(function(r,i){for(let o of r.filters)if(!o.matches(i))return!1;return!0})(t,e)&&(function(r,i){return!(r.startAt&&!(function(s,a,u){let l=MN(s,a,u);return s.inclusive?l<=0:l<0})(r.startAt,al(r),i)||r.endAt&&!(function(s,a,u){let l=MN(s,a,u);return s.inclusive?l>=0:l>0})(r.endAt,al(r),i))})(t,e)}function Y4(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function HM(t){return(e,n)=>{let r=!1;for(let i of al(t)){let o=J4(i,e,n);if(o!==0)return o;r=r||i.field.isKeyField()}return 0}}function J4(t,e,n){let r=t.field.isKeyField()?Q.comparator(e.key,n.key):(function(o,s,a){let u=s.data.field(o),l=a.data.field(o);return u!==null&&l!==null?Ga(u,l):Z(42886)})(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return Z(19790,{direction:t.dir})}}var _i=class{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){let n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(let[i,o]of r)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,n){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){let n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){ho(this.inner,(n,r)=>{for(let[i,o]of r)e(i,o)})}isEmpty(){return SM(this.inner)}size(){return this.innerSize}};var Z4=new nt(Q.comparator);function Ei(){return Z4}var qM=new nt(Q.comparator);function ol(...t){let e=qM;for(let n of t)e=e.insert(n.key,n);return e}function zM(t){let e=qM;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function ms(){return cl()}function GM(){return cl()}function cl(){return new _i(t=>t.toString(),(t,e)=>t.isEqual(e))}var X4=new nt(Q.comparator),e3=new St(Q.comparator);function _e(...t){let e=e3;for(let n of t)e=e.add(n);return e}var t3=new St(he);function n3(){return t3}function VI(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:fl(e)?"-0":e}}function WM(t){return{integerValue:""+t}}function r3(t,e){return P4(e)?WM(e):VI(t,e)}var Qa=class{constructor(){this._=void 0}};function i3(t,e,n){return t instanceof Ts?(function(i,o){let s={fields:{[RM]:{stringValue:AM},[MM]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&PI(o)&&(o=eg(o)),o&&(s.fields[NM]=o),{mapValue:s}})(n,e):t instanceof co?QM(t,e):t instanceof Cs?YM(t,e):(function(i,o){let s=KM(i,o),a=ON(s)+ON(i.Ee);return nw(s)&&nw(i.Ee)?WM(a):VI(i.serializer,a)})(t,e)}function o3(t,e,n){return t instanceof co?QM(t,e):t instanceof Cs?YM(t,e):n}function KM(t,e){return t instanceof Ya?(function(r){return nw(r)||(function(o){return!!o&&"doubleValue"in o})(r)})(e)?e:{integerValue:0}:null}var Ts=class extends Qa{},co=class extends Qa{constructor(e){super(),this.elements=e}};function QM(t,e){let n=JM(e);for(let r of t.elements)n.some(i=>Or(i,r))||n.push(r);return{arrayValue:{values:n}}}var Cs=class extends Qa{constructor(e){super(),this.elements=e}};function YM(t,e){let n=JM(e);for(let r of t.elements)n=n.filter(i=>!Or(i,r));return{arrayValue:{values:n}}}var Ya=class extends Qa{constructor(e,n){super(),this.serializer=e,this.Ee=n}};function ON(t){return Ge(t.integerValue||t.doubleValue)}function JM(t){return OI(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}var bp=class{constructor(e,n){this.field=e,this.transform=n}};function s3(t,e){return t.field.isEqual(e.field)&&(function(r,i){return r instanceof co&&i instanceof co||r instanceof Cs&&i instanceof Cs?qa(r.elements,i.elements,Or):r instanceof Ya&&i instanceof Ya?Or(r.Ee,i.Ee):r instanceof Ts&&i instanceof Ts})(t.transform,e.transform)}var gw=class{constructor(e,n){this.version=e,this.transformResults=n}},gi=class t{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new t}static exists(e){return new t(void 0,e)}static updateTime(e){return new t(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function pp(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}var Ja=class{};function ZM(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Tp(t.key,gi.none()):new Ds(t.key,t.data,gi.none());{let n=t.data,r=Cn.empty(),i=new St(Dn.comparator);for(let o of e.fields)if(!i.has(o)){let s=n.field(o);s===null&&o.length>1&&(o=o.popLast(),s=n.field(o)),s===null?r.delete(o):r.set(o,s),i=i.add(o)}return new Fr(t.key,r,new Hn(i.toArray()),gi.none())}}function a3(t,e,n){t instanceof Ds?(function(i,o,s){let a=i.value.clone(),u=LN(i.fieldTransforms,o,s.transformResults);a.setAll(u),o.convertToFoundDocument(s.version,a).setHasCommittedMutations()})(t,e,n):t instanceof Fr?(function(i,o,s){if(!pp(i.precondition,o))return void o.convertToUnknownDocument(s.version);let a=LN(i.fieldTransforms,o,s.transformResults),u=o.data;u.setAll(XM(i)),u.setAll(a),o.convertToFoundDocument(s.version,u).setHasCommittedMutations()})(t,e,n):(function(i,o,s){o.convertToNoDocument(s.version).setHasCommittedMutations()})(0,e,n)}function ul(t,e,n,r){return t instanceof Ds?(function(o,s,a,u){if(!pp(o.precondition,s))return a;let l=o.value.clone(),f=VN(o.fieldTransforms,u,s);return l.setAll(f),s.convertToFoundDocument(s.version,l).setHasLocalMutations(),null})(t,e,n,r):t instanceof Fr?(function(o,s,a,u){if(!pp(o.precondition,s))return a;let l=VN(o.fieldTransforms,u,s),f=s.data;return f.setAll(XM(o)),f.setAll(l),s.convertToFoundDocument(s.version,f).setHasLocalMutations(),a===null?null:a.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(p=>p.field))})(t,e,n,r):(function(o,s,a){return pp(o.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):a})(t,e,n)}function c3(t,e){let n=null;for(let r of t.fieldTransforms){let i=e.data.field(r.field),o=KM(r.transform,i||null);o!=null&&(n===null&&(n=Cn.empty()),n.set(r.field,o))}return n||null}function FN(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!(function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&qa(r,i,(o,s)=>s3(o,s))})(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}var Ds=class extends Ja{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},Fr=class extends Ja{constructor(e,n,r,i,o=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}};function XM(t){let e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){let r=t.data.field(n);e.set(n,r)}}),e}function LN(t,e,n){let r=new Map;Ne(t.length===n.length,32656,{Ae:n.length,Re:t.length});for(let i=0;i<n.length;i++){let o=t[i],s=o.transform,a=e.data.field(o.field);r.set(o.field,o3(s,a,n[i]))}return r}function VN(t,e,n){let r=new Map;for(let i of t){let o=i.transform,s=n.data.field(i.field);r.set(i.field,i3(o,s,e))}return r}var Tp=class extends Ja{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},mw=class extends Ja{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var yw=class{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){let r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){let o=this.mutations[i];o.key.isEqual(e.key)&&a3(o,e,r[i])}}applyToLocalView(e,n){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(n=ul(r,e,n,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(n=ul(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){let r=GM();return this.mutations.forEach(i=>{let o=e.get(i.key),s=o.overlayedDocument,a=this.applyToLocalView(s,o.mutatedFields);a=n.has(i.key)?null:a;let u=ZM(s,a);u!==null&&r.set(i.key,u),s.isValidDocument()||s.convertToNoDocument(ae.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),_e())}isEqual(e){return this.batchId===e.batchId&&qa(this.mutations,e.mutations,(n,r)=>FN(n,r))&&qa(this.baseMutations,e.baseMutations,(n,r)=>FN(n,r))}},vw=class t{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){Ne(e.mutations.length===r.length,58842,{Ve:e.mutations.length,me:r.length});let i=(function(){return X4})(),o=e.mutations;for(let s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new t(e,n,r,i)}};var _w=class{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var Ew=class{constructor(e,n){this.count=e,this.unchangedNames=n}};var dt,Ie;function u3(t){switch(t){case k.OK:return Z(64938);case k.CANCELLED:case k.UNKNOWN:case k.DEADLINE_EXCEEDED:case k.RESOURCE_EXHAUSTED:case k.INTERNAL:case k.UNAVAILABLE:case k.UNAUTHENTICATED:return!1;case k.INVALID_ARGUMENT:case k.NOT_FOUND:case k.ALREADY_EXISTS:case k.PERMISSION_DENIED:case k.FAILED_PRECONDITION:case k.ABORTED:case k.OUT_OF_RANGE:case k.UNIMPLEMENTED:case k.DATA_LOSS:return!0;default:return Z(15467,{code:t})}}function eP(t){if(t===void 0)return mi("GRPC error has no .code"),k.UNKNOWN;switch(t){case dt.OK:return k.OK;case dt.CANCELLED:return k.CANCELLED;case dt.UNKNOWN:return k.UNKNOWN;case dt.DEADLINE_EXCEEDED:return k.DEADLINE_EXCEEDED;case dt.RESOURCE_EXHAUSTED:return k.RESOURCE_EXHAUSTED;case dt.INTERNAL:return k.INTERNAL;case dt.UNAVAILABLE:return k.UNAVAILABLE;case dt.UNAUTHENTICATED:return k.UNAUTHENTICATED;case dt.INVALID_ARGUMENT:return k.INVALID_ARGUMENT;case dt.NOT_FOUND:return k.NOT_FOUND;case dt.ALREADY_EXISTS:return k.ALREADY_EXISTS;case dt.PERMISSION_DENIED:return k.PERMISSION_DENIED;case dt.FAILED_PRECONDITION:return k.FAILED_PRECONDITION;case dt.ABORTED:return k.ABORTED;case dt.OUT_OF_RANGE:return k.OUT_OF_RANGE;case dt.UNIMPLEMENTED:return k.UNIMPLEMENTED;case dt.DATA_LOSS:return k.DATA_LOSS;default:return Z(39323,{code:t})}}(Ie=dt||(dt={}))[Ie.OK=0]="OK",Ie[Ie.CANCELLED=1]="CANCELLED",Ie[Ie.UNKNOWN=2]="UNKNOWN",Ie[Ie.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ie[Ie.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ie[Ie.NOT_FOUND=5]="NOT_FOUND",Ie[Ie.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ie[Ie.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ie[Ie.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ie[Ie.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ie[Ie.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ie[Ie.ABORTED=10]="ABORTED",Ie[Ie.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ie[Ie.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ie[Ie.INTERNAL=13]="INTERNAL",Ie[Ie.UNAVAILABLE=14]="UNAVAILABLE",Ie[Ie.DATA_LOSS=15]="DATA_LOSS";var jN=null;var l3=new hi([4294967295,4294967295],0);function UN(t){let e=lM().encode(t),n=new OE;return n.update(e),new Uint8Array(n.digest())}function BN(t){let e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new hi([n,r],0),new hi([i,o],0)]}var ww=class t{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new ys(`Invalid padding: ${n}`);if(r<0)throw new ys(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new ys(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new ys(`Invalid padding when bitmap length is 0: ${n}`);this.fe=8*e.length-n,this.ge=hi.fromNumber(this.fe)}pe(e,n,r){let i=e.add(n.multiply(hi.fromNumber(r)));return i.compare(l3)===1&&(i=new hi([i.getBits(0),i.getBits(1)],0)),i.modulo(this.ge).toNumber()}ye(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.fe===0)return!1;let n=UN(e),[r,i]=BN(n);for(let o=0;o<this.hashCount;o++){let s=this.pe(r,i,o);if(!this.ye(s))return!1}return!0}static create(e,n,r){let i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),s=new t(o,i,n);return r.forEach(a=>s.insert(a)),s}insert(e){if(this.fe===0)return;let n=UN(e),[r,i]=BN(n);for(let o=0;o<this.hashCount;o++){let s=this.pe(r,i,o);this.we(s)}}we(e){let n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}},ys=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var Cp=class t{constructor(e,n,r,i,o){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,n,r){let i=new Map;return i.set(e,gl.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new t(ae.min(),i,new nt(he),Ei(),_e())}},gl=class t{constructor(e,n,r,i,o){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new t(r,n,_e(),_e(),_e())}};var $a=class{constructor(e,n,r,i){this.Se=e,this.removedTargetIds=n,this.key=r,this.be=i}},Dp=class{constructor(e,n){this.targetId=e,this.De=n}},Sp=class{constructor(e,n,r=Gt.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}},Ap=class{constructor(){this.ve=0,this.Ce=$N(),this.Fe=Gt.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return this.ve!==0}get Ne(){return this.xe}Be(e){e.approximateByteSize()>0&&(this.xe=!0,this.Fe=e)}Le(){let e=_e(),n=_e(),r=_e();return this.Ce.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:Z(38017,{changeType:o})}}),new gl(this.Fe,this.Me,e,n,r)}ke(){this.xe=!1,this.Ce=$N()}qe(e,n){this.xe=!0,this.Ce=this.Ce.insert(e,n)}Qe(e){this.xe=!0,this.Ce=this.Ce.remove(e)}$e(){this.ve+=1}Ue(){this.ve-=1,Ne(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}},Iw=class{constructor(e){this.We=e,this.Ge=new Map,this.ze=Ei(),this.je=lp(),this.Je=lp(),this.He=new nt(he)}Ye(e){for(let n of e.Se)e.be&&e.be.isFoundDocument()?this.Ze(n,e.be):this.Xe(n,e.key,e.be);for(let n of e.removedTargetIds)this.Xe(n,e.key,e.be)}et(e){this.forEachTarget(e,n=>{let r=this.tt(n);switch(e.state){case 0:this.nt(n)&&r.Be(e.resumeToken);break;case 1:r.Ue(),r.Oe||r.ke(),r.Be(e.resumeToken);break;case 2:r.Ue(),r.Oe||this.removeTarget(n);break;case 3:this.nt(n)&&(r.Ke(),r.Be(e.resumeToken));break;case 4:this.nt(n)&&(this.rt(n),r.Be(e.resumeToken));break;default:Z(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Ge.forEach((r,i)=>{this.nt(i)&&n(i)})}it(e){let n=e.targetId,r=e.De.count,i=this.st(n);if(i){let o=i.target;if(fw(o))if(r===0){let s=new Q(o.path);this.Xe(n,s,pr.newNoDocument(s,ae.min()))}else Ne(r===1,20013,{expectedCount:r});else{let s=this.ot(n);if(s!==r){let a=this._t(e),u=a?this.ut(a,e,s):1;if(u!==0){this.rt(n);let l=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.He=this.He.insert(n,l)}jN?.ct((function(f,p,g,y,D){var x,R,O,H,Y,re;let Ke={localCacheCount:f,existenceFilterCount:p.count,databaseId:g.database,projectId:g.projectId},ge=p.unchangedNames;return ge&&(Ke.bloomFilter={applied:D===0,hashCount:(x=ge?.hashCount)!==null&&x!==void 0?x:0,bitmapLength:(H=(O=(R=ge?.bits)===null||R===void 0?void 0:R.bitmap)===null||O===void 0?void 0:O.length)!==null&&H!==void 0?H:0,padding:(re=(Y=ge?.bits)===null||Y===void 0?void 0:Y.padding)!==null&&re!==void 0?re:0,mightContain:b=>{var _;return(_=y?.mightContain(b))!==null&&_!==void 0&&_}}),Ke})(s,e.De,this.We.lt(),a,u))}}}}_t(e){let n=e.De.unchangedNames;if(!n||!n.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=n,s,a;try{s=vi(r).toUint8Array()}catch(u){if(u instanceof _p)return oo("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{a=new ww(s,i,o)}catch(u){return oo(u instanceof ys?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return a.fe===0?null:a}ut(e,n,r){return n.De.count===r-this.ht(e,n.targetId)?0:2}ht(e,n){let r=this.We.getRemoteKeysForTarget(n),i=0;return r.forEach(o=>{let s=this.We.lt(),a=`projects/${s.projectId}/databases/${s.database}/documents/${o.path.canonicalString()}`;e.mightContain(a)||(this.Xe(n,o,null),i++)}),i}Pt(e){let n=new Map;this.Ge.forEach((o,s)=>{let a=this.st(s);if(a){if(o.current&&fw(a.target)){let u=new Q(a.target.path);this.Tt(u).has(s)||this.It(s,u)||this.Xe(s,u,pr.newNoDocument(u,e))}o.Ne&&(n.set(s,o.Le()),o.ke())}});let r=_e();this.Je.forEach((o,s)=>{let a=!0;s.forEachWhile(u=>{let l=this.st(u);return!l||l.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(o))}),this.ze.forEach((o,s)=>s.setReadTime(e));let i=new Cp(e,n,this.He,this.ze,r);return this.ze=Ei(),this.je=lp(),this.Je=lp(),this.He=new nt(he),i}Ze(e,n){if(!this.nt(e))return;let r=this.It(e,n.key)?2:0;this.tt(e).qe(n.key,r),this.ze=this.ze.insert(n.key,n),this.je=this.je.insert(n.key,this.Tt(n.key).add(e)),this.Je=this.Je.insert(n.key,this.dt(n.key).add(e))}Xe(e,n,r){if(!this.nt(e))return;let i=this.tt(e);this.It(e,n)?i.qe(n,1):i.Qe(n),this.Je=this.Je.insert(n,this.dt(n).delete(e)),this.Je=this.Je.insert(n,this.dt(n).add(e)),r&&(this.ze=this.ze.insert(n,r))}removeTarget(e){this.Ge.delete(e)}ot(e){let n=this.tt(e).Le();return this.We.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}$e(e){this.tt(e).$e()}tt(e){let n=this.Ge.get(e);return n||(n=new Ap,this.Ge.set(e,n)),n}dt(e){let n=this.Je.get(e);return n||(n=new St(he),this.Je=this.Je.insert(e,n)),n}Tt(e){let n=this.je.get(e);return n||(n=new St(he),this.je=this.je.insert(e,n)),n}nt(e){let n=this.st(e)!==null;return n||z("WatchChangeAggregator","Detected inactive target",e),n}st(e){let n=this.Ge.get(e);return n&&n.Oe?null:this.We.Et(e)}rt(e){this.Ge.set(e,new Ap),this.We.getRemoteKeysForTarget(e).forEach(n=>{this.Xe(e,n,null)})}It(e,n){return this.We.getRemoteKeysForTarget(e).has(n)}};function lp(){return new nt(Q.comparator)}function $N(){return new nt(Q.comparator)}var d3={asc:"ASCENDING",desc:"DESCENDING"},f3={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},h3={and:"AND",or:"OR"},bw=class{constructor(e,n){this.databaseId=e,this.useProto3Json=n}};function Tw(t,e){return t.useProto3Json||Xp(e)?e:{value:e}}function Rp(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function tP(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function p3(t,e){return Rp(t,e.toTimestamp())}function kr(t){return Ne(!!t,49232),ae.fromTimestamp((function(n){let r=yi(n);return new gt(r.seconds,r.nanos)})(t))}function jI(t,e){return Cw(t,e).canonicalString()}function Cw(t,e){let n=(function(i){return new We(["projects",i.projectId,"databases",i.database])})(t).child("documents");return e===void 0?n:n.child(e)}function nP(t){let e=We.fromString(t);return Ne(aP(e),10190,{key:e.toString()}),e}function Dw(t,e){return jI(t.databaseId,e.path)}function BE(t,e){let n=nP(e);if(n.get(1)!==t.databaseId.projectId)throw new $(k.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new $(k.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new Q(iP(n))}function rP(t,e){return jI(t.databaseId,e)}function g3(t){let e=nP(t);return e.length===4?We.emptyPath():iP(e)}function Sw(t){return new We(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function iP(t){return Ne(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function HN(t,e,n){return{name:Dw(t,e),fields:n.value.mapValue.fields}}function m3(t,e){let n;if("targetChange"in e){e.targetChange;let r=(function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:Z(39313,{state:l})})(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=(function(l,f){return l.useProto3Json?(Ne(f===void 0||typeof f=="string",58123),Gt.fromBase64String(f||"")):(Ne(f===void 0||f instanceof Buffer||f instanceof Uint8Array,16193),Gt.fromUint8Array(f||new Uint8Array))})(t,e.targetChange.resumeToken),s=e.targetChange.cause,a=s&&(function(l){let f=l.code===void 0?k.UNKNOWN:eP(l.code);return new $(f,l.message||"")})(s);n=new Sp(r,i,o,a||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=BE(t,r.document.name),o=kr(r.document.updateTime),s=r.document.createTime?kr(r.document.createTime):ae.min(),a=new Cn({mapValue:{fields:r.document.fields}}),u=pr.newFoundDocument(i,o,s,a),l=r.targetIds||[],f=r.removedTargetIds||[];n=new $a(l,f,u.key,u)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=BE(t,r.document),o=r.readTime?kr(r.readTime):ae.min(),s=pr.newNoDocument(i,o),a=r.removedTargetIds||[];n=new $a([],a,s.key,s)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=BE(t,r.document),o=r.removedTargetIds||[];n=new $a([],o,i,null)}else{if(!("filter"in e))return Z(11601,{At:e});{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:o}=r,s=new Ew(i,o),a=r.targetId;n=new Dp(a,s)}}return n}function y3(t,e){let n;if(e instanceof Ds)n={update:HN(t,e.key,e.value)};else if(e instanceof Tp)n={delete:Dw(t,e.key)};else if(e instanceof Fr)n={update:HN(t,e.key,e.data),updateMask:D3(e.fieldMask)};else{if(!(e instanceof mw))return Z(16599,{Rt:e.type});n={verify:Dw(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>(function(o,s){let a=s.transform;if(a instanceof Ts)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof co)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Cs)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Ya)return{fieldPath:s.field.canonicalString(),increment:a.Ee};throw Z(20930,{transform:s.transform})})(0,r))),e.precondition.isNone||(n.currentDocument=(function(i,o){return o.updateTime!==void 0?{updateTime:p3(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:Z(27497)})(t,e.precondition)),n}function v3(t,e){return t&&t.length>0?(Ne(e!==void 0,14353),t.map(n=>(function(i,o){let s=i.updateTime?kr(i.updateTime):kr(o);return s.isEqual(ae.min())&&(s=kr(o)),new gw(s,i.transformResults||[])})(n,e))):[]}function _3(t,e){return{documents:[rP(t,e.path)]}}function E3(t,e){let n={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=rP(t,i);let o=(function(l){if(l.length!==0)return sP(gr.create(l,"and"))})(e.filters);o&&(n.structuredQuery.where=o);let s=(function(l){if(l.length!==0)return l.map(f=>(function(g){return{field:ja(g.field),direction:b3(g.dir)}})(f))})(e.orderBy);s&&(n.structuredQuery.orderBy=s);let a=Tw(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=(function(l){return{before:l.inclusive,values:l.position}})(e.startAt)),e.endAt&&(n.structuredQuery.endAt=(function(l){return{before:!l.inclusive,values:l.position}})(e.endAt)),{Vt:n,parent:i}}function w3(t){let e=g3(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){Ne(r===1,65062);let f=n.from[0];f.allDescendants?i=f.collectionId:e=e.child(f.collectionId)}let o=[];n.where&&(o=(function(p){let g=oP(p);return g instanceof gr&&LM(g)?g.getFilters():[g]})(n.where));let s=[];n.orderBy&&(s=(function(p){return p.map(g=>(function(D){return new bs(Ua(D.field),(function(R){switch(R){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(D.direction))})(g))})(n.orderBy));let a=null;n.limit&&(a=(function(p){let g;return g=typeof p=="object"?p.value:p,Xp(g)?null:g})(n.limit));let u=null;n.startAt&&(u=(function(p){let g=!!p.before,y=p.values||[];return new Ka(y,g)})(n.startAt));let l=null;return n.endAt&&(l=(function(p){let g=!p.before,y=p.values||[];return new Ka(y,g)})(n.endAt)),K4(e,i,s,o,a,"F",u,l)}function I3(t,e){let n=(function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Z(28987,{purpose:i})}})(e.purpose);return n==null?null:{"goog-listen-tags":n}}function oP(t){return t.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":let r=Ua(n.unaryFilter.field);return ht.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=Ua(n.unaryFilter.field);return ht.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let o=Ua(n.unaryFilter.field);return ht.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let s=Ua(n.unaryFilter.field);return ht.create(s,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Z(61313);default:return Z(60726)}})(t):t.fieldFilter!==void 0?(function(n){return ht.create(Ua(n.fieldFilter.field),(function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Z(58110);default:return Z(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(t):t.compositeFilter!==void 0?(function(n){return gr.create(n.compositeFilter.filters.map(r=>oP(r)),(function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return Z(1026)}})(n.compositeFilter.op))})(t):Z(30097,{filter:t})}function b3(t){return d3[t]}function T3(t){return f3[t]}function C3(t){return h3[t]}function ja(t){return{fieldPath:t.canonicalString()}}function Ua(t){return Dn.fromServerFormat(t.fieldPath)}function sP(t){return t instanceof ht?(function(n){if(n.op==="=="){if(NN(n.value))return{unaryFilter:{field:ja(n.field),op:"IS_NAN"}};if(RN(n.value))return{unaryFilter:{field:ja(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(NN(n.value))return{unaryFilter:{field:ja(n.field),op:"IS_NOT_NAN"}};if(RN(n.value))return{unaryFilter:{field:ja(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ja(n.field),op:T3(n.op),value:n.value}}})(t):t instanceof gr?(function(n){let r=n.getFilters().map(i=>sP(i));return r.length===1?r[0]:{compositeFilter:{op:C3(n.op),filters:r}}})(t):Z(54877,{filter:t})}function D3(t){let e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function aP(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}var ml=class t{constructor(e,n,r,i,o=ae.min(),s=ae.min(),a=Gt.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=a,this.expectedCount=u}withSequenceNumber(e){return new t(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var Aw=class{constructor(e){this.gt=e}};function S3(t){let e=w3({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?pw(e,e.limit,"L"):e}var Np=class{constructor(){}bt(e,n){this.Dt(e,n),n.vt()}Dt(e,n){if("nullValue"in e)this.Ct(n,5);else if("booleanValue"in e)this.Ct(n,10),n.Ft(e.booleanValue?1:0);else if("integerValue"in e)this.Ct(n,15),n.Ft(Ge(e.integerValue));else if("doubleValue"in e){let r=Ge(e.doubleValue);isNaN(r)?this.Ct(n,13):(this.Ct(n,15),fl(r)?n.Ft(0):n.Ft(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Ct(n,20),typeof r=="string"&&(r=yi(r)),n.Mt(`${r.seconds||""}`),n.Ft(r.nanos||0)}else if("stringValue"in e)this.xt(e.stringValue,n),this.Ot(n);else if("bytesValue"in e)this.Ct(n,30),n.Nt(vi(e.bytesValue)),this.Ot(n);else if("referenceValue"in e)this.Bt(e.referenceValue,n);else if("geoPointValue"in e){let r=e.geoPointValue;this.Ct(n,45),n.Ft(r.latitude||0),n.Ft(r.longitude||0)}else"mapValue"in e?kM(e)?this.Ct(n,Number.MAX_SAFE_INTEGER):xM(e)?this.Lt(e.mapValue,n):(this.kt(e.mapValue,n),this.Ot(n)):"arrayValue"in e?(this.qt(e.arrayValue,n),this.Ot(n)):Z(19022,{Qt:e})}xt(e,n){this.Ct(n,25),this.$t(e,n)}$t(e,n){n.Mt(e)}kt(e,n){let r=e.fields||{};this.Ct(n,55);for(let i of Object.keys(r))this.xt(i,n),this.Dt(r[i],n)}Lt(e,n){var r,i;let o=e.fields||{};this.Ct(n,53);let s=za,a=((i=(r=o[s].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.length)||0;this.Ct(n,15),n.Ft(Ge(a)),this.xt(s,n),this.Dt(o[s],n)}qt(e,n){let r=e.values||[];this.Ct(n,50);for(let i of r)this.Dt(i,n)}Bt(e,n){this.Ct(n,37),Q.fromName(e).path.forEach(r=>{this.Ct(n,60),this.$t(r,n)})}Ct(e,n){e.Ft(n)}Ot(e){e.Ft(2)}};Np.Ut=new Np;var Rw=class{constructor(){this.Dn=new Nw}addToCollectionParentIndex(e,n){return this.Dn.add(n),V.resolve()}getCollectionParents(e,n){return V.resolve(this.Dn.getEntries(n))}addFieldIndex(e,n){return V.resolve()}deleteFieldIndex(e,n){return V.resolve()}deleteAllFieldIndexes(e){return V.resolve()}createTargetIndexes(e,n){return V.resolve()}getDocumentsMatchingTarget(e,n){return V.resolve(null)}getIndexType(e,n){return V.resolve(0)}getFieldIndexes(e,n){return V.resolve([])}getNextCollectionGroupToUpdate(e){return V.resolve(null)}getMinOffset(e,n){return V.resolve(Is.min())}getMinOffsetFromCollectionGroup(e,n){return V.resolve(Is.min())}updateCollectionGroup(e,n,r){return V.resolve()}updateIndexEntries(e,n){return V.resolve()}},Nw=class{constructor(){this.index={}}add(e){let n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new St(We.comparator),o=!i.has(r);return this.index[n]=i.add(r),o}has(e){let n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new St(We.comparator)).toArray()}};var fue=new Uint8Array(0);var qN={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},cP=41943040,$n=class t{static withCacheSize(e){return new t(e,t.DEFAULT_COLLECTION_PERCENTILE,t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}};$n.DEFAULT_COLLECTION_PERCENTILE=10,$n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,$n.DEFAULT=new $n(cP,$n.DEFAULT_COLLECTION_PERCENTILE,$n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),$n.DISABLED=new $n(-1,0,0);var yl=class t{constructor(e){this._r=e}next(){return this._r+=2,this._r}static ar(){return new t(0)}static ur(){return new t(-1)}};var zN="LruGarbageCollector",A3=1048576;function GN([t,e],[n,r]){let i=he(t,n);return i===0?he(e,r):i}var Mw=class{constructor(e){this.Tr=e,this.buffer=new St(GN),this.Ir=0}dr(){return++this.Ir}Er(e){let n=[e,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(n);else{let r=this.buffer.last();GN(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}},Pw=class{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Ar=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return this.Ar!==null}Rr(e){z(zN,`Garbage collection scheduled in ${e}ms`),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,()=>v(this,null,function*(){this.Ar=null;try{yield this.localStore.collectGarbage(this.garbageCollector)}catch(n){rc(n)?z(zN,"Ignoring IndexedDB error during garbage collection: ",n):yield nc(n)}yield this.Rr(3e5)}))}},xw=class{constructor(e,n){this.Vr=e,this.params=n}calculateTargetCount(e,n){return this.Vr.mr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return V.resolve(NI.ue);let r=new Mw(n);return this.Vr.forEachTarget(e,i=>r.Er(i.sequenceNumber)).next(()=>this.Vr.gr(e,i=>r.Er(i))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.Vr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.Vr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(z("LruGarbageCollector","Garbage collection skipped; disabled"),V.resolve(qN)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(z("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),qN):this.pr(e,n))}getCacheSize(e){return this.Vr.getCacheSize(e)}pr(e,n){let r,i,o,s,a,u,l,f=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(p=>(p>this.params.maximumSequenceNumbersToCollect?(z("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${p}`),i=this.params.maximumSequenceNumbersToCollect):i=p,s=Date.now(),this.nthSequenceNumber(e,i))).next(p=>(r=p,a=Date.now(),this.removeTargets(e,r,n))).next(p=>(o=p,u=Date.now(),this.removeOrphanedDocuments(e,r))).next(p=>(l=Date.now(),La()<=me.DEBUG&&z("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${s-f}ms
	Determined least recently used ${i} in `+(a-s)+`ms
	Removed ${o} targets in `+(u-a)+`ms
	Removed ${p} documents in `+(l-u)+`ms
Total Duration: ${l-f}ms`),V.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:p})))}};function R3(t,e){return new xw(t,e)}var kw=class{constructor(){this.changes=new _i(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,pr.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();let r=this.changes.get(n);return r!==void 0?V.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var Ow=class{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}};var Fw=class{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&ul(r.mutation,i,Hn.empty(),gt.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,_e()).next(()=>r))}getLocalViewOfDocuments(e,n,r=_e()){let i=ms();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(o=>{let s=ol();return o.forEach((a,u)=>{s=s.insert(a,u.overlayedDocument)}),s}))}getOverlayedDocuments(e,n){let r=ms();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,_e()))}populateOverlays(e,n,r){let i=[];return r.forEach(o=>{n.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((s,a)=>{n.set(s,a)})})}computeViews(e,n,r,i){let o=Ei(),s=cl(),a=(function(){return cl()})();return n.forEach((u,l)=>{let f=r.get(l.key);i.has(l.key)&&(f===void 0||f.mutation instanceof Fr)?o=o.insert(l.key,l):f!==void 0?(s.set(l.key,f.mutation.getFieldMask()),ul(f.mutation,l,f.mutation.getFieldMask(),gt.now())):s.set(l.key,Hn.empty())}),this.recalculateAndSaveOverlays(e,o).next(u=>(u.forEach((l,f)=>s.set(l,f)),n.forEach((l,f)=>{var p;return a.set(l,new Ow(f,(p=s.get(l))!==null&&p!==void 0?p:null))}),a))}recalculateAndSaveOverlays(e,n){let r=cl(),i=new nt((s,a)=>s-a),o=_e();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(s=>{for(let a of s)a.keys().forEach(u=>{let l=n.get(u);if(l===null)return;let f=r.get(u)||Hn.empty();f=a.applyToLocalView(l,f),r.set(u,f);let p=(i.get(a.batchId)||_e()).add(u);i=i.insert(a.batchId,p)})}).next(()=>{let s=[],a=i.getReverseIterator();for(;a.hasNext();){let u=a.getNext(),l=u.key,f=u.value,p=GM();f.forEach(g=>{if(!o.has(g)){let y=ZM(n.get(g),r.get(g));y!==null&&p.set(g,y),o=o.add(g)}}),s.push(this.documentOverlayCache.saveOverlays(e,l,p))}return V.waitFor(s)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return(function(s){return Q.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0})(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):BM(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(o=>{let s=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-o.size):V.resolve(ms()),a=dl,u=o;return s.next(l=>V.forEach(l,(f,p)=>(a<p.largestBatchId&&(a=p.largestBatchId),o.get(f)?V.resolve():this.remoteDocumentCache.getEntry(e,f).next(g=>{u=u.insert(f,g)}))).next(()=>this.populateOverlays(e,l,o)).next(()=>this.computeViews(e,u,l,_e())).next(f=>({batchId:a,changes:zM(f)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Q(n)).next(r=>{let i=ol();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){let o=n.collectionGroup,s=ol();return this.indexManager.getCollectionParents(e,o).next(a=>V.forEach(a,u=>{let l=(function(p,g){return new ao(g,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)})(n,u.child(o));return this.getDocumentsMatchingCollectionQuery(e,l,r,i).next(f=>{f.forEach((p,g)=>{s=s.insert(p,g)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,n,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(s=>(o=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,o,i))).next(s=>{o.forEach((u,l)=>{let f=l.getKey();s.get(f)===null&&(s=s.insert(f,pr.newInvalidDocument(f)))});let a=ol();return s.forEach((u,l)=>{let f=o.get(u);f!==void 0&&ul(f.mutation,l,Hn.empty(),gt.now()),rg(n,l)&&(a=a.insert(u,l))}),a})}};var Lw=class{constructor(e){this.serializer=e,this.Br=new Map,this.Lr=new Map}getBundleMetadata(e,n){return V.resolve(this.Br.get(n))}saveBundleMetadata(e,n){return this.Br.set(n.id,(function(i){return{id:i.id,version:i.version,createTime:kr(i.createTime)}})(n)),V.resolve()}getNamedQuery(e,n){return V.resolve(this.Lr.get(n))}saveNamedQuery(e,n){return this.Lr.set(n.name,(function(i){return{name:i.name,query:S3(i.bundledQuery),readTime:kr(i.readTime)}})(n)),V.resolve()}};var Vw=class{constructor(){this.overlays=new nt(Q.comparator),this.kr=new Map}getOverlay(e,n){return V.resolve(this.overlays.get(n))}getOverlays(e,n){let r=ms();return V.forEach(n,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,o)=>{this.wt(e,n,o)}),V.resolve()}removeOverlaysForBatchId(e,n,r){let i=this.kr.get(r);return i!==void 0&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.kr.delete(r)),V.resolve()}getOverlaysForCollection(e,n,r){let i=ms(),o=n.length+1,s=new Q(n.child("")),a=this.overlays.getIteratorFrom(s);for(;a.hasNext();){let u=a.getNext().value,l=u.getKey();if(!n.isPrefixOf(l.path))break;l.path.length===o&&u.largestBatchId>r&&i.set(u.getKey(),u)}return V.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let o=new nt((l,f)=>l-f),s=this.overlays.getIterator();for(;s.hasNext();){let l=s.getNext().value;if(l.getKey().getCollectionGroup()===n&&l.largestBatchId>r){let f=o.get(l.largestBatchId);f===null&&(f=ms(),o=o.insert(l.largestBatchId,f)),f.set(l.getKey(),l)}}let a=ms(),u=o.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((l,f)=>a.set(l,f)),!(a.size()>=i)););return V.resolve(a)}wt(e,n,r){let i=this.overlays.get(r.key);if(i!==null){let s=this.kr.get(i.largestBatchId).delete(r.key);this.kr.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(r.key,new _w(n,r));let o=this.kr.get(n);o===void 0&&(o=_e(),this.kr.set(n,o)),this.kr.set(n,o.add(r.key))}};var jw=class{constructor(){this.sessionToken=Gt.EMPTY_BYTE_STRING}getSessionToken(e){return V.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,V.resolve()}};var vl=class{constructor(){this.qr=new St(ft.Qr),this.$r=new St(ft.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(e,n){let r=new ft(e,n);this.qr=this.qr.add(r),this.$r=this.$r.add(r)}Kr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Wr(new ft(e,n))}Gr(e,n){e.forEach(r=>this.removeReference(r,n))}zr(e){let n=new Q(new We([])),r=new ft(n,e),i=new ft(n,e+1),o=[];return this.$r.forEachInRange([r,i],s=>{this.Wr(s),o.push(s.key)}),o}jr(){this.qr.forEach(e=>this.Wr(e))}Wr(e){this.qr=this.qr.delete(e),this.$r=this.$r.delete(e)}Jr(e){let n=new Q(new We([])),r=new ft(n,e),i=new ft(n,e+1),o=_e();return this.$r.forEachInRange([r,i],s=>{o=o.add(s.key)}),o}containsKey(e){let n=new ft(e,0),r=this.qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}},ft=class{constructor(e,n){this.key=e,this.Hr=n}static Qr(e,n){return Q.comparator(e.key,n.key)||he(e.Hr,n.Hr)}static Ur(e,n){return he(e.Hr,n.Hr)||Q.comparator(e.key,n.key)}};var Uw=class{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.er=1,this.Yr=new St(ft.Qr)}checkEmpty(e){return V.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){let o=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let s=new yw(o,n,r,i);this.mutationQueue.push(s);for(let a of i)this.Yr=this.Yr.add(new ft(a.key,o)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return V.resolve(s)}lookupMutationBatch(e,n){return V.resolve(this.Zr(n))}getNextMutationBatchAfterBatchId(e,n){let r=n+1,i=this.Xr(r),o=i<0?0:i;return V.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return V.resolve(this.mutationQueue.length===0?MI:this.er-1)}getAllMutationBatches(e){return V.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){let r=new ft(n,0),i=new ft(n,Number.POSITIVE_INFINITY),o=[];return this.Yr.forEachInRange([r,i],s=>{let a=this.Zr(s.Hr);o.push(a)}),V.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new St(he);return n.forEach(i=>{let o=new ft(i,0),s=new ft(i,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([o,s],a=>{r=r.add(a.Hr)})}),V.resolve(this.ei(r))}getAllMutationBatchesAffectingQuery(e,n){let r=n.path,i=r.length+1,o=r;Q.isDocumentKey(o)||(o=o.child(""));let s=new ft(new Q(o),0),a=new St(he);return this.Yr.forEachWhile(u=>{let l=u.key.path;return!!r.isPrefixOf(l)&&(l.length===i&&(a=a.add(u.Hr)),!0)},s),V.resolve(this.ei(a))}ei(e){let n=[];return e.forEach(r=>{let i=this.Zr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){Ne(this.ti(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Yr;return V.forEach(n.mutations,i=>{let o=new ft(i.key,n.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Yr=r})}rr(e){}containsKey(e,n){let r=new ft(n,0),i=this.Yr.firstAfterOrEqual(r);return V.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,V.resolve()}ti(e,n){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){let n=this.Xr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}};var Bw=class{constructor(e){this.ni=e,this.docs=(function(){return new nt(Q.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){let r=n.key,i=this.docs.get(r),o=i?i.size:0,s=this.ni(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:s}),this.size+=s-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){let r=this.docs.get(n);return V.resolve(r?r.document.mutableCopy():pr.newInvalidDocument(n))}getEntries(e,n){let r=Ei();return n.forEach(i=>{let o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():pr.newInvalidDocument(i))}),V.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let o=Ei(),s=n.path,a=new Q(s.child("__id-9223372036854775808__")),u=this.docs.getIteratorFrom(a);for(;u.hasNext();){let{key:l,value:{document:f}}=u.getNext();if(!s.isPrefixOf(l.path))break;l.path.length>s.length+1||R4(A4(f),r)<=0||(i.has(f.key)||rg(n,f))&&(o=o.insert(f.key,f.mutableCopy()))}return V.resolve(o)}getAllFromCollectionGroup(e,n,r,i){Z(9500)}ri(e,n){return V.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new $w(this)}getSize(e){return V.resolve(this.size)}},$w=class extends kw{constructor(e){super(),this.Or=e}applyChanges(e){let n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.Or.addEntry(e,i)):this.Or.removeEntry(r)}),V.waitFor(n)}getFromCache(e,n){return this.Or.getEntry(e,n)}getAllFromCache(e,n){return this.Or.getEntries(e,n)}};var Hw=class{constructor(e){this.persistence=e,this.ii=new _i(n=>FI(n),LI),this.lastRemoteSnapshotVersion=ae.min(),this.highestTargetId=0,this.si=0,this.oi=new vl,this.targetCount=0,this._i=yl.ar()}forEachTarget(e,n){return this.ii.forEach((r,i)=>n(i)),V.resolve()}getLastRemoteSnapshotVersion(e){return V.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return V.resolve(this.si)}allocateTargetId(e){return this.highestTargetId=this._i.next(),V.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.si&&(this.si=n),V.resolve()}hr(e){this.ii.set(e.target,e);let n=e.targetId;n>this.highestTargetId&&(this._i=new yl(n),this.highestTargetId=n),e.sequenceNumber>this.si&&(this.si=e.sequenceNumber)}addTargetData(e,n){return this.hr(n),this.targetCount+=1,V.resolve()}updateTargetData(e,n){return this.hr(n),V.resolve()}removeTargetData(e,n){return this.ii.delete(n.target),this.oi.zr(n.targetId),this.targetCount-=1,V.resolve()}removeTargets(e,n,r){let i=0,o=[];return this.ii.forEach((s,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.ii.delete(s),o.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),V.waitFor(o).next(()=>i)}getTargetCount(e){return V.resolve(this.targetCount)}getTargetData(e,n){let r=this.ii.get(n)||null;return V.resolve(r)}addMatchingKeys(e,n,r){return this.oi.Kr(n,r),V.resolve()}removeMatchingKeys(e,n,r){this.oi.Gr(n,r);let i=this.persistence.referenceDelegate,o=[];return i&&n.forEach(s=>{o.push(i.markPotentiallyOrphaned(e,s))}),V.waitFor(o)}removeMatchingKeysForTargetId(e,n){return this.oi.zr(n),V.resolve()}getMatchingKeysForTargetId(e,n){let r=this.oi.Jr(n);return V.resolve(r)}containsKey(e,n){return V.resolve(this.oi.containsKey(n))}};var Mp=class{constructor(e,n){this.ai={},this.overlays={},this.ui=new NI(0),this.ci=!1,this.ci=!0,this.li=new jw,this.referenceDelegate=e(this),this.hi=new Hw(this),this.indexManager=new Rw,this.remoteDocumentCache=(function(i){return new Bw(i)})(r=>this.referenceDelegate.Pi(r)),this.serializer=new Aw(n),this.Ti=new Lw(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new Vw,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ai[e.toKey()];return r||(r=new Uw(n,this.referenceDelegate),this.ai[e.toKey()]=r),r}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(e,n,r){z("MemoryPersistence","Starting transaction:",e);let i=new qw(this.ui.next());return this.referenceDelegate.Ii(),r(i).next(o=>this.referenceDelegate.di(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Ei(e,n){return V.or(Object.values(this.ai).map(r=>()=>r.containsKey(e,n)))}},qw=class extends XE{constructor(e){super(),this.currentSequenceNumber=e}},zw=class t{constructor(e){this.persistence=e,this.Ai=new vl,this.Ri=null}static Vi(e){return new t(e)}get mi(){if(this.Ri)return this.Ri;throw Z(60996)}addReference(e,n,r){return this.Ai.addReference(r,n),this.mi.delete(r.toString()),V.resolve()}removeReference(e,n,r){return this.Ai.removeReference(r,n),this.mi.add(r.toString()),V.resolve()}markPotentiallyOrphaned(e,n){return this.mi.add(n.toString()),V.resolve()}removeTarget(e,n){this.Ai.zr(n.targetId).forEach(i=>this.mi.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(o=>this.mi.add(o.toString()))}).next(()=>r.removeTargetData(e,n))}Ii(){this.Ri=new Set}di(e){let n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return V.forEach(this.mi,r=>{let i=Q.fromPath(r);return this.fi(e,i).next(o=>{o||n.removeEntry(i,ae.min())})}).next(()=>(this.Ri=null,n.apply(e)))}updateLimboDocument(e,n){return this.fi(e,n).next(r=>{r?this.mi.delete(n.toString()):this.mi.add(n.toString())})}Pi(e){return 0}fi(e,n){return V.or([()=>V.resolve(this.Ai.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ei(e,n)])}},Pp=class t{constructor(e,n){this.persistence=e,this.gi=new _i(r=>x4(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=R3(this,n)}static Vi(e,n){return new t(e,n)}Ii(){}di(e){return V.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}mr(e){let n=this.yr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(i=>r+i))}yr(e){let n=0;return this.gr(e,r=>{n++}).next(()=>n)}gr(e,n){return V.forEach(this.gi,(r,i)=>this.Sr(e,r,i).next(o=>o?V.resolve():n(i)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0,i=this.persistence.getRemoteDocumentCache(),o=i.newChangeBuffer();return i.ri(e,s=>this.Sr(e,s,n).next(a=>{a||(r++,o.removeEntry(s,ae.min()))})).next(()=>o.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.gi.set(n,e.currentSequenceNumber),V.resolve()}removeTarget(e,n){let r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.gi.set(r,e.currentSequenceNumber),V.resolve()}removeReference(e,n,r){return this.gi.set(r,e.currentSequenceNumber),V.resolve()}updateLimboDocument(e,n){return this.gi.set(n,e.currentSequenceNumber),V.resolve()}Pi(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=fp(e.data.value)),n}Sr(e,n,r){return V.or([()=>this.persistence.Ei(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{let i=this.gi.get(n);return V.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}};var Gw=class t{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.Is=r,this.ds=i}static Es(e,n){let r=_e(),i=_e();for(let o of n.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new t(e,n.fromCache,r,i)}};var Ww=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var Kw=class{constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=(function(){return ER()?8:M4(Tn())>0?6:4})()}initialize(e,n){this.gs=e,this.indexManager=n,this.As=!0}getDocumentsMatchingQuery(e,n,r,i){let o={result:null};return this.ps(e,n).next(s=>{o.result=s}).next(()=>{if(!o.result)return this.ys(e,n,i,r).next(s=>{o.result=s})}).next(()=>{if(o.result)return;let s=new Ww;return this.ws(e,n,s).next(a=>{if(o.result=a,this.Rs)return this.Ss(e,n,s,a.size)})}).next(()=>o.result)}Ss(e,n,r,i){return r.documentReadCount<this.Vs?(La()<=me.DEBUG&&z("QueryEngine","SDK will not create cache indexes for query:",Va(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),V.resolve()):(La()<=me.DEBUG&&z("QueryEngine","Query:",Va(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.fs*i?(La()<=me.DEBUG&&z("QueryEngine","The SDK decides to create cache indexes for query:",Va(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,xr(n))):V.resolve())}ps(e,n){if(kN(n))return V.resolve(null);let r=xr(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=pw(n,null,"F"),r=xr(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{let s=_e(...o);return this.gs.getDocuments(e,s).next(a=>this.indexManager.getMinOffset(e,r).next(u=>{let l=this.bs(n,a);return this.Ds(n,l,s,u.readTime)?this.ps(e,pw(n,null,"F")):this.vs(e,l,n,u)}))})))}ys(e,n,r,i){return kN(n)||i.isEqual(ae.min())?V.resolve(null):this.gs.getDocuments(e,r).next(o=>{let s=this.bs(n,o);return this.Ds(n,s,r,i)?V.resolve(null):(La()<=me.DEBUG&&z("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Va(n)),this.vs(e,s,n,S4(i,dl)).next(a=>a))})}bs(e,n){let r=new St(HM(e));return n.forEach((i,o)=>{rg(e,o)&&(r=r.add(o))}),r}Ds(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;let o=e.limitType==="F"?n.last():n.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}ws(e,n,r){return La()<=me.DEBUG&&z("QueryEngine","Using full collection scan to execute query:",Va(n)),this.gs.getDocumentsMatchingQuery(e,n,Is.min(),r)}vs(e,n,r,i){return this.gs.getDocumentsMatchingQuery(e,r,i).next(o=>(n.forEach(s=>{o=o.insert(s.key,s)}),o))}};var UI="LocalStore",N3=3e8,Qw=class{constructor(e,n,r,i){this.persistence=e,this.Cs=n,this.serializer=i,this.Fs=new nt(he),this.Ms=new _i(o=>FI(o),LI),this.xs=new Map,this.Os=e.getRemoteDocumentCache(),this.hi=e.getTargetCache(),this.Ti=e.getBundleCache(),this.Ns(r)}Ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Fw(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Fs))}};function M3(t,e,n,r){return new Qw(t,e,n,r)}function uP(t,e){return v(this,null,function*(){let n=oe(t);return yield n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,n.Ns(e),n.mutationQueue.getAllMutationBatches(r))).next(o=>{let s=[],a=[],u=_e();for(let l of i){s.push(l.batchId);for(let f of l.mutations)u=u.add(f.key)}for(let l of o){a.push(l.batchId);for(let f of l.mutations)u=u.add(f.key)}return n.localDocuments.getDocuments(r,u).next(l=>({Bs:l,removedBatchIds:s,addedBatchIds:a}))})})})}function P3(t,e){let n=oe(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),o=n.Os.newChangeBuffer({trackRemovals:!0});return(function(a,u,l,f){let p=l.batch,g=p.keys(),y=V.resolve();return g.forEach(D=>{y=y.next(()=>f.getEntry(u,D)).next(x=>{let R=l.docVersions.get(D);Ne(R!==null,48541),x.version.compareTo(R)<0&&(p.applyToRemoteDocument(x,l),x.isValidDocument()&&(x.setReadTime(l.commitVersion),f.addEntry(x)))})}),y.next(()=>a.mutationQueue.removeMutationBatch(u,p))})(n,r,e,o).next(()=>o.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(a){let u=_e();for(let l=0;l<a.mutationResults.length;++l)a.mutationResults[l].transformResults.length>0&&(u=u.add(a.batch.mutations[l].key));return u})(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function lP(t){let e=oe(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.hi.getLastRemoteSnapshotVersion(n))}function x3(t,e){let n=oe(t),r=e.snapshotVersion,i=n.Fs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{let s=n.Os.newChangeBuffer({trackRemovals:!0});i=n.Fs;let a=[];e.targetChanges.forEach((f,p)=>{let g=i.get(p);if(!g)return;a.push(n.hi.removeMatchingKeys(o,f.removedDocuments,p).next(()=>n.hi.addMatchingKeys(o,f.addedDocuments,p)));let y=g.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(p)!==null?y=y.withResumeToken(Gt.EMPTY_BYTE_STRING,ae.min()).withLastLimboFreeSnapshotVersion(ae.min()):f.resumeToken.approximateByteSize()>0&&(y=y.withResumeToken(f.resumeToken,r)),i=i.insert(p,y),(function(x,R,O){return x.resumeToken.approximateByteSize()===0||R.snapshotVersion.toMicroseconds()-x.snapshotVersion.toMicroseconds()>=N3?!0:O.addedDocuments.size+O.modifiedDocuments.size+O.removedDocuments.size>0})(g,y,f)&&a.push(n.hi.updateTargetData(o,y))});let u=Ei(),l=_e();if(e.documentUpdates.forEach(f=>{e.resolvedLimboDocuments.has(f)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(o,f))}),a.push(k3(o,s,e.documentUpdates).next(f=>{u=f.Ls,l=f.ks})),!r.isEqual(ae.min())){let f=n.hi.getLastRemoteSnapshotVersion(o).next(p=>n.hi.setTargetsMetadata(o,o.currentSequenceNumber,r));a.push(f)}return V.waitFor(a).next(()=>s.apply(o)).next(()=>n.localDocuments.getLocalViewOfDocuments(o,u,l)).next(()=>u)}).then(o=>(n.Fs=i,o))}function k3(t,e,n){let r=_e(),i=_e();return n.forEach(o=>r=r.add(o)),e.getEntries(t,r).next(o=>{let s=Ei();return n.forEach((a,u)=>{let l=o.get(a);u.isFoundDocument()!==l.isFoundDocument()&&(i=i.add(a)),u.isNoDocument()&&u.version.isEqual(ae.min())?(e.removeEntry(a,u.readTime),s=s.insert(a,u)):!l.isValidDocument()||u.version.compareTo(l.version)>0||u.version.compareTo(l.version)===0&&l.hasPendingWrites?(e.addEntry(u),s=s.insert(a,u)):z(UI,"Ignoring outdated watch update for ",a,". Current version:",l.version," Watch version:",u.version)}),{Ls:s,ks:i}})}function O3(t,e){let n=oe(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=MI),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function F3(t,e){let n=oe(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.hi.getTargetData(r,e).next(o=>o?(i=o,V.resolve(i)):n.hi.allocateTargetId(r).next(s=>(i=new ml(e,s,"TargetPurposeListen",r.currentSequenceNumber),n.hi.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=n.Fs.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.Fs=n.Fs.insert(r.targetId,r),n.Ms.set(e,r.targetId)),r})}function Yw(t,e,n){return v(this,null,function*(){let r=oe(t),i=r.Fs.get(e),o=n?"readwrite":"readwrite-primary";try{n||(yield r.persistence.runTransaction("Release target",o,s=>r.persistence.referenceDelegate.removeTarget(s,i)))}catch(s){if(!rc(s))throw s;z(UI,`Failed to update sequence numbers for target ${e}: ${s}`)}r.Fs=r.Fs.remove(e),r.Ms.delete(i.target)})}function WN(t,e,n){let r=oe(t),i=ae.min(),o=_e();return r.persistence.runTransaction("Execute query","readwrite",s=>(function(u,l,f){let p=oe(u),g=p.Ms.get(f);return g!==void 0?V.resolve(p.Fs.get(g)):p.hi.getTargetData(l,f)})(r,s,xr(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.hi.getMatchingKeysForTargetId(s,a.targetId).next(u=>{o=u})}).next(()=>r.Cs.getDocumentsMatchingQuery(s,e,n?i:ae.min(),n?o:_e())).next(a=>(L3(r,Y4(e),a),{documents:a,qs:o})))}function L3(t,e,n){let r=t.xs.get(e)||ae.min();n.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),t.xs.set(e,r)}var xp=class{constructor(){this.activeTargetIds=n3()}Gs(e){this.activeTargetIds=this.activeTargetIds.add(e)}zs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}};var Jw=class{constructor(){this.Fo=new xp,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Fo.Gs(e),this.Mo[e]||"not-current"}updateQueryState(e,n,r){this.Mo[e]=n}removeLocalQueryTarget(e){this.Fo.zs(e)}isLocalQueryTarget(e){return this.Fo.activeTargetIds.has(e)}clearQueryState(e){delete this.Mo[e]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(e){return this.Fo.activeTargetIds.has(e)}start(){return this.Fo=new xp,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var Zw=class{xo(e){}shutdown(){}};var KN="ConnectivityMonitor",kp=class{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(e){this.ko.push(e)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){z(KN,"Network connectivity changed: AVAILABLE");for(let e of this.ko)e(0)}Lo(){z(KN,"Network connectivity changed: UNAVAILABLE");for(let e of this.ko)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var dp=null;function Xw(){return dp===null?dp=(function(){return 268435456+Math.round(2147483648*Math.random())})():dp++,"0x"+dp.toString(16)}var $E="RestConnection",V3={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"},eI=class{get Qo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;let n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.$o=n+"://"+e.host,this.Uo=`projects/${r}/databases/${i}`,this.Ko=this.databaseId.database===Ep?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Wo(e,n,r,i,o){let s=Xw(),a=this.Go(e,n.toUriEncodedString());z($E,`Sending RPC '${e}' ${s}:`,a,r);let u={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(u,i,o);let{host:l}=new URL(a),f=as(l);return this.jo(e,a,u,r,f).then(p=>(z($E,`Received RPC '${e}' ${s}: `,p),p),p=>{throw oo($E,`RPC '${e}' ${s} failed with error: `,p,"url: ",a,"request:",r),p})}Jo(e,n,r,i,o,s){return this.Wo(e,n,r,i,o)}zo(e,n,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+tc})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((i,o)=>e[o]=i),r&&r.headers.forEach((i,o)=>e[o]=i)}Go(e,n){let r=V3[e];return`${this.$o}/v1/${n}:${r}`}terminate(){}};var tI=class{constructor(e){this.Ho=e.Ho,this.Yo=e.Yo}Zo(e){this.Xo=e}e_(e){this.t_=e}n_(e){this.r_=e}onMessage(e){this.i_=e}close(){this.Yo()}send(e){this.Ho(e)}s_(){this.Xo()}o_(){this.t_()}__(e){this.r_(e)}a_(e){this.i_(e)}};var zt="WebChannelConnection",nI=class extends eI{constructor(e){super(e),this.u_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}jo(e,n,r,i,o){let s=Xw();return new Promise((a,u)=>{let l=new FE;l.setWithCredentials(!0),l.listenOnce(LE.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case il.NO_ERROR:let p=l.getResponseJson();z(zt,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(p)),a(p);break;case il.TIMEOUT:z(zt,`RPC '${e}' ${s} timed out`),u(new $(k.DEADLINE_EXCEEDED,"Request time out"));break;case il.HTTP_ERROR:let g=l.getStatus();if(z(zt,`RPC '${e}' ${s} failed with status:`,g,"response text:",l.getResponseText()),g>0){let y=l.getResponseJson();Array.isArray(y)&&(y=y[0]);let D=y?.error;if(D&&D.status&&D.message){let x=(function(O){let H=O.toLowerCase().replace(/_/g,"-");return Object.values(k).indexOf(H)>=0?H:k.UNKNOWN})(D.status);u(new $(x,D.message))}else u(new $(k.UNKNOWN,"Server responded with status "+l.getStatus()))}else u(new $(k.UNAVAILABLE,"Connection failed."));break;default:Z(9055,{c_:e,streamId:s,l_:l.getLastErrorCode(),h_:l.getLastError()})}}finally{z(zt,`RPC '${e}' ${s} completed.`)}});let f=JSON.stringify(i);z(zt,`RPC '${e}' ${s} sending request:`,i),l.send(n,"POST",f,r,15)})}P_(e,n,r){let i=Xw(),o=[this.$o,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=UE(),a=jE(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;l!==void 0&&(u.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(u.useFetchStreams=!0),this.zo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;let f=o.join("");z(zt,`Creating RPC '${e}' stream ${i}: ${f}`,u);let p=s.createWebChannel(f,u);this.T_(p);let g=!1,y=!1,D=new tI({Ho:R=>{y?z(zt,`Not sending because RPC '${e}' stream ${i} is closed:`,R):(g||(z(zt,`Opening RPC '${e}' stream ${i} transport.`),p.open(),g=!0),z(zt,`RPC '${e}' stream ${i} sending:`,R),p.send(R))},Yo:()=>p.close()}),x=(R,O,H)=>{R.listen(O,Y=>{try{H(Y)}catch(re){setTimeout(()=>{throw re},0)}})};return x(p,Fa.EventType.OPEN,()=>{y||(z(zt,`RPC '${e}' stream ${i} transport opened.`),D.s_())}),x(p,Fa.EventType.CLOSE,()=>{y||(y=!0,z(zt,`RPC '${e}' stream ${i} transport closed`),D.__(),this.I_(p))}),x(p,Fa.EventType.ERROR,R=>{y||(y=!0,oo(zt,`RPC '${e}' stream ${i} transport errored. Name:`,R.name,"Message:",R.message),D.__(new $(k.UNAVAILABLE,"The operation could not be completed")))}),x(p,Fa.EventType.MESSAGE,R=>{var O;if(!y){let H=R.data[0];Ne(!!H,16349);let Y=H,re=Y?.error||((O=Y[0])===null||O===void 0?void 0:O.error);if(re){z(zt,`RPC '${e}' stream ${i} received error:`,re);let Ke=re.status,ge=(function(w){let I=dt[w];if(I!==void 0)return eP(I)})(Ke),b=re.message;ge===void 0&&(ge=k.INTERNAL,b="Unknown error status: "+Ke+" with message "+re.message),y=!0,D.__(new $(ge,b)),p.close()}else z(zt,`RPC '${e}' stream ${i} received:`,H),D.a_(H)}}),x(a,VE.STAT_EVENT,R=>{R.stat===cp.PROXY?z(zt,`RPC '${e}' stream ${i} detected buffering proxy`):R.stat===cp.NOPROXY&&z(zt,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{D.o_()},0),D}terminate(){this.u_.forEach(e=>e.close()),this.u_=[]}T_(e){this.u_.push(e)}I_(e){this.u_=this.u_.filter(n=>n===e)}};function HE(){return typeof document<"u"?document:null}function ig(t){return new bw(t,!0)}var Op=class{constructor(e,n,r=1e3,i=1.5,o=6e4){this.Fi=e,this.timerId=n,this.d_=r,this.E_=i,this.A_=o,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(e){this.cancel();let n=Math.floor(this.R_+this.p_()),r=Math.max(0,Date.now()-this.m_),i=Math.max(0,n-r);i>0&&z("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.R_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,i,()=>(this.m_=Date.now(),e())),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}};var QN="PersistentStream",Fp=class{constructor(e,n,r,i,o,s,a,u){this.Fi=e,this.w_=r,this.S_=i,this.connection=o,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=a,this.listener=u,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new Op(e,n)}M_(){return this.state===1||this.state===5||this.x_()}x_(){return this.state===2||this.state===3}start(){this.C_=0,this.state!==4?this.auth():this.O_()}stop(){return v(this,null,function*(){this.M_()&&(yield this.close(0))})}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&this.D_===null&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,()=>this.L_()))}k_(e){this.q_(),this.stream.send(e)}L_(){return v(this,null,function*(){if(this.x_())return this.close(0)})}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}close(e,n){return v(this,null,function*(){this.q_(),this.Q_(),this.F_.cancel(),this.b_++,e!==4?this.F_.reset():n&&n.code===k.RESOURCE_EXHAUSTED?(mi(n.toString()),mi("Using maximum backoff delay to prevent overloading the backend."),this.F_.f_()):n&&n.code===k.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.U_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.n_(n)})}U_(){}auth(){this.state=1;let e=this.K_(this.b_),n=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.b_===n&&this.W_(r,i)},r=>{e(()=>{let i=new $(k.UNKNOWN,"Fetching auth token failed: "+r.message);return this.G_(i)})})}W_(e,n){let r=this.K_(this.b_);this.stream=this.z_(e,n),this.stream.Zo(()=>{r(()=>this.listener.Zo())}),this.stream.e_(()=>{r(()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,()=>(this.x_()&&(this.state=3),Promise.resolve())),this.listener.e_()))}),this.stream.n_(i=>{r(()=>this.G_(i))}),this.stream.onMessage(i=>{r(()=>++this.C_==1?this.j_(i):this.onNext(i))})}O_(){this.state=5,this.F_.g_(()=>v(this,null,function*(){this.state=0,this.start()}))}G_(e){return z(QN,`close with error: ${e}`),this.stream=null,this.close(4,e)}K_(e){return n=>{this.Fi.enqueueAndForget(()=>this.b_===e?n():(z(QN,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},rI=class extends Fp{constructor(e,n,r,i,o,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,s),this.serializer=o}z_(e,n){return this.connection.P_("Listen",e,n)}j_(e){return this.onNext(e)}onNext(e){this.F_.reset();let n=m3(this.serializer,e),r=(function(o){if(!("targetChange"in o))return ae.min();let s=o.targetChange;return s.targetIds&&s.targetIds.length?ae.min():s.readTime?kr(s.readTime):ae.min()})(e);return this.listener.J_(n,r)}H_(e){let n={};n.database=Sw(this.serializer),n.addTarget=(function(o,s){let a,u=s.target;if(a=fw(u)?{documents:_3(o,u)}:{query:E3(o,u).Vt},a.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){a.resumeToken=tP(o,s.resumeToken);let l=Tw(o,s.expectedCount);l!==null&&(a.expectedCount=l)}else if(s.snapshotVersion.compareTo(ae.min())>0){a.readTime=Rp(o,s.snapshotVersion.toTimestamp());let l=Tw(o,s.expectedCount);l!==null&&(a.expectedCount=l)}return a})(this.serializer,e);let r=I3(this.serializer,e);r&&(n.labels=r),this.k_(n)}Y_(e){let n={};n.database=Sw(this.serializer),n.removeTarget=e,this.k_(n)}},iI=class extends Fp{constructor(e,n,r,i,o,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,s),this.serializer=o}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(e,n){return this.connection.P_("Write",e,n)}j_(e){return Ne(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Ne(!e.writeResults||e.writeResults.length===0,55816),this.listener.ea()}onNext(e){Ne(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.F_.reset();let n=v3(e.writeResults,e.commitTime),r=kr(e.commitTime);return this.listener.ta(r,n)}na(){let e={};e.database=Sw(this.serializer),this.k_(e)}X_(e){let n={streamToken:this.lastStreamToken,writes:e.map(r=>y3(this.serializer,r))};this.k_(n)}};var oI=class{},sI=class extends oI{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.ra=!1}ia(){if(this.ra)throw new $(k.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,n,r,i){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,s])=>this.connection.Wo(e,Cw(n,r),i,o,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===k.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new $(k.UNKNOWN,o.toString())})}Jo(e,n,r,i,o){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.Jo(e,Cw(n,r),i,s,a,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===k.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new $(k.UNKNOWN,s.toString())})}terminate(){this.ra=!0,this.connection.terminate()}},aI=class{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){this.sa===0&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve())))}la(e){this.state==="Online"?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ua("Offline")))}set(e){this.ha(),this.sa=0,e==="Online"&&(this._a=!1),this.ua(e)}ua(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ca(e){let n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this._a?(mi(n),this._a=!1):z("OnlineStateTracker",n)}ha(){this.oa!==null&&(this.oa.cancel(),this.oa=null)}};var Ss="RemoteStore",cI=class{constructor(e,n,r,i,o){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=o,this.Ea.xo(s=>{r.enqueueAndForget(()=>v(this,null,function*(){Rs(this)&&(z(Ss,"Restarting streams for network reachability change."),yield(function(u){return v(this,null,function*(){let l=oe(u);l.Ia.add(4),yield Tl(l),l.Aa.set("Unknown"),l.Ia.delete(4),yield og(l)})})(this))}))}),this.Aa=new aI(r,i)}};function og(t){return v(this,null,function*(){if(Rs(t))for(let e of t.da)yield e(!0)})}function Tl(t){return v(this,null,function*(){for(let e of t.da)yield e(!1)})}function dP(t,e){let n=oe(t);n.Ta.has(e.targetId)||(n.Ta.set(e.targetId,e),qI(n)?HI(n):ic(n).x_()&&$I(n,e))}function BI(t,e){let n=oe(t),r=ic(n);n.Ta.delete(e),r.x_()&&fP(n,e),n.Ta.size===0&&(r.x_()?r.B_():Rs(n)&&n.Aa.set("Unknown"))}function $I(t,e){if(t.Ra.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ae.min())>0){let n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}ic(t).H_(e)}function fP(t,e){t.Ra.$e(e),ic(t).Y_(e)}function HI(t){t.Ra=new Iw({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>t.Ta.get(e)||null,lt:()=>t.datastore.serializer.databaseId}),ic(t).start(),t.Aa.aa()}function qI(t){return Rs(t)&&!ic(t).M_()&&t.Ta.size>0}function Rs(t){return oe(t).Ia.size===0}function hP(t){t.Ra=void 0}function j3(t){return v(this,null,function*(){t.Aa.set("Online")})}function U3(t){return v(this,null,function*(){t.Ta.forEach((e,n)=>{$I(t,e)})})}function B3(t,e){return v(this,null,function*(){hP(t),qI(t)?(t.Aa.la(e),HI(t)):t.Aa.set("Unknown")})}function $3(t,e,n){return v(this,null,function*(){if(t.Aa.set("Online"),e instanceof Sp&&e.state===2&&e.cause)try{yield(function(i,o){return v(this,null,function*(){let s=o.cause;for(let a of o.targetIds)i.Ta.has(a)&&(yield i.remoteSyncer.rejectListen(a,s),i.Ta.delete(a),i.Ra.removeTarget(a))})})(t,e)}catch(r){z(Ss,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield Lp(t,r)}else if(e instanceof $a?t.Ra.Ye(e):e instanceof Dp?t.Ra.it(e):t.Ra.et(e),!n.isEqual(ae.min()))try{let r=yield lP(t.localStore);n.compareTo(r)>=0&&(yield(function(o,s){let a=o.Ra.Pt(s);return a.targetChanges.forEach((u,l)=>{if(u.resumeToken.approximateByteSize()>0){let f=o.Ta.get(l);f&&o.Ta.set(l,f.withResumeToken(u.resumeToken,s))}}),a.targetMismatches.forEach((u,l)=>{let f=o.Ta.get(u);if(!f)return;o.Ta.set(u,f.withResumeToken(Gt.EMPTY_BYTE_STRING,f.snapshotVersion)),fP(o,u);let p=new ml(f.target,u,l,f.sequenceNumber);$I(o,p)}),o.remoteSyncer.applyRemoteEvent(a)})(t,n))}catch(r){z(Ss,"Failed to raise snapshot:",r),yield Lp(t,r)}})}function Lp(t,e,n){return v(this,null,function*(){if(!rc(e))throw e;t.Ia.add(1),yield Tl(t),t.Aa.set("Offline"),n||(n=()=>lP(t.localStore)),t.asyncQueue.enqueueRetryable(()=>v(null,null,function*(){z(Ss,"Retrying IndexedDB access"),yield n(),t.Ia.delete(1),yield og(t)}))})}function pP(t,e){return e().catch(n=>Lp(t,n,e))}function sg(t){return v(this,null,function*(){let e=oe(t),n=uo(e),r=e.Pa.length>0?e.Pa[e.Pa.length-1].batchId:MI;for(;H3(e);)try{let i=yield O3(e.localStore,r);if(i===null){e.Pa.length===0&&n.B_();break}r=i.batchId,q3(e,i)}catch(i){yield Lp(e,i)}gP(e)&&mP(e)})}function H3(t){return Rs(t)&&t.Pa.length<10}function q3(t,e){t.Pa.push(e);let n=uo(t);n.x_()&&n.Z_&&n.X_(e.mutations)}function gP(t){return Rs(t)&&!uo(t).M_()&&t.Pa.length>0}function mP(t){uo(t).start()}function z3(t){return v(this,null,function*(){uo(t).na()})}function G3(t){return v(this,null,function*(){let e=uo(t);for(let n of t.Pa)e.X_(n.mutations)})}function W3(t,e,n){return v(this,null,function*(){let r=t.Pa.shift(),i=vw.from(r,e,n);yield pP(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),yield sg(t)})}function K3(t,e){return v(this,null,function*(){e&&uo(t).Z_&&(yield(function(r,i){return v(this,null,function*(){if((function(s){return u3(s)&&s!==k.ABORTED})(i.code)){let o=r.Pa.shift();uo(r).N_(),yield pP(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i)),yield sg(r)}})})(t,e)),gP(t)&&mP(t)})}function YN(t,e){return v(this,null,function*(){let n=oe(t);n.asyncQueue.verifyOperationInProgress(),z(Ss,"RemoteStore received new credentials");let r=Rs(n);n.Ia.add(3),yield Tl(n),r&&n.Aa.set("Unknown"),yield n.remoteSyncer.handleCredentialChange(e),n.Ia.delete(3),yield og(n)})}function Q3(t,e){return v(this,null,function*(){let n=oe(t);e?(n.Ia.delete(2),yield og(n)):e||(n.Ia.add(2),yield Tl(n),n.Aa.set("Unknown"))})}function ic(t){return t.Va||(t.Va=(function(n,r,i){let o=oe(n);return o.ia(),new rI(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)})(t.datastore,t.asyncQueue,{Zo:j3.bind(null,t),e_:U3.bind(null,t),n_:B3.bind(null,t),J_:$3.bind(null,t)}),t.da.push(e=>v(null,null,function*(){e?(t.Va.N_(),qI(t)?HI(t):t.Aa.set("Unknown")):(yield t.Va.stop(),hP(t))}))),t.Va}function uo(t){return t.ma||(t.ma=(function(n,r,i){let o=oe(n);return o.ia(),new iI(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)})(t.datastore,t.asyncQueue,{Zo:()=>Promise.resolve(),e_:z3.bind(null,t),n_:K3.bind(null,t),ea:G3.bind(null,t),ta:W3.bind(null,t)}),t.da.push(e=>v(null,null,function*(){e?(t.ma.N_(),yield sg(t)):(yield t.ma.stop(),t.Pa.length>0&&(z(Ss,`Stopping write stream with ${t.Pa.length} pending writes`),t.Pa=[]))}))),t.ma}var uI=class t{constructor(e,n,r,i,o){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new hr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,o){let s=Date.now()+r,a=new t(e,n,s,i,o);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new $(k.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function zI(t,e){if(mi("AsyncQueue",`${e}: ${t}`),rc(t))return new $(k.UNAVAILABLE,`${e}: ${t}`);throw t}var Vp=class t{static emptySet(e){return new t(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||Q.comparator(n.key,r.key):(n,r)=>Q.comparator(n.key,r.key),this.keyedMap=ol(),this.sortedSet=new nt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){let n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){let n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){let i=n.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){let e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){let r=new t;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}};var jp=class{constructor(){this.fa=new nt(Q.comparator)}track(e){let n=e.doc.key,r=this.fa.get(n);r?e.type!==0&&r.type===3?this.fa=this.fa.insert(n,e):e.type===3&&r.type!==1?this.fa=this.fa.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.fa=this.fa.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.fa=this.fa.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.fa=this.fa.remove(n):e.type===1&&r.type===2?this.fa=this.fa.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.fa=this.fa.insert(n,{type:2,doc:e.doc}):Z(63341,{At:e,ga:r}):this.fa=this.fa.insert(n,e)}pa(){let e=[];return this.fa.inorderTraversal((n,r)=>{e.push(r)}),e}},Za=class t{constructor(e,n,r,i,o,s,a,u,l){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=s,this.syncStateChanged=a,this.excludesMetadataChanges=u,this.hasCachedResults=l}static fromInitialDocuments(e,n,r,i,o){let s=[];return n.forEach(a=>{s.push({type:0,doc:a})}),new t(e,n,Vp.emptySet(n),s,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&ng(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}};var lI=class{constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some(e=>e.ba())}},dI=class{constructor(){this.queries=JN(),this.onlineState="Unknown",this.Da=new Set}terminate(){(function(n,r){let i=oe(n),o=i.queries;i.queries=JN(),o.forEach((s,a)=>{for(let u of a.wa)u.onError(r)})})(this,new $(k.ABORTED,"Firestore shutting down"))}};function JN(){return new _i(t=>$M(t),ng)}function GI(t,e){return v(this,null,function*(){let n=oe(t),r=3,i=e.query,o=n.queries.get(i);o?!o.Sa()&&e.ba()&&(r=2):(o=new lI,r=e.ba()?0:1);try{switch(r){case 0:o.ya=yield n.onListen(i,!0);break;case 1:o.ya=yield n.onListen(i,!1);break;case 2:yield n.onFirstRemoteStoreListen(i)}}catch(s){let a=zI(s,`Initialization of query '${Va(e.query)}' failed`);return void e.onError(a)}n.queries.set(i,o),o.wa.push(e),e.va(n.onlineState),o.ya&&e.Ca(o.ya)&&KI(n)})}function WI(t,e){return v(this,null,function*(){let n=oe(t),r=e.query,i=3,o=n.queries.get(r);if(o){let s=o.wa.indexOf(e);s>=0&&(o.wa.splice(s,1),o.wa.length===0?i=e.ba()?0:1:!o.Sa()&&e.ba()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}})}function Y3(t,e){let n=oe(t),r=!1;for(let i of e){let o=i.query,s=n.queries.get(o);if(s){for(let a of s.wa)a.Ca(i)&&(r=!0);s.ya=i}}r&&KI(n)}function J3(t,e,n){let r=oe(t),i=r.queries.get(e);if(i)for(let o of i.wa)o.onError(n);r.queries.delete(e)}function KI(t){t.Da.forEach(e=>{e.next()})}var fI,ZN;(ZN=fI||(fI={})).Fa="default",ZN.Cache="cache";var _l=class{constructor(e,n,r){this.query=e,this.Ma=n,this.xa=!1,this.Oa=null,this.onlineState="Unknown",this.options=r||{}}Ca(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new Za(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.xa?this.Na(e)&&(this.Ma.next(e),n=!0):this.Ba(e,this.onlineState)&&(this.La(e),n=!0),this.Oa=e,n}onError(e){this.Ma.error(e)}va(e){this.onlineState=e;let n=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,e)&&(this.La(this.Oa),n=!0),n}Ba(e,n){if(!e.fromCache||!this.ba())return!0;let r=n!=="Offline";return(!this.options.ka||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Na(e){if(e.docChanges.length>0)return!0;let n=this.Oa&&this.Oa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}La(e){e=Za.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.xa=!0,this.Ma.next(e)}ba(){return this.options.source!==fI.Cache}};var Up=class{constructor(e){this.key=e}},Bp=class{constructor(e){this.key=e}},hI=class{constructor(e,n){this.query=e,this.Ha=n,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=_e(),this.mutatedKeys=_e(),this.Xa=HM(e),this.eu=new Vp(this.Xa)}get tu(){return this.Ha}nu(e,n){let r=n?n.ru:new jp,i=n?n.eu:this.eu,o=n?n.mutatedKeys:this.mutatedKeys,s=i,a=!1,u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,l=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((f,p)=>{let g=i.get(f),y=rg(this.query,p)?p:null,D=!!g&&this.mutatedKeys.has(g.key),x=!!y&&(y.hasLocalMutations||this.mutatedKeys.has(y.key)&&y.hasCommittedMutations),R=!1;g&&y?g.data.isEqual(y.data)?D!==x&&(r.track({type:3,doc:y}),R=!0):this.iu(g,y)||(r.track({type:2,doc:y}),R=!0,(u&&this.Xa(y,u)>0||l&&this.Xa(y,l)<0)&&(a=!0)):!g&&y?(r.track({type:0,doc:y}),R=!0):g&&!y&&(r.track({type:1,doc:g}),R=!0,(u||l)&&(a=!0)),R&&(y?(s=s.add(y),o=x?o.add(f):o.delete(f)):(s=s.delete(f),o=o.delete(f)))}),this.query.limit!==null)for(;s.size>this.query.limit;){let f=this.query.limitType==="F"?s.last():s.first();s=s.delete(f.key),o=o.delete(f.key),r.track({type:1,doc:f})}return{eu:s,ru:r,Ds:a,mutatedKeys:o}}iu(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){let o=this.eu;this.eu=e.eu,this.mutatedKeys=e.mutatedKeys;let s=e.ru.pa();s.sort((f,p)=>(function(y,D){let x=R=>{switch(R){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Z(20277,{At:R})}};return x(y)-x(D)})(f.type,p.type)||this.Xa(f.doc,p.doc)),this.su(r),i=i!=null&&i;let a=n&&!i?this.ou():[],u=this.Za.size===0&&this.current&&!i?1:0,l=u!==this.Ya;return this.Ya=u,s.length!==0||l?{snapshot:new Za(this.query,e.eu,o,s,e.mutatedKeys,u===0,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),_u:a}:{_u:a}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({eu:this.eu,ru:new jp,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(e){return!this.Ha.has(e)&&!!this.eu.has(e)&&!this.eu.get(e).hasLocalMutations}su(e){e&&(e.addedDocuments.forEach(n=>this.Ha=this.Ha.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ha=this.Ha.delete(n)),this.current=e.current)}ou(){if(!this.current)return[];let e=this.Za;this.Za=_e(),this.eu.forEach(r=>{this.au(r.key)&&(this.Za=this.Za.add(r.key))});let n=[];return e.forEach(r=>{this.Za.has(r)||n.push(new Bp(r))}),this.Za.forEach(r=>{e.has(r)||n.push(new Up(r))}),n}uu(e){this.Ha=e.qs,this.Za=_e();let n=this.nu(e.documents);return this.applyChanges(n,!0)}cu(){return Za.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,this.Ya===0,this.hasCachedResults)}},QI="SyncEngine",pI=class{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}},gI=class{constructor(e){this.key=e,this.lu=!1}},mI=class{constructor(e,n,r,i,o,s){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.hu={},this.Pu=new _i(a=>$M(a),ng),this.Tu=new Map,this.Iu=new Set,this.du=new nt(Q.comparator),this.Eu=new Map,this.Au=new vl,this.Ru={},this.Vu=new Map,this.mu=yl.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return this.fu===!0}};function Z3(t,e,n=!0){return v(this,null,function*(){let r=IP(t),i,o=r.Pu.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.cu()):i=yield yP(r,e,n,!0),i})}function X3(t,e){return v(this,null,function*(){let n=IP(t);yield yP(n,e,!0,!1)})}function yP(t,e,n,r){return v(this,null,function*(){let i=yield F3(t.localStore,xr(e)),o=i.targetId,s=t.sharedClientState.addLocalQueryTarget(o,n),a;return r&&(a=yield eq(t,e,o,s==="current",i.resumeToken)),t.isPrimaryClient&&n&&dP(t.remoteStore,i),a})}function eq(t,e,n,r,i){return v(this,null,function*(){t.gu=(p,g,y)=>(function(x,R,O,H){return v(this,null,function*(){let Y=R.view.nu(O);Y.Ds&&(Y=yield WN(x.localStore,R.query,!1).then(({documents:b})=>R.view.nu(b,Y)));let re=H&&H.targetChanges.get(R.targetId),Ke=H&&H.targetMismatches.get(R.targetId)!=null,ge=R.view.applyChanges(Y,x.isPrimaryClient,re,Ke);return eM(x,R.targetId,ge._u),ge.snapshot})})(t,p,g,y);let o=yield WN(t.localStore,e,!0),s=new hI(e,o.qs),a=s.nu(o.documents),u=gl.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),l=s.applyChanges(a,t.isPrimaryClient,u);eM(t,n,l._u);let f=new pI(e,n,s);return t.Pu.set(e,f),t.Tu.has(n)?t.Tu.get(n).push(e):t.Tu.set(n,[e]),l.snapshot})}function tq(t,e,n){return v(this,null,function*(){let r=oe(t),i=r.Pu.get(e),o=r.Tu.get(i.targetId);if(o.length>1)return r.Tu.set(i.targetId,o.filter(s=>!ng(s,e))),void r.Pu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield Yw(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&BI(r.remoteStore,i.targetId),yI(r,i.targetId)}).catch(nc))):(yI(r,i.targetId),yield Yw(r.localStore,i.targetId,!0))})}function nq(t,e){return v(this,null,function*(){let n=oe(t),r=n.Pu.get(e),i=n.Tu.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),BI(n.remoteStore,r.targetId))})}function rq(t,e,n){return v(this,null,function*(){let r=lq(t);try{let i=yield(function(s,a){let u=oe(s),l=gt.now(),f=a.reduce((y,D)=>y.add(D.key),_e()),p,g;return u.persistence.runTransaction("Locally write mutations","readwrite",y=>{let D=Ei(),x=_e();return u.Os.getEntries(y,f).next(R=>{D=R,D.forEach((O,H)=>{H.isValidDocument()||(x=x.add(O))})}).next(()=>u.localDocuments.getOverlayedDocuments(y,D)).next(R=>{p=R;let O=[];for(let H of a){let Y=c3(H,p.get(H.key).overlayedDocument);Y!=null&&O.push(new Fr(H.key,Y,OM(Y.value.mapValue),gi.exists(!0)))}return u.mutationQueue.addMutationBatch(y,l,O,a)}).next(R=>{g=R;let O=R.applyToLocalDocumentSet(p,x);return u.documentOverlayCache.saveOverlays(y,R.batchId,O)})}).then(()=>({batchId:g.batchId,changes:zM(p)}))})(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),(function(s,a,u){let l=s.Ru[s.currentUser.toKey()];l||(l=new nt(he)),l=l.insert(a,u),s.Ru[s.currentUser.toKey()]=l})(r,i.batchId,n),yield Cl(r,i.changes),yield sg(r.remoteStore)}catch(i){let o=zI(i,"Failed to persist write");n.reject(o)}})}function vP(t,e){return v(this,null,function*(){let n=oe(t);try{let r=yield x3(n.localStore,e);e.targetChanges.forEach((i,o)=>{let s=n.Eu.get(o);s&&(Ne(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?s.lu=!0:i.modifiedDocuments.size>0?Ne(s.lu,14607):i.removedDocuments.size>0&&(Ne(s.lu,42227),s.lu=!1))}),yield Cl(n,r,e)}catch(r){yield nc(r)}})}function XN(t,e,n){let r=oe(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){let i=[];r.Pu.forEach((o,s)=>{let a=s.view.va(e);a.snapshot&&i.push(a.snapshot)}),(function(s,a){let u=oe(s);u.onlineState=a;let l=!1;u.queries.forEach((f,p)=>{for(let g of p.wa)g.va(a)&&(l=!0)}),l&&KI(u)})(r.eventManager,e),i.length&&r.hu.J_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function iq(t,e,n){return v(this,null,function*(){let r=oe(t);r.sharedClientState.updateQueryState(e,"rejected",n);let i=r.Eu.get(e),o=i&&i.key;if(o){let s=new nt(Q.comparator);s=s.insert(o,pr.newNoDocument(o,ae.min()));let a=_e().add(o),u=new Cp(ae.min(),new Map,new nt(he),s,a);yield vP(r,u),r.du=r.du.remove(o),r.Eu.delete(e),YI(r)}else yield Yw(r.localStore,e,!1).then(()=>yI(r,e,n)).catch(nc)})}function oq(t,e){return v(this,null,function*(){let n=oe(t),r=e.batch.batchId;try{let i=yield P3(n.localStore,e);EP(n,r,null),_P(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),yield Cl(n,i)}catch(i){yield nc(i)}})}function sq(t,e,n){return v(this,null,function*(){let r=oe(t);try{let i=yield(function(s,a){let u=oe(s);return u.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let f;return u.mutationQueue.lookupMutationBatch(l,a).next(p=>(Ne(p!==null,37113),f=p.keys(),u.mutationQueue.removeMutationBatch(l,p))).next(()=>u.mutationQueue.performConsistencyCheck(l)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(l,f,a)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,f)).next(()=>u.localDocuments.getDocuments(l,f))})})(r.localStore,e);EP(r,e,n),_P(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),yield Cl(r,i)}catch(i){yield nc(i)}})}function _P(t,e){(t.Vu.get(e)||[]).forEach(n=>{n.resolve()}),t.Vu.delete(e)}function EP(t,e,n){let r=oe(t),i=r.Ru[r.currentUser.toKey()];if(i){let o=i.get(e);o&&(n?o.reject(n):o.resolve(),i=i.remove(e)),r.Ru[r.currentUser.toKey()]=i}}function yI(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(let r of t.Tu.get(e))t.Pu.delete(r),n&&t.hu.pu(r,n);t.Tu.delete(e),t.isPrimaryClient&&t.Au.zr(e).forEach(r=>{t.Au.containsKey(r)||wP(t,r)})}function wP(t,e){t.Iu.delete(e.path.canonicalString());let n=t.du.get(e);n!==null&&(BI(t.remoteStore,n),t.du=t.du.remove(e),t.Eu.delete(n),YI(t))}function eM(t,e,n){for(let r of n)r instanceof Up?(t.Au.addReference(r.key,e),aq(t,r)):r instanceof Bp?(z(QI,"Document no longer in limbo: "+r.key),t.Au.removeReference(r.key,e),t.Au.containsKey(r.key)||wP(t,r.key)):Z(19791,{yu:r})}function aq(t,e){let n=e.key,r=n.path.canonicalString();t.du.get(n)||t.Iu.has(r)||(z(QI,"New document in limbo: "+n),t.Iu.add(r),YI(t))}function YI(t){for(;t.Iu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){let e=t.Iu.values().next().value;t.Iu.delete(e);let n=new Q(We.fromString(e)),r=t.mu.next();t.Eu.set(r,new gI(n)),t.du=t.du.insert(n,r),dP(t.remoteStore,new ml(xr(tg(n.path)),r,"TargetPurposeLimboResolution",NI.ue))}}function Cl(t,e,n){return v(this,null,function*(){let r=oe(t),i=[],o=[],s=[];r.Pu.isEmpty()||(r.Pu.forEach((a,u)=>{s.push(r.gu(u,e,n).then(l=>{var f;if((l||n)&&r.isPrimaryClient){let p=l?!l.fromCache:(f=n?.targetChanges.get(u.targetId))===null||f===void 0?void 0:f.current;r.sharedClientState.updateQueryState(u.targetId,p?"current":"not-current")}if(l){i.push(l);let p=Gw.Es(u.targetId,l);o.push(p)}}))}),yield Promise.all(s),r.hu.J_(i),yield(function(u,l){return v(this,null,function*(){let f=oe(u);try{yield f.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>V.forEach(l,g=>V.forEach(g.Is,y=>f.persistence.referenceDelegate.addReference(p,g.targetId,y)).next(()=>V.forEach(g.ds,y=>f.persistence.referenceDelegate.removeReference(p,g.targetId,y)))))}catch(p){if(!rc(p))throw p;z(UI,"Failed to update sequence numbers: "+p)}for(let p of l){let g=p.targetId;if(!p.fromCache){let y=f.Fs.get(g),D=y.snapshotVersion,x=y.withLastLimboFreeSnapshotVersion(D);f.Fs=f.Fs.insert(g,x)}}})})(r.localStore,o))})}function cq(t,e){return v(this,null,function*(){let n=oe(t);if(!n.currentUser.isEqual(e)){z(QI,"User change. New user:",e.toKey());let r=yield uP(n.localStore,e);n.currentUser=e,(function(o,s){o.Vu.forEach(a=>{a.forEach(u=>{u.reject(new $(k.CANCELLED,s))})}),o.Vu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Cl(n,r.Bs)}})}function uq(t,e){let n=oe(t),r=n.Eu.get(e);if(r&&r.lu)return _e().add(r.key);{let i=_e(),o=n.Tu.get(e);if(!o)return i;for(let s of o){let a=n.Pu.get(s);i=i.unionWith(a.view.tu)}return i}}function IP(t){let e=oe(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=vP.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=uq.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=iq.bind(null,e),e.hu.J_=Y3.bind(null,e.eventManager),e.hu.pu=J3.bind(null,e.eventManager),e}function lq(t){let e=oe(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=oq.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=sq.bind(null,e),e}var bP=(()=>{class t{constructor(){this.kind="memory",this.synchronizeTabs=!1}initialize(n){return v(this,null,function*(){this.serializer=ig(n.databaseInfo.databaseId),this.sharedClientState=this.bu(n),this.persistence=this.Du(n),yield this.persistence.start(),this.localStore=this.vu(n),this.gcScheduler=this.Cu(n,this.localStore),this.indexBackfillerScheduler=this.Fu(n,this.localStore)})}Cu(n,r){return null}Fu(n,r){return null}vu(n){return M3(this.persistence,new Kw,n.initialUser,this.serializer)}Du(n){return new Mp(zw.Vi,this.serializer)}bu(n){return new Jw}terminate(){return v(this,null,function*(){var n,r;(n=this.gcScheduler)===null||n===void 0||n.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}}return t.provider={build:()=>new t},t})(),vI=class extends bP{constructor(e){super(),this.cacheSizeBytes=e}Cu(e,n){Ne(this.persistence.referenceDelegate instanceof Pp,46915);let r=this.persistence.referenceDelegate.garbageCollector;return new Pw(r,e.asyncQueue,n)}Du(e){let n=this.cacheSizeBytes!==void 0?$n.withCacheSize(this.cacheSizeBytes):$n.DEFAULT;return new Mp(r=>Pp.Vi(r,n),this.serializer)}};var dq=(()=>{class t{initialize(n,r){return v(this,null,function*(){this.localStore||(this.localStore=n.localStore,this.sharedClientState=n.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!n.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>XN(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=cq.bind(null,this.syncEngine),yield Q3(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(n){return(function(){return new dI})()}createDatastore(n){let r=ig(n.databaseInfo.databaseId),i=(function(s){return new nI(s)})(n.databaseInfo);return(function(s,a,u,l){return new sI(s,a,u,l)})(n.authCredentials,n.appCheckCredentials,i,r)}createRemoteStore(n){return(function(i,o,s,a,u){return new cI(i,o,s,a,u)})(this.localStore,this.datastore,n.asyncQueue,r=>XN(this.syncEngine,r,0),(function(){return kp.C()?new kp:new Zw})())}createSyncEngine(n,r){return(function(o,s,a,u,l,f,p){let g=new mI(o,s,a,u,l,f);return p&&(g.fu=!0),g})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,n.initialUser,n.maxConcurrentLimboResolutions,r)}terminate(){return v(this,null,function*(){var n,r;yield(function(o){return v(this,null,function*(){let s=oe(o);z(Ss,"RemoteStore shutting down."),s.Ia.add(5),yield Tl(s),s.Ea.shutdown(),s.Aa.set("Unknown")})})(this.remoteStore),(n=this.datastore)===null||n===void 0||n.terminate(),(r=this.eventManager)===null||r===void 0||r.terminate()})}}return t.provider={build:()=>new t},t})();var El=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.xu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.xu(this.observer.error,e):mi("Uncaught Error in snapshot listener:",e.toString()))}Ou(){this.muted=!0}xu(e,n){setTimeout(()=>{this.muted||e(n)},0)}};var lo="FirestoreClient",_I=class{constructor(e,n,r,i,o){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=Dt.UNAUTHENTICATED,this.clientId=ll.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,s=>v(this,null,function*(){z(lo,"Received user=",s.uid),yield this.authCredentialListener(s),this.user=s})),this.appCheckCredentials.start(r,s=>(z(lo,"Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new hr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>v(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){let r=zI(n,"Failed to shutdown persistence");e.reject(r)}})),e.promise}};function qE(t,e){return v(this,null,function*(){t.asyncQueue.verifyOperationInProgress(),z(lo,"Initializing OfflineComponentProvider");let n=t.configuration;yield e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(i=>v(null,null,function*(){r.isEqual(i)||(yield uP(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener(()=>{oo("Terminating Firestore due to IndexedDb database deletion"),t.terminate().then(()=>{z("Terminating Firestore due to IndexedDb database deletion completed successfully")}).catch(i=>{oo("Terminating Firestore due to IndexedDb database deletion failed",i)})}),t._offlineComponents=e})}function tM(t,e){return v(this,null,function*(){t.asyncQueue.verifyOperationInProgress();let n=yield fq(t);z(lo,"Initializing OnlineComponentProvider"),yield e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>YN(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>YN(e.remoteStore,i)),t._onlineComponents=e})}function fq(t){return v(this,null,function*(){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){z(lo,"Using user provided OfflineComponentProvider");try{yield qE(t,t._uninitializedComponentsProvider._offline)}catch(e){let n=e;if(!(function(i){return i.name==="FirebaseError"?i.code===k.FAILED_PRECONDITION||i.code===k.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11})(n))throw n;oo("Error using user provided cache. Falling back to memory cache: "+n),yield qE(t,new bP)}}else z(lo,"Using default OfflineComponentProvider"),yield qE(t,new vI(void 0));return t._offlineComponents})}function TP(t){return v(this,null,function*(){return t._onlineComponents||(t._uninitializedComponentsProvider?(z(lo,"Using user provided OnlineComponentProvider"),yield tM(t,t._uninitializedComponentsProvider._online)):(z(lo,"Using default OnlineComponentProvider"),yield tM(t,new dq))),t._onlineComponents})}function hq(t){return TP(t).then(e=>e.syncEngine)}function $p(t){return v(this,null,function*(){let e=yield TP(t),n=e.eventManager;return n.onListen=Z3.bind(null,e.syncEngine),n.onUnlisten=tq.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=X3.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=nq.bind(null,e.syncEngine),n})}function pq(t,e,n={}){let r=new hr;return t.asyncQueue.enqueueAndForget(()=>v(null,null,function*(){return(function(o,s,a,u,l){let f=new El({next:g=>{f.Ou(),s.enqueueAndForget(()=>WI(o,p));let y=g.docs.has(a);!y&&g.fromCache?l.reject(new $(k.UNAVAILABLE,"Failed to get document because the client is offline.")):y&&g.fromCache&&u&&u.source==="server"?l.reject(new $(k.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):l.resolve(g)},error:g=>l.reject(g)}),p=new _l(tg(a.path),f,{includeMetadataChanges:!0,ka:!0});return GI(o,p)})(yield $p(t),t.asyncQueue,e,n,r)})),r.promise}function gq(t,e,n={}){let r=new hr;return t.asyncQueue.enqueueAndForget(()=>v(null,null,function*(){return(function(o,s,a,u,l){let f=new El({next:g=>{f.Ou(),s.enqueueAndForget(()=>WI(o,p)),g.fromCache&&u.source==="server"?l.reject(new $(k.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):l.resolve(g)},error:g=>l.reject(g)}),p=new _l(a,f,{includeMetadataChanges:!0,ka:!0});return GI(o,p)})(yield $p(t),t.asyncQueue,e,n,r)})),r.promise}function CP(t){let e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}var nM=new Map;var DP="firestore.googleapis.com",rM=!0,Hp=class{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new $(k.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=DP,this.ssl=rM}else this.host=e.host,this.ssl=(n=e.ssl)!==null&&n!==void 0?n:rM;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=cP;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<A3)throw new $(k.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}D4("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=CP((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),(function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new $(k.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new $(k.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new $(k.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,i){return r.timeoutSeconds===i.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},Xa=class{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Hp({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new $(k.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new $(k.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Hp(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new zE;switch(r.type){case"firstParty":return new QE(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new $(k.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}_restart(){return v(this,null,function*(){this._terminateTask==="notTerminated"?yield this._terminate():this._terminateTask="notTerminated"})}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){let r=nM.get(n);r&&(z("ComponentProvider","Removing Datastore"),nM.delete(n),r.terminate())})(this),Promise.resolve()}};function SP(t,e,n,r={}){var i;t=Sn(t,Xa);let o=as(e),s=t._getSettings(),a=Object.assign(Object.assign({},s),{emulatorOptions:t._getEmulatorOptions()}),u=`${e}:${n}`;o&&(Y_(`https://${u}`),J_("Firestore",!0)),s.host!==DP&&s.host!==u&&oo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");let l=Object.assign(Object.assign({},s),{host:u,ssl:o,emulatorOptions:r});if(!Yi(l,a)&&(t._setSettings(l),r.mockUserToken)){let f,p;if(typeof r.mockUserToken=="string")f=r.mockUserToken,p=Dt.MOCK_USER;else{f=gR(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);let g=r.mockUserToken.sub||r.mockUserToken.user_id;if(!g)throw new $(k.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");p=new Dt(g)}t._authCredentials=new GE(new gp(f,p))}}var fo=class t{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new t(this.firestore,e,this._query)}},_t=class t{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new to(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new t(this.firestore,e,this._key)}toJSON(){return{type:t._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(bl(n,t._jsonSchema))return new t(e,r||null,new Q(We.fromString(n.referencePath)))}};_t._jsonSchemaVersion="firestore/documentReference/1.0",_t._jsonSchema={type:pt("string",_t._jsonSchemaVersion),referencePath:pt("string")};var to=class t extends fo{constructor(e,n,r){super(e,n,tg(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new _t(this.firestore,null,new Q(e))}withConverter(e){return new t(this.firestore,e,this._path)}};function AP(t,e,...n){if(t=ot(t),dM("collection","path",e),t instanceof Xa){let r=We.fromString(e,...n);return wN(r),new to(t,null,r)}{if(!(t instanceof _t||t instanceof to))throw new $(k.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=t._path.child(We.fromString(e,...n));return wN(r),new to(t.firestore,null,r)}}function JI(t,e,...n){if(t=ot(t),arguments.length===1&&(e=ll.newId()),dM("doc","path",e),t instanceof Xa){let r=We.fromString(e,...n);return EN(r),new _t(t,null,new Q(r))}{if(!(t instanceof _t||t instanceof to))throw new $(k.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=t._path.child(We.fromString(e,...n));return EN(r),new _t(t.firestore,t instanceof to?t.converter:null,new Q(r))}}var iM="AsyncQueue",qp=class{constructor(e=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new Op(this,"async_queue_retry"),this.oc=()=>{let r=HE();r&&z(iM,"Visibility state changed to "+r.visibilityState),this.F_.y_()},this._c=e;let n=HE();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ac(),this.uc(e)}enterRestrictedMode(e){if(!this.Xu){this.Xu=!0,this.rc=e||!1;let n=HE();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.oc)}}enqueue(e){if(this.ac(),this.Xu)return new Promise(()=>{});let n=new hr;return this.uc(()=>this.Xu&&this.rc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Zu.push(e),this.cc()))}cc(){return v(this,null,function*(){if(this.Zu.length!==0){try{yield this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(e){if(!rc(e))throw e;z(iM,"Operation failed with retryable error: "+e)}this.Zu.length>0&&this.F_.g_(()=>this.cc())}})}uc(e){let n=this._c.then(()=>(this.nc=!0,e().catch(r=>{throw this.tc=r,this.nc=!1,mi("INTERNAL UNHANDLED ERROR: ",oM(r)),r}).then(r=>(this.nc=!1,r))));return this._c=n,n}enqueueAfterDelay(e,n,r){this.ac(),this.sc.indexOf(e)>-1&&(n=0);let i=uI.createAndSchedule(this,e,n,r,o=>this.lc(o));return this.ec.push(i),i}ac(){this.tc&&Z(47125,{hc:oM(this.tc)})}verifyOperationInProgress(){}Pc(){return v(this,null,function*(){let e;do e=this._c,yield e;while(e!==this._c)})}Tc(e){for(let n of this.ec)if(n.timerId===e)return!0;return!1}Ic(e){return this.Pc().then(()=>{this.ec.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(let n of this.ec)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Pc()})}dc(e){this.sc.push(e)}lc(e){let n=this.ec.indexOf(e);this.ec.splice(n,1)}};function oM(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}function sM(t){return(function(n,r){if(typeof n!="object"||n===null)return!1;let i=n;for(let o of r)if(o in i&&typeof i[o]=="function")return!0;return!1})(t,["next","error","complete"])}var Lr=class extends Xa{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new qp,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return v(this,null,function*(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new qp(e),this._firestoreClient=void 0,yield e}})}};function RP(t,e){let n=typeof t=="object"?t:ui(),r=typeof t=="string"?t:e||Ep,i=ai(n,"firestore").getImmediate({identifier:r});if(!i._initialized){let o=hR("firestore");o&&SP(i,...o)}return i}function ag(t){if(t._terminated)throw new $(k.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||mq(t),t._firestoreClient}function mq(t){var e,n,r;let i=t._freezeSettings(),o=(function(a,u,l,f){return new ew(a,u,l,f.host,f.ssl,f.experimentalForceLongPolling,f.experimentalAutoDetectLongPolling,CP(f.experimentalLongPollingOptions),f.useFetchStreams,f.isUsingEmulator)})(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._componentsProvider||!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),t._firestoreClient=new _I(t._authCredentials,t._appCheckCredentials,t._queue,o,t._componentsProvider&&(function(a){let u=a?._online.build();return{_offline:a?._offline.build(u),_online:u}})(t._componentsProvider))}var no=class t{constructor(e){this._byteString=e}static fromBase64String(e){try{return new t(Gt.fromBase64String(e))}catch(n){throw new $(k.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new t(Gt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:t._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(bl(e,t._jsonSchema))return t.fromBase64String(e.bytes)}};no._jsonSchemaVersion="firestore/bytes/1.0",no._jsonSchema={type:pt("string",no._jsonSchemaVersion),bytes:pt("string")};var ec=class{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new $(k.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Dn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var As=class{constructor(e){this._methodName=e}};var ro=class t{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new $(k.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new $(k.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return he(this._lat,e._lat)||he(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:t._jsonSchemaVersion}}static fromJSON(e){if(bl(e,t._jsonSchema))return new t(e.latitude,e.longitude)}};ro._jsonSchemaVersion="firestore/geoPoint/1.0",ro._jsonSchema={type:pt("string",ro._jsonSchemaVersion),latitude:pt("number"),longitude:pt("number")};var io=class t{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return(function(r,i){if(r.length!==i.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0})(this._values,e._values)}toJSON(){return{type:t._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(bl(e,t._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new t(e.vectorValues);throw new $(k.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}};io._jsonSchemaVersion="firestore/vectorValue/1.0",io._jsonSchema={type:pt("string",io._jsonSchemaVersion),vectorValues:pt("object")};var yq=/^__.*__$/,EI=class{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Fr(e,this.data,this.fieldMask,n,this.fieldTransforms):new Ds(e,this.data,n,this.fieldTransforms)}},zp=class{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Fr(e,this.data,this.fieldMask,n,this.fieldTransforms)}};function NP(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Z(40011,{Ec:t})}}var Gp=class t{constructor(e,n,r,i,o,s){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,o===void 0&&this.Ac(),this.fieldTransforms=o||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(e){return new t(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(e){var n;let r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Rc({path:r,mc:!1});return i.fc(e),i}gc(e){var n;let r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Rc({path:r,mc:!1});return i.Ac(),i}yc(e){return this.Rc({path:void 0,mc:!0})}wc(e){return Kp(e,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Ac(){if(this.path)for(let e=0;e<this.path.length;e++)this.fc(this.path.get(e))}fc(e){if(e.length===0)throw this.wc("Document fields must not be empty");if(NP(this.Ec)&&yq.test(e))throw this.wc('Document fields cannot begin and end with "__"')}},wI=class{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||ig(e)}Dc(e,n,r,i=!1){return new Gp({Ec:e,methodName:n,bc:r,path:Dn.emptyPath(),mc:!1,Sc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function cg(t){let e=t._freezeSettings(),n=ig(t._databaseId);return new wI(t._databaseId,!!e.ignoreUndefinedProperties,n)}function MP(t,e,n,r,i,o={}){let s=t.Dc(o.merge||o.mergeFields?2:0,e,n,i);ZI("Data must be an object, but it was:",s,r);let a=PP(r,s),u,l;if(o.merge)u=new Hn(s.fieldMask),l=s.fieldTransforms;else if(o.mergeFields){let f=[];for(let p of o.mergeFields){let g=TI(e,p,n);if(!s.contains(g))throw new $(k.INVALID_ARGUMENT,`Field '${g}' is specified in your field mask but missing from your input data.`);kP(f,g)||f.push(g)}u=new Hn(f),l=s.fieldTransforms.filter(p=>u.covers(p.field))}else u=null,l=s.fieldTransforms;return new EI(new Cn(a),u,l)}var Wp=class t extends As{_toFieldTransform(e){if(e.Ec!==2)throw e.Ec===1?e.wc(`${this._methodName}() can only appear at the top level of your update data`):e.wc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof t}};function vq(t,e,n){return new Gp({Ec:3,bc:e.settings.bc,methodName:t._methodName,mc:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}var II=class t extends As{_toFieldTransform(e){return new bp(e.path,new Ts)}isEqual(e){return e instanceof t}},bI=class t extends As{constructor(e,n){super(e),this.vc=n}_toFieldTransform(e){let n=vq(this,e,!0),r=this.vc.map(o=>oc(o,n)),i=new co(r);return new bp(e.path,i)}isEqual(e){return e instanceof t&&Yi(this.vc,e.vc)}};function _q(t,e,n,r){let i=t.Dc(1,e,n);ZI("Data must be an object, but it was:",i,r);let o=[],s=Cn.empty();ho(r,(u,l)=>{let f=XI(e,u,n);l=ot(l);let p=i.gc(f);if(l instanceof Wp)o.push(f);else{let g=oc(l,p);g!=null&&(o.push(f),s.set(f,g))}});let a=new Hn(o);return new zp(s,a,i.fieldTransforms)}function Eq(t,e,n,r,i,o){let s=t.Dc(1,e,n),a=[TI(e,r,n)],u=[i];if(o.length%2!=0)throw new $(k.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let g=0;g<o.length;g+=2)a.push(TI(e,o[g])),u.push(o[g+1]);let l=[],f=Cn.empty();for(let g=a.length-1;g>=0;--g)if(!kP(l,a[g])){let y=a[g],D=u[g];D=ot(D);let x=s.gc(y);if(D instanceof Wp)l.push(y);else{let R=oc(D,x);R!=null&&(l.push(y),f.set(y,R))}}let p=new Hn(l);return new zp(f,p,s.fieldTransforms)}function wq(t,e,n,r=!1){return oc(n,t.Dc(r?4:3,e))}function oc(t,e){if(xP(t=ot(t)))return ZI("Unsupported field value:",e,t),PP(t,e);if(t instanceof As)return(function(r,i){if(!NP(i.Ec))throw i.wc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.wc(`${r._methodName}() is not currently supported inside arrays`);let o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)})(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.mc&&e.Ec!==4)throw e.wc("Nested arrays are not supported");return(function(r,i){let o=[],s=0;for(let a of r){let u=oc(a,i.yc(s));u==null&&(u={nullValue:"NULL_VALUE"}),o.push(u),s++}return{arrayValue:{values:o}}})(t,e)}return(function(r,i){if((r=ot(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return r3(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let o=gt.fromDate(r);return{timestampValue:Rp(i.serializer,o)}}if(r instanceof gt){let o=new gt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Rp(i.serializer,o)}}if(r instanceof ro)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof no)return{bytesValue:tP(i.serializer,r._byteString)};if(r instanceof _t){let o=i.databaseId,s=r.firestore._databaseId;if(!s.isEqual(o))throw i.wc(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:jI(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof io)return(function(s,a){return{mapValue:{fields:{[xI]:{stringValue:kI},[za]:{arrayValue:{values:s.toArray().map(l=>{if(typeof l!="number")throw a.wc("VectorValues must only contain numeric values.");return VI(a.serializer,l)})}}}}}})(r,i);throw i.wc(`Unsupported field value: ${Zp(r)}`)})(t,e)}function PP(t,e){let n={};return SM(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ho(t,(r,i)=>{let o=oc(i,e.Vc(r));o!=null&&(n[r]=o)}),{mapValue:{fields:n}}}function xP(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof gt||t instanceof ro||t instanceof no||t instanceof _t||t instanceof As||t instanceof io)}function ZI(t,e,n){if(!xP(n)||!fM(n)){let r=Zp(n);throw r==="an object"?e.wc(t+" a custom object"):e.wc(t+" "+r)}}function TI(t,e,n){if((e=ot(e))instanceof ec)return e._internalPath;if(typeof e=="string")return XI(t,e);throw Kp("Field path arguments must be of type string or ",t,!1,void 0,n)}var Iq=new RegExp("[~\\*/\\[\\]]");function XI(t,e,n){if(e.search(Iq)>=0)throw Kp(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new ec(...e.split("."))._internalPath}catch{throw Kp(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Kp(t,e,n,r,i){let o=r&&!r.isEmpty(),s=i!==void 0,a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let u="";return(o||s)&&(u+=" (found",o&&(u+=` in field ${r}`),s&&(u+=` in document ${i}`),u+=")"),new $(k.INVALID_ARGUMENT,a+t+u)}function kP(t,e){return t.some(n=>n.isEqual(e))}var Qp=class{constructor(e,n,r,i,o){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new _t(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new CI(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let n=this._document.data.field(ug("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}},CI=class extends Qp{data(){return super.data()}};function ug(t,e){return typeof e=="string"?XI(t,e):e instanceof ec?e._internalPath:e._delegate._internalPath}function OP(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new $(k.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var wl=class{},Yp=class extends wl{};function FP(t,e,...n){let r=[];e instanceof wl&&r.push(e),r=r.concat(n),(function(o){let s=o.filter(u=>u instanceof DI).length,a=o.filter(u=>u instanceof Jp).length;if(s>1||s>0&&a>0)throw new $(k.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(let i of r)t=i._apply(t);return t}var Jp=class t extends Yp{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new t(e,n,r)}_apply(e){let n=this._parse(e);return jP(e._query,n),new fo(e.firestore,e.converter,hw(e._query,n))}_parse(e){let n=cg(e.firestore);return(function(o,s,a,u,l,f,p){let g;if(l.isKeyField()){if(f==="array-contains"||f==="array-contains-any")throw new $(k.INVALID_ARGUMENT,`Invalid Query. You can't perform '${f}' queries on documentId().`);if(f==="in"||f==="not-in"){cM(p,f);let D=[];for(let x of p)D.push(aM(u,o,x));g={arrayValue:{values:D}}}else g=aM(u,o,p)}else f!=="in"&&f!=="not-in"&&f!=="array-contains-any"||cM(p,f),g=wq(a,s,p,f==="in"||f==="not-in");return ht.create(l,f,g)})(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}};function LP(t,e,n){let r=e,i=ug("where",t);return Jp._create(i,r,n)}var DI=class t extends wl{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new t(e,n)}_parse(e){let n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:gr.create(n,this._getOperator())}_apply(e){let n=this._parse(e);return n.getFilters().length===0?e:((function(i,o){let s=i,a=o.getFlattenedFilters();for(let u of a)jP(s,u),s=hw(s,u)})(e._query,n),new fo(e.firestore,e.converter,hw(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};var SI=class t extends Yp{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new t(e,n)}_apply(e){let n=(function(i,o,s){if(i.startAt!==null)throw new $(k.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new $(k.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new bs(o,s)})(e._query,this._field,this._direction);return new fo(e.firestore,e.converter,(function(i,o){let s=i.explicitOrderBy.concat([o]);return new ao(i.path,i.collectionGroup,s,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)})(e._query,n))}};function VP(t,e="asc"){let n=e,r=ug("orderBy",t);return SI._create(r,n)}function aM(t,e,n){if(typeof(n=ot(n))=="string"){if(n==="")throw new $(k.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!BM(e)&&n.indexOf("/")!==-1)throw new $(k.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);let r=e.path.child(We.fromString(n));if(!Q.isDocumentKey(r))throw new $(k.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return AN(t,new Q(r))}if(n instanceof _t)return AN(t,n._key);throw new $(k.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Zp(n)}.`)}function cM(t,e){if(!Array.isArray(t)||t.length===0)throw new $(k.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function jP(t,e){let n=(function(i,o){for(let s of i)for(let a of s.getFlattenedFilters())if(o.indexOf(a.op)>=0)return a.op;return null})(t.filters,(function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(n!==null)throw n===e.op?new $(k.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new $(k.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}var AI=class{convertValue(e,n="none"){switch(so(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ge(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(vi(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Z(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){let r={};return ho(e,(i,o)=>{r[i]=this.convertValue(o,n)}),r}convertVectorValue(e){var n,r,i;let o=(i=(r=(n=e.fields)===null||n===void 0?void 0:n[za].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(s=>Ge(s.doubleValue));return new io(o)}convertGeoPoint(e){return new ro(Ge(e.latitude),Ge(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":let r=eg(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(hl(e));default:return null}}convertTimestamp(e){let n=yi(e);return new gt(n.seconds,n.nanos)}convertDocumentKey(e,n){let r=We.fromString(e);Ne(aP(r),9688,{name:e});let i=new wp(r.get(1),r.get(3)),o=new Q(r.popFirst(5));return i.isEqual(n)||mi(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),o}};function UP(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}var vs=class{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},_s=class t extends Qp{constructor(e,n,r,i,o,s){super(e,n,r,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let n=new Ha(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){let r=this._document.data.field(ug("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new $(k.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e=this._document,n={};return n.type=t._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}};_s._jsonSchemaVersion="firestore/documentSnapshot/1.0",_s._jsonSchema={type:pt("string",_s._jsonSchemaVersion),bundleSource:pt("string","DocumentSnapshot"),bundleName:pt("string"),bundle:pt("string")};var Ha=class extends _s{data(e={}){return super.data(e)}},Es=class t{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new vs(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Ha(this._firestore,this._userDataWriter,r.key,r,new vs(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new $(k.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(i,o){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(a=>{let u=new Ha(i._firestore,i._userDataWriter,a.doc.key,a.doc,new vs(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:u,oldIndex:-1,newIndex:s++}})}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>o||a.type!==3).map(a=>{let u=new Ha(i._firestore,i._userDataWriter,a.doc.key,a.doc,new vs(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),l=-1,f=-1;return a.type!==0&&(l=s.indexOf(a.doc.key),s=s.delete(a.doc.key)),a.type!==1&&(s=s.add(a.doc),f=s.indexOf(a.doc.key)),{type:bq(a.type),doc:u,oldIndex:l,newIndex:f}})}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new $(k.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e={};e.type=t._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=ll.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;let n=[],r=[],i=[];return this.docs.forEach(o=>{o._document!==null&&(n.push(o._document),r.push(this._userDataWriter.convertObjectMap(o._document.data.value.mapValue.fields,"previous")),i.push(o.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}};function bq(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Z(61501,{type:t})}}function BP(t){t=Sn(t,_t);let e=Sn(t.firestore,Lr);return pq(ag(e),t._key).then(n=>WP(e,t,n))}Es._jsonSchemaVersion="firestore/querySnapshot/1.0",Es._jsonSchema={type:pt("string",Es._jsonSchemaVersion),bundleSource:pt("string","QuerySnapshot"),bundleName:pt("string"),bundle:pt("string")};var Il=class extends AI{constructor(e){super(),this.firestore=e}convertBytes(e){return new no(e)}convertReference(e){let n=this.convertDocumentKey(e,this.firestore._databaseId);return new _t(this.firestore,null,n)}};function $P(t){t=Sn(t,fo);let e=Sn(t.firestore,Lr),n=ag(e),r=new Il(e);return OP(t._query),gq(n,t._query).then(i=>new Es(e,r,t,i))}function HP(t,e,n){t=Sn(t,_t);let r=Sn(t.firestore,Lr),i=UP(t.converter,e,n);return eb(r,[MP(cg(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,gi.none())])}function qP(t,e,n,...r){t=Sn(t,_t);let i=Sn(t.firestore,Lr),o=cg(i),s;return s=typeof(e=ot(e))=="string"||e instanceof ec?Eq(o,"updateDoc",t._key,e,n,r):_q(o,"updateDoc",t._key,e),eb(i,[s.toMutation(t._key,gi.exists(!0))])}function zP(t,e){let n=Sn(t.firestore,Lr),r=JI(t),i=UP(t.converter,e);return eb(n,[MP(cg(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,gi.exists(!1))]).then(()=>r)}function GP(t,...e){var n,r,i;t=ot(t);let o={includeMetadataChanges:!1,source:"default"},s=0;typeof e[s]!="object"||sM(e[s])||(o=e[s++]);let a={includeMetadataChanges:o.includeMetadataChanges,source:o.source};if(sM(e[s])){let p=e[s];e[s]=(n=p.next)===null||n===void 0?void 0:n.bind(p),e[s+1]=(r=p.error)===null||r===void 0?void 0:r.bind(p),e[s+2]=(i=p.complete)===null||i===void 0?void 0:i.bind(p)}let u,l,f;if(t instanceof _t)l=Sn(t.firestore,Lr),f=tg(t._key.path),u={next:p=>{e[s]&&e[s](WP(l,t,p))},error:e[s+1],complete:e[s+2]};else{let p=Sn(t,fo);l=Sn(p.firestore,Lr),f=p._query;let g=new Il(l);u={next:y=>{e[s]&&e[s](new Es(l,g,p,y))},error:e[s+1],complete:e[s+2]},OP(t._query)}return(function(g,y,D,x){let R=new El(x),O=new _l(y,R,D);return g.asyncQueue.enqueueAndForget(()=>v(null,null,function*(){return GI(yield $p(g),O)})),()=>{R.Ou(),g.asyncQueue.enqueueAndForget(()=>v(null,null,function*(){return WI(yield $p(g),O)}))}})(ag(l),f,a,u)}function eb(t,e){return(function(r,i){let o=new hr;return r.asyncQueue.enqueueAndForget(()=>v(null,null,function*(){return rq(yield hq(r),i,o)})),o.promise})(ag(t),e)}function WP(t,e,n){let r=n.docs.get(e._key),i=new Il(t);return new _s(t,i,e._key,r,new vs(n.hasPendingWrites,n.fromCache),e.converter)}function po(){return new II("serverTimestamp")}function KP(...t){return new bI("arrayUnion",t)}(function(e,n=!0){(function(i){tc=i})(xa),xt(new st("firestore",(r,{instanceIdentifier:i,options:o})=>{let s=r.getProvider("app").getImmediate(),a=new Lr(new WE(r.getProvider("auth-internal")),new YE(s,r.getProvider("app-check-internal")),(function(l,f){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new $(k.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new wp(l.options.projectId,f)})(s,i),s);return o=Object.assign({useFetchStreams:n},o),a._setSettings(o),a},"PUBLIC").setMultipleInstances(!0)),ke(mN,yN,e),ke(mN,yN,"esm2017")})();var He=class{constructor(e){return e}},QP="firestore",tb=class{constructor(){return Zi(QP)}};var nb=new q("angularfire2.firestore-instances");function Tq(t,e){let n=Oa(QP,t,e);return n&&new He(n)}function Cq(t){return(e,n)=>{let r=e.runOutsideAngular(()=>t(n));return new He(r)}}var Dq={provide:tb,deps:[[new Ln,nb]]},Sq={provide:He,useFactory:Tq,deps:[[new Ln,nb],fi]};function YP(t,...e){return ke("angularfire",li.full,"fst"),Mn([Sq,Dq,{provide:nb,useFactory:Cq(t),multi:!0,deps:[Re,Ae,di,fs,[new Ln,sp],[new Ln,Kh],...e]}])}var sc=vt(zP,!0,2);var qe=vt(AP,!0,2);var kt=vt(JI,!0,2);var qn=vt(BP,!0);var Qe=vt($P,!0);var JP=vt(RP,!0);var lg=vt(GP,!0);var dg=vt(VP,!0,2),Et=vt(FP,!0,2);var hn=vt(HP,!0,2);var ac=vt(qP,!0,2);var pn=vt(LP,!0,2);var ex="@firebase/installations",sb="0.6.18";var tx=1e4,nx=`w:${sb}`,rx="FIS_v2",Rq="https://firebaseinstallations.googleapis.com/v1",Nq=3600*1e3,Mq="installations",Pq="Installations";var xq={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},Ms=new tn(Mq,Pq,xq);function ix(t){return t instanceof fn&&t.code.includes("request-failed")}function ox({projectId:t}){return`${Rq}/projects/${t}/installations`}function sx(t){return{token:t.token,requestStatus:2,expiresIn:Oq(t.expiresIn),creationTime:Date.now()}}function ax(t,e){return v(this,null,function*(){let r=(yield e.json()).error;return Ms.create("request-failed",{requestName:t,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})})}function cx({apiKey:t}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function kq(t,{refreshToken:e}){let n=cx(t);return n.append("Authorization",Fq(e)),n}function ux(t){return v(this,null,function*(){let e=yield t();return e.status>=500&&e.status<600?t():e})}function Oq(t){return Number(t.replace("s","000"))}function Fq(t){return`${rx} ${t}`}function Lq(r,i){return v(this,arguments,function*({appConfig:t,heartbeatServiceProvider:e},{fid:n}){let o=ox(t),s=cx(t),a=e.getImmediate({optional:!0});if(a){let p=yield a.getHeartbeatsHeader();p&&s.append("x-firebase-client",p)}let u={fid:n,authVersion:rx,appId:t.appId,sdkVersion:nx},l={method:"POST",headers:s,body:JSON.stringify(u)},f=yield ux(()=>fetch(o,l));if(f.ok){let p=yield f.json();return{fid:p.fid||n,registrationStatus:2,refreshToken:p.refreshToken,authToken:sx(p.authToken)}}else throw yield ax("Create Installation",f)})}function lx(t){return new Promise(e=>{setTimeout(e,t)})}function Vq(t){return btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_")}var jq=/^[cdef][\w-]{21}$/,ob="";function Uq(){try{let t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;let n=Bq(t);return jq.test(n)?n:ob}catch{return ob}}function Bq(t){return Vq(t).substr(0,22)}function hg(t){return`${t.appName}!${t.appId}`}var dx=new Map;function fx(t,e){let n=hg(t);hx(n,e),$q(n,e)}function hx(t,e){let n=dx.get(t);if(n)for(let r of n)r(e)}function $q(t,e){let n=Hq();n&&n.postMessage({key:t,fid:e}),qq()}var Ns=null;function Hq(){return!Ns&&"BroadcastChannel"in self&&(Ns=new BroadcastChannel("[Firebase] FID Change"),Ns.onmessage=t=>{hx(t.data.key,t.data.fid)}),Ns}function qq(){dx.size===0&&Ns&&(Ns.close(),Ns=null)}var zq="firebase-installations-database",Gq=1,Ps="firebase-installations-store",rb=null;function ab(){return rb||(rb=ls(zq,Gq,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(Ps)}}})),rb}function fg(t,e){return v(this,null,function*(){let n=hg(t),i=(yield ab()).transaction(Ps,"readwrite"),o=i.objectStore(Ps),s=yield o.get(n);return yield o.put(e,n),yield i.done,(!s||s.fid!==e.fid)&&fx(t,e.fid),e})}function px(t){return v(this,null,function*(){let e=hg(t),r=(yield ab()).transaction(Ps,"readwrite");yield r.objectStore(Ps).delete(e),yield r.done})}function pg(t,e){return v(this,null,function*(){let n=hg(t),i=(yield ab()).transaction(Ps,"readwrite"),o=i.objectStore(Ps),s=yield o.get(n),a=e(s);return a===void 0?yield o.delete(n):yield o.put(a,n),yield i.done,a&&(!s||s.fid!==a.fid)&&fx(t,a.fid),a})}function cb(t){return v(this,null,function*(){let e,n=yield pg(t.appConfig,r=>{let i=Wq(r),o=Kq(t,i);return e=o.registrationPromise,o.installationEntry});return n.fid===ob?{installationEntry:yield e}:{installationEntry:n,registrationPromise:e}})}function Wq(t){let e=t||{fid:Uq(),registrationStatus:0};return gx(e)}function Kq(t,e){if(e.registrationStatus===0){if(!navigator.onLine){let i=Promise.reject(Ms.create("app-offline"));return{installationEntry:e,registrationPromise:i}}let n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=Qq(t,n);return{installationEntry:n,registrationPromise:r}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:Yq(t)}:{installationEntry:e}}function Qq(t,e){return v(this,null,function*(){try{let n=yield Lq(t,e);return fg(t.appConfig,n)}catch(n){throw ix(n)&&n.customData.serverCode===409?yield px(t.appConfig):yield fg(t.appConfig,{fid:e.fid,registrationStatus:0}),n}})}function Yq(t){return v(this,null,function*(){let e=yield ZP(t.appConfig);for(;e.registrationStatus===1;)yield lx(100),e=yield ZP(t.appConfig);if(e.registrationStatus===0){let{installationEntry:n,registrationPromise:r}=yield cb(t);return r||n}return e})}function ZP(t){return pg(t,e=>{if(!e)throw Ms.create("installation-not-found");return gx(e)})}function gx(t){return Jq(t)?{fid:t.fid,registrationStatus:0}:t}function Jq(t){return t.registrationStatus===1&&t.registrationTime+tx<Date.now()}function Zq(r,i){return v(this,arguments,function*({appConfig:t,heartbeatServiceProvider:e},n){let o=Xq(t,n),s=kq(t,n),a=e.getImmediate({optional:!0});if(a){let p=yield a.getHeartbeatsHeader();p&&s.append("x-firebase-client",p)}let u={installation:{sdkVersion:nx,appId:t.appId}},l={method:"POST",headers:s,body:JSON.stringify(u)},f=yield ux(()=>fetch(o,l));if(f.ok){let p=yield f.json();return sx(p)}else throw yield ax("Generate Auth Token",f)})}function Xq(t,{fid:e}){return`${ox(t)}/${e}/authTokens:generate`}function ub(t,e=!1){return v(this,null,function*(){let n,r=yield pg(t.appConfig,o=>{if(!mx(o))throw Ms.create("not-registered");let s=o.authToken;if(!e&&nz(s))return o;if(s.requestStatus===1)return n=ez(t,e),o;{if(!navigator.onLine)throw Ms.create("app-offline");let a=iz(o);return n=tz(t,a),a}});return n?yield n:r.authToken})}function ez(t,e){return v(this,null,function*(){let n=yield XP(t.appConfig);for(;n.authToken.requestStatus===1;)yield lx(100),n=yield XP(t.appConfig);let r=n.authToken;return r.requestStatus===0?ub(t,e):r})}function XP(t){return pg(t,e=>{if(!mx(e))throw Ms.create("not-registered");let n=e.authToken;return oz(n)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}function tz(t,e){return v(this,null,function*(){try{let n=yield Zq(t,e),r=Object.assign(Object.assign({},e),{authToken:n});return yield fg(t.appConfig,r),n}catch(n){if(ix(n)&&(n.customData.serverCode===401||n.customData.serverCode===404))yield px(t.appConfig);else{let r=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});yield fg(t.appConfig,r)}throw n}})}function mx(t){return t!==void 0&&t.registrationStatus===2}function nz(t){return t.requestStatus===2&&!rz(t)}function rz(t){let e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+Nq}function iz(t){let e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},t),{authToken:e})}function oz(t){return t.requestStatus===1&&t.requestTime+tx<Date.now()}function sz(t){return v(this,null,function*(){let e=t,{installationEntry:n,registrationPromise:r}=yield cb(e);return r?r.catch(console.error):ub(e).catch(console.error),n.fid})}function az(t,e=!1){return v(this,null,function*(){let n=t;return yield cz(n),(yield ub(n,e)).token})}function cz(t){return v(this,null,function*(){let{registrationPromise:e}=yield cb(t);e&&(yield e)})}function uz(t){if(!t||!t.options)throw ib("App Configuration");if(!t.name)throw ib("App Name");let e=["projectId","apiKey","appId"];for(let n of e)if(!t.options[n])throw ib(n);return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}function ib(t){return Ms.create("missing-app-config-values",{valueName:t})}var yx="installations",lz="installations-internal",dz=t=>{let e=t.getProvider("app").getImmediate(),n=uz(e),r=ai(e,"heartbeat");return{app:e,appConfig:n,heartbeatServiceProvider:r,_delete:()=>Promise.resolve()}},fz=t=>{let e=t.getProvider("app").getImmediate(),n=ai(e,yx).getImmediate();return{getId:()=>sz(n),getToken:i=>az(n,i)}};function hz(){xt(new st(yx,dz,"PUBLIC")),xt(new st(lz,fz,"PRIVATE"))}hz();ke(ex,sb);ke(ex,sb,"esm2017");var pz="/firebase-messaging-sw.js",gz="/firebase-cloud-messaging-push-scope",Tx="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",mz="https://fcmregistrations.googleapis.com/v1",Cx="google.c.a.c_id",yz="google.c.a.c_l",vz="google.c.a.ts",_z="google.c.a.e",vx=1e4;var gg=(function(t){return t.PUSH_RECEIVED="push-received",t.NOTIFICATION_CLICKED="notification-clicked",t})(gg||{});function wi(t){let e=new Uint8Array(t);return btoa(String.fromCharCode(...e)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Ez(t){let e="=".repeat((4-t.length%4)%4),n=(t+e).replace(/\-/g,"+").replace(/_/g,"/"),r=atob(n),i=new Uint8Array(r.length);for(let o=0;o<r.length;++o)i[o]=r.charCodeAt(o);return i}var lb="fcm_token_details_db",wz=5,_x="fcm_token_object_Store";function Iz(t){return v(this,null,function*(){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(o=>o.name).includes(lb))return null;let e=null;return(yield ls(lb,wz,{upgrade:(r,i,o,s)=>v(null,null,function*(){var a;if(i<2||!r.objectStoreNames.contains(_x))return;let u=s.objectStore(_x),l=yield u.index("fcmSenderId").get(t);if(yield u.clear(),!!l){if(i===2){let f=l;if(!f.auth||!f.p256dh||!f.endpoint)return;e={token:f.fcmToken,createTime:(a=f.createTime)!==null&&a!==void 0?a:Date.now(),subscriptionOptions:{auth:f.auth,p256dh:f.p256dh,endpoint:f.endpoint,swScope:f.swScope,vapidKey:typeof f.vapidKey=="string"?f.vapidKey:wi(f.vapidKey)}}}else if(i===3){let f=l;e={token:f.fcmToken,createTime:f.createTime,subscriptionOptions:{auth:wi(f.auth),p256dh:wi(f.p256dh),endpoint:f.endpoint,swScope:f.swScope,vapidKey:wi(f.vapidKey)}}}else if(i===4){let f=l;e={token:f.fcmToken,createTime:f.createTime,subscriptionOptions:{auth:wi(f.auth),p256dh:wi(f.p256dh),endpoint:f.endpoint,swScope:f.swScope,vapidKey:wi(f.vapidKey)}}}}})})).close(),yield qh(lb),yield qh("fcm_vapid_details_db"),yield qh("undefined"),bz(e)?e:null})}function bz(t){if(!t||!t.subscriptionOptions)return!1;let{subscriptionOptions:e}=t;return typeof t.createTime=="number"&&t.createTime>0&&typeof t.token=="string"&&t.token.length>0&&typeof e.auth=="string"&&e.auth.length>0&&typeof e.p256dh=="string"&&e.p256dh.length>0&&typeof e.endpoint=="string"&&e.endpoint.length>0&&typeof e.swScope=="string"&&e.swScope.length>0&&typeof e.vapidKey=="string"&&e.vapidKey.length>0}var Tz="firebase-messaging-database",Cz=1,Dl="firebase-messaging-store",db=null;function Dx(){return db||(db=ls(Tz,Cz,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(Dl)}}})),db}function Dz(t){return v(this,null,function*(){let e=Sx(t),r=yield(yield Dx()).transaction(Dl).objectStore(Dl).get(e);if(r)return r;{let i=yield Iz(t.appConfig.senderId);if(i)return yield pb(t,i),i}})}function pb(t,e){return v(this,null,function*(){let n=Sx(t),i=(yield Dx()).transaction(Dl,"readwrite");return yield i.objectStore(Dl).put(e,n),yield i.done,e})}function Sx({appConfig:t}){return t.appId}var Sz={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."},Wt=new tn("messaging","Messaging",Sz);function Az(t,e){return v(this,null,function*(){let n=yield mb(t),r=Ax(e),i={method:"POST",headers:n,body:JSON.stringify(r)},o;try{o=yield(yield fetch(gb(t.appConfig),i)).json()}catch(s){throw Wt.create("token-subscribe-failed",{errorInfo:s?.toString()})}if(o.error){let s=o.error.message;throw Wt.create("token-subscribe-failed",{errorInfo:s})}if(!o.token)throw Wt.create("token-subscribe-no-token");return o.token})}function Rz(t,e){return v(this,null,function*(){let n=yield mb(t),r=Ax(e.subscriptionOptions),i={method:"PATCH",headers:n,body:JSON.stringify(r)},o;try{o=yield(yield fetch(`${gb(t.appConfig)}/${e.token}`,i)).json()}catch(s){throw Wt.create("token-update-failed",{errorInfo:s?.toString()})}if(o.error){let s=o.error.message;throw Wt.create("token-update-failed",{errorInfo:s})}if(!o.token)throw Wt.create("token-update-no-token");return o.token})}function Nz(t,e){return v(this,null,function*(){let r={method:"DELETE",headers:yield mb(t)};try{let o=yield(yield fetch(`${gb(t.appConfig)}/${e}`,r)).json();if(o.error){let s=o.error.message;throw Wt.create("token-unsubscribe-failed",{errorInfo:s})}}catch(i){throw Wt.create("token-unsubscribe-failed",{errorInfo:i?.toString()})}})}function gb({projectId:t}){return`${mz}/projects/${t}/registrations`}function mb(n){return v(this,arguments,function*({appConfig:t,installations:e}){let r=yield e.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t.apiKey,"x-goog-firebase-installations-auth":`FIS ${r}`})})}function Ax({p256dh:t,auth:e,endpoint:n,vapidKey:r}){let i={web:{endpoint:n,auth:e,p256dh:t}};return r!==Tx&&(i.web.applicationPubKey=r),i}var Mz=10080*60*1e3;function Pz(t){return v(this,null,function*(){let e=yield kz(t.swRegistration,t.vapidKey),n={vapidKey:t.vapidKey,swScope:t.swRegistration.scope,endpoint:e.endpoint,auth:wi(e.getKey("auth")),p256dh:wi(e.getKey("p256dh"))},r=yield Dz(t.firebaseDependencies);if(r){if(Oz(r.subscriptionOptions,n))return Date.now()>=r.createTime+Mz?xz(t,{token:r.token,createTime:Date.now(),subscriptionOptions:n}):r.token;try{yield Nz(t.firebaseDependencies,r.token)}catch(i){console.warn(i)}return Ex(t.firebaseDependencies,n)}else return Ex(t.firebaseDependencies,n)})}function xz(t,e){return v(this,null,function*(){try{let n=yield Rz(t.firebaseDependencies,e),r=Object.assign(Object.assign({},e),{token:n,createTime:Date.now()});return yield pb(t.firebaseDependencies,r),n}catch(n){throw n}})}function Ex(t,e){return v(this,null,function*(){let r={token:yield Az(t,e),createTime:Date.now(),subscriptionOptions:e};return yield pb(t,r),r.token})}function kz(t,e){return v(this,null,function*(){let n=yield t.pushManager.getSubscription();return n||t.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Ez(e)})})}function Oz(t,e){let n=e.vapidKey===t.vapidKey,r=e.endpoint===t.endpoint,i=e.auth===t.auth,o=e.p256dh===t.p256dh;return n&&r&&i&&o}function wx(t){let e={from:t.from,collapseKey:t.collapse_key,messageId:t.fcmMessageId};return Fz(e,t),Lz(e,t),Vz(e,t),e}function Fz(t,e){if(!e.notification)return;t.notification={};let n=e.notification.title;n&&(t.notification.title=n);let r=e.notification.body;r&&(t.notification.body=r);let i=e.notification.image;i&&(t.notification.image=i);let o=e.notification.icon;o&&(t.notification.icon=o)}function Lz(t,e){e.data&&(t.data=e.data)}function Vz(t,e){var n,r,i,o,s;if(!e.fcmOptions&&!(!((n=e.notification)===null||n===void 0)&&n.click_action))return;t.fcmOptions={};let a=(i=(r=e.fcmOptions)===null||r===void 0?void 0:r.link)!==null&&i!==void 0?i:(o=e.notification)===null||o===void 0?void 0:o.click_action;a&&(t.fcmOptions.link=a);let u=(s=e.fcmOptions)===null||s===void 0?void 0:s.analytics_label;u&&(t.fcmOptions.analyticsLabel=u)}function jz(t){return typeof t=="object"&&!!t&&Cx in t}Uz("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");function Uz(t,e){let n=[];for(let r=0;r<t.length;r++)n.push(t.charAt(r)),r<e.length&&n.push(e.charAt(r));return n.join("")}function Bz(t){if(!t||!t.options)throw fb("App Configuration Object");if(!t.name)throw fb("App Name");let e=["projectId","apiKey","appId","messagingSenderId"],{options:n}=t;for(let r of e)if(!n[r])throw fb(r);return{appName:t.name,projectId:n.projectId,apiKey:n.apiKey,appId:n.appId,senderId:n.messagingSenderId}}function fb(t){return Wt.create("missing-app-config-values",{valueName:t})}var hb=class{constructor(e,n,r){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;let i=Bz(e);this.firebaseDependencies={app:e,appConfig:i,installations:n,analyticsProvider:r}}_delete(){return Promise.resolve()}};function $z(t){return v(this,null,function*(){try{t.swRegistration=yield navigator.serviceWorker.register(pz,{scope:gz}),t.swRegistration.update().catch(()=>{}),yield Hz(t.swRegistration)}catch(e){throw Wt.create("failed-service-worker-registration",{browserErrorMessage:e?.message})}})}function Hz(t){return v(this,null,function*(){return new Promise((e,n)=>{let r=setTimeout(()=>n(new Error(`Service worker not registered after ${vx} ms`)),vx),i=t.installing||t.waiting;t.active?(clearTimeout(r),e()):i?i.onstatechange=o=>{var s;((s=o.target)===null||s===void 0?void 0:s.state)==="activated"&&(i.onstatechange=null,clearTimeout(r),e())}:(clearTimeout(r),n(new Error("No incoming service worker found.")))})})}function qz(t,e){return v(this,null,function*(){if(!e&&!t.swRegistration&&(yield $z(t)),!(!e&&t.swRegistration)){if(!(e instanceof ServiceWorkerRegistration))throw Wt.create("invalid-sw-registration");t.swRegistration=e}})}function zz(t,e){return v(this,null,function*(){e?t.vapidKey=e:t.vapidKey||(t.vapidKey=Tx)})}function Rx(t,e){return v(this,null,function*(){if(!navigator)throw Wt.create("only-available-in-window");if(Notification.permission==="default"&&(yield Notification.requestPermission()),Notification.permission!=="granted")throw Wt.create("permission-blocked");return yield zz(t,e?.vapidKey),yield qz(t,e?.serviceWorkerRegistration),Pz(t)})}function Gz(t,e,n){return v(this,null,function*(){let r=Wz(e);(yield t.firebaseDependencies.analyticsProvider.get()).logEvent(r,{message_id:n[Cx],message_name:n[yz],message_time:n[vz],message_device_time:Math.floor(Date.now()/1e3)})})}function Wz(t){switch(t){case gg.NOTIFICATION_CLICKED:return"notification_open";case gg.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function Kz(t,e){return v(this,null,function*(){let n=e.data;if(!n.isFirebaseMessaging)return;t.onMessageHandler&&n.messageType===gg.PUSH_RECEIVED&&(typeof t.onMessageHandler=="function"?t.onMessageHandler(wx(n)):t.onMessageHandler.next(wx(n)));let r=n.data;jz(r)&&r[_z]==="1"&&(yield Gz(t,n.messageType,r))})}var Ix="@firebase/messaging",bx="0.12.22";var Qz=t=>{let e=new hb(t.getProvider("app").getImmediate(),t.getProvider("installations-internal").getImmediate(),t.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",n=>Kz(e,n)),e},Yz=t=>{let e=t.getProvider("messaging").getImmediate();return{getToken:r=>Rx(e,r)}};function Jz(){xt(new st("messaging",Qz,"PUBLIC")),xt(new st("messaging-internal",Yz,"PRIVATE")),ke(Ix,bx),ke(Ix,bx,"esm2017")}function Nx(){return v(this,null,function*(){try{yield Bh()}catch{return!1}return typeof window<"u"&&cs()&&wR()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})}function Zz(t,e){if(!navigator)throw Wt.create("only-available-in-window");return t.onMessageHandler=e,()=>{t.onMessageHandler=null}}function Sl(t=ui()){return Nx().then(e=>{if(!e)throw Wt.create("unsupported-browser")},e=>{throw Wt.create("indexed-db-unsupported")}),ai(ot(t),"messaging").getImmediate()}function yb(t,e){return v(this,null,function*(){return t=ot(t),Rx(t,e)})}function vb(t,e){return t=ot(t),Zz(t,e)}Jz();var Al=class{constructor(e){return e}},Mx="messaging",_b=class{constructor(){return Zi(Mx)}};var Eb=new q("angularfire2.messaging-instances");function Xz(t,e,n){if(i_(n))return null;let r=Oa(Mx,t,e);return r&&new Al(r)}function eG(t){return(e,n,r)=>{if(i_(r))return null;let i=e.runOutsideAngular(()=>t(n));return new Al(i)}}var tG={provide:_b,deps:[[new Ln,Eb]]},nG={provide:Al,useFactory:Xz,deps:[[new Ln,Eb],fi,nr]};function Px(t,...e){return ke("angularfire",li.full,"fcm"),Mn([nG,tG,{provide:Eb,useFactory:eG(t),multi:!0,deps:[Re,Ae,nr,di,fs,...e]}])}var xx=vt(Sl,!0);var Ii={firebase:{apiKey:"AIzaSyA9JTo5iNHrCxH2caYD2IZrPfYq1oB3L8c",authDomain:"webapp-amigo-secreto.firebaseapp.com",projectId:"webapp-amigo-secreto",storageBucket:"webapp-amigo-secreto.firebasestorage.app",messagingSenderId:"193359921823",appId:"1:193359921823:web:7804bad616fafc1f4618aa",vapidKey:"BOpmapUTxq-3KXtiXhkLSrXFVZgng4Gvi43kWr9TrrTF1nb1Dpuijc2buO_NGfSm1sBqZi5CvdxpCb7fPaCqE4c"},functions:{sendNotification:"https://us-central1-webapp-amigo-secreto.cloudfunctions.net/notifyUser"}};var Hx=(()=>{class t{_renderer;_elementRef;onChange=n=>{};onTouched=()=>{};constructor(n,r){this._renderer=n,this._elementRef=r}setProperty(n,r){this._renderer.setProperty(this._elementRef.nativeElement,n,r)}registerOnTouched(n){this.onTouched=n}registerOnChange(n){this.onChange=n}setDisabledState(n){this.setProperty("disabled",n)}static \u0275fac=function(r){return new(r||t)(ne(Jr),ne(Tr))};static \u0275dir=ze({type:t})}return t})(),Tb=(()=>{class t extends Hx{static \u0275fac=(()=>{let n;return function(i){return(n||(n=br(t)))(i||t)}})();static \u0275dir=ze({type:t,features:[En]})}return t})(),bg=new q("");var rG={provide:bg,useExisting:Rn(()=>gn),multi:!0};function iG(){let t=Un()?Un().getUserAgent():"";return/android (\d+)/.test(t.toLowerCase())}var oG=new q(""),gn=(()=>{class t extends Hx{_compositionMode;_composing=!1;constructor(n,r,i){super(n,r),this._compositionMode=i,this._compositionMode==null&&(this._compositionMode=!iG())}writeValue(n){let r=n??"";this.setProperty("value",r)}_handleInput(n){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(n)}_compositionStart(){this._composing=!0}_compositionEnd(n){this._composing=!1,this._compositionMode&&this.onChange(n)}static \u0275fac=function(r){return new(r||t)(ne(Jr),ne(Tr),ne(oG,8))};static \u0275dir=ze({type:t,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){r&1&&W("input",function(s){return i._handleInput(s.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(s){return i._compositionEnd(s.target.value)})},standalone:!1,features:[Xr([rG]),En]})}return t})();function sG(t){return t==null||qx(t)===0}function qx(t){return t==null?null:Array.isArray(t)||typeof t=="string"?t.length:t instanceof Set?t.size:null}var Tg=new q(""),zx=new q("");function aG(t){return sG(t.value)?{required:!0}:null}function cG(t){return e=>{let n=e.value?.length??qx(e.value);return n!==null&&n>t?{maxlength:{requiredLength:t,actualLength:n}}:null}}function kx(t){return null}function Gx(t){return t!=null}function Wx(t){return Wi(t)?Ze(t):t}function Kx(t){let e={};return t.forEach(n=>{e=n!=null?j(j({},e),n):e}),Object.keys(e).length===0?null:e}function Qx(t,e){return e.map(n=>n(t))}function uG(t){return!t.validate}function Yx(t){return t.map(e=>uG(e)?e:n=>e.validate(n))}function lG(t){if(!t)return null;let e=t.filter(Gx);return e.length==0?null:function(n){return Kx(Qx(n,e))}}function Cb(t){return t!=null?lG(Yx(t)):null}function dG(t){if(!t)return null;let e=t.filter(Gx);return e.length==0?null:function(n){let r=Qx(n,e).map(Wx);return Pm(r).pipe(fe(Kx))}}function Db(t){return t!=null?dG(Yx(t)):null}function Ox(t,e){return t===null?[e]:Array.isArray(t)?[...t,e]:[t,e]}function fG(t){return t._rawValidators}function hG(t){return t._rawAsyncValidators}function wb(t){return t?Array.isArray(t)?t:[t]:[]}function yg(t,e){return Array.isArray(t)?t.includes(e):t===e}function Fx(t,e){let n=wb(e);return wb(t).forEach(i=>{yg(n,i)||n.push(i)}),n}function Lx(t,e){return wb(e).filter(n=>!yg(t,n))}var vg=class{get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators=[];_rawAsyncValidators=[];_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=Cb(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=Db(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_onDestroyCallbacks=[];_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,n){return this.control?this.control.hasError(e,n):!1}getError(e,n){return this.control?this.control.getError(e,n):null}},lc=class extends vg{name;get formDirective(){return null}get path(){return null}},kl=class extends vg{_parent=null;name=null;valueAccessor=null},_g=class{_cd;constructor(e){this._cd=e}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}},pG={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},ide=X(j({},pG),{"[class.ng-submitted]":"isSubmitted"}),zn=(()=>{class t extends _g{constructor(n){super(n)}static \u0275fac=function(r){return new(r||t)(ne(kl,2))};static \u0275dir=ze({type:t,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){r&2&&jn("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},standalone:!1,features:[En]})}return t})(),mo=(()=>{class t extends _g{constructor(n){super(n)}static \u0275fac=function(r){return new(r||t)(ne(lc,10))};static \u0275dir=ze({type:t,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(r,i){r&2&&jn("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)("ng-submitted",i.isSubmitted)},standalone:!1,features:[En]})}return t})();var Rl="VALID",mg="INVALID",cc="PENDING",Nl="DISABLED",go=class{},Eg=class extends go{value;source;constructor(e,n){super(),this.value=e,this.source=n}},Pl=class extends go{pristine;source;constructor(e,n){super(),this.pristine=e,this.source=n}},xl=class extends go{touched;source;constructor(e,n){super(),this.touched=e,this.source=n}},uc=class extends go{status;source;constructor(e,n){super(),this.status=e,this.source=n}},Ib=class extends go{source;constructor(e){super(),this.source=e}},bb=class extends go{source;constructor(e){super(),this.source=e}};function Jx(t){return(Cg(t)?t.validators:t)||null}function gG(t){return Array.isArray(t)?Cb(t):t||null}function Zx(t,e){return(Cg(e)?e.asyncValidators:t)||null}function mG(t){return Array.isArray(t)?Db(t):t||null}function Cg(t){return t!=null&&!Array.isArray(t)&&typeof t=="object"}function yG(t,e,n){let r=t.controls;if(!(e?Object.keys(r):r).length)throw new B(1e3,"");if(!r[n])throw new B(1001,"")}function vG(t,e,n){t._forEachChild((r,i)=>{if(n[i]===void 0)throw new B(1002,"")})}var wg=class{_pendingDirty=!1;_hasOwnPendingAsyncValidator=null;_pendingTouched=!1;_onCollectionChange=()=>{};_updateOn;_parent=null;_asyncValidationSubscription;_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators;_rawAsyncValidators;value;constructor(e,n){this._assignValidators(e),this._assignAsyncValidators(n)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get status(){return Tt(this.statusReactive)}set status(e){Tt(()=>this.statusReactive.set(e))}_status=ma(()=>this.statusReactive());statusReactive=It(void 0);get valid(){return this.status===Rl}get invalid(){return this.status===mg}get pending(){return this.status==cc}get disabled(){return this.status===Nl}get enabled(){return this.status!==Nl}errors;get pristine(){return Tt(this.pristineReactive)}set pristine(e){Tt(()=>this.pristineReactive.set(e))}_pristine=ma(()=>this.pristineReactive());pristineReactive=It(!0);get dirty(){return!this.pristine}get touched(){return Tt(this.touchedReactive)}set touched(e){Tt(()=>this.touchedReactive.set(e))}_touched=ma(()=>this.touchedReactive());touchedReactive=It(!1);get untouched(){return!this.touched}_events=new at;events=this._events.asObservable();valueChanges;statusChanges;get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(Fx(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(Fx(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(Lx(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(Lx(e,this._rawAsyncValidators))}hasValidator(e){return yg(this._rawValidators,e)}hasAsyncValidator(e){return yg(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){let n=this.touched===!1;this.touched=!0;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsTouched(X(j({},e),{sourceControl:r})),n&&e.emitEvent!==!1&&this._events.next(new xl(!0,r))}markAllAsDirty(e={}){this.markAsDirty({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(n=>n.markAllAsDirty(e))}markAllAsTouched(e={}){this.markAsTouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(n=>n.markAllAsTouched(e))}markAsUntouched(e={}){let n=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsUntouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:r})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,r),n&&e.emitEvent!==!1&&this._events.next(new xl(!1,r))}markAsDirty(e={}){let n=this.pristine===!0;this.pristine=!1;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsDirty(X(j({},e),{sourceControl:r})),n&&e.emitEvent!==!1&&this._events.next(new Pl(!1,r))}markAsPristine(e={}){let n=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsPristine({onlySelf:!0,emitEvent:e.emitEvent})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e,r),n&&e.emitEvent!==!1&&this._events.next(new Pl(!0,r))}markAsPending(e={}){this.status=cc;let n=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new uc(this.status,n)),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.markAsPending(X(j({},e),{sourceControl:n}))}disable(e={}){let n=this._parentMarkedDirty(e.onlySelf);this.status=Nl,this.errors=null,this._forEachChild(i=>{i.disable(X(j({},e),{onlySelf:!0}))}),this._updateValue();let r=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Eg(this.value,r)),this._events.next(new uc(this.status,r)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(X(j({},e),{skipPristineCheck:n}),this),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){let n=this._parentMarkedDirty(e.onlySelf);this.status=Rl,this._forEachChild(r=>{r.enable(X(j({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(X(j({},e),{skipPristineCheck:n}),this),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e,n){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine({},n),this._parent._updateTouched({},n))}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let r=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Rl||this.status===cc)&&this._runAsyncValidator(r,e.emitEvent)}let n=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Eg(this.value,n)),this._events.next(new uc(this.status,n)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(X(j({},e),{sourceControl:n}))}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(n=>n._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Nl:Rl}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e,n){if(this.asyncValidator){this.status=cc,this._hasOwnPendingAsyncValidator={emitEvent:n!==!1,shouldHaveEmitted:e!==!1};let r=Wx(this.asyncValidator(this));this._asyncValidationSubscription=r.subscribe(i=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(i,{emitEvent:n,shouldHaveEmitted:e})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let e=(this._hasOwnPendingAsyncValidator?.emitEvent||this._hasOwnPendingAsyncValidator?.shouldHaveEmitted)??!1;return this._hasOwnPendingAsyncValidator=null,e}return!1}setErrors(e,n={}){this.errors=e,this._updateControlsErrors(n.emitEvent!==!1,this,n.shouldHaveEmitted)}get(e){let n=e;return n==null||(Array.isArray(n)||(n=n.split(".")),n.length===0)?null:n.reduce((r,i)=>r&&r._find(i),this)}getError(e,n){let r=n?this.get(n):this;return r&&r.errors?r.errors[e]:null}hasError(e,n){return!!this.getError(e,n)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e,n,r){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),(e||r)&&this._events.next(new uc(this.status,n)),this._parent&&this._parent._updateControlsErrors(e,n,r)}_initObservables(){this.valueChanges=new ut,this.statusChanges=new ut}_calculateStatus(){return this._allControlsDisabled()?Nl:this.errors?mg:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(cc)?cc:this._anyControlsHaveStatus(mg)?mg:Rl}_anyControlsHaveStatus(e){return this._anyControls(n=>n.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e,n){let r=!this._anyControlsDirty(),i=this.pristine!==r;this.pristine=r,this._parent&&!e.onlySelf&&this._parent._updatePristine(e,n),i&&this._events.next(new Pl(this.pristine,n))}_updateTouched(e={},n){this.touched=this._anyControlsTouched(),this._events.next(new xl(this.touched,n)),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,n)}_onDisabledChange=[];_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){Cg(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let n=this._parent&&this._parent.dirty;return!e&&!!n&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=gG(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=mG(this._rawAsyncValidators)}},Ig=class extends wg{constructor(e,n,r){super(Jx(n),Zx(r,n)),this.controls=e,this._initObservables(),this._setUpdateStrategy(n),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}controls;registerControl(e,n){return this.controls[e]?this.controls[e]:(this.controls[e]=n,n.setParent(this),n._registerOnCollectionChange(this._onCollectionChange),n)}addControl(e,n,r={}){this.registerControl(e,n),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,n={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}setControl(e,n,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],n&&this.registerControl(e,n),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,n={}){vG(this,!0,e),Object.keys(e).forEach(r=>{yG(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n)}patchValue(e,n={}){e!=null&&(Object.keys(e).forEach(r=>{let i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n))}reset(e={},n={}){this._forEachChild((r,i)=>{r.reset(e?e[i]:null,{onlySelf:!0,emitEvent:n.emitEvent})}),this._updatePristine(n,this),this._updateTouched(n,this),this.updateValueAndValidity(n)}getRawValue(){return this._reduceChildren({},(e,n,r)=>(e[r]=n.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(n,r)=>r._syncPendingControls()?!0:n);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(n=>{let r=this.controls[n];r&&e(r,n)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(let[n,r]of Object.entries(this.controls))if(this.contains(n)&&e(r))return!0;return!1}_reduceValue(){let e={};return this._reduceChildren(e,(n,r,i)=>((r.enabled||this.disabled)&&(n[i]=r.value),n))}_reduceChildren(e,n){let r=e;return this._forEachChild((i,o)=>{r=n(r,i,o)}),r}_allControlsDisabled(){for(let e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}};var Sb=new q("",{providedIn:"root",factory:()=>Ab}),Ab="always";function _G(t,e){return[...e.path,t]}function Xx(t,e,n=Ab){ek(t,e),e.valueAccessor.writeValue(t.value),(t.disabled||n==="always")&&e.valueAccessor.setDisabledState?.(t.disabled),wG(t,e),bG(t,e),IG(t,e),EG(t,e)}function Vx(t,e){t.forEach(n=>{n.registerOnValidatorChange&&n.registerOnValidatorChange(e)})}function EG(t,e){if(e.valueAccessor.setDisabledState){let n=r=>{e.valueAccessor.setDisabledState(r)};t.registerOnDisabledChange(n),e._registerOnDestroy(()=>{t._unregisterOnDisabledChange(n)})}}function ek(t,e){let n=fG(t);e.validator!==null?t.setValidators(Ox(n,e.validator)):typeof n=="function"&&t.setValidators([n]);let r=hG(t);e.asyncValidator!==null?t.setAsyncValidators(Ox(r,e.asyncValidator)):typeof r=="function"&&t.setAsyncValidators([r]);let i=()=>t.updateValueAndValidity();Vx(e._rawValidators,i),Vx(e._rawAsyncValidators,i)}function wG(t,e){e.valueAccessor.registerOnChange(n=>{t._pendingValue=n,t._pendingChange=!0,t._pendingDirty=!0,t.updateOn==="change"&&tk(t,e)})}function IG(t,e){e.valueAccessor.registerOnTouched(()=>{t._pendingTouched=!0,t.updateOn==="blur"&&t._pendingChange&&tk(t,e),t.updateOn!=="submit"&&t.markAsTouched()})}function tk(t,e){t._pendingDirty&&t.markAsDirty(),t.setValue(t._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(t._pendingValue),t._pendingChange=!1}function bG(t,e){let n=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};t.registerOnChange(n),e._registerOnDestroy(()=>{t._unregisterOnChange(n)})}function TG(t,e){t==null,ek(t,e)}function CG(t,e){if(!t.hasOwnProperty("model"))return!1;let n=t.model;return n.isFirstChange()?!0:!Object.is(e,n.currentValue)}function DG(t){return Object.getPrototypeOf(t.constructor)===Tb}function SG(t,e){t._syncPendingControls(),e.forEach(n=>{let r=n.control;r.updateOn==="submit"&&r._pendingChange&&(n.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function AG(t,e){if(!e)return null;Array.isArray(e);let n,r,i;return e.forEach(o=>{o.constructor===gn?n=o:DG(o)?r=o:i=o}),i||r||n||null}var RG={provide:lc,useExisting:Rn(()=>bi)},Ml=Promise.resolve(),bi=(()=>{class t extends lc{callSetDisabledState;get submitted(){return Tt(this.submittedReactive)}_submitted=ma(()=>this.submittedReactive());submittedReactive=It(!1);_directives=new Set;form;ngSubmit=new ut;options;constructor(n,r,i){super(),this.callSetDisabledState=i,this.form=new Ig({},Cb(n),Db(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(n){Ml.then(()=>{let r=this._findContainer(n.path);n.control=r.registerControl(n.name,n.control),Xx(n.control,n,this.callSetDisabledState),n.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(n)})}getControl(n){return this.form.get(n.path)}removeControl(n){Ml.then(()=>{let r=this._findContainer(n.path);r&&r.removeControl(n.name),this._directives.delete(n)})}addFormGroup(n){Ml.then(()=>{let r=this._findContainer(n.path),i=new Ig({});TG(i,n),r.registerControl(n.name,i),i.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(n){Ml.then(()=>{let r=this._findContainer(n.path);r&&r.removeControl(n.name)})}getFormGroup(n){return this.form.get(n.path)}updateModel(n,r){Ml.then(()=>{this.form.get(n.path).setValue(r)})}setValue(n){this.control.setValue(n)}onSubmit(n){return this.submittedReactive.set(!0),SG(this.form,this._directives),this.ngSubmit.emit(n),this.form._events.next(new Ib(this.control)),n?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(n=void 0){this.form.reset(n),this.submittedReactive.set(!1),this.form._events.next(new bb(this.form))}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.form._updateOn=this.options.updateOn)}_findContainer(n){return n.pop(),n.length?this.form.get(n):this.form}static \u0275fac=function(r){return new(r||t)(ne(Tg,10),ne(zx,10),ne(Sb,8))};static \u0275dir=ze({type:t,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(r,i){r&1&&W("submit",function(s){return i.onSubmit(s)})("reset",function(){return i.onReset()})},inputs:{options:[0,"ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],standalone:!1,features:[Xr([RG]),En]})}return t})();function jx(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function Ux(t){return typeof t=="object"&&t!==null&&Object.keys(t).length===2&&"value"in t&&"disabled"in t}var NG=class extends wg{defaultValue=null;_onChange=[];_pendingValue;_pendingChange=!1;constructor(e=null,n,r){super(Jx(n),Zx(r,n)),this._applyFormState(e),this._setUpdateStrategy(n),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Cg(n)&&(n.nonNullable||n.initialValueIsDefault)&&(Ux(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,n={}){this.value=this._pendingValue=e,this._onChange.length&&n.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,n.emitViewToModelChange!==!1)),this.updateValueAndValidity(n)}patchValue(e,n={}){this.setValue(e,n)}reset(e=this.defaultValue,n={}){this._applyFormState(e),this.markAsPristine(n),this.markAsUntouched(n),this.setValue(this.value,n),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){jx(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){jx(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){Ux(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var MG={provide:kl,useExisting:Rn(()=>An)},Bx=Promise.resolve(),An=(()=>{class t extends kl{_changeDetectorRef;callSetDisabledState;control=new NG;static ngAcceptInputType_isDisabled;_registered=!1;viewModel;name="";isDisabled;model;options;update=new ut;constructor(n,r,i,o,s,a){super(),this._changeDetectorRef=s,this.callSetDisabledState=a,this._parent=n,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=AG(this,o)}ngOnChanges(n){if(this._checkForErrors(),!this._registered||"name"in n){if(this._registered&&(this._checkName(),this.formDirective)){let r=n.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in n&&this._updateDisabled(n),CG(n,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(n){this.viewModel=n,this.update.emit(n)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){Xx(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._checkName()}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(n){Bx.then(()=>{this.control.setValue(n,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(n){let r=n.isDisabled.currentValue,i=r!==0&&Qo(r);Bx.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(n){return this._parent?_G(n,this._parent):[n]}static \u0275fac=function(r){return new(r||t)(ne(lc,9),ne(Tg,10),ne(zx,10),ne(bg,10),ne(Ko,8),ne(Sb,8))};static \u0275dir=ze({type:t,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],standalone:!1,features:[Xr([MG]),En,Yr]})}return t})();var yo=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275dir=ze({type:t,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""],standalone:!1})}return t})();var PG={provide:bg,useExisting:Rn(()=>Dg),multi:!0};function nk(t,e){return t==null?`${e}`:(e&&typeof e=="object"&&(e="Object"),`${t}: ${e}`.slice(0,50))}function xG(t){return t.split(":")[0]}var Dg=(()=>{class t extends Tb{value;_optionMap=new Map;_idCounter=0;set compareWith(n){this._compareWith=n}_compareWith=Object.is;appRefInjector=A(Zr).injector;destroyRef=A(er);cdr=A(Ko);_queuedWrite=!1;_writeValueAfterRender(){this._queuedWrite||this.appRefInjector.destroyed||(this._queuedWrite=!0,Uf({write:()=>{this.destroyRef.destroyed||(this._queuedWrite=!1,this.writeValue(this.value))}},{injector:this.appRefInjector}))}writeValue(n){this.cdr.markForCheck(),this.value=n;let r=this._getOptionId(n),i=nk(r,n);this.setProperty("value",i)}registerOnChange(n){this.onChange=r=>{this.value=this._getOptionValue(r),n(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(n){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r),n))return r;return null}_getOptionValue(n){let r=xG(n);return this._optionMap.has(r)?this._optionMap.get(r):n}static \u0275fac=(()=>{let n;return function(i){return(n||(n=br(t)))(i||t)}})();static \u0275dir=ze({type:t,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(r,i){r&1&&W("change",function(s){return i.onChange(s.target.value)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},standalone:!1,features:[Xr([PG]),En]})}return t})(),rk=(()=>{class t{_element;_renderer;_select;id;constructor(n,r,i){this._element=n,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption())}set ngValue(n){this._select!=null&&(this._select._optionMap.set(this.id,n),this._setElementValue(nk(this.id,n)),this._select._writeValueAfterRender())}set value(n){this._setElementValue(n),this._select&&this._select._writeValueAfterRender()}_setElementValue(n){this._renderer.setProperty(this._element.nativeElement,"value",n)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select._writeValueAfterRender())}static \u0275fac=function(r){return new(r||t)(ne(Tr),ne(Jr),ne(Dg,9))};static \u0275dir=ze({type:t,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"},standalone:!1})}return t})(),kG={provide:bg,useExisting:Rn(()=>ik),multi:!0};function $x(t,e){return t==null?`${e}`:(typeof e=="string"&&(e=`'${e}'`),e&&typeof e=="object"&&(e="Object"),`${t}: ${e}`.slice(0,50))}function OG(t){return t.split(":")[0]}var ik=(()=>{class t extends Tb{value;_optionMap=new Map;_idCounter=0;set compareWith(n){this._compareWith=n}_compareWith=Object.is;writeValue(n){this.value=n;let r;if(Array.isArray(n)){let i=n.map(o=>this._getOptionId(o));r=(o,s)=>{o._setSelected(i.indexOf(s.toString())>-1)}}else r=(i,o)=>{i._setSelected(!1)};this._optionMap.forEach(r)}registerOnChange(n){this.onChange=r=>{let i=[],o=r.selectedOptions;if(o!==void 0){let s=o;for(let a=0;a<s.length;a++){let u=s[a],l=this._getOptionValue(u.value);i.push(l)}}else{let s=r.options;for(let a=0;a<s.length;a++){let u=s[a];if(u.selected){let l=this._getOptionValue(u.value);i.push(l)}}}this.value=i,n(i)}}_registerOption(n){let r=(this._idCounter++).toString();return this._optionMap.set(r,n),r}_getOptionId(n){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r)._value,n))return r;return null}_getOptionValue(n){let r=OG(n);return this._optionMap.has(r)?this._optionMap.get(r)._value:n}static \u0275fac=(()=>{let n;return function(i){return(n||(n=br(t)))(i||t)}})();static \u0275dir=ze({type:t,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(r,i){r&1&&W("change",function(s){return i.onChange(s.target)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},standalone:!1,features:[Xr([kG]),En]})}return t})(),ok=(()=>{class t{_element;_renderer;_select;id;_value;constructor(n,r,i){this._element=n,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption(this))}set ngValue(n){this._select!=null&&(this._value=n,this._setElementValue($x(this.id,n)),this._select.writeValue(this._select.value))}set value(n){this._select?(this._value=n,this._setElementValue($x(this.id,n)),this._select.writeValue(this._select.value)):this._setElementValue(n)}_setElementValue(n){this._renderer.setProperty(this._element.nativeElement,"value",n)}_setSelected(n){this._renderer.setProperty(this._element.nativeElement,"selected",n)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static \u0275fac=function(r){return new(r||t)(ne(Tr),ne(Jr),ne(ik,9))};static \u0275dir=ze({type:t,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"},standalone:!1})}return t})();function FG(t){return typeof t=="number"?t:parseInt(t,10)}var sk=(()=>{class t{_validator=kx;_onChange;_enabled;ngOnChanges(n){if(this.inputName in n){let r=this.normalizeInput(n[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):kx,this._onChange&&this._onChange()}}validate(n){return this._validator(n)}registerOnValidatorChange(n){this._onChange=n}enabled(n){return n!=null}static \u0275fac=function(r){return new(r||t)};static \u0275dir=ze({type:t,features:[Yr]})}return t})();var LG={provide:Tg,useExisting:Rn(()=>Ol),multi:!0};var Ol=(()=>{class t extends sk{required;inputName="required";normalizeInput=Qo;createValidator=n=>aG;enabled(n){return n}static \u0275fac=(()=>{let n;return function(i){return(n||(n=br(t)))(i||t)}})();static \u0275dir=ze({type:t,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(r,i){r&2&&Wo("required",i._enabled?"":null)},inputs:{required:"required"},standalone:!1,features:[Xr([LG]),En]})}return t})();var VG={provide:Tg,useExisting:Rn(()=>Fl),multi:!0},Fl=(()=>{class t extends sk{maxlength;inputName="maxlength";normalizeInput=n=>FG(n);createValidator=n=>cG(n);static \u0275fac=(()=>{let n;return function(i){return(n||(n=br(t)))(i||t)}})();static \u0275dir=ze({type:t,selectors:[["","maxlength","","formControlName",""],["","maxlength","","formControl",""],["","maxlength","","ngModel",""]],hostVars:1,hostBindings:function(r,i){r&2&&Wo("maxlength",i._enabled?i.maxlength:null)},inputs:{maxlength:"maxlength"},standalone:!1,features:[Xr([VG]),En]})}return t})();var jG=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275mod=rr({type:t});static \u0275inj=Nn({})}return t})();var Gn=(()=>{class t{static withConfig(n){return{ngModule:t,providers:[{provide:Sb,useValue:n.callSetDisabledState??Ab}]}}static \u0275fac=function(r){return new(r||t)};static \u0275mod=rr({type:t});static \u0275inj=Nn({imports:[jG]})}return t})();var Sg=class t{correo="";celular="";nombre="";personaje="";pass=["","","",""];firestore=A(He);injector=A(Ae);onPasswordInput(e,n){let r=e.target,i=document.querySelectorAll(".password-inputs input")[n+1];r.value&&i&&i.focus()}onPasswordBackspace(e,n){let r=e.target;if(e.key==="Backspace"&&!r.value){let i=document.querySelectorAll(".password-inputs input")[n-1];i&&i.focus()}}registrarUsuario(e){return v(this,null,function*(){if(e.preventDefault(),!this.correo||!this.celular||!this.nombre||!this.personaje||this.pass.some(n=>n.trim()==="")){alert("\u26A0\uFE0F Por favor completa todos los campos antes de continuar.");return}try{let n=qe(this.firestore,"usuarios"),r=Et(n,pn("correo","==",this.correo));if(!(yield ve(this.injector,()=>v(this,null,function*(){return yield Qe(r)}))).empty){alert("\u26A0\uFE0F Ya existe un usuario con este correo");return}let o=Et(n,pn("celular","==",this.celular));if(!(yield ve(this.injector,()=>v(this,null,function*(){return yield Qe(o)}))).empty){alert("\u26A0\uFE0F Ya existe un usuario con este celular");return}yield ve(this.injector,()=>v(this,null,function*(){return yield sc(n,{correo:this.correo,celular:this.celular,nombre:this.nombre,personaje:this.personaje,password:this.pass.join(""),fechaRegistro:po()})})),alert("\u2705 Usuario registrado"),this.correo="",this.celular="",this.nombre="",this.personaje="",this.pass=["","","",""]}catch(n){console.error(n),n?.code==="permission-denied"||/permission/i.test(n?.message)?alert(`Error: permisos insuficientes en Firestore.
\u26A0\uFE0F Permite lectura/escritura p\xFAblica. Usa solo en desarrollo.`):alert("Error al registrar. Revisa la consola del navegador para m\xE1s detalles.")}})}static \u0275fac=function(n){return new(n||t)};static \u0275cmp=rt({type:t,selectors:[["app-registro"]],decls:27,vars:8,consts:[[1,"container"],[1,"title"],[1,"form",3,"ngSubmit"],["type","email","placeholder","correo@hassql.com.co","required","","name","correo",3,"ngModelChange","ngModel"],["type","tel","placeholder","3001234567","required","","name","celular",3,"ngModelChange","ngModel"],["type","text","placeholder","Tu nombre","required","","name","nombre",3,"ngModelChange","ngModel"],["type","text","placeholder","Personaje favorito","required","","name","personaje",3,"ngModelChange","ngModel"],[1,"password-inputs"],["type","password","maxlength","1","required","","name","p0",3,"ngModelChange","input","keydown","ngModel"],["type","password","maxlength","1","required","","name","p1",3,"ngModelChange","input","keydown","ngModel"],["type","password","maxlength","1","required","","name","p2",3,"ngModelChange","input","keydown","ngModel"],["type","password","maxlength","1","required","","name","p3",3,"ngModelChange","input","keydown","ngModel"],["type","submit"],["type","button","routerLink","/login",1,"secondary-btn"]],template:function(n,r){n&1&&(N(0,"div",0)(1,"h1",1),F(2,"\u{1F381} Juego del Amigo Secreto \u{1F381}"),P(),N(3,"form",2),W("ngSubmit",function(o){return r.registrarUsuario(o)}),N(4,"label"),F(5," Ingresa tu correo "),N(6,"input",3),xe("ngModelChange",function(o){return Oe(r.correo,o)||(r.correo=o),o}),P()(),N(7,"label"),F(8," Ingresa tu celular "),N(9,"input",4),xe("ngModelChange",function(o){return Oe(r.celular,o)||(r.celular=o),o}),P()(),N(10,"label"),F(11," Ingresa tu nombre "),N(12,"input",5),xe("ngModelChange",function(o){return Oe(r.nombre,o)||(r.nombre=o),o}),P()(),N(13,"label"),F(14," Ingresa tu personaje "),N(15,"input",6),xe("ngModelChange",function(o){return Oe(r.personaje,o)||(r.personaje=o),o}),P()(),N(16,"label"),F(17," Ingresa una contrase\xF1a "),N(18,"div",7)(19,"input",8),xe("ngModelChange",function(o){return Oe(r.pass[0],o)||(r.pass[0]=o),o}),W("input",function(o){return r.onPasswordInput(o,0)})("keydown",function(o){return r.onPasswordBackspace(o,0)}),P(),N(20,"input",9),xe("ngModelChange",function(o){return Oe(r.pass[1],o)||(r.pass[1]=o),o}),W("input",function(o){return r.onPasswordInput(o,1)})("keydown",function(o){return r.onPasswordBackspace(o,1)}),P(),N(21,"input",10),xe("ngModelChange",function(o){return Oe(r.pass[2],o)||(r.pass[2]=o),o}),W("input",function(o){return r.onPasswordInput(o,2)})("keydown",function(o){return r.onPasswordBackspace(o,2)}),P(),N(22,"input",11),xe("ngModelChange",function(o){return Oe(r.pass[3],o)||(r.pass[3]=o),o}),W("input",function(o){return r.onPasswordInput(o,3)})("keydown",function(o){return r.onPasswordBackspace(o,3)}),P()()(),N(23,"button",12),F(24,"Registrarse"),P(),N(25,"button",13),F(26," Ya tienes una cuenta? Inicia sesi\xF3n "),P()()()),n&2&&(L(6),Pe("ngModel",r.correo),L(3),Pe("ngModel",r.celular),L(3),Pe("ngModel",r.nombre),L(3),Pe("ngModel",r.personaje),L(4),Pe("ngModel",r.pass[0]),L(),Pe("ngModel",r.pass[1]),L(),Pe("ngModel",r.pass[2]),L(),Pe("ngModel",r.pass[3]))},dependencies:[Lh,Gn,yo,gn,zn,mo,Ol,Fl,An,bi],styles:[".container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;height:100vh;font-family:Arial,sans-serif;background:linear-gradient(135deg,#ff6a00,#ee0979);color:#fff}.title[_ngcontent-%COMP%]{font-size:clamp(1.8rem,4vw,3rem);margin-bottom:1.5rem;text-align:center;text-shadow:2px 2px 4px rgba(0,0,0,.4)}.form[_ngcontent-%COMP%]{background:#ffffff1a;padding:2rem;border-radius:1rem;box-shadow:0 8px 16px #0000004d;display:flex;flex-direction:column;gap:1rem;width:min(90%,400px)}.form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;padding:.7rem;border-radius:.5rem;border:none;outline:none;font-size:1rem}.password-inputs[_ngcontent-%COMP%]{display:flex;gap:.5rem}.password-inputs[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{flex:1;text-align:center;font-size:1.2rem}button[_ngcontent-%COMP%]{background:#fff;color:#ee0979;font-size:1rem;padding:.8rem;border:none;border-radius:.5rem;cursor:pointer;font-weight:700;transition:.3s}button[_ngcontent-%COMP%]:hover{background:#ffdeeb}.secondary-btn[_ngcontent-%COMP%]{margin-top:1rem;background:transparent;border:2px solid #fff;color:#fff;padding:.6rem;border-radius:.5rem;cursor:pointer;font-weight:700;transition:.3s}.secondary-btn[_ngcontent-%COMP%]:hover{background:#fff3}"]})};var Vr="https://i.pinimg.com/736x/dc/9c/61/dc9c614e3007080a5aff36aebb949474.jpg";var Rb="usuario_actual",Kt=class t{usuario=It(this.cargarUsuario());firestore=A(He);constructor(){let e=this.usuario();if(!e||!e.id)return;let n=kt(this.firestore,"config","flags");lg(n,r=>v(this,null,function*(){if(!r.exists())return;let i=r.data();if(!i.forceLogout)return;let o=i.forceLogout,s=Array.isArray(i.users)?i.users:[];o.value===!0&&(!o.users||!o.users.some(a=>a.id===e.id))&&(yield ac(n,{"forceLogout.users":KP({id:e.id,date:new Date().toISOString()})}),console.warn("Forzando cierre de sesi\xF3n por configuraci\xF3n global"),this.clearUsuario(),window.location.reload())}))}setUsuario(e){this.usuario.set(e),localStorage.setItem(Rb,JSON.stringify(e))}clearUsuario(){this.usuario.set(null),localStorage.removeItem(Rb)}cargarUsuario(){let e=localStorage.getItem(Rb),n=e?JSON.parse(e):null;return n&&typeof n=="object"&&"nombre"in n&&(!n.imagen||n.imagen.trim()==="")&&(n.imagen=Vr),n}initForceLogoutFlag(){return v(this,null,function*(){let e=kt(this.firestore,"config","flags");yield hn(e,{forceLogout:{value:!0,users:[]}},{merge:!0})})}static \u0275fac=function(n){return new(n||t)};static \u0275prov=G({token:t,factory:t.\u0275fac,providedIn:"root"})};var Ag=class t{correo="";pass=["","","",""];firestore=A(He);injector=A(Ae);router=A(lr);userSignal=A(Kt);onPasswordInput(e,n){let r=e.target,i=document.querySelectorAll(".password-inputs input")[n+1];r.value&&i&&i.focus()}onPasswordBackspace(e,n){let r=e.target;if(e.key==="Backspace"&&!r.value){let i=document.querySelectorAll(".password-inputs input")[n-1];i&&i.focus()}}iniciarSesion(e){return v(this,null,function*(){e.preventDefault();let n=this.pass.join("");try{let r=qe(this.firestore,"usuarios"),i=Et(r,pn("correo","==",this.correo)),o=yield ve(this.injector,()=>v(this,null,function*(){return yield Qe(i)}));if(o.empty){alert("Usuario no encontrado");return}let s=o.docs[0],a=s.data();if(a.password!==n){alert("Contrase\xF1a incorrecta");return}let u={id:s.id,nombre:a.nombre,correo:a.correo,celular:a.celular,personaje:a.personaje,imagen:a.imagen};this.userSignal.setUsuario(u),this.router.navigate(["/inicio"])}catch(r){console.error(r),alert("Error al iniciar sesi\xF3n. Revisa la consola para m\xE1s detalles.")}})}static \u0275fac=function(n){return new(n||t)};static \u0275cmp=rt({type:t,selectors:[["app-login"]],decls:16,vars:5,consts:[[1,"container"],[1,"title"],[1,"form",3,"submit"],["type","email","name","correo","placeholder","correo@ejemplo.com","required","",3,"ngModelChange","ngModel"],[1,"password-inputs"],["type","password","maxlength","1","name","p0","required","",3,"ngModelChange","input","keydown","ngModel"],["type","password","maxlength","1","name","p1","required","",3,"ngModelChange","input","keydown","ngModel"],["type","password","maxlength","1","name","p2","required","",3,"ngModelChange","input","keydown","ngModel"],["type","password","maxlength","1","name","p3","required","",3,"ngModelChange","input","keydown","ngModel"],["type","submit"]],template:function(n,r){n&1&&(N(0,"div",0)(1,"h1",1),F(2,"\u{1F381} Iniciar Sesi\xF3n - Amigo Secreto \u{1F381}"),P(),N(3,"form",2),W("submit",function(o){return r.iniciarSesion(o)}),N(4,"label"),F(5," Ingresa tu correo "),N(6,"input",3),xe("ngModelChange",function(o){return Oe(r.correo,o)||(r.correo=o),o}),P()(),N(7,"label"),F(8," Ingresa tu contrase\xF1a "),N(9,"div",4)(10,"input",5),xe("ngModelChange",function(o){return Oe(r.pass[0],o)||(r.pass[0]=o),o}),W("input",function(o){return r.onPasswordInput(o,0)})("keydown",function(o){return r.onPasswordBackspace(o,0)}),P(),N(11,"input",6),xe("ngModelChange",function(o){return Oe(r.pass[1],o)||(r.pass[1]=o),o}),W("input",function(o){return r.onPasswordInput(o,1)})("keydown",function(o){return r.onPasswordBackspace(o,1)}),P(),N(12,"input",7),xe("ngModelChange",function(o){return Oe(r.pass[2],o)||(r.pass[2]=o),o}),W("input",function(o){return r.onPasswordInput(o,2)})("keydown",function(o){return r.onPasswordBackspace(o,2)}),P(),N(13,"input",8),xe("ngModelChange",function(o){return Oe(r.pass[3],o)||(r.pass[3]=o),o}),W("input",function(o){return r.onPasswordInput(o,3)})("keydown",function(o){return r.onPasswordBackspace(o,3)}),P()()(),N(14,"button",9),F(15,"Iniciar Sesi\xF3n"),P()()()),n&2&&(L(6),Pe("ngModel",r.correo),L(4),Pe("ngModel",r.pass[0]),L(),Pe("ngModel",r.pass[1]),L(),Pe("ngModel",r.pass[2]),L(),Pe("ngModel",r.pass[3]))},dependencies:[Gn,yo,gn,zn,mo,Ol,Fl,An,bi],styles:["[_nghost-%COMP%]{--bg-gradient-start: #ff6a00;--bg-gradient-end: #ee0979;--text-color: #fff;--text-shadow: rgba(0,0,0,.4);--form-bg: rgba(255,255,255,.1);--form-shadow: rgba(0,0,0,.3);--button-bg: #fff;--button-hover-bg: #ffdeeb;--button-text: #ee0979;--input-bg: transparent;--input-text: #fff;--input-border-radius: .5rem}.container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;height:100vh;font-family:Arial,sans-serif;background:linear-gradient(135deg,var(--bg-gradient-start),var(--bg-gradient-end));color:var(--text-color)}.title[_ngcontent-%COMP%]{font-size:clamp(1.8rem,4vw,3rem);margin-bottom:1.5rem;text-align:center;text-shadow:2px 2px 4px var(--text-shadow)}.form[_ngcontent-%COMP%]{background:var(--form-bg);padding:2rem;border-radius:1rem;box-shadow:0 8px 16px var(--form-shadow);display:flex;flex-direction:column;gap:1rem;width:min(90%,400px)}.form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;padding:.7rem;border-radius:var(--input-border-radius);border:none;outline:none;font-size:1rem}.password-inputs[_ngcontent-%COMP%]{display:flex;gap:.5rem}.password-inputs[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{flex:1;text-align:center;font-size:1.2rem}button[_ngcontent-%COMP%]{background:var(--button-bg);color:var(--button-text);font-size:1rem;padding:.8rem;border:none;border-radius:var(--input-border-radius);cursor:pointer;font-weight:700;transition:.3s}button[_ngcontent-%COMP%]:hover{background:var(--button-hover-bg)}"]})};var Rg=class t{constructor(e){this.firestore=e}userSignal=A(Kt);usuarioActual=this.userSignal.usuario();registerServiceWorker(){return v(this,null,function*(){if(!("serviceWorker"in navigator))return null;try{let n=`${document.getElementsByTagName("base")[0]?.getAttribute("href")||"/"}firebase-messaging-sw.js?v=${Date.now()}`;return yield navigator.serviceWorker.register(n)}catch(e){return console.error("Service worker registration failed",e),null}})}requestPermissionAndSave(e){return v(this,null,function*(){try{if(Notification.permission!=="granted"&&(yield Notification.requestPermission())!=="granted")return console.warn("Notification permission not granted"),null;let n=yield this.registerServiceWorker(),r=Sl(),i={vapidKey:Ii.firebase.vapidKey};n&&(i.serviceWorkerRegistration=n);let o=yield yb(r,i);if(!o)return console.warn("No FCM token returned"),null;let s=kt(this.firestore,"devices",o),a=yield qn(s),u=new Date;return a.exists()?a.data().userId!==e?yield hn(s,{userId:e,lastSeen:u},{merge:!0}):yield hn(s,{lastSeen:u},{merge:!0}):yield hn(s,{userId:e,correo:this.usuarioActual?.correo,token:o,createdAt:u,lastSeen:u,platform:navigator.platform||null,userAgent:navigator.userAgent||null}),localStorage.setItem("fcm_token",o),o}catch(n){return console.error("FCM permission/token error",n),null}})}ensureDeviceSaved(e){return v(this,null,function*(){let n=localStorage.getItem("fcm_token");if(n)try{let r=kt(this.firestore,"devices",n),i=yield qn(r);if(i.exists())return i.data().userId!==e?yield hn(r,{userId:e,lastSeen:new Date},{merge:!0}):yield hn(r,{lastSeen:new Date},{merge:!0}),n}catch(r){console.error("Error validating local token",r)}return yield this.requestPermissionAndSave(e)})}listenForeground(){try{let e=Sl();vb(e,n=>{console.log("Foreground message:",n)})}catch(e){console.error("Error listening to messages",e)}}static \u0275fac=function(n){return new(n||t)(K(He))};static \u0275prov=G({token:t,factory:t.\u0275fac,providedIn:"root"})};function UG(t,e){if(t&1){let n=bt();N(0,"button",11),W("click",function(){let i=Ve(n).$implicit,o=te();return je(o.seleccionar(i.ruta))}),F(1),P()}if(t&2){let n=e.$implicit;L(),Pt(" ",n.titulo," ")}}function BG(t,e){t&1&&(N(0,"div",12)(1,"div",13)(2,"h1"),F(3,"\u{1F381} Amigo Secreto \u{1F381}"),P(),N(4,"p",14),F(5," \xA1Bienvenido al juego del Amigo Secreto! \u{1F389}"),ir(6,"br"),F(7," Cada participante deber\xE1 regalar un obsequio con un valor entre "),N(8,"strong"),F(9,"$50.000"),P(),F(10," y "),N(11,"strong"),F(12,"$100.000"),P(),F(13,". "),P(),N(14,"p",15),F(15," El juego se realizar\xE1 el "),N(16,"strong"),F(17,"10 de octubre"),P(),F(18,"."),ir(19,"br"),F(20," Adem\xE1s, habr\xE1 "),N(21,"strong"),F(22,"1 endulzada de $20.000"),P(),F(23,", que se entregara con el regalo el dia del juego \u{1F36C}. "),P(),N(24,"p",16),F(25," Prep\xE1rate, divi\xE9rtete y disfruta descubriendo qui\xE9n es tu amigo secreto. \xA1Sorpresas y dulces te esperan! "),P()()())}var Ng=class t{firestore=A(He);injector=A(Ae);userSignal=A(Kt);router=A(lr);notificationService=A(Rg);usuario=this.userSignal.usuario;menu=[{titulo:"Preferencias",ruta:"/inicio/preferencias"},{titulo:"Jugadores",ruta:"/inicio/jugadores"},{titulo:"Mi Amigo Secreto",ruta:"/inicio/preferencias?readonly=true"},{titulo:"Mensajes",ruta:"/inicio/chat"}];isChildActive=!1;ngOnInit(){let e=this.usuario();e?.id&&(this.notificationService.registerServiceWorker(),this.notificationService.ensureDeviceSaved(e.id),this.notificationService.listenForeground())}onImgError(e){e.target.src=Vr}onActivate(){this.isChildActive=!0}onDeactivate(){this.isChildActive=!1}seleccionar(e){let[n,r]=e.split("?"),i={};r&&r.split("&").forEach(o=>{let[s,a]=o.split("=");i[s]=a}),this.router.navigate([n],{queryParams:i})}cambiarImagen(){return v(this,null,function*(){let e=prompt("Ingresa la URL de tu nueva imagen:");if(!e)return;let n=this.usuario();if(n)try{let r=qe(this.firestore,"usuarios"),i=Et(r,pn("correo","==",n.correo)),o=yield Qe(i);if(!o.empty){let s=o.docs[0].ref;yield ac(s,{imagen:e})}this.userSignal.setUsuario(X(j({},n),{imagen:e}))}catch(r){console.error("Error al actualizar imagen:",r),alert("Error al actualizar imagen. Revisa la consola.")}})}static \u0275fac=function(n){return new(n||t)};static \u0275cmp=rt({type:t,selectors:[["app-indexlogin"]],decls:16,vars:5,consts:[[1,"container"],[1,"sidebar"],[1,"user-info"],[1,"user-avatar-wrapper"],["alt","Avatar",1,"avatar",3,"error","src"],[1,"camera-btn",3,"click"],[1,"menu"],[3,"click",4,"ngFor","ngForOf"],[1,"content"],["class","game-info",4,"ngIf"],[3,"activate","deactivate"],[3,"click"],[1,"game-info"],[1,"info-container"],[1,"description"],[1,"dates"],[1,"instructions"]],template:function(n,r){if(n&1&&(N(0,"div",0)(1,"aside",1)(2,"div",2)(3,"div",3)(4,"img",4),W("error",function(o){return r.onImgError(o)}),P(),N(5,"button",5),W("click",function(){return r.cambiarImagen()}),F(6,"\u{1F4F7}"),P()(),N(7,"h2"),F(8),P(),N(9,"p"),F(10),P()(),N(11,"nav",6),Ee(12,UG,2,1,"button",7),P()(),N(13,"main",8),Ee(14,BG,26,0,"div",9),N(15,"router-outlet",10),W("activate",function(){return r.onActivate()})("deactivate",function(){return r.onDeactivate()}),P()()()),n&2){let i,o,s;L(4),J("src",(i=r.usuario())==null?null:i.imagen,Gi),L(4),Ue((o=r.usuario())==null?null:o.nombre),L(2),Ue((s=r.usuario())==null?null:s.personaje),L(2),J("ngForOf",r.menu),L(2),J("ngIf",!r.isChildActive)}},dependencies:[dn,ln,ar,os],styles:["[_nghost-%COMP%]{--sidebar-gradient-start: #ff6a00;--sidebar-gradient-end: #ee0979;--sidebar-text-color: #ffffff;--sidebar-border-color: #ffffff;--sidebar-hover-bg: rgba(255,255,255,.2);--content-bg-gradient-start: #ffe6f0;--content-bg-gradient-end: #fff7e6;--content-text-color: #333333;--game-box-bg: rgba(255, 255, 255, .95);--game-box-shadow: rgba(0,0,0,.2);--game-title-color: #ff6a00;--highlight-color: #ee0979;--avatar-border-color: #ffffff;--camera-btn-bg: #ffffff}.container[_ngcontent-%COMP%]{display:flex;height:100vh;font-family:Arial,sans-serif}.sidebar[_ngcontent-%COMP%]{width:25vw;background:linear-gradient(135deg,var(--sidebar-gradient-start),var(--sidebar-gradient-end));color:var(--sidebar-text-color);padding:1.5rem 1rem;display:flex;flex-direction:column;align-items:center;box-shadow:4px 0 8px #0003}.user-info[_ngcontent-%COMP%]{text-align:center;margin-bottom:3rem}.user-info[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:.3rem 0 .2rem;font-size:1.2rem}.user-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:.95rem;opacity:.9}.menu[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%;padding:.7rem;margin-bottom:.5rem;background:transparent;border:2px solid var(--sidebar-border-color);color:var(--sidebar-text-color);border-radius:.5rem;cursor:pointer;font-weight:700;transition:.3s}.menu[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background:var(--sidebar-hover-bg)}.user-avatar-wrapper[_ngcontent-%COMP%]{position:relative;width:100px;height:100px;margin:0 auto}.avatar[_ngcontent-%COMP%]{width:100%;height:100%;border-radius:50%;object-fit:cover;border:3px solid var(--avatar-border-color);box-shadow:0 4px 10px #0000004d}.camera-btn[_ngcontent-%COMP%]{position:absolute;bottom:0;right:0;background:var(--camera-btn-bg);border-radius:50%;border:none;width:28px;height:28px;cursor:pointer;font-size:14px;display:flex;align-items:center;justify-content:center;box-shadow:0 2px 5px #0000004d}.content[_ngcontent-%COMP%]{display:flex;flex:1;width:75vw;height:100vh;background:linear-gradient(135deg,var(--content-bg-gradient-start),var(--content-bg-gradient-end));box-sizing:border-box;overflow-y:auto}.game-info[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;justify-content:center;align-items:center}.info-container[_ngcontent-%COMP%]{max-width:600px;padding:2rem;background:var(--game-box-bg);border-radius:1rem;box-shadow:0 8px 20px var(--game-box-shadow)}.game-info[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:2.5rem;color:var(--game-title-color);margin-bottom:1rem}.game-info[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%], .game-info[_ngcontent-%COMP%]   .dates[_ngcontent-%COMP%], .game-info[_ngcontent-%COMP%]   .instructions[_ngcontent-%COMP%]{font-size:1.1rem;line-height:1.6;color:var(--content-text-color);margin-bottom:1rem}.game-info[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{color:var(--highlight-color)}"]})};var Nb=()=>({standalone:!0});function $G(t,e){t&1&&(N(0,"div",2)(1,"p"),F(2,"\u23F3 Espera el sorteo, a\xFAn no tienes amigo secreto asignado."),P()())}function HG(t,e){t&1&&(N(0,"h1"),F(1,"\u{1F381} Mis Preferencias \u{1F381}"),P())}function qG(t,e){t&1&&(N(0,"h1"),F(1,"\u{1F381} Preferencias de tu amigo secreto \u{1F381}"),P())}function zG(t,e){if(t&1){let n=bt();N(0,"div",8)(1,"h2"),F(2),P(),N(3,"div",9)(4,"img",10),W("error",function(i){Ve(n);let o=te(2);return je(o.onImgError(i))}),P(),N(5,"h3"),F(6),P()()()}if(t&2){let n=te(2);L(2),Pt("Amigo Secreto del sorteo ",n.idSorteo||"N/A"),L(2),J("src",n.imagenAmigo,Gi),L(2),Ue(n.personajeAmigo||"Desconocido")}}function GG(t,e){if(t&1){let n=bt();N(0,"button",19),W("click",function(){Ve(n);let i=te().index,o=te(3);return je(o.removeGusto(i))}),F(1,"\xD7"),P()}}function WG(t,e){if(t&1&&(N(0,"span"),F(1),Ee(2,GG,2,0,"button",18),P()),t&2){let n=e.$implicit,r=te(3);L(),Pt(" ",n," "),L(),J("ngIf",!r.readonly)}}function KG(t,e){if(t&1){let n=bt();N(0,"button",19),W("click",function(){Ve(n);let i=te().index,o=te(3);return je(o.removeNoGusto(i))}),F(1,"\xD7"),P()}}function QG(t,e){if(t&1&&(N(0,"span"),F(1),Ee(2,KG,2,0,"button",18),P()),t&2){let n=e.$implicit,r=te(3);L(),Pt(" ",n," "),L(),J("ngIf",!r.readonly)}}function YG(t,e){if(t&1){let n=bt();N(0,"button",19),W("click",function(){Ve(n);let i=te().index,o=te(3);return je(o.removeRegalo(i))}),F(1,"\xD7"),P()}}function JG(t,e){if(t&1&&(N(0,"span"),F(1),Ee(2,YG,2,0,"button",18),P()),t&2){let n=e.$implicit,r=te(3);L(),Pt(" ",n," "),L(),J("ngIf",!r.readonly)}}function ZG(t,e){if(t&1){let n=bt();N(0,"form",11),W("submit",function(){Ve(n);let i=te(2);return je(i.guardarPreferencias())}),N(1,"label"),F(2," Que dulces te gustan "),N(3,"input",12),xe("ngModelChange",function(i){Ve(n);let o=te(2);return Oe(o.dulcesGustanInput,i)||(o.dulcesGustanInput=i),je(i)}),W("keydown",function(i){Ve(n);let o=te(2);return je(o.addGusto(i))}),P()(),N(4,"div",13),Ee(5,WG,3,2,"span",14),P(),N(6,"label"),F(7," Que dulces no te gustan "),N(8,"input",12),xe("ngModelChange",function(i){Ve(n);let o=te(2);return Oe(o.dulcesNoGustanInput,i)||(o.dulcesNoGustanInput=i),je(i)}),W("keydown",function(i){Ve(n);let o=te(2);return je(o.addNoGusto(i))}),P()(),N(9,"div",13),Ee(10,QG,3,2,"span",14),P(),N(11,"label"),F(12," Que te gustar\xEDa de regalo "),N(13,"input",15),xe("ngModelChange",function(i){Ve(n);let o=te(2);return Oe(o.regalosInput,i)||(o.regalosInput=i),je(i)}),W("keydown",function(i){Ve(n);let o=te(2);return je(o.addRegalo(i))}),P()(),N(14,"div",16),Ee(15,JG,3,2,"span",14),P(),N(16,"button",17),W("click",function(){Ve(n);let i=te(2);return je(i.guardarPreferencias())}),F(17,"Guardar"),P()()}if(t&2){let n=te(2);L(3),Pe("ngModel",n.dulcesGustanInput),J("ngModelOptions",hu(9,Nb)),L(2),J("ngForOf",n.dulcesGustan),L(3),Pe("ngModel",n.dulcesNoGustanInput),J("ngModelOptions",hu(10,Nb)),L(2),J("ngForOf",n.dulcesNoGustan),L(3),Pe("ngModel",n.regalosInput),J("ngModelOptions",hu(11,Nb)),L(2),J("ngForOf",n.regalos)}}function XG(t,e){if(t&1&&(N(0,"span"),F(1),P()),t&2){let n=e.$implicit;L(),Ue(n)}}function e6(t,e){if(t&1&&(N(0,"span"),F(1),P()),t&2){let n=e.$implicit;L(),Ue(n)}}function t6(t,e){if(t&1&&(N(0,"span"),F(1),P()),t&2){let n=e.$implicit;L(),Ue(n)}}function n6(t,e){if(t&1&&(N(0,"div",20)(1,"h3"),F(2,"Que dulces te gustan"),P(),N(3,"div",13),Ee(4,XG,2,1,"span",14),P(),N(5,"h3"),F(6,"Que dulces no te gustan"),P(),N(7,"div",13),Ee(8,e6,2,1,"span",14),P(),N(9,"h3"),F(10,"Que te gustar\xEDa de regalo"),P(),N(11,"div",16),Ee(12,t6,2,1,"span",14),P()()),t&2){let n=te(2);L(4),J("ngForOf",n.dulcesGustan),L(4),J("ngForOf",n.dulcesNoGustan),L(4),J("ngForOf",n.regalos)}}function r6(t,e){if(t&1&&(N(0,"div",3),Ee(1,HG,2,0,"h1",4)(2,qG,2,0,"h1",4)(3,zG,7,3,"div",5)(4,ZG,18,12,"form",6)(5,n6,13,3,"div",7),P()),t&2){let n=te();L(),J("ngIf",!n.readonly),L(),J("ngIf",n.readonly),L(),J("ngIf",n.readonly),L(),J("ngIf",!n.readonly),L(),J("ngIf",n.readonly)}}var Mg=class t{constructor(e){this.route=e}firestore=A(He);userSignal=A(Kt);correoUsuario;readonly=!1;usuarioActual=this.userSignal.usuario();imagenAmigo;personajeAmigo;idSorteo="";haySorteos=!1;tieneAmigoAsignado=!1;dulcesGustanInput="";dulcesNoGustanInput="";regalosInput="";dulcesGustan=[];dulcesNoGustan=[];regalos=[];ngOnInit(){return v(this,null,function*(){this.route.queryParamMap.subscribe(e=>v(this,null,function*(){if(this.readonly=e.get("readonly")==="true",this.readonly){let n=yield this.buscarCorreoAmigoSecreto();n&&n.correoAmigo?(this.idSorteo=n.idSorteo,this.correoUsuario=n.correoAmigo,this.imagenAmigo=n.imagen,this.personajeAmigo=n.personaje):(this.idSorteo="",this.correoUsuario=void 0,this.imagenAmigo=void 0,this.personajeAmigo=void 0,this.dulcesGustan=[],this.dulcesNoGustan=[],this.regalos=[])}else this.correoUsuario=this.usuarioActual?.correo,this.idSorteo="",this.imagenAmigo=void 0,this.personajeAmigo=void 0;yield this.cargarPreferencias()}))})}onImgError(e){e.target.src=Vr}buscarCorreoAmigoSecreto(){return v(this,null,function*(){let n=this.usuarioActual?.id;if(!n)return console.warn("No user ID to search for draws"),this.haySorteos=!1,this.tieneAmigoAsignado=!1,null;try{let r=qe(this.firestore,"sorteo"),i=Et(r,pn("idUsuario","==",n)),o=yield Qe(i);if(o.empty)return this.haySorteos=!1,this.tieneAmigoAsignado=!1,null;this.haySorteos=!0;let a=o.docs.map(y=>y.data()).sort((y,D)=>D.idSorteo.localeCompare(y.idSorteo))[0];if(!a.idAmigo)return this.tieneAmigoAsignado=!1,null;this.tieneAmigoAsignado=!0;let u=kt(this.firestore,"usuarios",a.idAmigo),l=yield qn(u),f="",p="Unknown",g="";if(l.exists()){let y=l.data();f=y.imagen||Vr,p=y.personaje||p,g=y.correo||""}return{idSorteo:a.idSorteo,amigoId:a.idAmigo,imagen:f,personaje:p,correoAmigo:g}}catch(r){return console.error("Error searching and loading secret friend:",r),this.haySorteos=!1,this.tieneAmigoAsignado=!1,null}})}cargarPreferencias(){return v(this,null,function*(){let e=this.correoUsuario;if(!e){this.dulcesGustan=[],this.dulcesNoGustan=[],this.regalos=[];return}try{let n=kt(this.firestore,"preferencias",e),r=yield qn(n);if(r.exists()){let i=r.data();this.dulcesGustan=i.dulcesGustan||[],this.dulcesNoGustan=i.dulcesNoGustan||[],this.regalos=i.regalos||[]}else this.dulcesGustan=[],this.dulcesNoGustan=[],this.regalos=[]}catch(n){console.error("Error al cargar las preferencias:",n),this.dulcesGustan=[],this.dulcesNoGustan=[],this.regalos=[]}})}addGusto(e){this.readonly||(e.key==="Enter"||e.key==="NumpadEnter")&&this.dulcesGustanInput.trim()&&(this.dulcesGustan.push(this.dulcesGustanInput.trim()),this.dulcesGustanInput="",e.preventDefault())}addNoGusto(e){this.readonly||(e.key==="Enter"||e.key==="NumpadEnter")&&this.dulcesNoGustanInput.trim()&&(this.dulcesNoGustan.push(this.dulcesNoGustanInput.trim()),this.dulcesNoGustanInput="")}addRegalo(e){this.readonly||(e.key==="Enter"||e.key==="NumpadEnter")&&this.regalosInput.trim()&&(this.regalos.push(this.regalosInput.trim()),this.regalosInput="")}removeGusto(e){this.readonly||this.dulcesGustan.splice(e,1)}removeNoGusto(e){this.readonly||this.dulcesNoGustan.splice(e,1)}removeRegalo(e){this.readonly||this.regalos.splice(e,1)}guardarPreferencias(){return v(this,null,function*(){if(this.readonly)return;let e=this.usuarioActual?.correo;if(e)try{let n=kt(this.firestore,"preferencias",e);yield hn(n,{correo:e,dulcesGustan:this.dulcesGustan,dulcesNoGustan:this.dulcesNoGustan,regalos:this.regalos}),alert("\u2705 Preferencias guardadas correctamente!")}catch(n){console.error("Error al guardar las preferencias:",n),alert("Error al guardar preferencias. Revisa la consola.")}})}static \u0275fac=function(n){return new(n||t)(ne(ur))};static \u0275cmp=rt({type:t,selectors:[["app-preferencias"]],inputs:{correoUsuario:"correoUsuario",readonly:"readonly"},decls:2,vars:2,consts:[["class","espera-sorteo",4,"ngIf"],["class","preferencias-container",4,"ngIf"],[1,"espera-sorteo"],[1,"preferencias-container"],[4,"ngIf"],["class","amigo-secreto-box",4,"ngIf"],[3,"submit",4,"ngIf"],["class","readonly-preferences",4,"ngIf"],[1,"amigo-secreto-box"],[1,"amigo-secreto-info"],[1,"amigo-avatar",3,"error","src"],[3,"submit"],["type","text","tabindex","-1","placeholder","Agregar dulce y presiona Enter",3,"ngModelChange","keydown","ngModel","ngModelOptions"],[1,"tags"],[4,"ngFor","ngForOf"],["type","text","tabindex","-1","placeholder","Agregar regalo y presiona Enter",3,"ngModelChange","keydown","ngModel","ngModelOptions"],[1,"tags-vertical"],["type","button",3,"click"],["class","tag-close","type","button",3,"click",4,"ngIf"],["type","button",1,"tag-close",3,"click"],[1,"readonly-preferences"]],template:function(n,r){n&1&&Ee(0,$G,3,0,"div",0)(1,r6,6,5,"div",1),n&2&&(J("ngIf",r.readonly&&!r.haySorteos),L(),J("ngIf",!(r.readonly&&!r.haySorteos)))},dependencies:[dn,ln,ar,Gn,yo,gn,zn,mo,An,bi],styles:["[_nghost-%COMP%]{width:100%;height:100%;display:flex;justify-content:center;align-items:center;text-align:center;--bg-primary: #ff6a00;--bg-secondary: #ee0979;--bg-tertiary: #f9f0ff;--text-primary: #fff;--text-secondary: #333;--accent-color: #9c27b0;--border-radius: .5rem;--tag-radius: .3rem;--input-padding: .5rem;--button-padding: .7rem 1rem}.preferencias-container[_ngcontent-%COMP%]{padding:2rem;font-family:Arial,sans-serif}label[_ngcontent-%COMP%]{display:block;margin-bottom:1rem}input[_ngcontent-%COMP%]{width:100%;padding:var(--input-padding);margin-top:.3rem}.tags[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:inline-block;background:var(--bg-secondary);color:var(--text-primary);border-radius:var(--tag-radius);padding:.2rem .5rem;margin:.2rem}.tags-vertical[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:block;background:var(--bg-primary);color:var(--text-primary);border-radius:var(--tag-radius);padding:.2rem .5rem;margin:.2rem 0}button[_ngcontent-%COMP%]{margin-top:1rem;padding:var(--button-padding);background:var(--bg-primary);color:var(--text-primary);border:none;border-radius:var(--border-radius);cursor:pointer;font-weight:700;transition:.3s}button[_ngcontent-%COMP%]:hover{background:var(--bg-secondary)}.amigo-secreto-box[_ngcontent-%COMP%]{border:2px dashed var(--accent-color);padding:1rem;margin-bottom:2rem;background-color:var(--bg-tertiary);text-align:center;border-radius:12px}.amigo-secreto-info[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;margin-top:1rem}.amigo-avatar[_ngcontent-%COMP%]{width:100px;height:100px;border-radius:50%;object-fit:cover;border:3px solid var(--accent-color);margin-bottom:.5rem}.espera-sorteo[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{text-align:center;font-size:1rem;color:var(--text-secondary)}.tag-close[_ngcontent-%COMP%]{background:none;border:none;color:var(--text-primary);font-weight:700;margin-left:.5rem;cursor:pointer;font-size:1rem;line-height:1;padding:0;margin-top:0}.tag-close[_ngcontent-%COMP%]:hover{color:#fff;background:#fff3;border-radius:50%}"]})};function i6(t,e){if(t&1){let n=bt();N(0,"div",2)(1,"div",3)(2,"img",4),W("error",function(i){Ve(n);let o=te();return je(o.onImgError(i))}),P()(),N(3,"h2"),F(4),P()()}if(t&2){let n=e.$implicit;L(2),J("src",n.imagen,Gi),L(2),Ue(n.personaje)}}var Pg=class t{firestore=A(He);injector=A(Ae);userSignal=A(Kt);usuarios=It([]);ngOnInit(){return v(this,null,function*(){try{let e=qe(this.firestore,"usuarios"),n=Et(e);yield ve(this.injector,()=>v(this,null,function*(){let r=yield Qe(n);this.usuarios.set(r.docs.map(i=>{let o=i.data();return o.imagen=o.imagen||Vr,o}))}))}catch(e){console.error("Error fetching users:",e)}})}onImgError(e){e.target.src=Vr}getFechaLegible(e){if(!e)return"Sin fecha";try{return(typeof e.toDate=="function"?e.toDate():new Date(e)).toLocaleString("es-ES",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"})}catch(n){return console.error("Error al formatear fecha:",n),"Fecha inv\xE1lida"}}static \u0275fac=function(n){return new(n||t)};static \u0275cmp=rt({type:t,selectors:[["app-userscardsgrid"]],decls:2,vars:1,consts:[[1,"users-container"],["class","user-card",4,"ngFor","ngForOf"],[1,"user-card"],[1,"avatar-wrapper"],["alt","Avatar",1,"avatar",3,"error","src"]],template:function(n,r){n&1&&(N(0,"div",0),Ee(1,i6,5,2,"div",1),P()),n&2&&(L(),J("ngForOf",r.usuarios()))},dependencies:[dn,ln],styles:['[_nghost-%COMP%]{display:flex;--color-bg-card: #ffffff;--color-shadow: rgba(0, 0, 0, .1);--color-shadow-hover: rgba(0, 0, 0, .15);--color-border-avatar: #ff6a00;--color-heading: #333333;--color-text: #555555;--shadow-default: 0 4px 15px var(--color-shadow);--shadow-hover: 0 10px 25px var(--color-shadow-hover);--radius-lg: 1rem;--radius-full: 50%;--gap-grid: 1.5rem;--padding-container: 2rem;--padding-card: 1.5rem}.users-container[_ngcontent-%COMP%]{width:75vw;display:grid;grid-template-columns:repeat(auto-fit,minmax(250px,1fr));gap:var(--gap-grid);padding:var(--padding-container);margin:auto;box-sizing:border-box;padding:5%}.user-card[_ngcontent-%COMP%]{background:linear-gradient(135deg,var(--content-bg-gradient-start),var(--content-bg-gradient-end));border-radius:var(--radius-lg);box-shadow:0 8px 20px var(--game-box-shadow);padding:2rem;text-align:center;transition:transform .3s ease,box-shadow .3s ease,background .3s ease;position:relative;overflow:hidden}.user-card[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:0;width:100%;height:5px;background:linear-gradient(to right,var(--sidebar-gradient-start),var(--sidebar-gradient-end));border-top-left-radius:var(--radius-lg);border-top-right-radius:var(--radius-lg)}.user-card[_ngcontent-%COMP%]:hover{transform:translateY(-8px);box-shadow:0 12px 30px var(--game-box-shadow);background:linear-gradient(135deg,var(--content-bg-gradient-end),var(--content-bg-gradient-start))}.avatar[_ngcontent-%COMP%]{width:100px;height:100px;border-radius:var(--radius-full);object-fit:cover;margin-bottom:1rem;border:3px solid var(--color-border-avatar)}h2[_ngcontent-%COMP%]{margin:.5rem 0;font-size:1.2rem;color:var(--color-heading)}p[_ngcontent-%COMP%]{margin:.25rem 0;color:var(--color-text);font-size:.95rem}']})};function o6(t,e){if(t&1&&(N(0,"div")(1,"h3"),F(2,"Comando cURL:"),P(),N(3,"pre"),F(4),P()()),t&2){let n=te();L(4),Ue(n.comandoGenerado)}}function s6(t,e){if(t&1&&(N(0,"li"),F(1),P()),t&2){let n=e.$implicit;L(),$f(" ",n.personaje," \u2192 ",n.amigo," ")}}function a6(t,e){if(t&1&&(N(0,"div")(1,"h3"),F(2),P(),N(3,"ul"),Ee(4,s6,2,2,"li",6),P()()),t&2){let n=e.$implicit;L(2),Pt("Asignaciones del sorteo ",n.idSorteo,":"),L(2),J("ngForOf",n.asignaciones)}}var xg=class t{firestore=A(He);tokenFCM="";comandoGenerado="";mensaje="";sorteos=[];ngOnInit(){return v(this,null,function*(){yield this.cargarTodosSorteos()})}cargarTodosSorteos(){return v(this,null,function*(){try{let e=qe(this.firestore,"sorteo"),n=Et(e,dg("idSorteo","desc")),i=(yield Qe(n)).docs.map(f=>f.data());if(i.length===0){this.mensaje="No hay sorteos realizados a\xFAn.",this.sorteos=[];return}let o=qe(this.firestore,"usuarios"),a=(yield Qe(o)).docs.map(f=>({id:f.id,personaje:f.data().personaje})),u=new Map;a.forEach(f=>u.set(f.id,f.personaje));let l=new Map;i.forEach(f=>{let p=f.idSorteo;l.has(p)||l.set(p,[]),l.get(p).push(f)}),this.sorteos=[],l.forEach((f,p)=>{let g=f.map(y=>({personaje:u.get(y.idUsuario)||y.idUsuario,amigo:u.get(y.idAmigo)||y.idAmigo}));g=this.ordenarCadenaEnlazada(g),this.sorteos.push({idSorteo:p,asignaciones:g})}),this.sorteos.sort((f,p)=>p.idSorteo.localeCompare(f.idSorteo)),this.mensaje=`Cargados ${this.sorteos.length} sorteos.`}catch(e){console.error("Error cargando sorteos:",e),this.mensaje="Error cargando sorteos."}})}ordenarCadenaEnlazada(e){if(e.length===0)return e;let n=new Map;e.forEach(o=>{n.set(o.personaje,o)});let r=[],i=e[0].personaje;for(let o=0;o<e.length;o++){let s=n.get(i);if(!s)break;r.push(s),i=s.amigo}return r}ejecutarSorteo(){return v(this,null,function*(){try{let e=qe(this.firestore,"usuarios"),r=(yield Qe(e)).docs.map(u=>j({id:u.id},u.data()));if(r.length<2){this.mensaje="\u274C No hay suficientes usuarios para el sorteo";return}let i=[...r].sort(()=>Math.random()-.5),o=new Date,s=""+o.getFullYear().toString()+String(o.getMonth()+1).padStart(2,"0")+String(o.getDate()).padStart(2,"0")+String(o.getHours()).padStart(2,"0")+String(o.getMinutes()).padStart(2,"0")+String(o.getSeconds()).padStart(2,"0"),a=qe(this.firestore,"sorteo");for(let u=0;u<i.length;u++){let l=i[u],f=i[(u+1)%i.length];yield sc(a,{idSorteo:s,idUsuario:l.id,idAmigo:f.id,personajeUsuario:l.personaje,personajeAmigo:f.personaje})}this.mensaje="\u2705 Sorteo realizado con \xE9xito",yield this.cargarTodosSorteos()}catch(e){console.error("Error al ejecutar sorteo:",e),this.mensaje="\u274C Error al ejecutar sorteo. Ver consola."}})}generarComandoCurlNotificacion(){return v(this,null,function*(){try{let e=qe(this.firestore,"devices"),r=(yield Qe(e)).docs.map(o=>o.id);if(r.length===0){this.mensaje="\u26A0\uFE0F No hay dispositivos registrados en FCM";return}let i={message:{token:r[0],notification:{title:"Hola desde FCM \u{1F680}",body:"Tu notificaci\xF3n push est\xE1 funcionando!"}}};this.comandoGenerado=`curl -X POST https://fcm.googleapis.com/v1/projects/webapp-amigo-secreto/messages:send \\
    -H "Authorization: Bearer ${this.tokenFCM}" \\
    -H "Content-Type: application/json; UTF-8" \\
    -d '${JSON.stringify(i)}'`,this.mensaje="\u2705 Comando cURL generado."}catch(e){console.error("Error generando comando cURL:",e),this.mensaje="\u274C Error generando comando cURL. Ver consola."}})}static \u0275fac=function(n){return new(n||t)};static \u0275cmp=rt({type:t,selectors:[["app-ejecutarsorteo"]],decls:13,vars:4,consts:[[1,"sorteo-container"],["for","token"],["id","token","type","text","placeholder","Ingresa el token FCM",3,"ngModelChange","ngModel"],[1,"btn-group"],[3,"click"],[4,"ngIf"],[4,"ngFor","ngForOf"]],template:function(n,r){n&1&&(N(0,"div",0)(1,"label",1),F(2,"Token FCM:"),P(),N(3,"input",2),xe("ngModelChange",function(o){return Oe(r.tokenFCM,o)||(r.tokenFCM=o),o}),P(),N(4,"div",3)(5,"button",4),W("click",function(){return r.generarComandoCurlNotificacion()}),F(6,"Generar comando cURL"),P(),N(7,"button",4),W("click",function(){return r.ejecutarSorteo()}),F(8,"Ejecutar Sorteo"),P()(),Ee(9,o6,5,1,"div",5),N(10,"h2"),F(11),P(),Ee(12,a6,5,2,"div",6),P()),n&2&&(L(3),Pe("ngModel",r.tokenFCM),L(6),J("ngIf",r.comandoGenerado),L(2),Ue(r.mensaje),L(),J("ngForOf",r.sorteos))},dependencies:[dn,ln,ar,Gn,gn,zn,An],styles:['.sorteo-container[_ngcontent-%COMP%]{max-width:700px;margin:2rem auto;padding:2rem;background:#fff;border-radius:14px;box-shadow:0 8px 20px #0000001f;font-family:Segoe UI,Tahoma,Geneva,Verdana,sans-serif;color:#333}.sorteo-container[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;font-weight:600;margin-bottom:.5rem;color:#2c3e50}.sorteo-container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;padding:.7rem 1rem;font-size:1rem;border:1px solid #ccd6dd;border-radius:8px;margin-bottom:1.5rem;outline:none;transition:all .3s ease;box-shadow:0 2px 5px #0000000d}.sorteo-container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{border-color:#4a90e2;box-shadow:0 0 0 3px #4a90e240}.sorteo-container[_ngcontent-%COMP%]   .btn-group[_ngcontent-%COMP%]{display:flex;gap:1rem;margin-bottom:1.5rem}.sorteo-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{flex:1;background:linear-gradient(135deg,#4a90e2,#357abd);color:#fff;border:none;padding:.8rem 1.2rem;font-size:1rem;font-weight:600;border-radius:8px;cursor:pointer;transition:all .3s ease;box-shadow:0 4px 10px #4a90e24d}.sorteo-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#357abd,#2d5ea8);box-shadow:0 6px 14px #357abd80;transform:translateY(-2px)}.sorteo-container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{text-align:center;margin:2rem 0 1rem;font-weight:700;color:#2c3e50}.sorteo-container[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{background-color:#4a90e2;color:#fff;padding:.6rem 1rem;border-radius:8px;margin-top:2rem;margin-bottom:.8rem;font-weight:700;box-shadow:0 3px 8px #4a90e280}.sorteo-container[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{list-style-type:none;padding-left:0;border-left:3px solid #4a90e2;margin-left:.5rem}.sorteo-container[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{background:#fdfdfd;margin-bottom:.6rem;padding:.8rem 1rem;border-radius:8px;box-shadow:0 2px 6px #00000014;font-weight:500;font-size:1rem;color:#34495e;transition:background-color .2s ease,transform .2s ease}.sorteo-container[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover{background-color:#e6f0fa;transform:translate(4px)}.sorteo-container[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:before{content:"\\1f3b2  "}pre[_ngcontent-%COMP%]{white-space:pre-wrap;word-wrap:break-word;overflow-x:auto;font-family:monospace;padding:1rem;background:#f4f4f4;border-radius:8px;font-size:.9rem;line-height:1.4}']})};var kg=class t{firestore=A(He);injector=A(Ae);chatId(e,n){return`chat_${e}_to_${n}`}ensureChat(e,n){return v(this,null,function*(){let r=this.chatId(e,n),i=kt(this.firestore,"chats",r);return yield ve(this.injector,()=>v(this,null,function*(){return(yield qn(i)).exists()?yield hn(i,{updatedAt:po()},{merge:!0}):yield hn(i,{ownerId:e,peerId:n,participants:[e,n],createdAt:po(),updatedAt:po()}),r}))})}sendMessage(e,n,r,i){return v(this,null,function*(){let o=yield this.ensureChat(e,n),s=qe(this.firestore,"chats",o,"messages");yield ve(this.injector,()=>v(this,null,function*(){yield sc(s,{content:i,from:r,timestamp:po(),readBy:[r]});let u=kt(this.firestore,"chats",o);yield hn(u,{lastMessage:i,updatedAt:po()},{merge:!0})}));var a="";r==e?a=n:a=e;try{let u=Ii.functions?.sendNotification;u&&(yield fetch(u,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({toUserId:a,title:"Tienes un mensaje nuevo en la app de amigo secreto HASSQL",body:i})}))}catch(u){console.warn("Notification call failed (non-fatal)",u)}})}listenMessages(e,n,r,i){let o=this.chatId(e,n),s=Et(qe(this.firestore,"chats",o,"messages"),dg("timestamp","asc"));return ve(this.injector,()=>{let a=lg(s,u=>{let l=u.docs.map(p=>{let g=p.data();return{id:p.id,content:g.content,from:g.from,readBy:g.readBy||[],timestamp:g.timestamp?g.timestamp.toDate?.()??g.timestamp:null}}),f=l.filter(p=>!p.readBy.includes(r)).length;i(l,f)},u=>{console.error("listenMessages error",u),i([],0)});return()=>a()})}markMessagesAsRead(e,n,r){return v(this,null,function*(){let i=this.chatId(e,n),o=qe(this.firestore,"chats",i,"messages"),s=yield Qe(o);for(let a of s.docs){let u=a.data();(!u.readBy||!u.readBy.includes(r))&&(yield ac(a.ref,{readBy:[...u.readBy||[],r]}))}})}findAssignedFriend(e){return v(this,null,function*(){if(!e)return null;try{let n=qe(this.firestore,"sorteo"),r=Et(n,pn("idUsuario","==",e)),i=yield ve(this.injector,()=>v(this,null,function*(){return yield Qe(r)}));if(i.empty)return null;let s=i.docs.map(a=>a.data()).sort((a,u)=>u.idSorteo.localeCompare(a.idSorteo))[0];return s?.idAmigo?{friendId:s.idAmigo,idSorteo:s.idSorteo}:null}catch(n){return console.error("findAssignedFriend error",n),null}})}findWhoDrewMe(e){return v(this,null,function*(){if(!e)return null;try{let n=qe(this.firestore,"sorteo"),r=Et(n,pn("idAmigo","==",e)),i=yield ve(this.injector,()=>v(this,null,function*(){return yield Qe(r)}));if(i.empty)return null;let s=i.docs.map(a=>a.data()).sort((a,u)=>u.idSorteo.localeCompare(a.idSorteo))[0];return s?.idUsuario?{ownerId:s.idUsuario,idSorteo:s.idSorteo}:null}catch(n){return console.error("findWhoDrewMe error",n),null}})}getPublicProfile(e){return v(this,null,function*(){if(!e)return null;try{let n=kt(this.firestore,"usuarios",e),r=yield ve(this.injector,()=>v(this,null,function*(){return yield qn(n)}));if(!r.exists())return null;let i=r.data();return{id:e,personaje:i.personaje??"Jugador",imagen:i.imagen??null}}catch(n){return console.error("getPublicProfile error",n),null}})}static \u0275fac=function(n){return new(n||t)};static \u0275prov=G({token:t,factory:t.\u0275fac,providedIn:"root"})};function c6(t,e){if(t&1&&(N(0,"span",12),F(1),P()),t&2){let n=te(2);L(),Ue(n.unreadOut)}}function u6(t,e){if(t&1){let n=bt();N(0,"button",10),W("click",function(){Ve(n);let i=te();return je(i.selectTab("out"))}),F(1),Ee(2,c6,2,1,"span",11),P()}if(t&2){let n=te();jn("active",n.activeTab==="out"),L(),Pt(" To: ",n.outgoingPersonaje||"Amigo"," "),L(),J("ngIf",n.unreadOut>0)}}function l6(t,e){if(t&1&&(N(0,"span",12),F(1),P()),t&2){let n=te(2);L(),Ue(n.unreadIn)}}function d6(t,e){if(t&1){let n=bt();N(0,"button",10),W("click",function(){Ve(n);let i=te();return je(i.selectTab("in"))}),F(1," From: Amigo secreto "),Ee(2,l6,2,1,"span",11),P()}if(t&2){let n=te();jn("active",n.activeTab==="in"),L(2),J("ngIf",n.unreadIn>0)}}function f6(t,e){t&1&&(N(0,"div",13),F(1,"No hay chats asignados a\xFAn."),P())}function h6(t,e){if(t&1&&(N(0,"div",21),F(1),P()),t&2){let n=te().$implicit,r=te();L(),Pt(" ",n.readBy!=null&&n.readBy.includes(r.peerOutgoing)?"Le\xEDdo":"Enviado"," ")}}function p6(t,e){if(t&1&&(N(0,"div",14)(1,"div",15)(2,"div",16)(3,"span",17),F(4),P(),N(5,"span",18),F(6),Bv(7,"date"),P()(),N(8,"div",19),F(9),P(),Ee(10,h6,2,1,"div",20),P()()),t&2){let n=e.$implicit,r=te();jn("mine",r.isMine(n)),L(4),Ue(r.displaySenderLabel(n)),L(2),Ue(n.timestamp?$v(7,6,n.timestamp,"short"):""),L(3),Ue(n.content),L(),J("ngIf",r.isMine(n))}}function g6(t,e){if(t&1){let n=bt();N(0,"form",22),W("submit",function(i){Ve(n);let o=te();return je(o.onSend(i))}),N(1,"input",23),xe("ngModelChange",function(i){Ve(n);let o=te();return Oe(o.newMessage,i)||(o.newMessage=i),je(i)}),P(),N(2,"button",24),F(3,"Enviar"),P()()}if(t&2){let n=te();L(),Pe("ngModel",n.newMessage)}}var Og=class t{messagesService=A(kg);userSignal=A(Kt);currentUser=null;currentPersonaje="";ownerOutgoing="";peerOutgoing="";outgoingPersonaje="";unreadOut=0;unreadIn=0;ownerIncoming="";peerIncoming="";incomingPersonaje="";activeTab=null;messages=[];newMessage="";unsubs=[];unsub=null;get hasOutgoing(){return!!this.peerOutgoing}get hasIncoming(){return!!this.ownerIncoming}get hasAny(){return this.hasOutgoing||this.hasIncoming}ngOnInit(){return v(this,null,function*(){this.currentUser=this.userSignal.usuario(),this.currentPersonaje=this.currentUser?.personaje??"Jugador";let e=this.currentUser?.id;if(!e)return;let n=yield this.messagesService.findAssignedFriend(e);if(n?.friendId){this.ownerOutgoing=e,this.peerOutgoing=n.friendId;let i=yield this.messagesService.getPublicProfile(this.peerOutgoing);this.outgoingPersonaje=i?.personaje??"Jugador"}let r=yield this.messagesService.findWhoDrewMe(e);r?.ownerId&&(this.ownerIncoming=r.ownerId,this.peerIncoming=e,this.incomingPersonaje=""),this.hasOutgoing?this.selectTab("out"):this.hasIncoming&&this.selectTab("in"),this.ownerOutgoing&&this.peerOutgoing&&this.messagesService.listenMessages(this.ownerOutgoing,this.peerOutgoing,this.currentUser.id,(i,o)=>this.unreadOut=o),this.ownerIncoming&&this.peerIncoming&&this.messagesService.listenMessages(this.ownerIncoming,this.peerIncoming,this.currentUser.id,(i,o)=>this.unreadIn=o)})}ngOnDestroy(){this.unsubs.forEach(e=>e()),this.unsubs=[]}selectTab(e){this.unsub&&(this.unsub(),this.unsub=null),this.messages=[],this.activeTab=e;let n="",r="";e==="out"?(n=this.ownerOutgoing,r=this.peerOutgoing):(n=this.ownerIncoming,r=this.peerIncoming),!(!n||!r)&&(this.unsub=this.messagesService.listenMessages(n,r,this.currentUser.id,(i,o)=>{this.messages=i,e==="out"?this.unreadOut=o:this.unreadIn=o,setTimeout(()=>{let s=document.querySelector(".messages-list");s&&(s.scrollTop=s.scrollHeight)},50),this.messagesService.markMessagesAsRead(n,r,this.currentUser.id)}),this.unsubs.push(this.unsub))}isMine(e){return e.from===(this.currentUser?.id??"")}displaySenderLabel(e){return this.isMine(e)?"T\xFA":"Amigo secreto"}onSend(e){return v(this,null,function*(){e.preventDefault();let n=this.newMessage?.trim();if(!n)return;let r="",i="";this.activeTab==="out"?(r=this.ownerOutgoing,i=this.peerOutgoing):this.activeTab==="in"&&(r=this.ownerIncoming,i=this.peerIncoming),!(!r||!i)&&(yield this.messagesService.sendMessage(r,i,this.currentUser.id,n),this.newMessage="")})}static \u0275fac=function(n){return new(n||t)};static \u0275cmp=rt({type:t,selectors:[["app-messages"]],decls:14,vars:6,consts:[[1,"messages-page"],[1,"messages-header"],[1,"header-left"],[1,"sub"],[1,"chat-tabs"],[3,"active","click",4,"ngIf"],["role","log","aria-live","polite",1,"messages-list"],["class","empty",4,"ngIf"],["class","msg-row",3,"mine",4,"ngFor","ngForOf"],["class","composer",3,"submit",4,"ngIf"],[3,"click"],["class","badge",4,"ngIf"],[1,"badge"],[1,"empty"],[1,"msg-row"],[1,"msg-bubble"],[1,"msg-meta"],[1,"sender"],[1,"time"],[1,"msg-text"],["class","msg-status",4,"ngIf"],[1,"msg-status"],[1,"composer",3,"submit"],["type","text","name","msg","placeholder","Escribe tu mensaje...","autocomplete","off",3,"ngModelChange","ngModel"],["type","submit"]],template:function(n,r){n&1&&(N(0,"div",0)(1,"header",1)(2,"div",2)(3,"h2"),F(4),P(),N(5,"p",3),F(6,"Mensajes \u2014 Amigo Secreto"),P()(),N(7,"div",4),Ee(8,u6,3,4,"button",5)(9,d6,3,3,"button",5),P()(),N(10,"section",6),Ee(11,f6,2,0,"div",7)(12,p6,11,9,"div",8),P(),Ee(13,g6,4,1,"form",9),P()),n&2&&(L(4),Ue(r.currentPersonaje||"Jugador"),L(4),J("ngIf",r.hasOutgoing),L(),J("ngIf",r.hasIncoming),L(2),J("ngIf",!r.hasAny),L(),J("ngForOf",r.messages),L(),J("ngIf",r.hasAny))},dependencies:[dn,ln,ar,Gn,yo,gn,zn,mo,An,bi,r_],styles:["[_nghost-%COMP%]{width:100%;height:100%}.messages-page[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.75rem;height:100%;min-height:60vh;font-family:Arial,sans-serif}.messages-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:.6rem;background:linear-gradient(90deg,var(--sidebar-gradient-start),var(--sidebar-gradient-end));color:#fff}.chat-tabs[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-left:.5rem;padding:.35rem .6rem;border-radius:6px;border:none;cursor:pointer;background:#ffffff1f;color:#fff}.chat-tabs[_ngcontent-%COMP%]   button.active[_ngcontent-%COMP%]{background:#0000001f;font-weight:700;box-shadow:0 2px 6px #00000026}.badge[_ngcontent-%COMP%]{background:red;color:#fff;border-radius:50%;padding:2px 6px;font-size:.8em;margin-left:6px}.messages-list[_ngcontent-%COMP%]{flex:1 1 auto;overflow-y:auto;padding:1rem;display:flex;flex-direction:column;gap:.5rem;background:linear-gradient(180deg,#fff,#f7fbff);border-radius:8px}.msg-status[_ngcontent-%COMP%]{font-size:.75rem;color:var(--color-text-secondary, #888);text-align:right;margin-top:4px}.empty[_ngcontent-%COMP%]{text-align:center;color:#666;padding:2rem}.msg-row[_ngcontent-%COMP%]{display:flex}.msg-row.mine[_ngcontent-%COMP%]{justify-content:flex-end}.msg-bubble[_ngcontent-%COMP%]{max-width:75%;background:#fff;padding:.6rem .9rem;border-radius:12px;box-shadow:0 3px 8px #0000000f}.msg-row.mine[_ngcontent-%COMP%]   .msg-bubble[_ngcontent-%COMP%]{background:linear-gradient(90deg,#ffdede,#ffe6f0)}.msg-meta[_ngcontent-%COMP%]{font-size:.75rem;color:#666;display:flex;justify-content:space-between;gap:.5rem;margin-bottom:.25rem}.msg-text[_ngcontent-%COMP%]{font-size:1rem;color:#222}.composer[_ngcontent-%COMP%]{display:flex;gap:.5rem;align-items:center;margin-top:.5rem}.composer[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{flex:1;padding:.7rem;border-radius:8px;border:1px solid #ddd;outline:none}.composer[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:.65rem 1rem;border-radius:8px;background:linear-gradient(90deg,#4a90e2,#357abd);color:#fff;border:none;cursor:pointer}"]})};function m6(t,e){if(t&1&&(N(0,"small",30),F(1),P()),t&2){let n=te().$implicit;L(),Ue(n.unreadCount)}}function y6(t,e){if(t&1){let n=bt();N(0,"li",27),W("click",function(){let i=Ve(n).$implicit;return je(i.selected=!i.selected)}),N(1,"span",28),F(2),P(),Ee(3,m6,2,1,"small",29),P()}if(t&2){let n=e.$implicit;jn("ns-selected",n.selected),L(2),Ue(n.personaje||n.nombre),L(),J("ngIf",n.unreadCount&&n.unreadCount>0)}}function v6(t,e){t&1&&(N(0,"li",31),F(1,"No hay usuarios para este filtro."),P())}function _6(t,e){if(t&1&&(N(0,"small",30),F(1),P()),t&2){let n=te().$implicit;L(),Ue(n.unreadCount)}}function E6(t,e){if(t&1){let n=bt();N(0,"li",27),W("click",function(){let i=Ve(n).$implicit;return je(i.selected=!i.selected)}),N(1,"span",28),F(2),P(),Ee(3,_6,2,1,"small",29),P()}if(t&2){let n=e.$implicit;jn("ns-selected-right",n.selected),L(2),Ue(n.personaje||n.nombre),L(),J("ngIf",n.unreadCount&&n.unreadCount>0)}}function w6(t,e){t&1&&(N(0,"li",31),F(1,"No hay seleccionados."),P())}var Fg=class t{firestore=A(He);http=A(lh);usuariosDisponibles=[];usuariosFiltrados=[];usuariosSeleccionados=[];filtro="todos";titulo="";cuerpo="";cargando=!1;logs=[];constructor(){this.loadUsersWithDevices().catch(e=>{console.error("Error cargando usuarios con devices",e),this.logs.unshift(`[${new Date().toISOString()}] Error cargando usuarios: ${e?.message||e}`)})}loadUsersWithDevices(){return v(this,null,function*(){this.usuariosDisponibles=[];try{let e=qe(this.firestore,"devices"),n=yield Qe(e),r=new Set;n.forEach(o=>{let s=o.data();s?.userId&&r.add(s.userId)});let i=[];for(let o of Array.from(r))try{let s=kt(this.firestore,"usuarios",o),a=yield qn(s),u=a.exists()?a.data():null,l=u?.personaje||u?.nombre||"Jugador",f=kt(this.firestore,"preferencias",o),g=(yield qn(f)).exists(),y=0;try{let D=qe(this.firestore,"chats"),x=Et(D,pn("participants","array-contains",o));(yield Qe(x)).forEach(O=>{let H=O.data();H?.unread&&typeof H.unread=="object"&&H.unread[o]?y+=Number(H.unread[o])||0:H?.unreadCounts&&typeof H.unreadCounts=="object"&&H.unreadCounts[o]?y+=Number(H.unreadCounts[o])||0:typeof H?.unreadCountForUser=="object"&&H.unreadCountForUser[o]?y+=Number(H.unreadCountForUser[o])||0:typeof H?.unread=="number"&&(y+=Number(H.unread)||0)})}catch(D){console.debug("No se pudo determinar unreadCount para",o,D)}i.push({id:o,nombre:l,personaje:u?.personaje,imagen:u?.imagen??null,hasPreferences:g,unreadCount:y,selected:!1})}catch(s){console.warn("Error cargando usuario",o,s)}this.usuariosDisponibles=i.sort((o,s)=>(o.nombre||"").localeCompare(s.nombre||"")),this.aplicarFiltro()}catch(e){throw console.error("loadUsersWithDevices error",e),e}})}aplicarFiltro(){if(this.filtro==="todos"){let e=new Set(this.usuariosSeleccionados.map(n=>n.id));this.usuariosFiltrados=this.usuariosDisponibles.filter(n=>!e.has(n.id)).map(n=>X(j({},n),{selected:!1}))}else if(this.filtro==="sinPreferencias"){let e=new Set(this.usuariosSeleccionados.map(n=>n.id));this.usuariosFiltrados=this.usuariosDisponibles.filter(n=>!n.hasPreferences&&!e.has(n.id)).map(n=>X(j({},n),{selected:!1}))}else if(this.filtro==="conMensajesNoLeidos"){let e=new Set(this.usuariosSeleccionados.map(r=>r.id));this.usuariosFiltrados=this.usuariosDisponibles.filter(r=>r.unreadCount&&r.unreadCount>0&&!e.has(r.id)).map(r=>X(j({},r),{selected:!1})),this.usuariosDisponibles.some(r=>r.unreadCount&&r.unreadCount>0)||this.logs.unshift(`[${new Date().toISOString()}] Nota: no se detectaron contadores de "no le\xEDdos" en los chats.`)}}mover(e){if(e===">"){let r=this.usuariosFiltrados.filter(o=>o.selected);this.usuariosSeleccionados.push(...r.map(o=>X(j({},o),{selected:!1})));let i=new Set(r.map(o=>o.id));this.usuariosFiltrados=this.usuariosFiltrados.filter(o=>!i.has(o.id))}else if(e==="<"){let r=this.usuariosSeleccionados.filter(o=>o.selected);this.usuariosFiltrados.push(...r.map(o=>X(j({},o),{selected:!1})));let i=new Set(r.map(o=>o.id));this.usuariosSeleccionados=this.usuariosSeleccionados.filter(o=>!i.has(o.id))}else e===">>"?(this.usuariosSeleccionados.push(...this.usuariosFiltrados.map(r=>X(j({},r),{selected:!1}))),this.usuariosFiltrados=[]):e==="<<"&&(this.usuariosFiltrados.push(...this.usuariosSeleccionados.map(r=>X(j({},r),{selected:!1}))),this.usuariosSeleccionados=[]);let n=new Map;this.usuariosSeleccionados.forEach(r=>n.set(r.id,r)),this.usuariosSeleccionados=Array.from(n.values())}enviarNotificaciones(){return v(this,null,function*(){if(!this.titulo.trim()||!this.cuerpo.trim()){alert("Ingresa t\xEDtulo y mensaje antes de enviar.");return}if(this.usuariosSeleccionados.length===0){alert("Selecciona al menos un usuario destino.");return}let e=Ii.functions?.notifyUser||Ii.functions?.sendNotification;if(!e){alert("No est\xE1 configurada la URL de la Cloud Function en environment.functions.notifyUser");return}this.cargando=!0,this.logs.unshift(`[${new Date().toISOString()}] Iniciando env\xEDo a ${this.usuariosSeleccionados.length} usuario(s)...`);for(let n of this.usuariosSeleccionados)try{let r={toUserId:n.id,title:this.titulo,body:this.cuerpo},i=new Dr({"Content-Type":"application/json"}),o=yield Mm(this.http.post(e,r,{headers:i})),s=o?.sent??o?.success?o.sent??(o.success?1:0):0,a=o?.failed??0,u=(o?.devices||[]).map(l=>`${l.token} (${l.status})`).join(", ");this.logs.unshift(`[${new Date().toISOString()}] ${n.nombre}: sent=${s}, failed=${a}`+(u?` \u2014 devices: ${u}`:""))}catch(r){console.error("Error notifyUser for",n.id,r),this.logs.unshift(`[${new Date().toISOString()}] ERROR ${n.nombre}: ${r?.message||r}`)}this.cargando=!1})}refrescarLogs(){let e=`[${new Date().toISOString()}] Refrescado manual de logs`;this.logs.unshift(e)}static \u0275fac=function(n){return new(n||t)};static \u0275cmp=rt({type:t,selectors:[["app-notifications"]],decls:49,vars:10,consts:[[1,"ns-contenedor"],[1,"ns-panel-usuarios"],[1,"ns-lista-contenedor"],[1,"ns-lista-header"],[1,"ns-label"],[1,"ns-select",3,"ngModelChange","change","ngModel"],["value","todos"],["value","sinPreferencias"],["value","conMensajesNoLeidos"],["role","list",1,"ns-lista"],["class","ns-item",3,"ns-selected","click",4,"ngFor","ngForOf"],["class","ns-empty",4,"ngIf"],[1,"ns-controles"],["title","Mover seleccionados \u2192",3,"click"],["title","\u2190 Mover seleccionados",3,"click"],["title","Mover todos \u2192\u2192",3,"click"],["title","\u2190\u2190 Mover todos",3,"click"],[1,"ns-lista"],["class","ns-item",3,"ns-selected-right","click",4,"ngFor","ngForOf"],[1,"ns-formulario"],["placeholder","T\xEDtulo de la notificaci\xF3n",1,"ns-input",3,"ngModelChange","ngModel"],["rows","5","placeholder","Contenido...",1,"ns-textarea",3,"ngModelChange","ngModel"],[1,"ns-actions"],[1,"ns-send",3,"click","disabled"],[1,"btn-secundario",3,"click"],[1,"ns-label",2,"margin-top","0.75rem"],["readonly","","rows","8",1,"ns-logs",3,"value"],[1,"ns-item",3,"click"],[1,"ns-name"],["class","ns-unread",4,"ngIf"],[1,"ns-unread"],[1,"ns-empty"]],template:function(n,r){n&1&&(N(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"label",4),F(5,"Usuarios disponibles"),P(),N(6,"select",5),xe("ngModelChange",function(o){return Oe(r.filtro,o)||(r.filtro=o),o}),W("change",function(){return r.aplicarFiltro()}),N(7,"option",6),F(8,"Todos"),P(),N(9,"option",7),F(10,"Sin preferencias"),P(),N(11,"option",8),F(12,"Con mensajes no le\xEDdos"),P()()(),N(13,"div",9)(14,"ul"),Ee(15,y6,4,4,"li",10)(16,v6,2,0,"li",11),P()()(),N(17,"div",12)(18,"button",13),W("click",function(){return r.mover(">")}),F(19,"\u203A"),P(),N(20,"button",14),W("click",function(){return r.mover("<")}),F(21,"\u2039"),P(),N(22,"button",15),W("click",function(){return r.mover(">>")}),F(23,"\xBB"),P(),N(24,"button",16),W("click",function(){return r.mover("<<")}),F(25,"\xAB"),P()(),N(26,"div",2)(27,"div",3)(28,"label",4),F(29,"Usuarios seleccionados"),P()(),N(30,"div",17)(31,"ul"),Ee(32,E6,4,4,"li",18)(33,w6,2,0,"li",11),P()()()(),N(34,"div",19)(35,"label",4),F(36,"T\xEDtulo"),P(),N(37,"input",20),xe("ngModelChange",function(o){return Oe(r.titulo,o)||(r.titulo=o),o}),P(),N(38,"label",4),F(39,"Mensaje"),P(),N(40,"textarea",21),xe("ngModelChange",function(o){return Oe(r.cuerpo,o)||(r.cuerpo=o),o}),P(),N(41,"div",22)(42,"button",23),W("click",function(){return r.enviarNotificaciones()}),F(43),P(),N(44,"button",24),W("click",function(){return r.refrescarLogs()}),F(45," Refrescar logs "),P()(),N(46,"label",25),F(47,"Logs"),P(),ir(48,"textarea",26),P()()),n&2&&(L(6),Pe("ngModel",r.filtro),L(9),J("ngForOf",r.usuariosFiltrados),L(),J("ngIf",r.usuariosFiltrados.length===0),L(16),J("ngForOf",r.usuariosSeleccionados),L(),J("ngIf",r.usuariosSeleccionados.length===0),L(4),Pe("ngModel",r.titulo),L(3),Pe("ngModel",r.cuerpo),L(2),J("disabled",r.cargando||r.usuariosSeleccionados.length===0),L(),Pt(" ",r.cargando?"Enviando...":"Enviar notificaciones"," "),L(5),J("value",r.logs.join(`
`)))},dependencies:[dn,ln,ar,Gn,rk,ok,gn,Dg,zn,An,__],styles:["[_nghost-%COMP%]{--ns-gap: var(--gap-grid, 1rem);--ns-radius: var(--radius-lg, .75rem);--ns-shadow: var(--shadow-default, 0 6px 18px rgba(0,0,0,.08));--ns-accent: var(--highlight-color, #ee0979);--ns-primary: var(--game-title-color, #ff6a00);--ns-text: var(--content-text-color, #333);display:block}.ns-contenedor[_ngcontent-%COMP%]{display:grid;gap:var(--ns-gap);grid-template-columns:repeat(auto-fit,minmax(340px,1fr));align-items:start;padding:calc(var(--ns-gap) * .6)}.ns-panel-usuarios[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr auto 1fr;gap:.75rem;align-items:start;background:var(--game-box-bg, rgba(255,255,255,.95));padding:1rem;border-radius:var(--ns-radius);box-shadow:var(--ns-shadow)}.ns-lista-contenedor[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.5rem}.ns-lista-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;gap:.5rem}.ns-label[_ngcontent-%COMP%]{font-weight:600;color:var(--ns-text);font-size:.95rem}.ns-select[_ngcontent-%COMP%]{padding:.25rem .5rem;border-radius:6px;border:1px solid rgba(0,0,0,.08);background:#fff}.ns-lista[_ngcontent-%COMP%]{max-height:320px;overflow-y:auto;border-radius:8px;border:1px solid rgba(0,0,0,.04);background:#fff;box-shadow:0 2px 6px #00000008}.ns-lista[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{list-style:none;margin:0;padding:0}.ns-item[_ngcontent-%COMP%]{padding:.55rem .75rem;border-bottom:1px solid rgba(0,0,0,.03);display:flex;justify-content:space-between;align-items:center;cursor:pointer;color:var(--ns-text);font-weight:500;transition:background .15s ease}.ns-item[_ngcontent-%COMP%]:hover{background:#00000005}.ns-selected[_ngcontent-%COMP%]{background:#ee097914;color:var(--ns-primary)}.ns-selected-right[_ngcontent-%COMP%]{background:#22c55e0f;color:#0b6b3a}.ns-empty[_ngcontent-%COMP%]{padding:1rem;color:#0006;font-style:italic}.ns-controles[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.5rem;align-items:center;justify-content:center}.ns-controles[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:44px;height:40px;border-radius:8px;border:none;background:var(--ns-accent);color:#fff;font-size:1.15rem;box-shadow:0 6px 12px #00000014;cursor:pointer}.ns-formulario[_ngcontent-%COMP%]{background:var(--game-box-bg, rgba(255,255,255,.97));padding:1rem;border-radius:var(--ns-radius);box-shadow:var(--ns-shadow);display:flex;flex-direction:column;gap:.55rem}.ns-input[_ngcontent-%COMP%], .ns-textarea[_ngcontent-%COMP%]{padding:.6rem;border-radius:8px;border:1px solid rgba(0,0,0,.06);font-size:.95rem;width:100%;box-sizing:border-box;background:#fff}.ns-actions[_ngcontent-%COMP%]{display:flex;gap:.6rem;align-items:center;margin-top:.25rem}.ns-send[_ngcontent-%COMP%]{background:var(--ns-primary);color:#fff;padding:.55rem .9rem;border-radius:8px;border:none;cursor:pointer;box-shadow:0 6px 14px #00000017}.ns-send[disabled][_ngcontent-%COMP%]{opacity:.6;cursor:not-allowed}.ns-aux[_ngcontent-%COMP%]{background:transparent;color:var(--ns-primary);border:1px solid rgba(0,0,0,.06);padding:.45rem .6rem;border-radius:8px;cursor:pointer}.ns-logs[_ngcontent-%COMP%]{padding:.6rem;font-family:monospace;font-size:.82rem;background:#fbfbfb;border-radius:6px;border:1px solid rgba(0,0,0,.04)}.ns-unread[_ngcontent-%COMP%]{background:var(--ns-accent);color:#fff;padding:.08rem .45rem;border-radius:999px;font-size:.75rem}"]})};var xs=(t,e)=>{let n=A(Kt),r=A(lr);return n.usuario()?!0:(r.navigate(["/login"]),!1)};var ak=[{path:"",component:Sg},{path:"login",component:Ag},{path:"sortear",component:xg,canActivate:[xs]},{path:"notificaciones",component:Fg,canActivate:[xs]},{path:"inicio",component:Ng,canActivate:[xs],children:[{path:"preferencias",component:Mg,canActivate:[xs]},{path:"jugadores",component:Pg,canActivate:[xs]},{path:"chat",component:Og,canActivate:[xs]}]}];var Lg=class t{title=It("webapp-amigo-secreto");static \u0275fac=function(n){return new(n||t)};static \u0275cmp=rt({type:t,selectors:[["app-root"]],decls:1,vars:0,template:function(n,r){n&1&&ir(0,"router-outlet")},dependencies:[os],encapsulation:2})};h_(Lg,{providers:[H_(ak,q_()),jR(()=>UR(Ii.firebase)),YP(()=>JP()),Px(()=>xx())]}).catch(t=>console.error(t));
